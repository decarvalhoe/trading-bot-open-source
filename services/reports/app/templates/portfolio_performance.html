{% extends "base.html" %}
{% block content %}
  <section class="section">
    <h2>Portfolio performance</h2>
    {% if account %}
      <div class="meta">Account: {{ account }}</div>
    {% endif %}
  </section>

  <table>
    <thead>
      <tr>
        <th>Account</th>
        <th>Start date</th>
        <th>End date</th>
        <th>Total return</th>
        <th>Average return</th>
        <th>Volatility</th>
        <th>Sharpe ratio</th>
        <th>Max drawdown</th>
        <th>Observations</th>
        <th>Positive days</th>
        <th>Negative days</th>
      </tr>
    </thead>
    <tbody>
      {% for item in performance %}
        <tr>
          <td>{{ item.account }}</td>
          <td>{{ item.start_date.strftime('%Y-%m-%d') if item.start_date else 'n/a' }}</td>
          <td>{{ item.end_date.strftime('%Y-%m-%d') if item.end_date else 'n/a' }}</td>
          <td>{{ '%.2f'|format(item.total_return) }}</td>
          <td>{{ '%.2f'|format(item.average_return) }}</td>
          <td>{{ '%.2f'|format(item.volatility) }}</td>
          <td>{{ '%.2f'|format(item.sharpe_ratio) }}</td>
          <td>{{ '%.2f'|format(item.max_drawdown) }}</td>
          <td>{{ item.observation_count }}</td>
          <td>{{ item.positive_days }}</td>
          <td>{{ item.negative_days }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
