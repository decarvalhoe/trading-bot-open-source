<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Designer de stratégies</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <header class="layout__header">
      <nav class="app-nav" aria-label="Navigation principale">
        <a
          href="{{ request.url_for('render_dashboard') }}"
          class="app-nav__link {{ 'app-nav__link--active' if active_page == 'dashboard' else '' }}"
          aria-current="{{ 'page' if active_page == 'dashboard' else 'false' }}"
        >
          Tableau de bord
        </a>
        <a
          href="{{ request.url_for('render_strategies') }}"
          class="app-nav__link {{ 'app-nav__link--active' if active_page == 'strategies' else '' }}"
          aria-current="{{ 'page' if active_page == 'strategies' else 'false' }}"
        >
          Stratégies
        </a>
        <a
          href="{{ request.url_for('render_account') }}"
          class="app-nav__link {{ 'app-nav__link--active' if active_page == 'account' else '' }}"
          aria-current="{{ 'page' if active_page == 'account' else 'false' }}"
        >
          Compte &amp; API
        </a>
      </nav>
      <h1 class="heading heading--xl">Composer une stratégie</h1>
      <p class="text text--muted">
        Assemblez conditions, indicateurs et actions avant d'envoyer votre stratégie vers l'algo-engine.
      </p>
    </header>
    <main class="layout__main layout__main--wide">
      <section class="card card--designer" aria-labelledby="designer-card-title">
        <div class="card__header">
          <h2 id="designer-card-title" class="heading heading--lg">Éditeur visuel</h2>
          <p class="text text--muted">
            Faites glisser les blocs depuis la bibliothèque pour créer votre logique et déclencher des exécutions.
          </p>
        </div>
        <div class="card__body">
          <div
            id="strategy-designer-root"
            data-save-endpoint="{{ save_endpoint }}"
            data-default-name="Nouvelle stratégie"
            data-default-format="yaml"
          >
            <noscript>
              <p class="text text--muted">
                Activez JavaScript pour utiliser le designer de stratégies.
              </p>
            </noscript>
          </div>
        </div>
      </section>
    </main>
    <footer class="layout__footer">
      <p class="text text--muted">Conçu pour rester compatible avec /strategies/import de l'algo-engine.</p>
    </footer>
    <script type="module" src="/static/dist/portfolio-chart.js"></script>
  </body>
</html>
