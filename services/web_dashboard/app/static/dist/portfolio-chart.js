import{c as ka,g as Ae,r as P,R as I,P as fe,j as h,I as bx,a as xx,b as wx,d as _x,e as tn,f as Sx,i as Ug}from"./config.DRi9gGxG.js";function qg(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=qg(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ce(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=qg(e))&&(r&&(r+=" "),r+=t);return r}var Ox=Array.isArray,it=Ox,Ax=typeof ka=="object"&&ka&&ka.Object===Object&&ka,zg=Ax,jx=zg,$x=typeof self=="object"&&self&&self.Object===Object&&self,Px=jx||$x||Function("return this")(),Ut=Px,Tx=Ut,Ex=Tx.Symbol,ga=Ex,$d=ga,Kg=Object.prototype,Nx=Kg.hasOwnProperty,kx=Kg.toString,fi=$d?$d.toStringTag:void 0;function Cx(e){var t=Nx.call(e,fi),n=e[fi];try{e[fi]=void 0;var r=!0}catch{}var i=kx.call(e);return r&&(t?e[fi]=n:delete e[fi]),i}var Ix=Cx,Mx=Object.prototype,Dx=Mx.toString;function Lx(e){return Dx.call(e)}var Rx=Lx,Pd=ga,Bx=Ix,Fx=Rx,Ux="[object Null]",qx="[object Undefined]",Td=Pd?Pd.toStringTag:void 0;function zx(e){return e==null?e===void 0?qx:Ux:Td&&Td in Object(e)?Bx(e):Fx(e)}var nn=zx;function Kx(e){return e!=null&&typeof e=="object"}var rn=Kx,Wx=nn,Hx=rn,Vx="[object Symbol]";function Gx(e){return typeof e=="symbol"||Hx(e)&&Wx(e)==Vx}var Kr=Gx,Yx=it,Xx=Kr,Jx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qx=/^\w*$/;function Zx(e,t){if(Yx(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Xx(e)?!0:Qx.test(e)||!Jx.test(e)||t!=null&&e in Object(t)}var Qu=Zx;function ew(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var mn=ew;const Wr=Ae(mn);var tw=nn,nw=mn,rw="[object AsyncFunction]",iw="[object Function]",aw="[object GeneratorFunction]",ow="[object Proxy]";function sw(e){if(!nw(e))return!1;var t=tw(e);return t==iw||t==aw||t==rw||t==ow}var Zu=sw;const ae=Ae(Zu);var lw=Ut,cw=lw["__core-js_shared__"],uw=cw,bl=uw,Ed=function(){var e=/[^.]+$/.exec(bl&&bl.keys&&bl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function fw(e){return!!Ed&&Ed in e}var dw=fw,hw=Function.prototype,pw=hw.toString;function mw(e){if(e!=null){try{return pw.call(e)}catch{}try{return e+""}catch{}}return""}var Wg=mw,gw=Zu,yw=dw,vw=mn,bw=Wg,xw=/[\\^$.*+?()[\]{}|]/g,ww=/^\[object .+?Constructor\]$/,_w=Function.prototype,Sw=Object.prototype,Ow=_w.toString,Aw=Sw.hasOwnProperty,jw=RegExp("^"+Ow.call(Aw).replace(xw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $w(e){if(!vw(e)||yw(e))return!1;var t=gw(e)?jw:ww;return t.test(bw(e))}var Pw=$w;function Tw(e,t){return e==null?void 0:e[t]}var Ew=Tw,Nw=Pw,kw=Ew;function Cw(e,t){var n=kw(e,t);return Nw(n)?n:void 0}var Wn=Cw,Iw=Wn,Mw=Iw(Object,"create"),ys=Mw,Nd=ys;function Dw(){this.__data__=Nd?Nd(null):{},this.size=0}var Lw=Dw;function Rw(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Bw=Rw,Fw=ys,Uw="__lodash_hash_undefined__",qw=Object.prototype,zw=qw.hasOwnProperty;function Kw(e){var t=this.__data__;if(Fw){var n=t[e];return n===Uw?void 0:n}return zw.call(t,e)?t[e]:void 0}var Ww=Kw,Hw=ys,Vw=Object.prototype,Gw=Vw.hasOwnProperty;function Yw(e){var t=this.__data__;return Hw?t[e]!==void 0:Gw.call(t,e)}var Xw=Yw,Jw=ys,Qw="__lodash_hash_undefined__";function Zw(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Jw&&t===void 0?Qw:t,this}var e1=Zw,t1=Lw,n1=Bw,r1=Ww,i1=Xw,a1=e1;function Hr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hr.prototype.clear=t1;Hr.prototype.delete=n1;Hr.prototype.get=r1;Hr.prototype.has=i1;Hr.prototype.set=a1;var o1=Hr;function s1(){this.__data__=[],this.size=0}var l1=s1;function c1(e,t){return e===t||e!==e&&t!==t}var ef=c1,u1=ef;function f1(e,t){for(var n=e.length;n--;)if(u1(e[n][0],t))return n;return-1}var vs=f1,d1=vs,h1=Array.prototype,p1=h1.splice;function m1(e){var t=this.__data__,n=d1(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():p1.call(t,n,1),--this.size,!0}var g1=m1,y1=vs;function v1(e){var t=this.__data__,n=y1(t,e);return n<0?void 0:t[n][1]}var b1=v1,x1=vs;function w1(e){return x1(this.__data__,e)>-1}var _1=w1,S1=vs;function O1(e,t){var n=this.__data__,r=S1(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var A1=O1,j1=l1,$1=g1,P1=b1,T1=_1,E1=A1;function Vr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vr.prototype.clear=j1;Vr.prototype.delete=$1;Vr.prototype.get=P1;Vr.prototype.has=T1;Vr.prototype.set=E1;var bs=Vr,N1=Wn,k1=Ut,C1=N1(k1,"Map"),tf=C1,kd=o1,I1=bs,M1=tf;function D1(){this.size=0,this.__data__={hash:new kd,map:new(M1||I1),string:new kd}}var L1=D1;function R1(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var B1=R1,F1=B1;function U1(e,t){var n=e.__data__;return F1(t)?n[typeof t=="string"?"string":"hash"]:n.map}var xs=U1,q1=xs;function z1(e){var t=q1(this,e).delete(e);return this.size-=t?1:0,t}var K1=z1,W1=xs;function H1(e){return W1(this,e).get(e)}var V1=H1,G1=xs;function Y1(e){return G1(this,e).has(e)}var X1=Y1,J1=xs;function Q1(e,t){var n=J1(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Z1=Q1,e_=L1,t_=K1,n_=V1,r_=X1,i_=Z1;function Gr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Gr.prototype.clear=e_;Gr.prototype.delete=t_;Gr.prototype.get=n_;Gr.prototype.has=r_;Gr.prototype.set=i_;var nf=Gr,Hg=nf,a_="Expected a function";function rf(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(a_);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(rf.Cache||Hg),n}rf.Cache=Hg;var Vg=rf;const o_=Ae(Vg);var s_=Vg,l_=500;function c_(e){var t=s_(e,function(r){return n.size===l_&&n.clear(),r}),n=t.cache;return t}var u_=c_,f_=u_,d_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h_=/\\(\\)?/g,p_=f_(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(d_,function(n,r,i,a){t.push(i?a.replace(h_,"$1"):r||n)}),t}),m_=p_;function g_(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var af=g_,Cd=ga,y_=af,v_=it,b_=Kr,Id=Cd?Cd.prototype:void 0,Md=Id?Id.toString:void 0;function Gg(e){if(typeof e=="string")return e;if(v_(e))return y_(e,Gg)+"";if(b_(e))return Md?Md.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var x_=Gg,w_=x_;function __(e){return e==null?"":w_(e)}var Yg=__,S_=it,O_=Qu,A_=m_,j_=Yg;function $_(e,t){return S_(e)?e:O_(e,t)?[e]:A_(j_(e))}var Xg=$_,P_=Kr;function T_(e){if(typeof e=="string"||P_(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ws=T_,E_=Xg,N_=ws;function k_(e,t){t=E_(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[N_(t[n++])];return n&&n==r?e:void 0}var of=k_,C_=of;function I_(e,t,n){var r=e==null?void 0:C_(e,t);return r===void 0?n:r}var Jg=I_;const mt=Ae(Jg);function M_(e){return e==null}var D_=M_;const oe=Ae(D_);var L_=nn,R_=it,B_=rn,F_="[object String]";function U_(e){return typeof e=="string"||!R_(e)&&B_(e)&&L_(e)==F_}var q_=U_;const Rn=Ae(q_);var Qg={exports:{}},ye={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf=Symbol.for("react.element"),lf=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),Ss=Symbol.for("react.strict_mode"),Os=Symbol.for("react.profiler"),As=Symbol.for("react.provider"),js=Symbol.for("react.context"),z_=Symbol.for("react.server_context"),$s=Symbol.for("react.forward_ref"),Ps=Symbol.for("react.suspense"),Ts=Symbol.for("react.suspense_list"),Es=Symbol.for("react.memo"),Ns=Symbol.for("react.lazy"),K_=Symbol.for("react.offscreen"),Zg;Zg=Symbol.for("react.module.reference");function xt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case sf:switch(e=e.type,e){case _s:case Os:case Ss:case Ps:case Ts:return e;default:switch(e=e&&e.$$typeof,e){case z_:case js:case $s:case Ns:case Es:case As:return e;default:return t}}case lf:return t}}}ye.ContextConsumer=js;ye.ContextProvider=As;ye.Element=sf;ye.ForwardRef=$s;ye.Fragment=_s;ye.Lazy=Ns;ye.Memo=Es;ye.Portal=lf;ye.Profiler=Os;ye.StrictMode=Ss;ye.Suspense=Ps;ye.SuspenseList=Ts;ye.isAsyncMode=function(){return!1};ye.isConcurrentMode=function(){return!1};ye.isContextConsumer=function(e){return xt(e)===js};ye.isContextProvider=function(e){return xt(e)===As};ye.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===sf};ye.isForwardRef=function(e){return xt(e)===$s};ye.isFragment=function(e){return xt(e)===_s};ye.isLazy=function(e){return xt(e)===Ns};ye.isMemo=function(e){return xt(e)===Es};ye.isPortal=function(e){return xt(e)===lf};ye.isProfiler=function(e){return xt(e)===Os};ye.isStrictMode=function(e){return xt(e)===Ss};ye.isSuspense=function(e){return xt(e)===Ps};ye.isSuspenseList=function(e){return xt(e)===Ts};ye.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===_s||e===Os||e===Ss||e===Ps||e===Ts||e===K_||typeof e=="object"&&e!==null&&(e.$$typeof===Ns||e.$$typeof===Es||e.$$typeof===As||e.$$typeof===js||e.$$typeof===$s||e.$$typeof===Zg||e.getModuleId!==void 0)};ye.typeOf=xt;Qg.exports=ye;var W_=Qg.exports,H_=nn,V_=rn,G_="[object Number]";function Y_(e){return typeof e=="number"||V_(e)&&H_(e)==G_}var ey=Y_;const X_=Ae(ey);var J_=ey;function Q_(e){return J_(e)&&e!=+e}var Z_=Q_;const ya=Ae(Z_);var Et=function(t){return t===0?0:t>0?1:-1},$n=function(t){return Rn(t)&&t.indexOf("%")===t.length-1},W=function(t){return X_(t)&&!ya(t)},eS=function(t){return oe(t)},Re=function(t){return W(t)||Rn(t)},tS=0,va=function(t){var n=++tS;return"".concat(t||"").concat(n)},Bn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!W(t)&&!Rn(t))return r;var a;if($n(t)){var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return ya(a)&&(a=r),i&&a>n&&(a=n),a},cn=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},nS=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},Pt=function(t,n){return W(t)&&W(n)?function(r){return t+r*(n-t)}:function(){return n}};function po(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):mt(r,t))===n})}var rS=function(t,n){return W(t)&&W(n)?t-n:Rn(t)&&Rn(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function mr(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function pc(e){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(e)}var iS=["viewBox","children"],aS=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Dd=["points","pathLength"],xl={svg:iS,polygon:Dd,polyline:Dd},cf=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],mo=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(P.isValidElement(t)&&(r=t.props),!Wr(r))return null;var i={};return Object.keys(r).forEach(function(a){cf.includes(a)&&(i[a]=n||function(o){return r[a](r,o)})}),i},oS=function(t,n,r){return function(i){return t(n,r,i),null}},go=function(t,n,r){if(!Wr(t)||pc(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var o=t[a];cf.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=oS(o,n,r))}),i},sS=["children"],lS=["children"];function Ld(e,t){if(e==null)return{};var n=cS(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cS(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function mc(e){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mc(e)}var Rd={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Vt=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Bd=null,wl=null,uf=function e(t){if(t===Bd&&Array.isArray(wl))return wl;var n=[];return P.Children.forEach(t,function(r){oe(r)||(W_.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),wl=n,Bd=t,n};function gt(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return Vt(i)}):r=[Vt(t)],uf(e).forEach(function(i){var a=mt(i,"type.displayName")||mt(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function st(e,t){var n=gt(e,t);return n&&n[0]}var Fd=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!W(r)||r<=0||!W(i)||i<=0)},uS=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],fS=function(t){return t&&t.type&&Rn(t.type)&&uS.indexOf(t.type)>=0},dS=function(t){return t&&mc(t)==="object"&&"clipDot"in t},hS=function(t,n,r,i){var a,o=(a=xl==null?void 0:xl[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!ae(t)&&(i&&o.includes(n)||aS.includes(n))||r&&cf.includes(n)},se=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(P.isValidElement(t)&&(i=t.props),!Wr(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;hS((s=i)===null||s===void 0?void 0:s[o],o,n,r)&&(a[o]=i[o])}),a},gc=function e(t,n){if(t===n)return!0;var r=P.Children.count(t);if(r!==P.Children.count(n))return!1;if(r===0)return!0;if(r===1)return Ud(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=t[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!e(a,o))return!1}else if(!Ud(a,o))return!1}return!0},Ud=function(t,n){if(oe(t)&&oe(n))return!0;if(!oe(t)&&!oe(n)){var r=t.props||{},i=r.children,a=Ld(r,sS),o=n.props||{},s=o.children,l=Ld(o,lS);return i&&s?mr(a,l)&&gc(i,s):!i&&!s?mr(a,l):!1}return!1},qd=function(t,n){var r=[],i={};return uf(t).forEach(function(a,o){if(fS(a))r.push(a);else if(a){var s=Vt(a.type),l=n[s]||{},c=l.handler,f=l.once;if(c&&(!f||!i[s])){var u=c(a,s,o);r.push(u),i[s]=!0}}}),r},pS=function(t){var n=t&&t.type;return n&&Rd[n]?Rd[n]:null},mS=function(t,n){return uf(n).indexOf(t)},gS=["children","width","height","viewBox","className","style","title","desc"];function yc(){return yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yc.apply(this,arguments)}function yS(e,t){if(e==null)return{};var n=vS(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vS(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vc(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,a=e.className,o=e.style,s=e.title,l=e.desc,c=yS(e,gS),f=i||{width:n,height:r,x:0,y:0},u=ce("recharts-surface",a);return I.createElement("svg",yc({},se(c,!0,"svg"),{className:u,width:n,height:r,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),I.createElement("title",null,s),I.createElement("desc",null,l),t)}var bS=["children","className"];function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(this,arguments)}function xS(e,t){if(e==null)return{};var n=wS(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wS(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Ne=I.forwardRef(function(e,t){var n=e.children,r=e.className,i=xS(e,bS),a=ce("recharts-layer",r);return I.createElement("g",bc({className:a},se(i,!0),{ref:t}),n)}),Gt=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function _S(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}var SS=_S,OS=SS;function AS(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:OS(e,t,n)}var jS=AS,$S="\\ud800-\\udfff",PS="\\u0300-\\u036f",TS="\\ufe20-\\ufe2f",ES="\\u20d0-\\u20ff",NS=PS+TS+ES,kS="\\ufe0e\\ufe0f",CS="\\u200d",IS=RegExp("["+CS+$S+NS+kS+"]");function MS(e){return IS.test(e)}var ty=MS;function DS(e){return e.split("")}var LS=DS,ny="\\ud800-\\udfff",RS="\\u0300-\\u036f",BS="\\ufe20-\\ufe2f",FS="\\u20d0-\\u20ff",US=RS+BS+FS,qS="\\ufe0e\\ufe0f",zS="["+ny+"]",xc="["+US+"]",wc="\\ud83c[\\udffb-\\udfff]",KS="(?:"+xc+"|"+wc+")",ry="[^"+ny+"]",iy="(?:\\ud83c[\\udde6-\\uddff]){2}",ay="[\\ud800-\\udbff][\\udc00-\\udfff]",WS="\\u200d",oy=KS+"?",sy="["+qS+"]?",HS="(?:"+WS+"(?:"+[ry,iy,ay].join("|")+")"+sy+oy+")*",VS=sy+oy+HS,GS="(?:"+[ry+xc+"?",xc,iy,ay,zS].join("|")+")",YS=RegExp(wc+"(?="+wc+")|"+GS+VS,"g");function XS(e){return e.match(YS)||[]}var JS=XS,QS=LS,ZS=ty,eO=JS;function tO(e){return ZS(e)?eO(e):QS(e)}var nO=tO,rO=jS,iO=ty,aO=nO,oO=Yg;function sO(e){return function(t){t=oO(t);var n=iO(t)?aO(t):void 0,r=n?n[0]:t.charAt(0),i=n?rO(n,1).join(""):t.slice(1);return r[e]()+i}}var lO=sO,cO=lO,uO=cO("toUpperCase"),fO=uO;const ks=Ae(fO);function _e(e){return function(){return e}}const ly=Math.cos,yo=Math.sin,Nt=Math.sqrt,vo=Math.PI,Cs=2*vo,_c=Math.PI,Sc=2*_c,Sn=1e-6,dO=Sc-Sn;function cy(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hO(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cy;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class pO{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cy:hO(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-t,c=i-n,f=o-t,u=s-n,d=f*f+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Sn)if(!(Math.abs(u*l-c*f)>Sn)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-o,v=i-s,m=l*l+c*c,g=p*p+v*v,w=Math.sqrt(m),b=Math.sqrt(d),_=a*Math.tan((_c-Math.acos((m+d-g)/(2*w*b)))/2),S=_/b,y=_/w;Math.abs(S-1)>Sn&&this._append`L${t+S*f},${n+S*u}`,this._append`A${a},${a},0,0,${+(u*p>f*v)},${this._x1=t+y*l},${this._y1=n+y*c}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=t+s,f=n+l,u=1^o,d=o?i-a:a-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Sn||Math.abs(this._y1-f)>Sn)&&this._append`L${c},${f}`,r&&(d<0&&(d=d%Sc+Sc),d>dO?this._append`A${r},${r},0,1,${u},${t-s},${n-l}A${r},${r},0,1,${u},${this._x1=c},${this._y1=f}`:d>Sn&&this._append`A${r},${r},0,${+(d>=_c)},${u},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ff(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new pO(t)}function df(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uy(e){this._context=e}uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Is(e){return new uy(e)}function fy(e){return e[0]}function dy(e){return e[1]}function hy(e,t){var n=_e(!0),r=null,i=Is,a=null,o=ff(s);e=typeof e=="function"?e:e===void 0?fy:_e(e),t=typeof t=="function"?t:t===void 0?dy:_e(t);function s(l){var c,f=(l=df(l)).length,u,d=!1,p;for(r==null&&(a=i(p=o())),c=0;c<=f;++c)!(c<f&&n(u=l[c],c,l))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(u,c,l),+t(u,c,l));if(p)return a=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:_e(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:_e(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:_e(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function Ca(e,t,n){var r=null,i=_e(!0),a=null,o=Is,s=null,l=ff(c);e=typeof e=="function"?e:e===void 0?fy:_e(+e),t=typeof t=="function"?t:_e(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?dy:_e(+n);function c(u){var d,p,v,m=(u=df(u)).length,g,w=!1,b,_=new Array(m),S=new Array(m);for(a==null&&(s=o(b=l())),d=0;d<=m;++d){if(!(d<m&&i(g=u[d],d,u))===w)if(w=!w)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),v=d-1;v>=p;--v)s.point(_[v],S[v]);s.lineEnd(),s.areaEnd()}w&&(_[d]=+e(g,d,u),S[d]=+t(g,d,u),s.point(r?+r(g,d,u):_[d],n?+n(g,d,u):S[d]))}if(b)return s=null,b+""||null}function f(){return hy().defined(i).curve(o).context(a)}return c.x=function(u){return arguments.length?(e=typeof u=="function"?u:_e(+u),r=null,c):e},c.x0=function(u){return arguments.length?(e=typeof u=="function"?u:_e(+u),c):e},c.x1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:_e(+u),c):r},c.y=function(u){return arguments.length?(t=typeof u=="function"?u:_e(+u),n=null,c):t},c.y0=function(u){return arguments.length?(t=typeof u=="function"?u:_e(+u),c):t},c.y1=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:_e(+u),c):n},c.lineX0=c.lineY0=function(){return f().x(e).y(t)},c.lineY1=function(){return f().x(e).y(n)},c.lineX1=function(){return f().x(r).y(t)},c.defined=function(u){return arguments.length?(i=typeof u=="function"?u:_e(!!u),c):i},c.curve=function(u){return arguments.length?(o=u,a!=null&&(s=o(a)),c):o},c.context=function(u){return arguments.length?(u==null?a=s=null:s=o(a=u),c):a},c}class py{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function mO(e){return new py(e,!0)}function gO(e){return new py(e,!1)}const hf={draw(e,t){const n=Nt(t/vo);e.moveTo(n,0),e.arc(0,0,n,0,Cs)}},yO={draw(e,t){const n=Nt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},my=Nt(1/3),vO=my*2,bO={draw(e,t){const n=Nt(t/vO),r=n*my;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},xO={draw(e,t){const n=Nt(t),r=-n/2;e.rect(r,r,n,n)}},wO=.8908130915292852,gy=yo(vo/10)/yo(7*vo/10),_O=yo(Cs/10)*gy,SO=-ly(Cs/10)*gy,OO={draw(e,t){const n=Nt(t*wO),r=_O*n,i=SO*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Cs*a/5,s=ly(o),l=yo(o);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*i,l*r+s*i)}e.closePath()}},_l=Nt(3),AO={draw(e,t){const n=-Nt(t/(_l*3));e.moveTo(0,n*2),e.lineTo(-_l*n,-n),e.lineTo(_l*n,-n),e.closePath()}},ft=-.5,dt=Nt(3)/2,Oc=1/Nt(12),jO=(Oc/2+1)*3,$O={draw(e,t){const n=Nt(t/jO),r=n/2,i=n*Oc,a=r,o=n*Oc+n,s=-a,l=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,l),e.lineTo(ft*r-dt*i,dt*r+ft*i),e.lineTo(ft*a-dt*o,dt*a+ft*o),e.lineTo(ft*s-dt*l,dt*s+ft*l),e.lineTo(ft*r+dt*i,ft*i-dt*r),e.lineTo(ft*a+dt*o,ft*o-dt*a),e.lineTo(ft*s+dt*l,ft*l-dt*s),e.closePath()}};function PO(e,t){let n=null,r=ff(i);e=typeof e=="function"?e:_e(e||hf),t=typeof t=="function"?t:_e(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:_e(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:_e(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function bo(){}function xo(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function yy(e){this._context=e}yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TO(e){return new yy(e)}function vy(e){this._context=e}vy.prototype={areaStart:bo,areaEnd:bo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function EO(e){return new vy(e)}function by(e){this._context=e}by.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function NO(e){return new by(e)}function xy(e){this._context=e}xy.prototype={areaStart:bo,areaEnd:bo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function kO(e){return new xy(e)}function zd(e){return e<0?-1:1}function Kd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(zd(a)+zd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Wd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Sl(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function wo(e){this._context=e}wo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sl(this,this._t0,Wd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Sl(this,Wd(this,n=Kd(this,e,t)),n);break;default:Sl(this,this._t0,n=Kd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function wy(e){this._context=new _y(e)}(wy.prototype=Object.create(wo.prototype)).point=function(e,t){wo.prototype.point.call(this,t,e)};function _y(e){this._context=e}_y.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function CO(e){return new wo(e)}function IO(e){return new wy(e)}function Sy(e){this._context=e}Sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Hd(e),i=Hd(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Hd(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function MO(e){return new Sy(e)}function Ms(e,t){this._context=e,this._t=t}Ms.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function DO(e){return new Ms(e,.5)}function LO(e){return new Ms(e,0)}function RO(e){return new Ms(e,1)}function wr(e,t){if((o=e.length)>1)for(var n=1,r,i,a=e[t[0]],o,s=a.length;n<o;++n)for(i=a,a=e[t[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ac(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function BO(e,t){return e[t]}function FO(e){const t=[];return t.key=e,t}function UO(){var e=_e([]),t=Ac,n=wr,r=BO;function i(a){var o=Array.from(e.apply(this,arguments),FO),s,l=o.length,c=-1,f;for(const u of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(u,o[s].key,c,a)]).data=u;for(s=0,f=df(t(o));s<l;++s)o[f[s]].index=s;return n(o,f),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:_e(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:_e(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?Ac:typeof a=="function"?a:_e(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??wr,i):n},i}function qO(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}wr(e,t)}}function zO(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=e[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}wr(e,t)}}function KO(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,c=0;s<o;++s){for(var f=e[t[s]],u=f[r][1]||0,d=f[r-1][1]||0,p=(u-d)/2,v=0;v<s;++v){var m=e[t[v]],g=m[r][1]||0,w=m[r-1][1]||0;p+=g-w}l+=u,c+=p*u}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,wr(e,t)}}function Ni(e){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ni(e)}var WO=["type","size","sizeType"];function jc(){return jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jc.apply(this,arguments)}function Vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vd(Object(n),!0).forEach(function(r){HO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HO(e,t,n){return t=VO(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VO(e){var t=GO(e,"string");return Ni(t)=="symbol"?t:t+""}function GO(e,t){if(Ni(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ni(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YO(e,t){if(e==null)return{};var n=XO(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function XO(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Oy={symbolCircle:hf,symbolCross:yO,symbolDiamond:bO,symbolSquare:xO,symbolStar:OO,symbolTriangle:AO,symbolWye:$O},JO=Math.PI/180,QO=function(t){var n="symbol".concat(ks(t));return Oy[n]||hf},ZO=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*JO;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},eA=function(t,n){Oy["symbol".concat(ks(t))]=n},pf=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,o=t.sizeType,s=o===void 0?"area":o,l=YO(t,WO),c=Gd(Gd({},l),{},{type:r,size:a,sizeType:s}),f=function(){var g=QO(r),w=PO().type(g).size(ZO(a,s,r));return w()},u=c.className,d=c.cx,p=c.cy,v=se(c,!0);return d===+d&&p===+p&&a===+a?I.createElement("path",jc({},v,{className:ce("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(p,")"),d:f()})):null};pf.registerSymbol=eA;function _r(e){"@babel/helpers - typeof";return _r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(e)}function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$c.apply(this,arguments)}function Yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yd(Object(n),!0).forEach(function(r){ki(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jy(r.key),r)}}function iA(e,t,n){return t&&rA(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aA(e,t,n){return t=_o(t),oA(e,Ay()?Reflect.construct(t,n||[],_o(e).constructor):t.apply(e,n))}function oA(e,t){if(t&&(_r(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sA(e)}function sA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ay(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ay=function(){return!!e})()}function _o(e){return _o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_o(e)}function lA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pc(e,t)}function Pc(e,t){return Pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Pc(e,t)}function ki(e,t,n){return t=jy(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jy(e){var t=cA(e,"string");return _r(t)=="symbol"?t:t+""}function cA(e,t){if(_r(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_r(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ht=32,mf=function(e){function t(){return nA(this,t),aA(this,t,arguments)}return lA(t,e),iA(t,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=ht/2,o=ht/6,s=ht/3,l=r.inactive?i:r.color;if(r.type==="plainline")return I.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:ht,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return I.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(ht,"M").concat(2*s,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return I.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ht/8,"h").concat(ht,"v").concat(ht*3/4,"h").concat(-ht,"z"),className:"recharts-legend-icon"});if(I.isValidElement(r.legendIcon)){var c=tA({},r);return delete c.legendIcon,I.cloneElement(r.legendIcon,c)}return I.createElement(pf,{fill:l,cx:a,cy:a,size:ht,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,f={x:0,y:0,width:ht,height:ht},u={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,v){var m=p.formatter||l,g=ce(ki(ki({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var w=ae(p.value)?null:p.value;Gt(!ae(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=p.inactive?c:p.color;return I.createElement("li",$c({className:g,style:u,key:"legend-item-".concat(v)},go(r.props,p,v)),I.createElement(vc,{width:o,height:o,viewBox:f,style:d},r.renderIcon(p)),I.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},m?m(w,p,v):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return I.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(P.PureComponent);ki(mf,"displayName","Legend");ki(mf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var uA=bs;function fA(){this.__data__=new uA,this.size=0}var dA=fA;function hA(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var pA=hA;function mA(e){return this.__data__.get(e)}var gA=mA;function yA(e){return this.__data__.has(e)}var vA=yA,bA=bs,xA=tf,wA=nf,_A=200;function SA(e,t){var n=this.__data__;if(n instanceof bA){var r=n.__data__;if(!xA||r.length<_A-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new wA(r)}return n.set(e,t),this.size=n.size,this}var OA=SA,AA=bs,jA=dA,$A=pA,PA=gA,TA=vA,EA=OA;function Yr(e){var t=this.__data__=new AA(e);this.size=t.size}Yr.prototype.clear=jA;Yr.prototype.delete=$A;Yr.prototype.get=PA;Yr.prototype.has=TA;Yr.prototype.set=EA;var $y=Yr,NA="__lodash_hash_undefined__";function kA(e){return this.__data__.set(e,NA),this}var CA=kA;function IA(e){return this.__data__.has(e)}var MA=IA,DA=nf,LA=CA,RA=MA;function So(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new DA;++t<n;)this.add(e[t])}So.prototype.add=So.prototype.push=LA;So.prototype.has=RA;var Py=So;function BA(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ty=BA;function FA(e,t){return e.has(t)}var Ey=FA,UA=Py,qA=Ty,zA=Ey,KA=1,WA=2;function HA(e,t,n,r,i,a){var o=n&KA,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(e),f=a.get(t);if(c&&f)return c==t&&f==e;var u=-1,d=!0,p=n&WA?new UA:void 0;for(a.set(e,t),a.set(t,e);++u<s;){var v=e[u],m=t[u];if(r)var g=o?r(m,v,u,t,e,a):r(v,m,u,e,t,a);if(g!==void 0){if(g)continue;d=!1;break}if(p){if(!qA(t,function(w,b){if(!zA(p,b)&&(v===w||i(v,w,n,r,a)))return p.push(b)})){d=!1;break}}else if(!(v===m||i(v,m,n,r,a))){d=!1;break}}return a.delete(e),a.delete(t),d}var Ny=HA,VA=Ut,GA=VA.Uint8Array,YA=GA;function XA(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var JA=XA;function QA(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var gf=QA,Xd=ga,Jd=YA,ZA=ef,ej=Ny,tj=JA,nj=gf,rj=1,ij=2,aj="[object Boolean]",oj="[object Date]",sj="[object Error]",lj="[object Map]",cj="[object Number]",uj="[object RegExp]",fj="[object Set]",dj="[object String]",hj="[object Symbol]",pj="[object ArrayBuffer]",mj="[object DataView]",Qd=Xd?Xd.prototype:void 0,Ol=Qd?Qd.valueOf:void 0;function gj(e,t,n,r,i,a,o){switch(n){case mj:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pj:return!(e.byteLength!=t.byteLength||!a(new Jd(e),new Jd(t)));case aj:case oj:case cj:return ZA(+e,+t);case sj:return e.name==t.name&&e.message==t.message;case uj:case dj:return e==t+"";case lj:var s=tj;case fj:var l=r&rj;if(s||(s=nj),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=ij,o.set(e,t);var f=ej(s(e),s(t),r,i,a,o);return o.delete(e),f;case hj:if(Ol)return Ol.call(e)==Ol.call(t)}return!1}var yj=gj;function vj(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var ky=vj,bj=ky,xj=it;function wj(e,t,n){var r=t(e);return xj(e)?r:bj(r,n(e))}var _j=wj;function Sj(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var Oj=Sj;function Aj(){return[]}var jj=Aj,$j=Oj,Pj=jj,Tj=Object.prototype,Ej=Tj.propertyIsEnumerable,Zd=Object.getOwnPropertySymbols,Nj=Zd?function(e){return e==null?[]:(e=Object(e),$j(Zd(e),function(t){return Ej.call(e,t)}))}:Pj,kj=Nj;function Cj(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Ij=Cj,Mj=nn,Dj=rn,Lj="[object Arguments]";function Rj(e){return Dj(e)&&Mj(e)==Lj}var Bj=Rj,eh=Bj,Fj=rn,Cy=Object.prototype,Uj=Cy.hasOwnProperty,qj=Cy.propertyIsEnumerable,zj=eh(function(){return arguments}())?eh:function(e){return Fj(e)&&Uj.call(e,"callee")&&!qj.call(e,"callee")},yf=zj,Oo={exports:{}};function Kj(){return!1}var Wj=Kj;Oo.exports;(function(e,t){var n=Ut,r=Wj,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;e.exports=c})(Oo,Oo.exports);var Iy=Oo.exports,Hj=9007199254740991,Vj=/^(?:0|[1-9]\d*)$/;function Gj(e,t){var n=typeof e;return t=t??Hj,!!t&&(n=="number"||n!="symbol"&&Vj.test(e))&&e>-1&&e%1==0&&e<t}var vf=Gj,Yj=9007199254740991;function Xj(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Yj}var bf=Xj,Jj=nn,Qj=bf,Zj=rn,e$="[object Arguments]",t$="[object Array]",n$="[object Boolean]",r$="[object Date]",i$="[object Error]",a$="[object Function]",o$="[object Map]",s$="[object Number]",l$="[object Object]",c$="[object RegExp]",u$="[object Set]",f$="[object String]",d$="[object WeakMap]",h$="[object ArrayBuffer]",p$="[object DataView]",m$="[object Float32Array]",g$="[object Float64Array]",y$="[object Int8Array]",v$="[object Int16Array]",b$="[object Int32Array]",x$="[object Uint8Array]",w$="[object Uint8ClampedArray]",_$="[object Uint16Array]",S$="[object Uint32Array]",Se={};Se[m$]=Se[g$]=Se[y$]=Se[v$]=Se[b$]=Se[x$]=Se[w$]=Se[_$]=Se[S$]=!0;Se[e$]=Se[t$]=Se[h$]=Se[n$]=Se[p$]=Se[r$]=Se[i$]=Se[a$]=Se[o$]=Se[s$]=Se[l$]=Se[c$]=Se[u$]=Se[f$]=Se[d$]=!1;function O$(e){return Zj(e)&&Qj(e.length)&&!!Se[Jj(e)]}var A$=O$;function j$(e){return function(t){return e(t)}}var My=j$,Ao={exports:{}};Ao.exports;(function(e,t){var n=zg,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,o=a&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(Ao,Ao.exports);var $$=Ao.exports,P$=A$,T$=My,th=$$,nh=th&&th.isTypedArray,E$=nh?T$(nh):P$,Dy=E$,N$=Ij,k$=yf,C$=it,I$=Iy,M$=vf,D$=Dy,L$=Object.prototype,R$=L$.hasOwnProperty;function B$(e,t){var n=C$(e),r=!n&&k$(e),i=!n&&!r&&I$(e),a=!n&&!r&&!i&&D$(e),o=n||r||i||a,s=o?N$(e.length,String):[],l=s.length;for(var c in e)(t||R$.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||M$(c,l)))&&s.push(c);return s}var F$=B$,U$=Object.prototype;function q$(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||U$;return e===n}var z$=q$;function K$(e,t){return function(n){return e(t(n))}}var Ly=K$,W$=Ly,H$=W$(Object.keys,Object),V$=H$,G$=z$,Y$=V$,X$=Object.prototype,J$=X$.hasOwnProperty;function Q$(e){if(!G$(e))return Y$(e);var t=[];for(var n in Object(e))J$.call(e,n)&&n!="constructor"&&t.push(n);return t}var Z$=Q$,eP=Zu,tP=bf;function nP(e){return e!=null&&tP(e.length)&&!eP(e)}var ba=nP,rP=F$,iP=Z$,aP=ba;function oP(e){return aP(e)?rP(e):iP(e)}var Ds=oP,sP=_j,lP=kj,cP=Ds;function uP(e){return sP(e,cP,lP)}var fP=uP,rh=fP,dP=1,hP=Object.prototype,pP=hP.hasOwnProperty;function mP(e,t,n,r,i,a){var o=n&dP,s=rh(e),l=s.length,c=rh(t),f=c.length;if(l!=f&&!o)return!1;for(var u=l;u--;){var d=s[u];if(!(o?d in t:pP.call(t,d)))return!1}var p=a.get(e),v=a.get(t);if(p&&v)return p==t&&v==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=o;++u<l;){d=s[u];var w=e[d],b=t[d];if(r)var _=o?r(b,w,d,t,e,a):r(w,b,d,e,t,a);if(!(_===void 0?w===b||i(w,b,n,r,a):_)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var S=e.constructor,y=t.constructor;S!=y&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof y=="function"&&y instanceof y)&&(m=!1)}return a.delete(e),a.delete(t),m}var gP=mP,yP=Wn,vP=Ut,bP=yP(vP,"DataView"),xP=bP,wP=Wn,_P=Ut,SP=wP(_P,"Promise"),OP=SP,AP=Wn,jP=Ut,$P=AP(jP,"Set"),Ry=$P,PP=Wn,TP=Ut,EP=PP(TP,"WeakMap"),NP=EP,Tc=xP,Ec=tf,Nc=OP,kc=Ry,Cc=NP,By=nn,Xr=Wg,ih="[object Map]",kP="[object Object]",ah="[object Promise]",oh="[object Set]",sh="[object WeakMap]",lh="[object DataView]",CP=Xr(Tc),IP=Xr(Ec),MP=Xr(Nc),DP=Xr(kc),LP=Xr(Cc),On=By;(Tc&&On(new Tc(new ArrayBuffer(1)))!=lh||Ec&&On(new Ec)!=ih||Nc&&On(Nc.resolve())!=ah||kc&&On(new kc)!=oh||Cc&&On(new Cc)!=sh)&&(On=function(e){var t=By(e),n=t==kP?e.constructor:void 0,r=n?Xr(n):"";if(r)switch(r){case CP:return lh;case IP:return ih;case MP:return ah;case DP:return oh;case LP:return sh}return t});var RP=On,Al=$y,BP=Ny,FP=yj,UP=gP,ch=RP,uh=it,fh=Iy,qP=Dy,zP=1,dh="[object Arguments]",hh="[object Array]",Ia="[object Object]",KP=Object.prototype,ph=KP.hasOwnProperty;function WP(e,t,n,r,i,a){var o=uh(e),s=uh(t),l=o?hh:ch(e),c=s?hh:ch(t);l=l==dh?Ia:l,c=c==dh?Ia:c;var f=l==Ia,u=c==Ia,d=l==c;if(d&&fh(e)){if(!fh(t))return!1;o=!0,f=!1}if(d&&!f)return a||(a=new Al),o||qP(e)?BP(e,t,n,r,i,a):FP(e,t,l,n,r,i,a);if(!(n&zP)){var p=f&&ph.call(e,"__wrapped__"),v=u&&ph.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,g=v?t.value():t;return a||(a=new Al),i(m,g,n,r,a)}}return d?(a||(a=new Al),UP(e,t,n,r,i,a)):!1}var HP=WP,VP=HP,mh=rn;function Fy(e,t,n,r,i){return e===t?!0:e==null||t==null||!mh(e)&&!mh(t)?e!==e&&t!==t:VP(e,t,n,r,Fy,i)}var xf=Fy,GP=$y,YP=xf,XP=1,JP=2;function QP(e,t,n,r){var i=n.length,a=i,o=!r;if(e==null)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=n[i];var l=s[0],c=e[l],f=s[1];if(o&&s[2]){if(c===void 0&&!(l in e))return!1}else{var u=new GP;if(r)var d=r(c,f,l,e,t,u);if(!(d===void 0?YP(f,c,XP|JP,r,u):d))return!1}}return!0}var ZP=QP,eT=mn;function tT(e){return e===e&&!eT(e)}var Uy=tT,nT=Uy,rT=Ds;function iT(e){for(var t=rT(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,nT(i)]}return t}var aT=iT;function oT(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var qy=oT,sT=ZP,lT=aT,cT=qy;function uT(e){var t=lT(e);return t.length==1&&t[0][2]?cT(t[0][0],t[0][1]):function(n){return n===e||sT(n,e,t)}}var fT=uT;function dT(e,t){return e!=null&&t in Object(e)}var hT=dT,pT=Xg,mT=yf,gT=it,yT=vf,vT=bf,bT=ws;function xT(e,t,n){t=pT(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=bT(t[r]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++r!=i?a:(i=e==null?0:e.length,!!i&&vT(i)&&yT(o,i)&&(gT(e)||mT(e)))}var wT=xT,_T=hT,ST=wT;function OT(e,t){return e!=null&&ST(e,t,_T)}var AT=OT,jT=xf,$T=Jg,PT=AT,TT=Qu,ET=Uy,NT=qy,kT=ws,CT=1,IT=2;function MT(e,t){return TT(e)&&ET(t)?NT(kT(e),t):function(n){var r=$T(n,e);return r===void 0&&r===t?PT(n,e):jT(t,r,CT|IT)}}var DT=MT;function LT(e){return e}var Jr=LT;function RT(e){return function(t){return t==null?void 0:t[e]}}var BT=RT,FT=of;function UT(e){return function(t){return FT(t,e)}}var qT=UT,zT=BT,KT=qT,WT=Qu,HT=ws;function VT(e){return WT(e)?zT(HT(e)):KT(e)}var GT=VT,YT=fT,XT=DT,JT=Jr,QT=it,ZT=GT;function eE(e){return typeof e=="function"?e:e==null?JT:typeof e=="object"?QT(e)?XT(e[0],e[1]):YT(e):ZT(e)}var gn=eE;function tE(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var zy=tE;function nE(e){return e!==e}var rE=nE;function iE(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var aE=iE,oE=zy,sE=rE,lE=aE;function cE(e,t,n){return t===t?lE(e,t,n):oE(e,sE,n)}var uE=cE,fE=uE;function dE(e,t){var n=e==null?0:e.length;return!!n&&fE(e,t,0)>-1}var hE=dE;function pE(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var mE=pE;function gE(){}var yE=gE,jl=Ry,vE=yE,bE=gf,xE=1/0,wE=jl&&1/bE(new jl([,-0]))[1]==xE?function(e){return new jl(e)}:vE,_E=wE,SE=Py,OE=hE,AE=mE,jE=Ey,$E=_E,PE=gf,TE=200;function EE(e,t,n){var r=-1,i=OE,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=AE;else if(a>=TE){var c=t?null:$E(e);if(c)return PE(c);o=!1,i=jE,l=new SE}else l=t?[]:s;e:for(;++r<a;){var f=e[r],u=t?t(f):f;if(f=n||f!==0?f:0,o&&u===u){for(var d=l.length;d--;)if(l[d]===u)continue e;t&&l.push(u),s.push(f)}else i(l,u,n)||(l!==s&&l.push(u),s.push(f))}return s}var NE=EE,kE=gn,CE=NE;function IE(e,t){return e&&e.length?CE(e,kE(t)):[]}var ME=IE;const gh=Ae(ME);function Ky(e,t,n){return t===!0?gh(e,n):ae(t)?gh(e,t):e}function Sr(e){"@babel/helpers - typeof";return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(e)}var DE=["ref"];function yh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yh(Object(n),!0).forEach(function(r){Ls(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hy(r.key),r)}}function RE(e,t,n){return t&&vh(e.prototype,t),n&&vh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function BE(e,t,n){return t=jo(t),FE(e,Wy()?Reflect.construct(t,n||[],jo(e).constructor):t.apply(e,n))}function FE(e,t){if(t&&(Sr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UE(e)}function UE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wy=function(){return!!e})()}function jo(e){return jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jo(e)}function qE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ic(e,t)}function Ic(e,t){return Ic=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ic(e,t)}function Ls(e,t,n){return t=Hy(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hy(e){var t=zE(e,"string");return Sr(t)=="symbol"?t:t+""}function zE(e,t){if(Sr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function KE(e,t){if(e==null)return{};var n=WE(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function WE(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function HE(e){return e.value}function VE(e,t){if(I.isValidElement(e))return I.cloneElement(e,t);if(typeof e=="function")return I.createElement(e,t);t.ref;var n=KE(t,DE);return I.createElement(mf,n)}var bh=1,In=function(e){function t(){var n;LE(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=BE(this,t,[].concat(i)),Ls(n,"lastBoundingBox",{width:-1,height:-1}),n}return qE(t,e),RE(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>bh||Math.abs(i.height-this.lastBoundingBox.height)>bh)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?qt({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,f=i.chartHeight,u,d;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();u={left:((c||0)-p.width)/2}}else u=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var v=this.getBBoxSnapshot();d={top:((f||0)-v.height)/2}}else d=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return qt(qt({},u),d)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,f=i.payload,u=qt(qt({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return I.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(p){r.wrapperNode=p}},VE(a,qt(qt({},this.props),{},{payload:Ky(f,c,HE)})))}}],[{key:"getWithHeight",value:function(r,i){var a=qt(qt({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&W(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(P.PureComponent);Ls(In,"displayName","Legend");Ls(In,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var xh=ga,GE=yf,YE=it,wh=xh?xh.isConcatSpreadable:void 0;function XE(e){return YE(e)||GE(e)||!!(wh&&e&&e[wh])}var JE=XE,QE=ky,ZE=JE;function Vy(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ZE),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?Vy(s,t-1,n,r,i):QE(i,s):r||(i[i.length]=s)}return i}var Gy=Vy;function eN(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(n(a[l],l,a)===!1)break}return t}}var tN=eN,nN=tN,rN=nN(),iN=rN,aN=iN,oN=Ds;function sN(e,t){return e&&aN(e,t,oN)}var Yy=sN,lN=ba;function cN(e,t){return function(n,r){if(n==null)return n;if(!lN(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}var uN=cN,fN=Yy,dN=uN,hN=dN(fN),wf=hN,pN=wf,mN=ba;function gN(e,t){var n=-1,r=mN(e)?Array(e.length):[];return pN(e,function(i,a,o){r[++n]=t(i,a,o)}),r}var Xy=gN;function yN(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var vN=yN,_h=Kr;function bN(e,t){if(e!==t){var n=e!==void 0,r=e===null,i=e===e,a=_h(e),o=t!==void 0,s=t===null,l=t===t,c=_h(t);if(!s&&!c&&!a&&e>t||a&&o&&l&&!s&&!c||r&&o&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&e<t||c&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!l)return-1}return 0}var xN=bN,wN=xN;function _N(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var l=wN(i[r],a[r]);if(l){if(r>=s)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return e.index-t.index}var SN=_N,$l=af,ON=of,AN=gn,jN=Xy,$N=vN,PN=My,TN=SN,EN=Jr,NN=it;function kN(e,t,n){t.length?t=$l(t,function(a){return NN(a)?function(o){return ON(o,a.length===1?a[0]:a)}:a}):t=[EN];var r=-1;t=$l(t,PN(AN));var i=jN(e,function(a,o,s){var l=$l(t,function(c){return c(a)});return{criteria:l,index:++r,value:a}});return $N(i,function(a,o){return TN(a,o,n)})}var CN=kN;function IN(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var MN=IN,DN=MN,Sh=Math.max;function LN(e,t,n){return t=Sh(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Sh(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),DN(e,this,s)}}var RN=LN;function BN(e){return function(){return e}}var FN=BN,UN=Wn,qN=function(){try{var e=UN(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Jy=qN,zN=FN,Oh=Jy,KN=Jr,WN=Oh?function(e,t){return Oh(e,"toString",{configurable:!0,enumerable:!1,value:zN(t),writable:!0})}:KN,HN=WN,VN=800,GN=16,YN=Date.now;function XN(e){var t=0,n=0;return function(){var r=YN(),i=GN-(r-n);if(n=r,i>0){if(++t>=VN)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var JN=XN,QN=HN,ZN=JN,ek=ZN(QN),tk=ek,nk=Jr,rk=RN,ik=tk;function ak(e,t){return ik(rk(e,t,nk),e+"")}var ok=ak,sk=ef,lk=ba,ck=vf,uk=mn;function fk(e,t,n){if(!uk(n))return!1;var r=typeof t;return(r=="number"?lk(n)&&ck(t,n.length):r=="string"&&t in n)?sk(n[t],e):!1}var Rs=fk,dk=Gy,hk=CN,pk=ok,Ah=Rs,mk=pk(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Ah(e,t[0],t[1])?t=[]:n>2&&Ah(t[0],t[1],t[2])&&(t=[t[0]]),hk(e,dk(t,1),[])}),gk=mk;const _f=Ae(gk);function Ci(e){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ci(e)}function Mc(){return Mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mc.apply(this,arguments)}function yk(e,t){return wk(e)||xk(e,t)||bk(e,t)||vk()}function vk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bk(e,t){if(e){if(typeof e=="string")return jh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jh(e,t)}}function jh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xk(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function wk(e){if(Array.isArray(e))return e}function $h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$h(Object(n),!0).forEach(function(r){_k(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$h(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _k(e,t,n){return t=Sk(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sk(e){var t=Ok(e,"string");return Ci(t)=="symbol"?t:t+""}function Ok(e,t){if(Ci(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ci(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ak(e){return Array.isArray(e)&&Re(e[0])&&Re(e[1])?e.join(" ~ "):e}var jk=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,o=t.itemStyle,s=o===void 0?{}:o,l=t.labelStyle,c=l===void 0?{}:l,f=t.payload,u=t.formatter,d=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,m=t.label,g=t.labelFormatter,w=t.accessibilityLayer,b=w===void 0?!1:w,_=function(){if(f&&f.length){var A={padding:0,margin:0},E=(d?_f(f,d):f).map(function(k,C){if(k.type==="none")return null;var M=Pl({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},s),D=k.formatter||u||Ak,L=k.value,R=k.name,K=L,V=R;if(D&&K!=null&&V!=null){var z=D(L,R,k,C,f);if(Array.isArray(z)){var X=yk(z,2);K=X[0],V=X[1]}else K=z}return I.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:M},Re(V)?I.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Re(V)?I.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,I.createElement("span",{className:"recharts-tooltip-item-value"},K),I.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return I.createElement("ul",{className:"recharts-tooltip-item-list",style:A},E)}return null},S=Pl({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),y=Pl({margin:0},c),x=!oe(m),O=x?m:"",j=ce("recharts-default-tooltip",p),$=ce("recharts-tooltip-label",v);x&&g&&f!==void 0&&f!==null&&(O=g(m,f));var T=b?{role:"status","aria-live":"assertive"}:{};return I.createElement("div",Mc({className:j,style:S},T),I.createElement("p",{className:$,style:y},I.isValidElement(O)?O:"".concat(O)),_())};function Ii(e){"@babel/helpers - typeof";return Ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ii(e)}function Ma(e,t,n){return t=$k(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $k(e){var t=Pk(e,"string");return Ii(t)=="symbol"?t:t+""}function Pk(e,t){if(Ii(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ii(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var di="recharts-tooltip-wrapper",Tk={visibility:"hidden"};function Ek(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return ce(di,Ma(Ma(Ma(Ma({},"".concat(di,"-right"),W(n)&&t&&W(t.x)&&n>=t.x),"".concat(di,"-left"),W(n)&&t&&W(t.x)&&n<t.x),"".concat(di,"-bottom"),W(r)&&t&&W(t.y)&&r>=t.y),"".concat(di,"-top"),W(r)&&t&&W(t.y)&&r<t.y))}function Ph(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(a&&W(a[r]))return a[r];var f=n[r]-s-i,u=n[r]+i;if(t[r])return o[r]?f:u;if(o[r]){var d=f,p=l[r];return d<p?Math.max(u,l[r]):Math.max(f,l[r])}var v=u+s,m=l[r]+c;return v>m?Math.max(f,l[r]):Math.max(u,l[r])}function Nk(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function kk(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,a=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,c,f,u;return o.height>0&&o.width>0&&n?(f=Ph({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),u=Ph({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=Nk({translateX:f,translateY:u,useTranslate3d:s})):c=Tk,{cssProperties:c,cssClasses:Ek({translateX:f,translateY:u,coordinate:n})}}function Or(e){"@babel/helpers - typeof";return Or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Or(e)}function Th(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Eh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Th(Object(n),!0).forEach(function(r){Lc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Th(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ik(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zy(r.key),r)}}function Mk(e,t,n){return t&&Ik(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dk(e,t,n){return t=$o(t),Lk(e,Qy()?Reflect.construct(t,n||[],$o(e).constructor):t.apply(e,n))}function Lk(e,t){if(t&&(Or(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rk(e)}function Rk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qy=function(){return!!e})()}function $o(e){return $o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$o(e)}function Bk(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dc(e,t)}function Dc(e,t){return Dc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Dc(e,t)}function Lc(e,t,n){return t=Zy(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zy(e){var t=Fk(e,"string");return Or(t)=="symbol"?t:t+""}function Fk(e,t){if(Or(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Or(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nh=1,Uk=function(e){function t(){var n;Ck(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Dk(this,t,[].concat(i)),Lc(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Lc(n,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,c,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&c!==void 0?c:0}})}}),n}return Bk(t,e),Mk(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>Nh||Math.abs(r.height-this.state.lastBoundingBox.height)>Nh)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,f=i.coordinate,u=i.hasPayload,d=i.isAnimationActive,p=i.offset,v=i.position,m=i.reverseDirection,g=i.useTranslate3d,w=i.viewBox,b=i.wrapperStyle,_=kk({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:p,position:v,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:w}),S=_.cssClasses,y=_.cssProperties,x=Eh(Eh({transition:d&&a?"transform ".concat(s,"ms ").concat(l):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return I.createElement("div",{tabIndex:-1,className:S,style:x,ref:function(j){r.wrapperNode=j}},c)}}])}(P.PureComponent),qk=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Qr={isSsr:qk()};function Ar(e){"@babel/helpers - typeof";return Ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(e)}function kh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ch(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kh(Object(n),!0).forEach(function(r){Sf(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tv(r.key),r)}}function Wk(e,t,n){return t&&Kk(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hk(e,t,n){return t=Po(t),Vk(e,ev()?Reflect.construct(t,n||[],Po(e).constructor):t.apply(e,n))}function Vk(e,t){if(t&&(Ar(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gk(e)}function Gk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ev(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ev=function(){return!!e})()}function Po(e){return Po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Po(e)}function Yk(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rc(e,t)}function Rc(e,t){return Rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Rc(e,t)}function Sf(e,t,n){return t=tv(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tv(e){var t=Xk(e,"string");return Ar(t)=="symbol"?t:t+""}function Xk(e,t){if(Ar(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ar(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Jk(e){return e.dataKey}function Qk(e,t){return I.isValidElement(e)?I.cloneElement(e,t):typeof e=="function"?I.createElement(e,t):I.createElement(jk,t)}var At=function(e){function t(){return zk(this,t),Hk(this,t,arguments)}return Yk(t,e),Wk(t,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,f=i.coordinate,u=i.filterNull,d=i.isAnimationActive,p=i.offset,v=i.payload,m=i.payloadUniqBy,g=i.position,w=i.reverseDirection,b=i.useTranslate3d,_=i.viewBox,S=i.wrapperStyle,y=v??[];u&&y.length&&(y=Ky(v.filter(function(O){return O.value!=null&&(O.hide!==!0||r.props.includeHidden)}),m,Jk));var x=y.length>0;return I.createElement(Uk,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:d,active:a,coordinate:f,hasPayload:x,offset:p,position:g,reverseDirection:w,useTranslate3d:b,viewBox:_,wrapperStyle:S},Qk(c,Ch(Ch({},this.props),{},{payload:y})))}}])}(P.PureComponent);Sf(At,"displayName","Tooltip");Sf(At,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Qr.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Zk=Ut,eC=function(){return Zk.Date.now()},tC=eC,nC=/\s/;function rC(e){for(var t=e.length;t--&&nC.test(e.charAt(t)););return t}var iC=rC,aC=iC,oC=/^\s+/;function sC(e){return e&&e.slice(0,aC(e)+1).replace(oC,"")}var lC=sC,cC=lC,Ih=mn,uC=Kr,Mh=NaN,fC=/^[-+]0x[0-9a-f]+$/i,dC=/^0b[01]+$/i,hC=/^0o[0-7]+$/i,pC=parseInt;function mC(e){if(typeof e=="number")return e;if(uC(e))return Mh;if(Ih(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ih(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=cC(e);var n=dC.test(e);return n||hC.test(e)?pC(e.slice(2),n?2:8):fC.test(e)?Mh:+e}var nv=mC,gC=mn,Tl=tC,Dh=nv,yC="Expected a function",vC=Math.max,bC=Math.min;function xC(e,t,n){var r,i,a,o,s,l,c=0,f=!1,u=!1,d=!0;if(typeof e!="function")throw new TypeError(yC);t=Dh(t)||0,gC(n)&&(f=!!n.leading,u="maxWait"in n,a=u?vC(Dh(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d);function p(x){var O=r,j=i;return r=i=void 0,c=x,o=e.apply(j,O),o}function v(x){return c=x,s=setTimeout(w,t),f?p(x):o}function m(x){var O=x-l,j=x-c,$=t-O;return u?bC($,a-j):$}function g(x){var O=x-l,j=x-c;return l===void 0||O>=t||O<0||u&&j>=a}function w(){var x=Tl();if(g(x))return b(x);s=setTimeout(w,m(x))}function b(x){return s=void 0,d&&r?p(x):(r=i=void 0,o)}function _(){s!==void 0&&clearTimeout(s),c=0,r=l=i=s=void 0}function S(){return s===void 0?o:b(Tl())}function y(){var x=Tl(),O=g(x);if(r=arguments,i=this,l=x,O){if(s===void 0)return v(l);if(u)return clearTimeout(s),s=setTimeout(w,t),p(l)}return s===void 0&&(s=setTimeout(w,t)),o}return y.cancel=_,y.flush=S,y}var wC=xC,_C=wC,SC=mn,OC="Expected a function";function AC(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(OC);return SC(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_C(e,t,{leading:r,maxWait:t,trailing:i})}var jC=AC;const rv=Ae(jC);function Mi(e){"@babel/helpers - typeof";return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mi(e)}function Lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lh(Object(n),!0).forEach(function(r){$C(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $C(e,t,n){return t=PC(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PC(e){var t=TC(e,"string");return Mi(t)=="symbol"?t:t+""}function TC(e,t){if(Mi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EC(e,t){return IC(e)||CC(e,t)||kC(e,t)||NC()}function NC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kC(e,t){if(e){if(typeof e=="string")return Rh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rh(e,t)}}function Rh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function CC(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function IC(e){if(Array.isArray(e))return e}var iv=P.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=e.width,o=a===void 0?"100%":a,s=e.height,l=s===void 0?"100%":s,c=e.minWidth,f=c===void 0?0:c,u=e.minHeight,d=e.maxHeight,p=e.children,v=e.debounce,m=v===void 0?0:v,g=e.id,w=e.className,b=e.onResize,_=e.style,S=_===void 0?{}:_,y=P.useRef(null),x=P.useRef();x.current=b,P.useImperativeHandle(t,function(){return Object.defineProperty(y.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),y.current},configurable:!0})});var O=P.useState({containerWidth:i.width,containerHeight:i.height}),j=EC(O,2),$=j[0],T=j[1],N=P.useCallback(function(E,k){T(function(C){var M=Math.round(E),D=Math.round(k);return C.containerWidth===M&&C.containerHeight===D?C:{containerWidth:M,containerHeight:D}})},[]);P.useEffect(function(){var E=function(R){var K,V=R[0].contentRect,z=V.width,X=V.height;N(z,X),(K=x.current)===null||K===void 0||K.call(x,z,X)};m>0&&(E=rv(E,m,{trailing:!0,leading:!1}));var k=new ResizeObserver(E),C=y.current.getBoundingClientRect(),M=C.width,D=C.height;return N(M,D),k.observe(y.current),function(){k.disconnect()}},[N,m]);var A=P.useMemo(function(){var E=$.containerWidth,k=$.containerHeight;if(E<0||k<0)return null;Gt($n(o)||$n(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Gt(!n||n>0,"The aspect(%s) must be greater than zero.",n);var C=$n(o)?E:o,M=$n(l)?k:l;n&&n>0&&(C?M=C/n:M&&(C=M*n),d&&M>d&&(M=d)),Gt(C>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,M,o,l,f,u,n);var D=!Array.isArray(p)&&Vt(p.type).endsWith("Chart");return I.Children.map(p,function(L){return I.isValidElement(L)?P.cloneElement(L,Da({width:C,height:M},D?{style:Da({height:"100%",width:"100%",maxHeight:M,maxWidth:C},L.props.style)}:{})):L})},[n,p,l,d,u,f,$,o]);return I.createElement("div",{id:g?"".concat(g):void 0,className:ce("recharts-responsive-container",w),style:Da(Da({},S),{},{width:o,height:l,minWidth:f,minHeight:u,maxHeight:d}),ref:y},A)}),av=function(t){return null};av.displayName="Cell";function Di(e){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Di(e)}function Bh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bh(Object(n),!0).forEach(function(r){MC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MC(e,t,n){return t=DC(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DC(e){var t=LC(e,"string");return Di(t)=="symbol"?t:t+""}function LC(e,t){if(Di(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Di(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qn={widthCache:{},cacheCount:0},RC=2e3,BC={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Fh="recharts_measurement_span";function FC(e){var t=Bc({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Oi=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Qr.isSsr)return{width:0,height:0};var r=FC(n),i=JSON.stringify({text:t,copyStyle:r});if(Qn.widthCache[i])return Qn.widthCache[i];try{var a=document.getElementById(Fh);a||(a=document.createElement("span"),a.setAttribute("id",Fh),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=Bc(Bc({},BC),r);Object.assign(a.style,o),a.textContent="".concat(t);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return Qn.widthCache[i]=l,++Qn.cacheCount>RC&&(Qn.cacheCount=0,Qn.widthCache={}),l}catch{return{width:0,height:0}}},UC=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Li(e){"@babel/helpers - typeof";return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Li(e)}function To(e,t){return WC(e)||KC(e,t)||zC(e,t)||qC()}function qC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zC(e,t){if(e){if(typeof e=="string")return Uh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uh(e,t)}}function Uh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function KC(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function WC(e){if(Array.isArray(e))return e}function HC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GC(r.key),r)}}function VC(e,t,n){return t&&qh(e.prototype,t),n&&qh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function GC(e){var t=YC(e,"string");return Li(t)=="symbol"?t:t+""}function YC(e,t){if(Li(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Li(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zh=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Kh=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,XC=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JC=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ov={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},QC=Object.keys(ov),or="NaN";function ZC(e,t){return e*ov[t]}var La=function(){function e(t,n){HC(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!XC.test(n)&&(this.num=NaN,this.unit=""),QC.includes(n)&&(this.num=ZC(t,n),this.unit="px")}return VC(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=JC.exec(n))!==null&&r!==void 0?r:[],a=To(i,3),o=a[1],s=a[2];return new e(parseFloat(o),s??"")}}])}();function sv(e){if(e.includes(or))return or;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=zh.exec(t))!==null&&n!==void 0?n:[],i=To(r,4),a=i[1],o=i[2],s=i[3],l=La.parse(a??""),c=La.parse(s??""),f=o==="*"?l.multiply(c):l.divide(c);if(f.isNaN())return or;t=t.replace(zh,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=(u=Kh.exec(t))!==null&&u!==void 0?u:[],p=To(d,4),v=p[1],m=p[2],g=p[3],w=La.parse(v??""),b=La.parse(g??""),_=m==="+"?w.add(b):w.subtract(b);if(_.isNaN())return or;t=t.replace(Kh,_.toString())}return t}var Wh=/\(([^()]*)\)/;function eI(e){for(var t=e;t.includes("(");){var n=Wh.exec(t),r=To(n,2),i=r[1];t=t.replace(Wh,sv(i))}return t}function tI(e){var t=e.replace(/\s+/g,"");return t=eI(t),t=sv(t),t}function nI(e){try{return tI(e)}catch{return or}}function El(e){var t=nI(e.slice(5,-1));return t===or?"":t}var rI=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],iI=["dx","dy","angle","className","breakAll"];function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fc.apply(this,arguments)}function Hh(e,t){if(e==null)return{};var n=aI(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function aI(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Vh(e,t){return cI(e)||lI(e,t)||sI(e,t)||oI()}function oI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sI(e,t){if(e){if(typeof e=="string")return Gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gh(e,t)}}function Gh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lI(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function cI(e){if(Array.isArray(e))return e}var lv=/[ \f\n\r\t\v\u2028\u2029]+/,cv=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var a=[];oe(n)||(r?a=n.toString().split(""):a=n.toString().split(lv));var o=a.map(function(l){return{word:l,width:Oi(l,i).width}}),s=r?0:Oi(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},uI=function(t,n,r,i,a){var o=t.maxLines,s=t.children,l=t.style,c=t.breakAll,f=W(o),u=s,d=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return C.reduce(function(M,D){var L=D.word,R=D.width,K=M[M.length-1];if(K&&(i==null||a||K.width+R+r<Number(i)))K.words.push(L),K.width+=R+r;else{var V={words:[L],width:R};M.push(V)}return M},[])},p=d(n),v=function(C){return C.reduce(function(M,D){return M.width>D.width?M:D})};if(!f)return p;for(var m="…",g=function(C){var M=u.slice(0,C),D=cv({breakAll:c,style:l,children:M+m}).wordsWithComputedWidth,L=d(D),R=L.length>o||v(L).width>Number(i);return[R,L]},w=0,b=u.length-1,_=0,S;w<=b&&_<=u.length-1;){var y=Math.floor((w+b)/2),x=y-1,O=g(x),j=Vh(O,2),$=j[0],T=j[1],N=g(y),A=Vh(N,1),E=A[0];if(!$&&!E&&(w=y+1),$&&E&&(b=y-1),!$&&E){S=T;break}_++}return S||p},Yh=function(t){var n=oe(t)?[]:t.toString().split(lv);return[{words:n}]},fI=function(t){var n=t.width,r=t.scaleToFit,i=t.children,a=t.style,o=t.breakAll,s=t.maxLines;if((n||r)&&!Qr.isSsr){var l,c,f=cv({breakAll:o,children:i,style:a});if(f){var u=f.wordsWithComputedWidth,d=f.spaceWidth;l=u,c=d}else return Yh(i);return uI({breakAll:o,children:i,maxLines:s,style:a},l,c,n,r)}return Yh(i)},Xh="#808080",Eo=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.lineHeight,s=o===void 0?"1em":o,l=t.capHeight,c=l===void 0?"0.71em":l,f=t.scaleToFit,u=f===void 0?!1:f,d=t.textAnchor,p=d===void 0?"start":d,v=t.verticalAnchor,m=v===void 0?"end":v,g=t.fill,w=g===void 0?Xh:g,b=Hh(t,rI),_=P.useMemo(function(){return fI({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),S=b.dx,y=b.dy,x=b.angle,O=b.className,j=b.breakAll,$=Hh(b,iI);if(!Re(r)||!Re(a))return null;var T=r+(W(S)?S:0),N=a+(W(y)?y:0),A;switch(m){case"start":A=El("calc(".concat(c,")"));break;case"middle":A=El("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:A=El("calc(".concat(_.length-1," * -").concat(s,")"));break}var E=[];if(u){var k=_[0].width,C=b.width;E.push("scale(".concat((W(C)?C/k:1)/k,")"))}return x&&E.push("rotate(".concat(x,", ").concat(T,", ").concat(N,")")),E.length&&($.transform=E.join(" ")),I.createElement("text",Fc({},se($,!0),{x:T,y:N,className:ce("recharts-text",O),textAnchor:p,fill:w.includes("url")?Xh:w}),_.map(function(M,D){var L=M.words.join(j?"":" ");return I.createElement("tspan",{x:T,dy:D===0?A:s,key:"".concat(L,"-").concat(D)},L)}))};function fn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dI(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Of(e){let t,n,r;e.length!==2?(t=fn,n=(s,l)=>fn(e(s),l),r=(s,l)=>e(s)-l):(t=e===fn||e===dI?e:hI,n=e,r=e);function i(s,l,c=0,f=s.length){if(c<f){if(t(l,l)!==0)return f;do{const u=c+f>>>1;n(s[u],l)<0?c=u+1:f=u}while(c<f)}return c}function a(s,l,c=0,f=s.length){if(c<f){if(t(l,l)!==0)return f;do{const u=c+f>>>1;n(s[u],l)<=0?c=u+1:f=u}while(c<f)}return c}function o(s,l,c=0,f=s.length){const u=i(s,l,c,f-1);return u>c&&r(s[u-1],l)>-r(s[u],l)?u-1:u}return{left:i,center:o,right:a}}function hI(){return 0}function uv(e){return e===null?NaN:+e}function*pI(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const mI=Of(fn),xa=mI.right;Of(uv).center;class Jh extends Map{constructor(t,n=vI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Qh(this,t))}has(t){return super.has(Qh(this,t))}set(t,n){return super.set(gI(this,t),n)}delete(t){return super.delete(yI(this,t))}}function Qh({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function gI({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function yI({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function vI(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bI(e=fn){if(e===fn)return fv;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function fv(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const xI=Math.sqrt(50),wI=Math.sqrt(10),_I=Math.sqrt(2);function No(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=xI?10:a>=wI?5:a>=_I?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?No(e,t,n*2):[s,l,c]}function Uc(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?No(t,e,n):No(e,t,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function qc(e,t,n){return t=+t,e=+e,n=+n,No(e,t,n)[2]}function zc(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?qc(t,e,n):qc(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Zh(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function ep(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function dv(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?fv:bI(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,f=Math.log(l),u=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*u*(l-u)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(t-c*u/l+d)),v=Math.min(r,Math.floor(t+(l-c)*u/l+d));dv(e,t,p,v,i)}const a=e[t];let o=n,s=r;for(hi(e,n,t),i(e[r],a)>0&&hi(e,n,r);o<s;){for(hi(e,o,s),++o,--s;i(e[o],a)<0;)++o;for(;i(e[s],a)>0;)--s}i(e[n],a)===0?hi(e,n,s):(++s,hi(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function hi(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function SI(e,t,n){if(e=Float64Array.from(pI(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return ep(e);if(t>=1)return Zh(e);var r,i=(r-1)*t,a=Math.floor(i),o=Zh(dv(e,a).subarray(0,a+1)),s=ep(e.subarray(a+1));return o+(s-o)*(i-a)}}function OI(e,t,n=uv){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function AI(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function wt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function an(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Kc=Symbol("implicit");function Af(){var e=new Jh,t=[],n=[],r=Kc;function i(a){let o=e.get(a);if(o===void 0){if(r!==Kc)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Jh;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Af(t,n).unknown(r)},wt.apply(i,arguments),i}function Ri(){var e=Af().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,l=0,c=0,f=.5;delete e.unknown;function u(){var d=t().length,p=i<r,v=p?i:r,m=p?r:i;a=(m-v)/Math.max(1,d-l+c*2),s&&(a=Math.floor(a)),v+=(m-v-a*(d-l))*f,o=a*(1-l),s&&(v=Math.round(v),o=Math.round(o));var g=AI(d).map(function(w){return v+a*w});return n(p?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),u()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,u()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,u()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(d){return arguments.length?(s=!!d,u()):s},e.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),u()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),u()):l},e.paddingOuter=function(d){return arguments.length?(c=+d,u()):c},e.align=function(d){return arguments.length?(f=Math.max(0,Math.min(1,d)),u()):f},e.copy=function(){return Ri(t(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(f)},wt.apply(u(),arguments)}function hv(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return hv(t())},e}function Ai(){return hv(Ri.apply(null,arguments).paddingInner(1))}function jf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function wa(){}var Bi=.7,ko=1/Bi,gr="\\s*([+-]?\\d+)\\s*",Fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jI=/^#([0-9a-f]{3,8})$/,$I=new RegExp(`^rgb\\(${gr},${gr},${gr}\\)$`),PI=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),TI=new RegExp(`^rgba\\(${gr},${gr},${gr},${Fi}\\)$`),EI=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${Fi}\\)$`),NI=new RegExp(`^hsl\\(${Fi},${Mt},${Mt}\\)$`),kI=new RegExp(`^hsla\\(${Fi},${Mt},${Mt},${Fi}\\)$`),tp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jf(wa,Ui,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:np,formatHex:np,formatHex8:CI,formatHsl:II,formatRgb:rp,toString:rp});function np(){return this.rgb().formatHex()}function CI(){return this.rgb().formatHex8()}function II(){return mv(this).formatHsl()}function rp(){return this.rgb().formatRgb()}function Ui(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jI.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ip(t):n===3?new rt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ra(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ra(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$I.exec(e))?new rt(t[1],t[2],t[3],1):(t=PI.exec(e))?new rt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=TI.exec(e))?Ra(t[1],t[2],t[3],t[4]):(t=EI.exec(e))?Ra(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=NI.exec(e))?sp(t[1],t[2]/100,t[3]/100,1):(t=kI.exec(e))?sp(t[1],t[2]/100,t[3]/100,t[4]):tp.hasOwnProperty(e)?ip(tp[e]):e==="transparent"?new rt(NaN,NaN,NaN,0):null}function ip(e){return new rt(e>>16&255,e>>8&255,e&255,1)}function Ra(e,t,n,r){return r<=0&&(e=t=n=NaN),new rt(e,t,n,r)}function MI(e){return e instanceof wa||(e=Ui(e)),e?(e=e.rgb(),new rt(e.r,e.g,e.b,e.opacity)):new rt}function Wc(e,t,n,r){return arguments.length===1?MI(e):new rt(e,t,n,r??1)}function rt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}jf(rt,Wc,pv(wa,{brighter(e){return e=e==null?ko:Math.pow(ko,e),new rt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bi:Math.pow(Bi,e),new rt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rt(Mn(this.r),Mn(this.g),Mn(this.b),Co(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ap,formatHex:ap,formatHex8:DI,formatRgb:op,toString:op}));function ap(){return`#${Pn(this.r)}${Pn(this.g)}${Pn(this.b)}`}function DI(){return`#${Pn(this.r)}${Pn(this.g)}${Pn(this.b)}${Pn((isNaN(this.opacity)?1:this.opacity)*255)}`}function op(){const e=Co(this.opacity);return`${e===1?"rgb(":"rgba("}${Mn(this.r)}, ${Mn(this.g)}, ${Mn(this.b)}${e===1?")":`, ${e})`}`}function Co(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pn(e){return e=Mn(e),(e<16?"0":"")+e.toString(16)}function sp(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Tt(e,t,n,r)}function mv(e){if(e instanceof Tt)return new Tt(e.h,e.s,e.l,e.opacity);if(e instanceof wa||(e=Ui(e)),!e)return new Tt;if(e instanceof Tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Tt(o,s,l,e.opacity)}function LI(e,t,n,r){return arguments.length===1?mv(e):new Tt(e,t,n,r??1)}function Tt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}jf(Tt,LI,pv(wa,{brighter(e){return e=e==null?ko:Math.pow(ko,e),new Tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bi:Math.pow(Bi,e),new Tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new rt(Nl(e>=240?e-240:e+120,i,r),Nl(e,i,r),Nl(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Tt(lp(this.h),Ba(this.s),Ba(this.l),Co(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Co(this.opacity);return`${e===1?"hsl(":"hsla("}${lp(this.h)}, ${Ba(this.s)*100}%, ${Ba(this.l)*100}%${e===1?")":`, ${e})`}`}}));function lp(e){return e=(e||0)%360,e<0?e+360:e}function Ba(e){return Math.max(0,Math.min(1,e||0))}function Nl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $f=e=>()=>e;function RI(e,t){return function(n){return e+n*t}}function BI(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function FI(e){return(e=+e)==1?gv:function(t,n){return n-t?BI(t,n,e):$f(isNaN(t)?n:t)}}function gv(e,t){var n=t-e;return n?RI(e,n):$f(isNaN(e)?t:e)}const cp=function e(t){var n=FI(t);function r(i,a){var o=n((i=Wc(i)).r,(a=Wc(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),c=gv(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=e,r}(1);function UI(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function qI(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function zI(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Zr(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function KI(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Io(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function WI(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Zr(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Hc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kl=new RegExp(Hc.source,"g");function HI(e){return function(){return e}}function VI(e){return function(t){return e(t)+""}}function GI(e,t){var n=Hc.lastIndex=kl.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Hc.exec(e))&&(i=kl.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Io(r,i)})),n=kl.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?VI(l[0].x):HI(t):(t=l.length,function(c){for(var f=0,u;f<t;++f)s[(u=l[f]).i]=u.x(c);return s.join("")})}function Zr(e,t){var n=typeof t,r;return t==null||n==="boolean"?$f(t):(n==="number"?Io:n==="string"?(r=Ui(t))?(t=r,cp):GI:t instanceof Ui?cp:t instanceof Date?KI:qI(t)?UI:Array.isArray(t)?zI:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?WI:Io)(e,t)}function Pf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function YI(e,t){t===void 0&&(t=e,e=Zr);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function XI(e){return function(){return e}}function Mo(e){return+e}var up=[0,1];function Ze(e){return e}function Vc(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:XI(isNaN(t)?NaN:.5)}function JI(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function QI(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Vc(i,r),a=n(o,a)):(r=Vc(r,i),a=n(a,o)),function(s){return a(r(s))}}function ZI(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Vc(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var l=xa(e,s,1,r)-1;return a[l](i[l](s))}}function _a(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Bs(){var e=up,t=up,n=Zr,r,i,a,o=Ze,s,l,c;function f(){var d=Math.min(e.length,t.length);return o!==Ze&&(o=JI(e[0],e[d-1])),s=d>2?ZI:QI,l=c=null,u}function u(d){return d==null||isNaN(d=+d)?a:(l||(l=s(e.map(r),t,n)))(r(o(d)))}return u.invert=function(d){return o(i((c||(c=s(t,e.map(r),Io)))(d)))},u.domain=function(d){return arguments.length?(e=Array.from(d,Mo),f()):e.slice()},u.range=function(d){return arguments.length?(t=Array.from(d),f()):t.slice()},u.rangeRound=function(d){return t=Array.from(d),n=Pf,f()},u.clamp=function(d){return arguments.length?(o=d?!0:Ze,f()):o!==Ze},u.interpolate=function(d){return arguments.length?(n=d,f()):n},u.unknown=function(d){return arguments.length?(a=d,u):a},function(d,p){return r=d,i=p,f()}}function Tf(){return Bs()(Ze,Ze)}function eM(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Do(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function jr(e){return e=Do(Math.abs(e)),e?e[1]:NaN}function tM(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function nM(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var rM=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qi(e){if(!(t=rM.exec(e)))throw new Error("invalid format: "+e);var t;return new Ef({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qi.prototype=Ef.prototype;function Ef(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ef.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function iM(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var yv;function aM(e,t){var n=Do(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(yv=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Do(e,Math.max(0,t+a-1))[0]}function fp(e,t){var n=Do(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dp={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:eM,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fp(e*100,t),r:fp,s:aM,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function hp(e){return e}var pp=Array.prototype.map,mp=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function oM(e){var t=e.grouping===void 0||e.thousands===void 0?hp:tM(pp.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?hp:nM(pp.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(u){u=qi(u);var d=u.fill,p=u.align,v=u.sign,m=u.symbol,g=u.zero,w=u.width,b=u.comma,_=u.precision,S=u.trim,y=u.type;y==="n"?(b=!0,y="g"):dp[y]||(_===void 0&&(_=12),S=!0,y="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",O=m==="$"?r:/[%p]/.test(y)?o:"",j=dp[y],$=/[defgprs%]/.test(y);_=_===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function T(N){var A=x,E=O,k,C,M;if(y==="c")E=j(N)+E,N="";else{N=+N;var D=N<0||1/N<0;if(N=isNaN(N)?l:j(Math.abs(N),_),S&&(N=iM(N)),D&&+N==0&&v!=="+"&&(D=!1),A=(D?v==="("?v:s:v==="-"||v==="("?"":v)+A,E=(y==="s"?mp[8+yv/3]:"")+E+(D&&v==="("?")":""),$){for(k=-1,C=N.length;++k<C;)if(M=N.charCodeAt(k),48>M||M>57){E=(M===46?i+N.slice(k+1):N.slice(k))+E,N=N.slice(0,k);break}}}b&&!g&&(N=t(N,1/0));var L=A.length+N.length+E.length,R=L<w?new Array(w-L+1).join(d):"";switch(b&&g&&(N=t(R+N,R.length?w-E.length:1/0),R=""),p){case"<":N=A+N+E+R;break;case"=":N=A+R+N+E;break;case"^":N=R.slice(0,L=R.length>>1)+A+N+E+R.slice(L);break;default:N=R+A+N+E;break}return a(N)}return T.toString=function(){return u+""},T}function f(u,d){var p=c((u=qi(u),u.type="f",u)),v=Math.max(-8,Math.min(8,Math.floor(jr(d)/3)))*3,m=Math.pow(10,-v),g=mp[8+v/3];return function(w){return p(m*w)+g}}return{format:c,formatPrefix:f}}var Fa,Nf,vv;sM({thousands:",",grouping:[3],currency:["$",""]});function sM(e){return Fa=oM(e),Nf=Fa.format,vv=Fa.formatPrefix,Fa}function lM(e){return Math.max(0,-jr(Math.abs(e)))}function cM(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jr(t)/3)))*3-jr(Math.abs(e)))}function uM(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jr(t)-jr(e))+1}function bv(e,t,n,r){var i=zc(e,t,n),a;switch(r=qi(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=cM(i,o))&&(r.precision=a),vv(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=uM(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=lM(i))&&(r.precision=a-(r.type==="%")*2);break}}return Nf(r)}function yn(e){var t=e.domain;return e.ticks=function(n){var r=t();return Uc(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return bv(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,f=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);f-- >0;){if(c=qc(o,s,n),c===l)return r[i]=o,r[a]=s,t(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return e},e}function Lo(){var e=Tf();return e.copy=function(){return _a(e,Lo())},wt.apply(e,arguments),yn(e)}function xv(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Mo),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return xv(e).unknown(t)},e=arguments.length?Array.from(e,Mo):[0,1],yn(n)}function wv(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function gp(e){return Math.log(e)}function yp(e){return Math.exp(e)}function fM(e){return-Math.log(-e)}function dM(e){return-Math.exp(-e)}function hM(e){return isFinite(e)?+("1e"+e):e<0?0:e}function pM(e){return e===10?hM:e===Math.E?Math.exp:t=>Math.pow(e,t)}function mM(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function vp(e){return(t,n)=>-e(-t,n)}function kf(e){const t=e(gp,yp),n=t.domain;let r=10,i,a;function o(){return i=mM(r),a=pM(r),n()[0]<0?(i=vp(i),a=vp(a),e(fM,dM)):e(gp,yp),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const l=n();let c=l[0],f=l[l.length-1];const u=f<c;u&&([c,f]=[f,c]);let d=i(c),p=i(f),v,m;const g=s==null?10:+s;let w=[];if(!(r%1)&&p-d<g){if(d=Math.floor(d),p=Math.ceil(p),c>0){for(;d<=p;++d)for(v=1;v<r;++v)if(m=d<0?v/a(-d):v*a(d),!(m<c)){if(m>f)break;w.push(m)}}else for(;d<=p;++d)for(v=r-1;v>=1;--v)if(m=d>0?v/a(-d):v*a(d),!(m<c)){if(m>f)break;w.push(m)}w.length*2<g&&(w=Uc(c,f,g))}else w=Uc(d,p,Math.min(p-d,g)).map(a);return u?w.reverse():w},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=qi(l)).precision==null&&(l.trim=!0),l=Nf(l)),s===1/0)return l;const c=Math.max(1,r*s/t.ticks().length);return f=>{let u=f/a(Math.round(i(f)));return u*r<r-.5&&(u*=r),u<=c?l(f):""}},t.nice=()=>n(wv(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),t}function _v(){const e=kf(Bs()).domain([1,10]);return e.copy=()=>_a(e,_v()).base(e.base()),wt.apply(e,arguments),e}function bp(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function xp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Cf(e){var t=1,n=e(bp(t),xp(t));return n.constant=function(r){return arguments.length?e(bp(t=+r),xp(t)):t},yn(n)}function Sv(){var e=Cf(Bs());return e.copy=function(){return _a(e,Sv()).constant(e.constant())},wt.apply(e,arguments)}function wp(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gM(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function yM(e){return e<0?-e*e:e*e}function If(e){var t=e(Ze,Ze),n=1;function r(){return n===1?e(Ze,Ze):n===.5?e(gM,yM):e(wp(n),wp(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},yn(t)}function Mf(){var e=If(Bs());return e.copy=function(){return _a(e,Mf()).exponent(e.exponent())},wt.apply(e,arguments),e}function vM(){return Mf.apply(null,arguments).exponent(.5)}function _p(e){return Math.sign(e)*e*e}function bM(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ov(){var e=Tf(),t=[0,1],n=!1,r;function i(a){var o=bM(e(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return e.invert(_p(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Mo)).map(_p)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ov(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},wt.apply(i,arguments),yn(i)}function Av(){var e=[],t=[],n=[],r;function i(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=OI(e,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:t[xa(n,o)]}return a.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(fn),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Av().domain(e).range(t).unknown(r)},wt.apply(a,arguments)}function jv(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[xa(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return jv().domain([e,t]).range(i).unknown(a)},wt.apply(yn(o),arguments)}function $v(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[xa(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return $v().domain(e).range(t).unknown(n)},wt.apply(i,arguments)}const Cl=new Date,Il=new Date;function Be(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),t(a,s),e(a);while(c<a&&a<o);return l},i.filter=a=>Be(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Cl.setTime(+a),Il.setTime(+o),e(Cl),e(Il),Math.floor(n(Cl,Il))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Ro=Be(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ro.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Be(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ro);Ro.range;const zt=1e3,pt=zt*60,Kt=pt*60,Jt=Kt*24,Df=Jt*7,Sp=Jt*30,Ml=Jt*365,Tn=Be(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*zt)},(e,t)=>(t-e)/zt,e=>e.getUTCSeconds());Tn.range;const Lf=Be(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zt)},(e,t)=>{e.setTime(+e+t*pt)},(e,t)=>(t-e)/pt,e=>e.getMinutes());Lf.range;const Rf=Be(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*pt)},(e,t)=>(t-e)/pt,e=>e.getUTCMinutes());Rf.range;const Bf=Be(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zt-e.getMinutes()*pt)},(e,t)=>{e.setTime(+e+t*Kt)},(e,t)=>(t-e)/Kt,e=>e.getHours());Bf.range;const Ff=Be(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kt)},(e,t)=>(t-e)/Kt,e=>e.getUTCHours());Ff.range;const Sa=Be(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pt)/Jt,e=>e.getDate()-1);Sa.range;const Fs=Be(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jt,e=>e.getUTCDate()-1);Fs.range;const Pv=Be(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Jt,e=>Math.floor(e/Jt));Pv.range;function Hn(e){return Be(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*pt)/Df)}const Us=Hn(0),Bo=Hn(1),xM=Hn(2),wM=Hn(3),$r=Hn(4),_M=Hn(5),SM=Hn(6);Us.range;Bo.range;xM.range;wM.range;$r.range;_M.range;SM.range;function Vn(e){return Be(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Df)}const qs=Vn(0),Fo=Vn(1),OM=Vn(2),AM=Vn(3),Pr=Vn(4),jM=Vn(5),$M=Vn(6);qs.range;Fo.range;OM.range;AM.range;Pr.range;jM.range;$M.range;const Uf=Be(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Uf.range;const qf=Be(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());qf.range;const Qt=Be(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Be(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qt.range;const Zt=Be(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Be(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Zt.range;function Tv(e,t,n,r,i,a){const o=[[Tn,1,zt],[Tn,5,5*zt],[Tn,15,15*zt],[Tn,30,30*zt],[a,1,pt],[a,5,5*pt],[a,15,15*pt],[a,30,30*pt],[i,1,Kt],[i,3,3*Kt],[i,6,6*Kt],[i,12,12*Kt],[r,1,Jt],[r,2,2*Jt],[n,1,Df],[t,1,Sp],[t,3,3*Sp],[e,1,Ml]];function s(c,f,u){const d=f<c;d&&([c,f]=[f,c]);const p=u&&typeof u.range=="function"?u:l(c,f,u),v=p?p.range(c,+f+1):[];return d?v.reverse():v}function l(c,f,u){const d=Math.abs(f-c)/u,p=Of(([,,g])=>g).right(o,d);if(p===o.length)return e.every(zc(c/Ml,f/Ml,u));if(p===0)return Ro.every(Math.max(zc(c,f,u),1));const[v,m]=o[d/o[p-1][2]<o[p][2]/d?p-1:p];return v.every(m)}return[s,l]}const[PM,TM]=Tv(Zt,qf,qs,Pv,Ff,Rf),[EM,NM]=Tv(Qt,Uf,Us,Sa,Bf,Lf);function Dl(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ll(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pi(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function kM(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=mi(i),f=gi(i),u=mi(a),d=gi(a),p=mi(o),v=gi(o),m=mi(s),g=gi(s),w=mi(l),b=gi(l),_={a:D,A:L,b:R,B:K,c:null,d:Tp,e:Tp,f:t2,g:f2,G:h2,H:QM,I:ZM,j:e2,L:Ev,m:n2,M:r2,p:V,q:z,Q:kp,s:Cp,S:i2,u:a2,U:o2,V:s2,w:l2,W:c2,x:null,X:null,y:u2,Y:d2,Z:p2,"%":Np},S={a:X,A:ne,b:he,B:Fe,c:null,d:Ep,e:Ep,f:v2,g:P2,G:E2,H:m2,I:g2,j:y2,L:kv,m:b2,M:x2,p:et,q:ke,Q:kp,s:Cp,S:w2,u:_2,U:S2,V:O2,w:A2,W:j2,x:null,X:null,y:$2,Y:T2,Z:N2,"%":Np},y={a:T,A:N,b:A,B:E,c:k,d:$p,e:$p,f:GM,g:jp,G:Ap,H:Pp,I:Pp,j:KM,L:VM,m:zM,M:WM,p:$,q:qM,Q:XM,s:JM,S:HM,u:LM,U:RM,V:BM,w:DM,W:FM,x:C,X:M,y:jp,Y:Ap,Z:UM,"%":YM};_.x=x(n,_),_.X=x(r,_),_.c=x(t,_),S.x=x(n,S),S.X=x(r,S),S.c=x(t,S);function x(H,U){return function(J){var F=[],re=-1,ee=0,pe=H.length,me,Me,tt;for(J instanceof Date||(J=new Date(+J));++re<pe;)H.charCodeAt(re)===37&&(F.push(H.slice(ee,re)),(Me=Op[me=H.charAt(++re)])!=null?me=H.charAt(++re):Me=me==="e"?" ":"0",(tt=U[me])&&(me=tt(J,Me)),F.push(me),ee=re+1);return F.push(H.slice(ee,re)),F.join("")}}function O(H,U){return function(J){var F=pi(1900,void 0,1),re=j(F,H,J+="",0),ee,pe;if(re!=J.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(U&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(ee=Ll(pi(F.y,0,1)),pe=ee.getUTCDay(),ee=pe>4||pe===0?Fo.ceil(ee):Fo(ee),ee=Fs.offset(ee,(F.V-1)*7),F.y=ee.getUTCFullYear(),F.m=ee.getUTCMonth(),F.d=ee.getUTCDate()+(F.w+6)%7):(ee=Dl(pi(F.y,0,1)),pe=ee.getDay(),ee=pe>4||pe===0?Bo.ceil(ee):Bo(ee),ee=Sa.offset(ee,(F.V-1)*7),F.y=ee.getFullYear(),F.m=ee.getMonth(),F.d=ee.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),pe="Z"in F?Ll(pi(F.y,0,1)).getUTCDay():Dl(pi(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(pe+5)%7:F.w+F.U*7-(pe+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,Ll(F)):Dl(F)}}function j(H,U,J,F){for(var re=0,ee=U.length,pe=J.length,me,Me;re<ee;){if(F>=pe)return-1;if(me=U.charCodeAt(re++),me===37){if(me=U.charAt(re++),Me=y[me in Op?U.charAt(re++):me],!Me||(F=Me(H,J,F))<0)return-1}else if(me!=J.charCodeAt(F++))return-1}return F}function $(H,U,J){var F=c.exec(U.slice(J));return F?(H.p=f.get(F[0].toLowerCase()),J+F[0].length):-1}function T(H,U,J){var F=p.exec(U.slice(J));return F?(H.w=v.get(F[0].toLowerCase()),J+F[0].length):-1}function N(H,U,J){var F=u.exec(U.slice(J));return F?(H.w=d.get(F[0].toLowerCase()),J+F[0].length):-1}function A(H,U,J){var F=w.exec(U.slice(J));return F?(H.m=b.get(F[0].toLowerCase()),J+F[0].length):-1}function E(H,U,J){var F=m.exec(U.slice(J));return F?(H.m=g.get(F[0].toLowerCase()),J+F[0].length):-1}function k(H,U,J){return j(H,t,U,J)}function C(H,U,J){return j(H,n,U,J)}function M(H,U,J){return j(H,r,U,J)}function D(H){return o[H.getDay()]}function L(H){return a[H.getDay()]}function R(H){return l[H.getMonth()]}function K(H){return s[H.getMonth()]}function V(H){return i[+(H.getHours()>=12)]}function z(H){return 1+~~(H.getMonth()/3)}function X(H){return o[H.getUTCDay()]}function ne(H){return a[H.getUTCDay()]}function he(H){return l[H.getUTCMonth()]}function Fe(H){return s[H.getUTCMonth()]}function et(H){return i[+(H.getUTCHours()>=12)]}function ke(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var U=x(H+="",_);return U.toString=function(){return H},U},parse:function(H){var U=O(H+="",!1);return U.toString=function(){return H},U},utcFormat:function(H){var U=x(H+="",S);return U.toString=function(){return H},U},utcParse:function(H){var U=O(H+="",!0);return U.toString=function(){return H},U}}}var Op={"-":"",_:" ",0:"0"},qe=/^\s*\d+/,CM=/^%/,IM=/[\\^$*+?|[\]().{}]/g;function de(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function MM(e){return e.replace(IM,"\\$&")}function mi(e){return new RegExp("^(?:"+e.map(MM).join("|")+")","i")}function gi(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function DM(e,t,n){var r=qe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function LM(e,t,n){var r=qe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function RM(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function BM(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function FM(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ap(e,t,n){var r=qe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function jp(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function UM(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function qM(e,t,n){var r=qe.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function zM(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function $p(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function KM(e,t,n){var r=qe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Pp(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function WM(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function HM(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function VM(e,t,n){var r=qe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function GM(e,t,n){var r=qe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function YM(e,t,n){var r=CM.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function XM(e,t,n){var r=qe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function JM(e,t,n){var r=qe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Tp(e,t){return de(e.getDate(),t,2)}function QM(e,t){return de(e.getHours(),t,2)}function ZM(e,t){return de(e.getHours()%12||12,t,2)}function e2(e,t){return de(1+Sa.count(Qt(e),e),t,3)}function Ev(e,t){return de(e.getMilliseconds(),t,3)}function t2(e,t){return Ev(e,t)+"000"}function n2(e,t){return de(e.getMonth()+1,t,2)}function r2(e,t){return de(e.getMinutes(),t,2)}function i2(e,t){return de(e.getSeconds(),t,2)}function a2(e){var t=e.getDay();return t===0?7:t}function o2(e,t){return de(Us.count(Qt(e)-1,e),t,2)}function Nv(e){var t=e.getDay();return t>=4||t===0?$r(e):$r.ceil(e)}function s2(e,t){return e=Nv(e),de($r.count(Qt(e),e)+(Qt(e).getDay()===4),t,2)}function l2(e){return e.getDay()}function c2(e,t){return de(Bo.count(Qt(e)-1,e),t,2)}function u2(e,t){return de(e.getFullYear()%100,t,2)}function f2(e,t){return e=Nv(e),de(e.getFullYear()%100,t,2)}function d2(e,t){return de(e.getFullYear()%1e4,t,4)}function h2(e,t){var n=e.getDay();return e=n>=4||n===0?$r(e):$r.ceil(e),de(e.getFullYear()%1e4,t,4)}function p2(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+de(t/60|0,"0",2)+de(t%60,"0",2)}function Ep(e,t){return de(e.getUTCDate(),t,2)}function m2(e,t){return de(e.getUTCHours(),t,2)}function g2(e,t){return de(e.getUTCHours()%12||12,t,2)}function y2(e,t){return de(1+Fs.count(Zt(e),e),t,3)}function kv(e,t){return de(e.getUTCMilliseconds(),t,3)}function v2(e,t){return kv(e,t)+"000"}function b2(e,t){return de(e.getUTCMonth()+1,t,2)}function x2(e,t){return de(e.getUTCMinutes(),t,2)}function w2(e,t){return de(e.getUTCSeconds(),t,2)}function _2(e){var t=e.getUTCDay();return t===0?7:t}function S2(e,t){return de(qs.count(Zt(e)-1,e),t,2)}function Cv(e){var t=e.getUTCDay();return t>=4||t===0?Pr(e):Pr.ceil(e)}function O2(e,t){return e=Cv(e),de(Pr.count(Zt(e),e)+(Zt(e).getUTCDay()===4),t,2)}function A2(e){return e.getUTCDay()}function j2(e,t){return de(Fo.count(Zt(e)-1,e),t,2)}function $2(e,t){return de(e.getUTCFullYear()%100,t,2)}function P2(e,t){return e=Cv(e),de(e.getUTCFullYear()%100,t,2)}function T2(e,t){return de(e.getUTCFullYear()%1e4,t,4)}function E2(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pr(e):Pr.ceil(e),de(e.getUTCFullYear()%1e4,t,4)}function N2(){return"+0000"}function Np(){return"%"}function kp(e){return+e}function Cp(e){return Math.floor(+e/1e3)}var Zn,Iv,Mv;k2({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function k2(e){return Zn=kM(e),Iv=Zn.format,Zn.parse,Mv=Zn.utcFormat,Zn.utcParse,Zn}function C2(e){return new Date(e)}function I2(e){return e instanceof Date?+e:+new Date(+e)}function zf(e,t,n,r,i,a,o,s,l,c){var f=Tf(),u=f.invert,d=f.domain,p=c(".%L"),v=c(":%S"),m=c("%I:%M"),g=c("%I %p"),w=c("%a %d"),b=c("%b %d"),_=c("%B"),S=c("%Y");function y(x){return(l(x)<x?p:s(x)<x?v:o(x)<x?m:a(x)<x?g:r(x)<x?i(x)<x?w:b:n(x)<x?_:S)(x)}return f.invert=function(x){return new Date(u(x))},f.domain=function(x){return arguments.length?d(Array.from(x,I2)):d().map(C2)},f.ticks=function(x){var O=d();return e(O[0],O[O.length-1],x??10)},f.tickFormat=function(x,O){return O==null?y:c(O)},f.nice=function(x){var O=d();return(!x||typeof x.range!="function")&&(x=t(O[0],O[O.length-1],x??10)),x?d(wv(O,x)):f},f.copy=function(){return _a(f,zf(e,t,n,r,i,a,o,s,l,c))},f}function M2(){return wt.apply(zf(EM,NM,Qt,Uf,Us,Sa,Bf,Lf,Tn,Iv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function D2(){return wt.apply(zf(PM,TM,Zt,qf,qs,Fs,Ff,Rf,Tn,Mv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zs(){var e=0,t=1,n,r,i,a,o=Ze,s=!1,l;function c(u){return u==null||isNaN(u=+u)?l:o(i===0?.5:(u=(a(u)-n)*i,s?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([e,t]=u,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(u){return arguments.length?(s=!!u,c):s},c.interpolator=function(u){return arguments.length?(o=u,c):o};function f(u){return function(d){var p,v;return arguments.length?([p,v]=d,o=u(p,v),c):[o(0),o(1)]}}return c.range=f(Zr),c.rangeRound=f(Pf),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return a=u,n=u(e),r=u(t),i=n===r?0:1/(r-n),c}}function vn(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Dv(){var e=yn(zs()(Ze));return e.copy=function(){return vn(e,Dv())},an.apply(e,arguments)}function Lv(){var e=kf(zs()).domain([1,10]);return e.copy=function(){return vn(e,Lv()).base(e.base())},an.apply(e,arguments)}function Rv(){var e=Cf(zs());return e.copy=function(){return vn(e,Rv()).constant(e.constant())},an.apply(e,arguments)}function Kf(){var e=If(zs());return e.copy=function(){return vn(e,Kf()).exponent(e.exponent())},an.apply(e,arguments)}function L2(){return Kf.apply(null,arguments).exponent(.5)}function Bv(){var e=[],t=Ze;function n(r){if(r!=null&&!isNaN(r=+r))return t((xa(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(fn),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>SI(e,a/r))},n.copy=function(){return Bv(t).domain(e)},an.apply(n,arguments)}function Ks(){var e=0,t=.5,n=1,r=1,i,a,o,s,l,c=Ze,f,u=!1,d;function p(m){return isNaN(m=+m)?d:(m=.5+((m=+f(m))-a)*(r*m<r*a?s:l),c(u?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,i=f(e=+e),a=f(t=+t),o=f(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(u=!!m,p):u},p.interpolator=function(m){return arguments.length?(c=m,p):c};function v(m){return function(g){var w,b,_;return arguments.length?([w,b,_]=g,c=YI(m,[w,b,_]),p):[c(0),c(.5),c(1)]}}return p.range=v(Zr),p.rangeRound=v(Pf),p.unknown=function(m){return arguments.length?(d=m,p):d},function(m){return f=m,i=m(e),a=m(t),o=m(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,p}}function Fv(){var e=yn(Ks()(Ze));return e.copy=function(){return vn(e,Fv())},an.apply(e,arguments)}function Uv(){var e=kf(Ks()).domain([.1,1,10]);return e.copy=function(){return vn(e,Uv()).base(e.base())},an.apply(e,arguments)}function qv(){var e=Cf(Ks());return e.copy=function(){return vn(e,qv()).constant(e.constant())},an.apply(e,arguments)}function Wf(){var e=If(Ks());return e.copy=function(){return vn(e,Wf()).exponent(e.exponent())},an.apply(e,arguments)}function R2(){return Wf.apply(null,arguments).exponent(.5)}const Ip=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ri,scaleDiverging:Fv,scaleDivergingLog:Uv,scaleDivergingPow:Wf,scaleDivergingSqrt:R2,scaleDivergingSymlog:qv,scaleIdentity:xv,scaleImplicit:Kc,scaleLinear:Lo,scaleLog:_v,scaleOrdinal:Af,scalePoint:Ai,scalePow:Mf,scaleQuantile:Av,scaleQuantize:jv,scaleRadial:Ov,scaleSequential:Dv,scaleSequentialLog:Lv,scaleSequentialPow:Kf,scaleSequentialQuantile:Bv,scaleSequentialSqrt:L2,scaleSequentialSymlog:Rv,scaleSqrt:vM,scaleSymlog:Sv,scaleThreshold:$v,scaleTime:M2,scaleUtc:D2,tickFormat:bv},Symbol.toStringTag,{value:"Module"}));var B2=Kr;function F2(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],o=t(a);if(o!=null&&(s===void 0?o===o&&!B2(o):n(o,s)))var s=o,l=a}return l}var zv=F2;function U2(e,t){return e>t}var q2=U2,z2=zv,K2=q2,W2=Jr;function H2(e){return e&&e.length?z2(e,W2,K2):void 0}var V2=H2;const Ws=Ae(V2);function G2(e,t){return e<t}var Y2=G2,X2=zv,J2=Y2,Q2=Jr;function Z2(e){return e&&e.length?X2(e,Q2,J2):void 0}var eD=Z2;const Hs=Ae(eD);var tD=af,nD=gn,rD=Xy,iD=it;function aD(e,t){var n=iD(e)?tD:rD;return n(e,nD(t))}var oD=aD,sD=Gy,lD=oD;function cD(e,t){return sD(lD(e,t),1)}var uD=cD;const fD=Ae(uD);var dD=xf;function hD(e,t){return dD(e,t)}var pD=hD;const Vs=Ae(pD);var ei=1e9,mD={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Vf,je=!0,vt="[DecimalError] ",Dn=vt+"Invalid argument: ",Hf=vt+"Exponent out of range: ",ti=Math.floor,An=Math.pow,gD=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lt,Ue=1e7,Oe=7,Kv=9007199254740991,Uo=ti(Kv/Oe),Y={};Y.absoluteValue=Y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Y.comparedTo=Y.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Y.decimalPlaces=Y.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Oe;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Y.dividedBy=Y.div=function(e){return Yt(this,new this.constructor(e))};Y.dividedToIntegerBy=Y.idiv=function(e){var t=this,n=t.constructor;return be(Yt(t,new n(e),0,1),n.precision)};Y.equals=Y.eq=function(e){return!this.cmp(e)};Y.exponent=function(){return Ie(this)};Y.greaterThan=Y.gt=function(e){return this.cmp(e)>0};Y.greaterThanOrEqualTo=Y.gte=function(e){return this.cmp(e)>=0};Y.isInteger=Y.isint=function(){return this.e>this.d.length-2};Y.isNegative=Y.isneg=function(){return this.s<0};Y.isPositive=Y.ispos=function(){return this.s>0};Y.isZero=function(){return this.s===0};Y.lessThan=Y.lt=function(e){return this.cmp(e)<0};Y.lessThanOrEqualTo=Y.lte=function(e){return this.cmp(e)<1};Y.logarithm=Y.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(lt))throw Error(vt+"NaN");if(n.s<1)throw Error(vt+(n.s?"NaN":"-Infinity"));return n.eq(lt)?new r(0):(je=!1,t=Yt(zi(n,a),zi(e,a),a),je=!0,be(t,i))};Y.minus=Y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Vv(t,e):Wv(t,(e.s=-e.s,e))};Y.modulo=Y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(vt+"NaN");return n.s?(je=!1,t=Yt(n,e,0,1).times(e),je=!0,n.minus(t)):be(new r(n),i)};Y.naturalExponential=Y.exp=function(){return Hv(this)};Y.naturalLogarithm=Y.ln=function(){return zi(this)};Y.negated=Y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Y.plus=Y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Wv(t,e):Vv(t,(e.s=-e.s,e))};Y.precision=Y.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Dn+e);if(t=Ie(i)+1,r=i.d.length-1,n=r*Oe+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Y.squareRoot=Y.sqrt=function(){var e,t,n,r,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(vt+"NaN")}for(e=Ie(s),je=!1,i=Math.sqrt(+s),i==0||i==1/0?(t=It(s.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=ti((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new l(t)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(a=r,r=a.plus(Yt(s,a,o+2)).times(.5),It(a.d).slice(0,o)===(t=It(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(be(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(t!="9999")break;o+=4}return je=!0,be(r,n)};Y.times=Y.mul=function(e){var t,n,r,i,a,o,s,l,c,f=this,u=f.constructor,d=f.d,p=(e=new u(e)).d;if(!f.s||!e.s)return new u(0);for(e.s*=f.s,n=f.e+e.e,l=d.length,c=p.length,l<c&&(a=d,d=p,p=a,o=l,l=c,c=o),a=[],o=l+c,r=o;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,i=l+r;i>r;)s=a[i]+p[r]*d[i-r-1]+t,a[i--]=s%Ue|0,t=s/Ue|0;a[i]=(a[i]+t)%Ue|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,je?be(e,u.precision):e};Y.toDecimalPlaces=Y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Bt(e,0,ei),t===void 0?t=r.rounding:Bt(t,0,8),be(n,e+Ie(n)+1,t))};Y.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Fn(r,!0):(Bt(e,0,ei),t===void 0?t=i.rounding:Bt(t,0,8),r=be(new i(r),e+1,t),n=Fn(r,!0,e+1)),n};Y.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Fn(i):(Bt(e,0,ei),t===void 0?t=a.rounding:Bt(t,0,8),r=be(new a(i),e+Ie(i)+1,t),n=Fn(r.abs(),!1,e+Ie(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Y.toInteger=Y.toint=function(){var e=this,t=e.constructor;return be(new t(e),Ie(e)+1,t.rounding)};Y.toNumber=function(){return+this};Y.toPower=Y.pow=function(e){var t,n,r,i,a,o,s=this,l=s.constructor,c=12,f=+(e=new l(e));if(!e.s)return new l(lt);if(s=new l(s),!s.s){if(e.s<1)throw Error(vt+"Infinity");return s}if(s.eq(lt))return s;if(r=l.precision,e.eq(lt))return be(s,r);if(t=e.e,n=e.d.length-1,o=t>=n,a=s.s,o){if((n=f<0?-f:f)<=Kv){for(i=new l(lt),t=Math.ceil(r/Oe+4),je=!1;n%2&&(i=i.times(s),Dp(i.d,t)),n=ti(n/2),n!==0;)s=s.times(s),Dp(s.d,t);return je=!0,e.s<0?new l(lt).div(i):be(i,r)}}else if(a<0)throw Error(vt+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,je=!1,i=e.times(zi(s,r+c)),je=!0,i=Hv(i),i.s=a,i};Y.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=Ie(i),r=Fn(i,n<=a.toExpNeg||n>=a.toExpPos)):(Bt(e,1,ei),t===void 0?t=a.rounding:Bt(t,0,8),i=be(new a(i),e,t),n=Ie(i),r=Fn(i,e<=n||n<=a.toExpNeg,e)),r};Y.toSignificantDigits=Y.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Bt(e,1,ei),t===void 0?t=r.rounding:Bt(t,0,8)),be(new r(n),e,t)};Y.toString=Y.valueOf=Y.val=Y.toJSON=Y[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ie(e),n=e.constructor;return Fn(e,t<=n.toExpNeg||t>=n.toExpPos)};function Wv(e,t){var n,r,i,a,o,s,l,c,f=e.constructor,u=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),je?be(t,u):t;if(l=e.d,c=t.d,o=e.e,i=t.e,l=l.slice(),a=o-i,a){for(a<0?(r=l,a=-a,s=c.length):(r=c,i=o,s=l.length),o=Math.ceil(u/Oe),s=o>s?o+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/Ue|0,l[a]%=Ue;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=i,je?be(t,u):t}function Bt(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Dn+e)}function It(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=Oe-r.length,n&&(a+=sn(n)),a+=r;o=e[t],r=o+"",n=Oe-r.length,n&&(a+=sn(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Yt=function(){function e(r,i){var a,o=0,s=r.length;for(r=r.slice();s--;)a=r[s]*i+o,r[s]=a%Ue|0,o=a/Ue|0;return o&&r.unshift(o),r}function t(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Ue+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var s,l,c,f,u,d,p,v,m,g,w,b,_,S,y,x,O,j,$=r.constructor,T=r.s==i.s?1:-1,N=r.d,A=i.d;if(!r.s)return new $(r);if(!i.s)throw Error(vt+"Division by zero");for(l=r.e-i.e,O=A.length,y=N.length,p=new $(T),v=p.d=[],c=0;A[c]==(N[c]||0);)++c;if(A[c]>(N[c]||0)&&--l,a==null?b=a=$.precision:o?b=a+(Ie(r)-Ie(i))+1:b=a,b<0)return new $(0);if(b=b/Oe+2|0,c=0,O==1)for(f=0,A=A[0],b++;(c<y||f)&&b--;c++)_=f*Ue+(N[c]||0),v[c]=_/A|0,f=_%A|0;else{for(f=Ue/(A[0]+1)|0,f>1&&(A=e(A,f),N=e(N,f),O=A.length,y=N.length),S=O,m=N.slice(0,O),g=m.length;g<O;)m[g++]=0;j=A.slice(),j.unshift(0),x=A[0],A[1]>=Ue/2&&++x;do f=0,s=t(A,m,O,g),s<0?(w=m[0],O!=g&&(w=w*Ue+(m[1]||0)),f=w/x|0,f>1?(f>=Ue&&(f=Ue-1),u=e(A,f),d=u.length,g=m.length,s=t(u,m,d,g),s==1&&(f--,n(u,O<d?j:A,d))):(f==0&&(s=f=1),u=A.slice()),d=u.length,d<g&&u.unshift(0),n(m,u,g),s==-1&&(g=m.length,s=t(A,m,O,g),s<1&&(f++,n(m,O<g?j:A,g))),g=m.length):s===0&&(f++,m=[0]),v[c++]=f,s&&m[0]?m[g++]=N[S]||0:(m=[N[S]],g=1);while((S++<y||m[0]!==void 0)&&b--)}return v[0]||v.shift(),p.e=l,be(p,o?a+Ie(p)+1:a)}}();function Hv(e,t){var n,r,i,a,o,s,l=0,c=0,f=e.constructor,u=f.precision;if(Ie(e)>16)throw Error(Hf+Ie(e));if(!e.s)return new f(lt);for(je=!1,s=u,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(r=Math.log(An(2,c))/Math.LN10*2+5|0,s+=r,n=i=a=new f(lt),f.precision=s;;){if(i=be(i.times(e),s),n=n.times(++l),o=a.plus(Yt(i,n,s)),It(o.d).slice(0,s)===It(a.d).slice(0,s)){for(;c--;)a=be(a.times(a),s);return f.precision=u,t==null?(je=!0,be(a,u)):a}a=o}}function Ie(e){for(var t=e.e*Oe,n=e.d[0];n>=10;n/=10)t++;return t}function Rl(e,t,n){if(t>e.LN10.sd())throw je=!0,n&&(e.precision=n),Error(vt+"LN10 precision limit exceeded");return be(new e(e.LN10),t)}function sn(e){for(var t="";e--;)t+="0";return t}function zi(e,t){var n,r,i,a,o,s,l,c,f,u=1,d=10,p=e,v=p.d,m=p.constructor,g=m.precision;if(p.s<1)throw Error(vt+(p.s?"NaN":"-Infinity"));if(p.eq(lt))return new m(0);if(t==null?(je=!1,c=g):c=t,p.eq(10))return t==null&&(je=!0),Rl(m,c);if(c+=d,m.precision=c,n=It(v),r=n.charAt(0),a=Ie(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=It(p.d),r=n.charAt(0),u++;a=Ie(p),r>1?(p=new m("0."+n),a++):p=new m(r+"."+n.slice(1))}else return l=Rl(m,c+2,g).times(a+""),p=zi(new m(r+"."+n.slice(1)),c-d).plus(l),m.precision=g,t==null?(je=!0,be(p,g)):p;for(s=o=p=Yt(p.minus(lt),p.plus(lt),c),f=be(p.times(p),c),i=3;;){if(o=be(o.times(f),c),l=s.plus(Yt(o,new m(i),c)),It(l.d).slice(0,c)===It(s.d).slice(0,c))return s=s.times(2),a!==0&&(s=s.plus(Rl(m,c+2,g).times(a+""))),s=Yt(s,new m(u),c),m.precision=g,t==null?(je=!0,be(s,g)):s;s=l,i+=2}}function Mp(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=ti(n/Oe),e.d=[],r=(n+1)%Oe,n<0&&(r+=Oe),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Oe;r<i;)e.d.push(+t.slice(r,r+=Oe));t=t.slice(r),r=Oe-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),je&&(e.e>Uo||e.e<-Uo))throw Error(Hf+n)}else e.s=0,e.e=0,e.d=[0];return e}function be(e,t,n){var r,i,a,o,s,l,c,f,u=e.d;for(o=1,a=u[0];a>=10;a/=10)o++;if(r=t-o,r<0)r+=Oe,i=t,c=u[f=0];else{if(f=Math.ceil((r+1)/Oe),a=u.length,f>=a)return e;for(c=a=u[f],o=1;a>=10;a/=10)o++;r%=Oe,i=r-Oe+o}if(n!==void 0&&(a=An(10,o-i-1),s=c/a%10|0,l=t<0||u[f+1]!==void 0||c%a,l=n<4?(s||l)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?c/An(10,o-i):0:u[f-1])%10&1||n==(e.s<0?8:7))),t<1||!u[0])return l?(a=Ie(e),u.length=1,t=t-a-1,u[0]=An(10,(Oe-t%Oe)%Oe),e.e=ti(-t/Oe)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(r==0?(u.length=f,a=1,f--):(u.length=f+1,a=An(10,Oe-r),u[f]=i>0?(c/An(10,o-i)%An(10,i)|0)*a:0),l)for(;;)if(f==0){(u[0]+=a)==Ue&&(u[0]=1,++e.e);break}else{if(u[f]+=a,u[f]!=Ue)break;u[f--]=0,a=1}for(r=u.length;u[--r]===0;)u.pop();if(je&&(e.e>Uo||e.e<-Uo))throw Error(Hf+Ie(e));return e}function Vv(e,t){var n,r,i,a,o,s,l,c,f,u,d=e.constructor,p=d.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new d(e),je?be(t,p):t;if(l=e.d,u=t.d,r=t.e,c=e.e,l=l.slice(),o=c-r,o){for(f=o<0,f?(n=l,o=-o,s=u.length):(n=u,r=c,s=l.length),i=Math.max(Math.ceil(p/Oe),s)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=u.length,f=i<s,f&&(s=i),i=0;i<s;i++)if(l[i]!=u[i]){f=l[i]<u[i];break}o=0}for(f&&(n=l,l=u,u=n,t.s=-t.s),s=l.length,i=u.length-s;i>0;--i)l[s++]=0;for(i=u.length;i>o;){if(l[--i]<u[i]){for(a=i;a&&l[--a]===0;)l[a]=Ue-1;--l[a],l[i]+=Ue}l[i]-=u[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=r,je?be(t,p):t):new d(0)}function Fn(e,t,n){var r,i=Ie(e),a=It(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+sn(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+sn(-i-1)+a,n&&(r=n-o)>0&&(a+=sn(r))):i>=o?(a+=sn(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+sn(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=sn(r))),e.s<0?"-"+a:a}function Dp(e,t){if(e.length>t)return e.length=t,!0}function Gv(e){var t,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Dn+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return Mp(o,a.toString())}else if(typeof a!="string")throw Error(Dn+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,gD.test(a))Mp(o,a);else throw Error(Dn+a)}if(i.prototype=Y,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Gv,i.config=i.set=yD,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function yD(e){if(!e||typeof e!="object")throw Error(vt+"Object expected");var t,n,r,i=["precision",1,ei,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(ti(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Dn+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Dn+n+": "+r);return this}var Vf=Gv(mD);lt=new Vf(1);const ve=Vf;function vD(e){return _D(e)||wD(e)||xD(e)||bD()}function bD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xD(e,t){if(e){if(typeof e=="string")return Gc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gc(e,t)}}function wD(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _D(e){if(Array.isArray(e))return Gc(e)}function Gc(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var SD=function(t){return t},Yv={},Xv=function(t){return t===Yv},Lp=function(t){return function n(){return arguments.length===0||arguments.length===1&&Xv(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},OD=function e(t,n){return t===1?n:Lp(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==Yv}).length;return o>=t?n.apply(void 0,i):e(t-o,Lp(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var f=i.map(function(u){return Xv(u)?l.shift():u});return n.apply(void 0,vD(f).concat(l))}))})},Gs=function(t){return OD(t.length,t)},Yc=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},AD=Gs(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),jD=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return SD;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},Xc=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Jv=function(t){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(s,l){return s===n[l]})||(n=a,r=t.apply(void 0,a)),r}};function $D(e){var t;return e===0?t=1:t=Math.floor(new ve(e).abs().log(10).toNumber())+1,t}function PD(e,t,n){for(var r=new ve(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var TD=Gs(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),ED=Gs(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),ND=Gs(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Ys={rangeStep:PD,getDigitCount:$D,interpolateNumber:TD,uninterpolateNumber:ED,uninterpolateTruncation:ND};function Jc(e){return ID(e)||CD(e)||Qv(e)||kD()}function kD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CD(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ID(e){if(Array.isArray(e))return Qc(e)}function Ki(e,t){return LD(e)||DD(e,t)||Qv(e,t)||MD()}function MD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qv(e,t){if(e){if(typeof e=="string")return Qc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qc(e,t)}}function Qc(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function DD(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function LD(e){if(Array.isArray(e))return e}function Zv(e){var t=Ki(e,2),n=t[0],r=t[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function eb(e,t,n){if(e.lte(0))return new ve(0);var r=Ys.getDigitCount(e.toNumber()),i=new ve(10).pow(r),a=e.div(i),o=r!==1?.05:.1,s=new ve(Math.ceil(a.div(o).toNumber())).add(n).mul(o),l=s.mul(i);return t?l:new ve(Math.ceil(l))}function RD(e,t,n){var r=1,i=new ve(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new ve(10).pow(Ys.getDigitCount(e)-1),i=new ve(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new ve(Math.floor(e)))}else e===0?i=new ve(Math.floor((t-1)/2)):n||(i=new ve(Math.floor(e)));var o=Math.floor((t-1)/2),s=jD(AD(function(l){return i.add(new ve(l-o).mul(r)).toNumber()}),Yc);return s(0,t)}function tb(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new ve(0),tickMin:new ve(0),tickMax:new ve(0)};var a=eb(new ve(t).sub(e).div(n-1),r,i),o;e<=0&&t>=0?o=new ve(0):(o=new ve(e).add(t).div(2),o=o.sub(new ve(o).mod(a)));var s=Math.ceil(o.sub(e).div(a).toNumber()),l=Math.ceil(new ve(t).sub(o).div(a).toNumber()),c=s+l+1;return c>n?tb(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,s=t>0?s:s+(n-c)),{step:a,tickMin:o.sub(new ve(s).mul(a)),tickMax:o.add(new ve(l).mul(a))})}function BD(e){var t=Ki(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=Zv([n,r]),l=Ki(s,2),c=l[0],f=l[1];if(c===-1/0||f===1/0){var u=f===1/0?[c].concat(Jc(Yc(0,i-1).map(function(){return 1/0}))):[].concat(Jc(Yc(0,i-1).map(function(){return-1/0})),[f]);return n>r?Xc(u):u}if(c===f)return RD(c,i,a);var d=tb(c,f,o,a),p=d.step,v=d.tickMin,m=d.tickMax,g=Ys.rangeStep(v,m.add(new ve(.1).mul(p)),p);return n>r?Xc(g):g}function FD(e,t){var n=Ki(e,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Zv([r,i]),s=Ki(o,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var f=Math.max(t,2),u=eb(new ve(c).sub(l).div(f-1),a,0),d=[].concat(Jc(Ys.rangeStep(new ve(l),new ve(c).sub(new ve(.99).mul(u)),u)),[c]);return r>i?Xc(d):d}var UD=Jv(BD),qD=Jv(FD),zD="Invariant failed";function Un(e,t){throw new Error(zD)}var KD=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Tr(e){"@babel/helpers - typeof";return Tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(e)}function qo(){return qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qo.apply(this,arguments)}function WD(e,t){return YD(e)||GD(e,t)||VD(e,t)||HD()}function HD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VD(e,t){if(e){if(typeof e=="string")return Rp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rp(e,t)}}function Rp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GD(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function YD(e){if(Array.isArray(e))return e}function XD(e,t){if(e==null)return{};var n=JD(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function JD(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function QD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ib(r.key),r)}}function eL(e,t,n){return t&&ZD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tL(e,t,n){return t=zo(t),nL(e,nb()?Reflect.construct(t,n||[],zo(e).constructor):t.apply(e,n))}function nL(e,t){if(t&&(Tr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rL(e)}function rL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nb=function(){return!!e})()}function zo(e){return zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zo(e)}function iL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zc(e,t)}function Zc(e,t){return Zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Zc(e,t)}function rb(e,t,n){return t=ib(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ib(e){var t=aL(e,"string");return Tr(t)=="symbol"?t:t+""}function aL(e,t){if(Tr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Oa=function(e){function t(){return QD(this,t),tL(this,t,arguments)}return iL(t,e),eL(t,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,f=r.xAxis,u=r.yAxis,d=XD(r,KD),p=se(d,!1);this.props.direction==="x"&&f.type!=="number"&&Un();var v=l.map(function(m){var g=c(m,s),w=g.x,b=g.y,_=g.value,S=g.errorVal;if(!S)return null;var y=[],x,O;if(Array.isArray(S)){var j=WD(S,2);x=j[0],O=j[1]}else x=O=S;if(a==="vertical"){var $=f.scale,T=b+i,N=T+o,A=T-o,E=$(_-x),k=$(_+O);y.push({x1:k,y1:N,x2:k,y2:A}),y.push({x1:E,y1:T,x2:k,y2:T}),y.push({x1:E,y1:N,x2:E,y2:A})}else if(a==="horizontal"){var C=u.scale,M=w+i,D=M-o,L=M+o,R=C(_-x),K=C(_+O);y.push({x1:D,y1:K,x2:L,y2:K}),y.push({x1:M,y1:R,x2:M,y2:K}),y.push({x1:D,y1:R,x2:L,y2:R})}return I.createElement(Ne,qo({className:"recharts-errorBar",key:"bar-".concat(y.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},p),y.map(function(V){return I.createElement("line",qo({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return I.createElement(Ne,{className:"recharts-errorBars"},v)}}])}(I.Component);rb(Oa,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});rb(Oa,"displayName","ErrorBar");function Wi(e){"@babel/helpers - typeof";return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wi(e)}function Bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bp(Object(n),!0).forEach(function(r){oL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oL(e,t,n){return t=sL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sL(e){var t=lL(e,"string");return Wi(t)=="symbol"?t:t+""}function lL(e,t){if(Wi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Wi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ab=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,o=st(n,In);if(!o)return null;var s=In.defaultProps,l=s!==void 0?wn(wn({},s),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:a==="children"?c=(r||[]).reduce(function(f,u){var d=u.item,p=u.props,v=p.sectors||p.data||[];return f.concat(v.map(function(m){return{type:o.props.iconType||d.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):c=(r||[]).map(function(f){var u=f.item,d=u.type.defaultProps,p=d!==void 0?wn(wn({},d),u.props):{},v=p.dataKey,m=p.name,g=p.legendType,w=p.hide;return{inactive:w,dataKey:v,type:l.iconType||g||"square",color:Gf(u),value:m||v,payload:p}}),wn(wn(wn({},l),In.getWithHeight(o,i)),{},{payload:c,item:o})};function Hi(e){"@babel/helpers - typeof";return Hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hi(e)}function Fp(e){return dL(e)||fL(e)||uL(e)||cL()}function cL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uL(e,t){if(e){if(typeof e=="string")return eu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eu(e,t)}}function fL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dL(e){if(Array.isArray(e))return eu(e)}function eu(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Up(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Up(Object(n),!0).forEach(function(r){yr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Up(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yr(e,t,n){return t=hL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hL(e){var t=pL(e,"string");return Hi(t)=="symbol"?t:t+""}function pL(e,t){if(Hi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Hi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ut(e,t,n){return oe(e)||oe(t)?n:Re(t)?mt(e,t,n):ae(t)?t(e):n}function ji(e,t,n,r){var i=fD(e,function(s){return ut(s,t)});if(n==="number"){var a=i.filter(function(s){return W(s)||parseFloat(s)});return a.length?[Hs(a),Ws(a)]:[1/0,-1/0]}var o=r?i.filter(function(s){return!oe(s)}):i;return o.map(function(s){return Re(s)||s instanceof Date?s:""})}var mL=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<s;c++){var f=c>0?i[c-1].coordinate:i[s-1].coordinate,u=i[c].coordinate,d=c>=s-1?i[0].coordinate:i[c+1].coordinate,p=void 0;if(Et(u-f)!==Et(d-u)){var v=[];if(Et(d-u)===Et(l[1]-l[0])){p=d;var m=u+l[1]-l[0];v[0]=Math.min(m,(m+f)/2),v[1]=Math.max(m,(m+f)/2)}else{p=f;var g=d+l[1]-l[0];v[0]=Math.min(u,(g+u)/2),v[1]=Math.max(u,(g+u)/2)}var w=[Math.min(u,(p+u)/2),Math.max(u,(p+u)/2)];if(t>w[0]&&t<=w[1]||t>=v[0]&&t<=v[1]){o=i[c].index;break}}else{var b=Math.min(f,d),_=Math.max(f,d);if(t>(b+u)/2&&t<=(_+u)/2){o=i[c].index;break}}}else for(var S=0;S<s;S++)if(S===0&&t<=(r[S].coordinate+r[S+1].coordinate)/2||S>0&&S<s-1&&t>(r[S].coordinate+r[S-1].coordinate)/2&&t<=(r[S].coordinate+r[S+1].coordinate)/2||S===s-1&&t>(r[S].coordinate+r[S-1].coordinate)/2){o=r[S].index;break}return o},Gf=function(t){var n,r=t,i=r.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Ee(Ee({},t.type.defaultProps),t.props):t.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},gL=function(t){var n=t.barSize,r=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,c=s.length;l<c;l++)for(var f=a[s[l]].stackGroups,u=Object.keys(f),d=0,p=u.length;d<p;d++){var v=f[u[d]],m=v.items,g=v.cateAxisId,w=m.filter(function(O){return Vt(O.type).indexOf("Bar")>=0});if(w&&w.length){var b=w[0].type.defaultProps,_=b!==void 0?Ee(Ee({},b),w[0].props):w[0].props,S=_.barSize,y=_[g];o[y]||(o[y]=[]);var x=oe(S)?n:S;o[y].push({item:w[0],stackList:w.slice(1),barSize:oe(x)?void 0:Bn(x,r,0)})}}return o},yL=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,a=t.sizeList,o=a===void 0?[]:a,s=t.maxBarSize,l=o.length;if(l<1)return null;var c=Bn(n,i,0,!0),f,u=[];if(o[0].barSize===+o[0].barSize){var d=!1,p=i/l,v=o.reduce(function(S,y){return S+y.barSize||0},0);v+=(l-1)*c,v>=i&&(v-=(l-1)*c,c=0),v>=i&&p>0&&(d=!0,p*=.9,v=l*p);var m=(i-v)/2>>0,g={offset:m-c,size:0};f=o.reduce(function(S,y){var x={item:y.item,position:{offset:g.offset+g.size+c,size:d?p:y.barSize}},O=[].concat(Fp(S),[x]);return g=O[O.length-1].position,y.stackList&&y.stackList.length&&y.stackList.forEach(function(j){O.push({item:j,position:g})}),O},u)}else{var w=Bn(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var b=(i-2*w-(l-1)*c)/l;b>1&&(b>>=0);var _=s===+s?Math.min(b,s):b;f=o.reduce(function(S,y,x){var O=[].concat(Fp(S),[{item:y.item,position:{offset:w+(b+c)*x+(b-_)/2,size:_}}]);return y.stackList&&y.stackList.length&&y.stackList.forEach(function(j){O.push({item:j,position:O[O.length-1].position})}),O},u)}return f},vL=function(t,n,r,i){var a=r.children,o=r.width,s=r.margin,l=o-(s.left||0)-(s.right||0),c=ab({children:a,legendWidth:l});if(c){var f=i||{},u=f.width,d=f.height,p=c.align,v=c.verticalAlign,m=c.layout;if((m==="vertical"||m==="horizontal"&&v==="middle")&&p!=="center"&&W(t[p]))return Ee(Ee({},t),{},yr({},p,t[p]+(u||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&v!=="middle"&&W(t[v]))return Ee(Ee({},t),{},yr({},v,t[v]+(d||0)))}return t},bL=function(t,n,r){return oe(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},ob=function(t,n,r,i,a){var o=n.props.children,s=gt(o,Oa).filter(function(c){return bL(i,a,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return t.reduce(function(c,f){var u=ut(f,r);if(oe(u))return c;var d=Array.isArray(u)?[Hs(u),Ws(u)]:[u,u],p=l.reduce(function(v,m){var g=ut(f,m,0),w=d[0]-Math.abs(Array.isArray(g)?g[0]:g),b=d[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(w,v[0]),Math.max(b,v[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},xL=function(t,n,r,i,a){var o=n.map(function(s){return ob(t,s,r,a,i)}).filter(function(s){return!oe(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},sb=function(t,n,r,i,a){var o=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&ob(t,l,c,i)||ji(t,c,r,a)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,c){for(var f=0,u=c.length;f<u;f++)s[c[f]]||(s[c[f]]=!0,l.push(c[f]));return l},[])},lb=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},cb=function(t,n,r,i){if(i)return t.map(function(l){return l.coordinate});var a,o,s=t.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(o=!0),l.coordinate});return a||s.push(n),o||s.push(r),s},Wt=function(t,n,r){if(!t)return null;var i=t.scale,a=t.duplicateDomain,o=t.type,s=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Et(s[0]-s[1])*2*c:c,n&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(u){var d=a?a.indexOf(u):u;return{coordinate:i(d)+c,value:u,offset:c}});return f.filter(function(u){return!ya(u.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(u,d){return{coordinate:i(u)+c,value:u,index:d,offset:c}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(u){return{coordinate:i(u)+c,value:u,offset:c}}):i.domain().map(function(u,d){return{coordinate:i(u)+c,value:a?a[u]:u,index:d,offset:c}})},Bl=new WeakMap,Ua=function(t,n){if(typeof n!="function")return t;Bl.has(t)||Bl.set(t,new WeakMap);var r=Bl.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},wL=function(t,n,r){var i=t.scale,a=t.type,o=t.layout,s=t.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:Ri(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:Lo(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ai(),realScaleType:"point"}:a==="category"?{scale:Ri(),realScaleType:"band"}:{scale:Lo(),realScaleType:"linear"};if(Rn(i)){var l="scale".concat(ks(i));return{scale:(Ip[l]||Ai)(),realScaleType:Ip[l]?l:"point"}}return ae(i)?{scale:i}:{scale:Ai(),realScaleType:"point"}},qp=1e-4,_L=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),a=Math.min(i[0],i[1])-qp,o=Math.max(i[0],i[1])+qp,s=t(n[0]),l=t(n[r-1]);(s<a||s>o||l<a||l>o)&&t.domain([n[0],n[r-1]])}},SL=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},OL=function(t,n){if(!n||n.length!==2||!W(n[0])||!W(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!W(t[0])||t[0]<r)&&(a[0]=r),(!W(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},AL=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,o=0,s=0;s<n;++s){var l=ya(t[s][r][1])?t[s][r][0]:t[s][r][1];l>=0?(t[s][r][0]=a,t[s][r][1]=a+l,a=t[s][r][1]):(t[s][r][0]=o,t[s][r][1]=o+l,o=t[s][r][1])}},jL=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,o=0;o<n;++o){var s=ya(t[o][r][1])?t[o][r][0]:t[o][r][1];s>=0?(t[o][r][0]=a,t[o][r][1]=a+s,a=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},$L={sign:AL,expand:qO,none:wr,silhouette:zO,wiggle:KO,positive:jL},PL=function(t,n,r){var i=n.map(function(s){return s.props.dataKey}),a=$L[r],o=UO().keys(i).value(function(s,l){return+ut(s,l,0)}).order(Ac).offset(a);return o(t)},TL=function(t,n,r,i,a,o){if(!t)return null;var s=o?n.reverse():n,l={},c=s.reduce(function(u,d){var p,v=(p=d.type)!==null&&p!==void 0&&p.defaultProps?Ee(Ee({},d.type.defaultProps),d.props):d.props,m=v.stackId,g=v.hide;if(g)return u;var w=v[r],b=u[w]||{hasStack:!1,stackGroups:{}};if(Re(m)){var _=b.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};_.items.push(d),b.hasStack=!0,b.stackGroups[m]=_}else b.stackGroups[va("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[d]};return Ee(Ee({},u),{},yr({},w,b))},l),f={};return Object.keys(c).reduce(function(u,d){var p=c[d];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,g){var w=p.stackGroups[g];return Ee(Ee({},m),{},yr({},g,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:PL(t,w.items,a)}))},v)}return Ee(Ee({},u),{},yr({},d,p))},f)},EL=function(t,n){var r=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=t.domain();if(!c.length)return null;var f=UD(c,a,s);return t.domain([Hs(f),Ws(f)]),{niceTicks:f}}if(a&&i==="number"){var u=t.domain(),d=qD(u,a,s);return{niceTicks:d}}return null};function zp(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!oe(i[t.dataKey])){var s=po(n,"value",i[t.dataKey]);if(s)return s.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=ut(i,oe(o)?t.dataKey:o);return oe(l)?null:t.scale(l)}var Kp=function(t){var n=t.axis,r=t.ticks,i=t.offset,a=t.bandSize,o=t.entry,s=t.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=ut(o,n.dataKey,n.domain[s]);return oe(l)?null:n.scale(l)-a/2+i},NL=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},kL=function(t,n){var r,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Ee(Ee({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(Re(a)){var o=n[a];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},CL=function(t){return t.reduce(function(n,r){return[Hs(r.concat([n[0]]).filter(W)),Ws(r.concat([n[1]]).filter(W))]},[1/0,-1/0])},ub=function(t,n,r){return Object.keys(t).reduce(function(i,a){var o=t[a],s=o.stackedData,l=s.reduce(function(c,f){var u=CL(f.slice(n,r+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Wp=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hp=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tu=function(t,n,r){if(ae(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(W(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(Wp.test(t[0])){var a=+Wp.exec(t[0])[1];i[0]=n[0]-a}else ae(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(W(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if(Hp.test(t[1])){var o=+Hp.exec(t[1])[1];i[1]=n[1]+o}else ae(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},Ko=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var a=_f(n,function(u){return u.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var c=a[s],f=a[s-1];o=Math.min((c.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},Vp=function(t,n,r){return!t||!t.length||Vs(t,mt(r,"type.defaultProps.domain"))?n:t},fb=function(t,n){var r=t.type.defaultProps?Ee(Ee({},t.type.defaultProps),t.props):t.props,i=r.dataKey,a=r.name,o=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,f=r.hide;return Ee(Ee({},se(t,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:Gf(t),value:ut(n,i),type:l,payload:n,chartType:c,hide:f})};function Vi(e){"@babel/helpers - typeof";return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(e)}function Gp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gp(Object(n),!0).forEach(function(r){IL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IL(e,t,n){return t=ML(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ML(e){var t=DL(e,"string");return Vi(t)=="symbol"?t:t+""}function DL(e,t){if(Vi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wo=Math.PI/180,LL=function(t){return t*180/Math.PI},We=function(t,n,r,i){return{x:t+Math.cos(-Wo*i)*r,y:n+Math.sin(-Wo*i)*r}},RL=function(t,n){var r=t.x,i=t.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},BL=function(t,n){var r=t.x,i=t.y,a=n.cx,o=n.cy,s=RL({x:r,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(r-a)/s,c=Math.acos(l);return i>o&&(c=2*Math.PI-c),{radius:s,angle:LL(c),angleInRadian:c}},FL=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:r-o*360}},UL=function(t,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),s=Math.min(a,o);return t+s*360},Xp=function(t,n){var r=t.x,i=t.y,a=BL({x:r,y:i},n),o=a.radius,s=a.angle,l=n.innerRadius,c=n.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var f=FL(n),u=f.startAngle,d=f.endAngle,p=s,v;if(u<=d){for(;p>d;)p-=360;for(;p<u;)p+=360;v=p>=u&&p<=d}else{for(;p>u;)p-=360;for(;p<d;)p+=360;v=p>=d&&p<=u}return v?Yp(Yp({},n),{},{radius:o,angle:UL(p,n)}):null};function Gi(e){"@babel/helpers - typeof";return Gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gi(e)}var qL=["offset"];function zL(e){return VL(e)||HL(e)||WL(e)||KL()}function KL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WL(e,t){if(e){if(typeof e=="string")return nu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nu(e,t)}}function HL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VL(e){if(Array.isArray(e))return nu(e)}function nu(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GL(e,t){if(e==null)return{};var n=YL(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function YL(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jp(Object(n),!0).forEach(function(r){XL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XL(e,t,n){return t=JL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JL(e){var t=QL(e,"string");return Gi(t)=="symbol"?t:t+""}function QL(e,t){if(Gi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yi(){return Yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yi.apply(this,arguments)}var ZL=function(t){var n=t.value,r=t.formatter,i=oe(t.children)?n:t.children;return ae(r)?r(i):i},eR=function(t,n){var r=Et(n-t),i=Math.min(Math.abs(n-t),360);return r*i},tR=function(t,n,r){var i=t.position,a=t.viewBox,o=t.offset,s=t.className,l=a,c=l.cx,f=l.cy,u=l.innerRadius,d=l.outerRadius,p=l.startAngle,v=l.endAngle,m=l.clockWise,g=(u+d)/2,w=eR(p,v),b=w>=0?1:-1,_,S;i==="insideStart"?(_=p+b*o,S=m):i==="insideEnd"?(_=v-b*o,S=!m):i==="end"&&(_=v+b*o,S=m),S=w<=0?S:!S;var y=We(c,f,g,_),x=We(c,f,g,_+(S?1:-1)*359),O="M".concat(y.x,",").concat(y.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(S?0:1,`,
    `).concat(x.x,",").concat(x.y),j=oe(t.id)?va("recharts-radial-line-"):t.id;return I.createElement("text",Yi({},r,{dominantBaseline:"central",className:ce("recharts-radial-bar-label",s)}),I.createElement("defs",null,I.createElement("path",{id:j,d:O})),I.createElement("textPath",{xlinkHref:"#".concat(j)},n))},nR=function(t){var n=t.viewBox,r=t.offset,i=t.position,a=n,o=a.cx,s=a.cy,l=a.innerRadius,c=a.outerRadius,f=a.startAngle,u=a.endAngle,d=(f+u)/2;if(i==="outside"){var p=We(o,s,c+r,d),v=p.x,m=p.y;return{x:v,y:m,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,w=We(o,s,g,d),b=w.x,_=w.y;return{x:b,y:_,textAnchor:"middle",verticalAnchor:"middle"}},rR=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,a=t.position,o=n,s=o.x,l=o.y,c=o.width,f=o.height,u=f>=0?1:-1,d=u*i,p=u>0?"end":"start",v=u>0?"start":"end",m=c>=0?1:-1,g=m*i,w=m>0?"end":"start",b=m>0?"start":"end";if(a==="top"){var _={x:s+c/2,y:l-u*i,textAnchor:"middle",verticalAnchor:p};return Le(Le({},_),r?{height:Math.max(l-r.y,0),width:c}:{})}if(a==="bottom"){var S={x:s+c/2,y:l+f+d,textAnchor:"middle",verticalAnchor:v};return Le(Le({},S),r?{height:Math.max(r.y+r.height-(l+f),0),width:c}:{})}if(a==="left"){var y={x:s-g,y:l+f/2,textAnchor:w,verticalAnchor:"middle"};return Le(Le({},y),r?{width:Math.max(y.x-r.x,0),height:f}:{})}if(a==="right"){var x={x:s+c+g,y:l+f/2,textAnchor:b,verticalAnchor:"middle"};return Le(Le({},x),r?{width:Math.max(r.x+r.width-x.x,0),height:f}:{})}var O=r?{width:c,height:f}:{};return a==="insideLeft"?Le({x:s+g,y:l+f/2,textAnchor:b,verticalAnchor:"middle"},O):a==="insideRight"?Le({x:s+c-g,y:l+f/2,textAnchor:w,verticalAnchor:"middle"},O):a==="insideTop"?Le({x:s+c/2,y:l+d,textAnchor:"middle",verticalAnchor:v},O):a==="insideBottom"?Le({x:s+c/2,y:l+f-d,textAnchor:"middle",verticalAnchor:p},O):a==="insideTopLeft"?Le({x:s+g,y:l+d,textAnchor:b,verticalAnchor:v},O):a==="insideTopRight"?Le({x:s+c-g,y:l+d,textAnchor:w,verticalAnchor:v},O):a==="insideBottomLeft"?Le({x:s+g,y:l+f-d,textAnchor:b,verticalAnchor:p},O):a==="insideBottomRight"?Le({x:s+c-g,y:l+f-d,textAnchor:w,verticalAnchor:p},O):Wr(a)&&(W(a.x)||$n(a.x))&&(W(a.y)||$n(a.y))?Le({x:s+Bn(a.x,c),y:l+Bn(a.y,f),textAnchor:"end",verticalAnchor:"end"},O):Le({x:s+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},O)},iR=function(t){return"cx"in t&&W(t.cx)};function Ye(e){var t=e.offset,n=t===void 0?5:t,r=GL(e,qL),i=Le({offset:n},r),a=i.viewBox,o=i.position,s=i.value,l=i.children,c=i.content,f=i.className,u=f===void 0?"":f,d=i.textBreakAll;if(!a||oe(s)&&oe(l)&&!P.isValidElement(c)&&!ae(c))return null;if(P.isValidElement(c))return P.cloneElement(c,i);var p;if(ae(c)){if(p=P.createElement(c,i),P.isValidElement(p))return p}else p=ZL(i);var v=iR(a),m=se(i,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return tR(i,p,m);var g=v?nR(i):rR(i);return I.createElement(Eo,Yi({className:ce("recharts-label",u)},m,g,{breakAll:d}),p)}Ye.displayName="Label";var db=function(t){var n=t.cx,r=t.cy,i=t.angle,a=t.startAngle,o=t.endAngle,s=t.r,l=t.radius,c=t.innerRadius,f=t.outerRadius,u=t.x,d=t.y,p=t.top,v=t.left,m=t.width,g=t.height,w=t.clockWise,b=t.labelViewBox;if(b)return b;if(W(m)&&W(g)){if(W(u)&&W(d))return{x:u,y:d,width:m,height:g};if(W(p)&&W(v))return{x:p,y:v,width:m,height:g}}return W(u)&&W(d)?{x:u,y:d,width:0,height:0}:W(n)&&W(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:c||0,outerRadius:f||l||s||0,clockWise:w}:t.viewBox?t.viewBox:{}},aR=function(t,n){return t?t===!0?I.createElement(Ye,{key:"label-implicit",viewBox:n}):Re(t)?I.createElement(Ye,{key:"label-implicit",viewBox:n,value:t}):P.isValidElement(t)?t.type===Ye?P.cloneElement(t,{key:"label-implicit",viewBox:n}):I.createElement(Ye,{key:"label-implicit",content:t,viewBox:n}):ae(t)?I.createElement(Ye,{key:"label-implicit",content:t,viewBox:n}):Wr(t)?I.createElement(Ye,Yi({viewBox:n},t,{key:"label-implicit"})):null:null},oR=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,a=db(t),o=gt(i,Ye).map(function(l,c){return P.cloneElement(l,{viewBox:n||a,key:"label-".concat(c)})});if(!r)return o;var s=aR(t.label,n||a);return[s].concat(zL(o))};Ye.parseViewBox=db;Ye.renderCallByParent=oR;function sR(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var lR=sR;const cR=Ae(lR);function Xi(e){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(e)}var uR=["valueAccessor"],fR=["data","dataKey","clockWise","id","textBreakAll"];function dR(e){return gR(e)||mR(e)||pR(e)||hR()}function hR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pR(e,t){if(e){if(typeof e=="string")return ru(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ru(e,t)}}function mR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gR(e){if(Array.isArray(e))return ru(e)}function ru(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ho.apply(this,arguments)}function Qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qp(Object(n),!0).forEach(function(r){yR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yR(e,t,n){return t=vR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vR(e){var t=bR(e,"string");return Xi(t)=="symbol"?t:t+""}function bR(e,t){if(Xi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function em(e,t){if(e==null)return{};var n=xR(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xR(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var wR=function(t){return Array.isArray(t.value)?cR(t.value):t.value};function dn(e){var t=e.valueAccessor,n=t===void 0?wR:t,r=em(e,uR),i=r.data,a=r.dataKey,o=r.clockWise,s=r.id,l=r.textBreakAll,c=em(r,fR);return!i||!i.length?null:I.createElement(Ne,{className:"recharts-label-list"},i.map(function(f,u){var d=oe(a)?n(f,u):ut(f&&f.payload,a),p=oe(s)?{}:{id:"".concat(s,"-").concat(u)};return I.createElement(Ye,Ho({},se(f,!0),c,p,{parentViewBox:f.parentViewBox,value:d,textBreakAll:l,viewBox:Ye.parseViewBox(oe(o)?f:Zp(Zp({},f),{},{clockWise:o})),key:"label-".concat(u),index:u}))}))}dn.displayName="LabelList";function _R(e,t){return e?e===!0?I.createElement(dn,{key:"labelList-implicit",data:t}):I.isValidElement(e)||ae(e)?I.createElement(dn,{key:"labelList-implicit",data:t,content:e}):Wr(e)?I.createElement(dn,Ho({data:t},e,{key:"labelList-implicit"})):null:null}function SR(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=gt(r,dn).map(function(o,s){return P.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!n)return i;var a=_R(e.label,t);return[a].concat(dR(i))}dn.renderCallByParent=SR;function Ji(e){"@babel/helpers - typeof";return Ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ji(e)}function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iu.apply(this,arguments)}function tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tm(Object(n),!0).forEach(function(r){OR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OR(e,t,n){return t=AR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AR(e){var t=jR(e,"string");return Ji(t)=="symbol"?t:t+""}function jR(e,t){if(Ji(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ji(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $R=function(t,n){var r=Et(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},qa=function(t){var n=t.cx,r=t.cy,i=t.radius,a=t.angle,o=t.sign,s=t.isExternal,l=t.cornerRadius,c=t.cornerIsExternal,f=l*(s?1:-1)+i,u=Math.asin(l/f)/Wo,d=c?a:a+o*u,p=We(n,r,f,d),v=We(n,r,i,d),m=c?a-o*u:a,g=We(n,r,f*Math.cos(u*Wo),m);return{center:p,circleTangency:v,lineTangency:g,theta:u}},hb=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.startAngle,s=t.endAngle,l=$R(o,s),c=o+l,f=We(n,r,a,o),u=We(n,r,a,c),d="M ".concat(f.x,",").concat(f.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(i>0){var p=We(n,r,i,o),v=We(n,r,i,c);d+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else d+="L ".concat(n,",").concat(r," Z");return d},PR=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,f=t.endAngle,u=Et(f-c),d=qa({cx:n,cy:r,radius:a,angle:c,sign:u,cornerRadius:o,cornerIsExternal:l}),p=d.circleTangency,v=d.lineTangency,m=d.theta,g=qa({cx:n,cy:r,radius:a,angle:f,sign:-u,cornerRadius:o,cornerIsExternal:l}),w=g.circleTangency,b=g.lineTangency,_=g.theta,S=l?Math.abs(c-f):Math.abs(c-f)-m-_;if(S<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):hb({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:f});var y="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(S>180),",").concat(+(u<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var x=qa({cx:n,cy:r,radius:i,angle:c,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),O=x.circleTangency,j=x.lineTangency,$=x.theta,T=qa({cx:n,cy:r,radius:i,angle:f,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),N=T.circleTangency,A=T.lineTangency,E=T.theta,k=l?Math.abs(c-f):Math.abs(c-f)-$-E;if(k<0&&o===0)return"".concat(y,"L").concat(n,",").concat(r,"Z");y+="L".concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(k>180),",").concat(+(u>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,"Z")}else y+="L".concat(n,",").concat(r,"Z");return y},TR={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},pb=function(t){var n=nm(nm({},TR),t),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,f=n.startAngle,u=n.endAngle,d=n.className;if(o<a||f===u)return null;var p=ce("recharts-sector",d),v=o-a,m=Bn(s,v,0,!0),g;return m>0&&Math.abs(f-u)<360?g=PR({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(m,v/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:u}):g=hb({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:f,endAngle:u}),I.createElement("path",iu({},se(n,!0),{className:p,d:g,role:"img"}))};function Qi(e){"@babel/helpers - typeof";return Qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qi(e)}function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},au.apply(this,arguments)}function rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function im(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rm(Object(n),!0).forEach(function(r){ER(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ER(e,t,n){return t=NR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NR(e){var t=kR(e,"string");return Qi(t)=="symbol"?t:t+""}function kR(e,t){if(Qi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Qi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var am={curveBasisClosed:EO,curveBasisOpen:NO,curveBasis:TO,curveBumpX:mO,curveBumpY:gO,curveLinearClosed:kO,curveLinear:Is,curveMonotoneX:CO,curveMonotoneY:IO,curveNatural:MO,curveStep:DO,curveStepAfter:RO,curveStepBefore:LO},za=function(t){return t.x===+t.x&&t.y===+t.y},yi=function(t){return t.x},vi=function(t){return t.y},CR=function(t,n){if(ae(t))return t;var r="curve".concat(ks(t));return(r==="curveMonotone"||r==="curveBump")&&n?am["".concat(r).concat(n==="vertical"?"Y":"X")]:am[r]||Is},IR=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,o=t.baseLine,s=t.layout,l=t.connectNulls,c=l===void 0?!1:l,f=CR(r,s),u=c?a.filter(function(m){return za(m)}):a,d;if(Array.isArray(o)){var p=c?o.filter(function(m){return za(m)}):o,v=u.map(function(m,g){return im(im({},m),{},{base:p[g]})});return s==="vertical"?d=Ca().y(vi).x1(yi).x0(function(m){return m.base.x}):d=Ca().x(yi).y1(vi).y0(function(m){return m.base.y}),d.defined(za).curve(f),d(v)}return s==="vertical"&&W(o)?d=Ca().y(vi).x1(yi).x0(o):W(o)?d=Ca().x(yi).y1(vi).y0(o):d=hy().x(yi).y(vi),d.defined(za).curve(f),d(u)},ou=function(t){var n=t.className,r=t.points,i=t.path,a=t.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?IR(t):i;return P.createElement("path",au({},se(t,!1),mo(t),{className:ce("recharts-curve",n),d:o,ref:a}))},MR=Object.getOwnPropertyNames,DR=Object.getOwnPropertySymbols,LR=Object.prototype.hasOwnProperty;function om(e,t){return function(r,i,a){return e(r,i,a)&&t(r,i,a)}}function Ka(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var a=i.cache,o=a.get(n),s=a.get(r);if(o&&s)return o===r&&s===n;a.set(n,r),a.set(r,n);var l=e(n,r,i);return a.delete(n),a.delete(r),l}}function RR(e){return e!=null?e[Symbol.toStringTag]:void 0}function sm(e){return MR(e).concat(DR(e))}var BR=Object.hasOwn||function(e,t){return LR.call(e,t)};function Gn(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var FR="__v",UR="__o",qR="_owner",lm=Object.getOwnPropertyDescriptor,cm=Object.keys;function zR(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function KR(e,t){return Gn(e.getTime(),t.getTime())}function WR(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function HR(e,t){return e===t}function um(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.entries(),o,s,l=0;(o=a.next())&&!o.done;){for(var c=t.entries(),f=!1,u=0;(s=c.next())&&!s.done;){if(i[u]){u++;continue}var d=o.value,p=s.value;if(n.equals(d[0],p[0],l,u,e,t,n)&&n.equals(d[1],p[1],d[0],p[0],e,t,n)){f=i[u]=!0;break}u++}if(!f)return!1;l++}return!0}var VR=Gn;function GR(e,t,n){var r=cm(e),i=r.length;if(cm(t).length!==i)return!1;for(;i-- >0;)if(!mb(e,t,n,r[i]))return!1;return!0}function bi(e,t,n){var r=sm(e),i=r.length;if(sm(t).length!==i)return!1;for(var a,o,s;i-- >0;)if(a=r[i],!mb(e,t,n,a)||(o=lm(e,a),s=lm(t,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function YR(e,t){return Gn(e.valueOf(),t.valueOf())}function XR(e,t){return e.source===t.source&&e.flags===t.flags}function fm(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.values(),o,s;(o=a.next())&&!o.done;){for(var l=t.values(),c=!1,f=0;(s=l.next())&&!s.done;){if(!i[f]&&n.equals(o.value,s.value,o.value,s.value,e,t,n)){c=i[f]=!0;break}f++}if(!c)return!1}return!0}function JR(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function QR(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function mb(e,t,n,r){return(r===qR||r===UR||r===FR)&&(e.$$typeof||t.$$typeof)?!0:BR(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var ZR="[object Arguments]",eB="[object Boolean]",tB="[object Date]",nB="[object Error]",rB="[object Map]",iB="[object Number]",aB="[object Object]",oB="[object RegExp]",sB="[object Set]",lB="[object String]",cB="[object URL]",uB=Array.isArray,dm=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,hm=Object.assign,fB=Object.prototype.toString.call.bind(Object.prototype.toString);function dB(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,o=e.areNumbersEqual,s=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,f=e.areSetsEqual,u=e.areTypedArraysEqual,d=e.areUrlsEqual,p=e.unknownTagComparators;return function(m,g,w){if(m===g)return!0;if(m==null||g==null)return!1;var b=typeof m;if(b!==typeof g)return!1;if(b!=="object")return b==="number"?o(m,g,w):b==="function"?i(m,g,w):!1;var _=m.constructor;if(_!==g.constructor)return!1;if(_===Object)return s(m,g,w);if(uB(m))return t(m,g,w);if(dm!=null&&dm(m))return u(m,g,w);if(_===Date)return n(m,g,w);if(_===RegExp)return c(m,g,w);if(_===Map)return a(m,g,w);if(_===Set)return f(m,g,w);var S=fB(m);if(S===tB)return n(m,g,w);if(S===oB)return c(m,g,w);if(S===rB)return a(m,g,w);if(S===sB)return f(m,g,w);if(S===aB)return typeof m.then!="function"&&typeof g.then!="function"&&s(m,g,w);if(S===cB)return d(m,g,w);if(S===nB)return r(m,g,w);if(S===ZR)return s(m,g,w);if(S===eB||S===iB||S===lB)return l(m,g,w);if(p){var y=p[S];if(!y){var x=RR(m);x&&(y=p[x])}if(y)return y(m,g,w)}return!1}}function hB(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?bi:zR,areDatesEqual:KR,areErrorsEqual:WR,areFunctionsEqual:HR,areMapsEqual:r?om(um,bi):um,areNumbersEqual:VR,areObjectsEqual:r?bi:GR,arePrimitiveWrappersEqual:YR,areRegExpsEqual:XR,areSetsEqual:r?om(fm,bi):fm,areTypedArraysEqual:r?bi:JR,areUrlsEqual:QR,unknownTagComparators:void 0};if(n&&(i=hm({},i,n(i))),t){var a=Ka(i.areArraysEqual),o=Ka(i.areMapsEqual),s=Ka(i.areObjectsEqual),l=Ka(i.areSetsEqual);i=hm({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}function pB(e){return function(t,n,r,i,a,o,s){return e(t,n,s)}}function mB(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,a=e.strict;if(r)return function(l,c){var f=r(),u=f.cache,d=u===void 0?t?new WeakMap:void 0:u,p=f.meta;return n(l,c,{cache:d,equals:i,meta:p,strict:a})};if(t)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return n(l,c,o)}}var gB=bn();bn({strict:!0});bn({circular:!0});bn({circular:!0,strict:!0});bn({createInternalComparator:function(){return Gn}});bn({strict:!0,createInternalComparator:function(){return Gn}});bn({circular:!0,createInternalComparator:function(){return Gn}});bn({circular:!0,createInternalComparator:function(){return Gn},strict:!0});function bn(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,s=hB(e),l=dB(s),c=r?r(l):pB(l);return mB({circular:n,comparator:l,createState:i,equals:c,strict:o})}function yB(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function pm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):yB(i)};requestAnimationFrame(r)}function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}function vB(e){return _B(e)||wB(e)||xB(e)||bB()}function bB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xB(e,t){if(e){if(typeof e=="string")return mm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mm(e,t)}}function mm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _B(e){if(Array.isArray(e))return e}function SB(){var e={},t=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,s=vB(o),l=s[0],c=s.slice(1);if(typeof l=="number"){pm(i.bind(null,c),l);return}i(l),pm(i.bind(null,c));return}su(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function Zi(e){"@babel/helpers - typeof";return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zi(e)}function gm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ym(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gm(Object(n),!0).forEach(function(r){gb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gb(e,t,n){return t=OB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OB(e){var t=AB(e,"string");return Zi(t)==="symbol"?t:String(t)}function AB(e,t){if(Zi(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zi(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jB=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},$B=function(t){return t},PB=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},$i=function(t,n){return Object.keys(n).reduce(function(r,i){return ym(ym({},r),{},gb({},i,t(i,n[i])))},{})},vm=function(t,n,r){return t.map(function(i){return"".concat(PB(i)," ").concat(n,"ms ").concat(r)}).join(",")};function TB(e,t){return kB(e)||NB(e,t)||yb(e,t)||EB()}function EB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NB(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function kB(e){if(Array.isArray(e))return e}function CB(e){return DB(e)||MB(e)||yb(e)||IB()}function IB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yb(e,t){if(e){if(typeof e=="string")return lu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lu(e,t)}}function MB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DB(e){if(Array.isArray(e))return lu(e)}function lu(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vo=1e-4,vb=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},bb=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},bm=function(t,n){return function(r){var i=vb(t,n);return bb(i,r)}},LB=function(t,n){return function(r){var i=vb(t,n),a=[].concat(CB(i.map(function(o,s){return o*s}).slice(1)),[0]);return bb(a,r)}},xm=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),f=TB(c,4);i=f[0],a=f[1],o=f[2],s=f[3]}}}var u=bm(i,o),d=bm(a,s),p=LB(i,o),v=function(w){return w>1?1:w<0?0:w},m=function(w){for(var b=w>1?1:w,_=b,S=0;S<8;++S){var y=u(_)-b,x=p(_);if(Math.abs(y-b)<Vo||x<Vo)return d(_);_=v(_-y/x)}return d(_)};return m.isStepper=!1,m},RB=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,o=t.dt,s=o===void 0?17:o,l=function(f,u,d){var p=-(f-u)*r,v=d*a,m=d+(p-v)*s/1e3,g=d*s/1e3+f;return Math.abs(g-u)<Vo&&Math.abs(m)<Vo?[u,0]:[g,m]};return l.isStepper=!0,l.dt=s,l},BB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return xm(i);case"spring":return RB();default:if(i.split("(")[0]==="cubic-bezier")return xm(i)}return typeof i=="function"?i:null};function ea(e){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ea(e)}function wm(e){return qB(e)||UB(e)||xb(e)||FB()}function FB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qB(e){if(Array.isArray(e))return uu(e)}function _m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_m(Object(n),!0).forEach(function(r){cu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_m(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cu(e,t,n){return t=zB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zB(e){var t=KB(e,"string");return ea(t)==="symbol"?t:String(t)}function KB(e,t){if(ea(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ea(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WB(e,t){return GB(e)||VB(e,t)||xb(e,t)||HB()}function HB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xb(e,t){if(e){if(typeof e=="string")return uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uu(e,t)}}function uu(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VB(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function GB(e){if(Array.isArray(e))return e}var Go=function(t,n,r){return t+(n-t)*r},fu=function(t){var n=t.from,r=t.to;return n!==r},YB=function e(t,n,r){var i=$i(function(a,o){if(fu(o)){var s=t(o.from,o.to,o.velocity),l=WB(s,2),c=l[0],f=l[1];return ze(ze({},o),{},{from:c,velocity:f})}return o},n);return r<1?$i(function(a,o){return fu(o)?ze(ze({},o),{},{velocity:Go(o.velocity,i[a].velocity,r),from:Go(o.from,i[a].from,r)}):o},n):e(t,i,r-1)};const XB=function(e,t,n,r,i){var a=jB(e,t),o=a.reduce(function(g,w){return ze(ze({},g),{},cu({},w,[e[w],t[w]]))},{}),s=a.reduce(function(g,w){return ze(ze({},g),{},cu({},w,{from:e[w],velocity:0,to:t[w]}))},{}),l=-1,c,f,u=function(){return null},d=function(){return $i(function(w,b){return b.from},s)},p=function(){return!Object.values(s).filter(fu).length},v=function(w){c||(c=w);var b=w-c,_=b/n.dt;s=YB(n,s,_),i(ze(ze(ze({},e),t),d())),c=w,p()||(l=requestAnimationFrame(u))},m=function(w){f||(f=w);var b=(w-f)/r,_=$i(function(y,x){return Go.apply(void 0,wm(x).concat([n(b)]))},o);if(i(ze(ze(ze({},e),t),_)),b<1)l=requestAnimationFrame(u);else{var S=$i(function(y,x){return Go.apply(void 0,wm(x).concat([n(1)]))},o);i(ze(ze(ze({},e),t),S))}};return u=n.isStepper?v:m,function(){return requestAnimationFrame(u),function(){cancelAnimationFrame(l)}}};function Er(e){"@babel/helpers - typeof";return Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Er(e)}var JB=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function QB(e,t){if(e==null)return{};var n=ZB(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ZB(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Fl(e){return rF(e)||nF(e)||tF(e)||eF()}function eF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tF(e,t){if(e){if(typeof e=="string")return du(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return du(e,t)}}function nF(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rF(e){if(Array.isArray(e))return du(e)}function du(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sm(Object(n),!0).forEach(function(r){_i(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _i(e,t,n){return t=wb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wb(r.key),r)}}function oF(e,t,n){return t&&aF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wb(e){var t=sF(e,"string");return Er(t)==="symbol"?t:String(t)}function sF(e,t){if(Er(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Er(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hu(e,t)}function hu(e,t){return hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hu(e,t)}function cF(e){var t=uF();return function(){var r=Yo(e),i;if(t){var a=Yo(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return pu(this,i)}}function pu(e,t){if(t&&(Er(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mu(e)}function mu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yo(e){return Yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yo(e)}var en=function(e){lF(n,e);var t=cF(n);function n(r,i){var a;iF(this,n),a=t.call(this,r,i);var o=a.props,s=o.isActive,l=o.attributeName,c=o.from,f=o.to,u=o.steps,d=o.children,p=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(mu(a)),a.changeStyle=a.changeStyle.bind(mu(a)),!s||p<=0)return a.state={style:{}},typeof d=="function"&&(a.state={style:f}),pu(a);if(u&&u.length)a.state={style:u[0].style};else if(c){if(typeof d=="function")return a.state={style:c},pu(a);a.state={style:l?_i({},l,c):c}}else a.state={style:{}};return a}return oF(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,f=a.to,u=a.from,d=this.state.style;if(s){if(!o){var p={style:l?_i({},l,f):f};this.state&&d&&(l&&d[l]!==f||!l&&d!==f)&&this.setState(p);return}if(!(gB(i.to,f)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=v||c?u:i.to;if(this.state&&d){var g={style:l?_i({},l,m):m};(l&&d[l]!==m||!l&&d!==m)&&this.setState(g)}this.runAnimation(St(St({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,c=i.easing,f=i.begin,u=i.onAnimationEnd,d=i.onAnimationStart,p=XB(o,s,BB(c),l,this.changeStyle),v=function(){a.stopJSAnimation=p()};this.manager.start([d,f,v,l,u])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,c=o[0],f=c.style,u=c.duration,d=u===void 0?0:u,p=function(m,g,w){if(w===0)return m;var b=g.duration,_=g.easing,S=_===void 0?"ease":_,y=g.style,x=g.properties,O=g.onAnimationEnd,j=w>0?o[w-1]:g,$=x||Object.keys(y);if(typeof S=="function"||S==="spring")return[].concat(Fl(m),[a.runJSAnimation.bind(a,{from:j.style,to:y,duration:b,easing:S}),b]);var T=vm($,b,S),N=St(St(St({},j.style),y),{},{transition:T});return[].concat(Fl(m),[N,b,O]).filter($B)};return this.manager.start([l].concat(Fl(o.reduce(p,[f,Math.max(d,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=SB());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,c=i.easing,f=i.onAnimationStart,u=i.onAnimationEnd,d=i.steps,p=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(i);return}if(d.length>1){this.runStepAnimation(i);return}var m=s?_i({},s,l):l,g=vm(Object.keys(m),o,c);v.start([f,a,St(St({},m),{},{transition:g}),o,u])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=QB(i,JB),c=P.Children.count(a),f=this.state.style;if(typeof a=="function")return a(f);if(!s||c===0||o<=0)return a;var u=function(p){var v=p.props,m=v.style,g=m===void 0?{}:m,w=v.className,b=P.cloneElement(p,St(St({},l),{},{style:St(St({},g),f),className:w}));return b};return c===1?u(P.Children.only(a)):I.createElement("div",null,P.Children.map(a,function(d){return u(d)}))}}]),n}(P.PureComponent);en.displayName="Animate";en.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};en.propTypes={from:fe.oneOfType([fe.object,fe.string]),to:fe.oneOfType([fe.object,fe.string]),attributeName:fe.string,duration:fe.number,begin:fe.number,easing:fe.oneOfType([fe.string,fe.func]),steps:fe.arrayOf(fe.shape({duration:fe.number.isRequired,style:fe.object.isRequired,easing:fe.oneOfType([fe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),fe.func]),properties:fe.arrayOf("string"),onAnimationEnd:fe.func})),children:fe.oneOfType([fe.node,fe.func]),isActive:fe.bool,canBegin:fe.bool,onAnimationEnd:fe.func,shouldReAnimate:fe.bool,onAnimationStart:fe.func,onAnimationReStart:fe.func};function ta(e){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(e)}function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xo.apply(this,arguments)}function fF(e,t){return mF(e)||pF(e,t)||hF(e,t)||dF()}function dF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hF(e,t){if(e){if(typeof e=="string")return Om(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Om(e,t)}}function Om(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pF(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function mF(e){if(Array.isArray(e))return e}function Am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Am(Object(n),!0).forEach(function(r){gF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Am(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gF(e,t,n){return t=yF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yF(e){var t=vF(e,"string");return ta(t)=="symbol"?t:t+""}function vF(e,t){if(ta(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ta(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $m=function(t,n,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,f;if(o>0&&a instanceof Array){for(var u=[0,0,0,0],d=0,p=4;d<p;d++)u[d]=a[d]>o?o:a[d];f="M".concat(t,",").concat(n+s*u[0]),u[0]>0&&(f+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(t+l*u[0],",").concat(n)),f+="L ".concat(t+r-l*u[1],",").concat(n),u[1]>0&&(f+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(t+r,",").concat(n+s*u[1])),f+="L ".concat(t+r,",").concat(n+i-s*u[2]),u[2]>0&&(f+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(t+r-l*u[2],",").concat(n+i)),f+="L ".concat(t+l*u[3],",").concat(n+i),u[3]>0&&(f+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(n+i-s*u[3])),f+="Z"}else if(o>0&&a===+a&&a>0){var v=Math.min(o,a);f="M ".concat(t,",").concat(n+s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t+l*v,",").concat(n,`
            L `).concat(t+r-l*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t+r,",").concat(n+s*v,`
            L `).concat(t+r,",").concat(n+i-s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t+r-l*v,",").concat(n+i,`
            L `).concat(t+l*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t,",").concat(n+i-s*v," Z")}else f="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},bF=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,a=n.x,o=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(a,a+s),f=Math.max(a,a+s),u=Math.min(o,o+l),d=Math.max(o,o+l);return r>=c&&r<=f&&i>=u&&i<=d}return!1},xF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yf=function(t){var n=jm(jm({},xF),t),r=P.useRef(),i=P.useState(-1),a=fF(i,2),o=a[0],s=a[1];P.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&s(S)}catch{}},[]);var l=n.x,c=n.y,f=n.width,u=n.height,d=n.radius,p=n.className,v=n.animationEasing,m=n.animationDuration,g=n.animationBegin,w=n.isAnimationActive,b=n.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||u!==+u||f===0||u===0)return null;var _=ce("recharts-rectangle",p);return b?I.createElement(en,{canBegin:o>0,from:{width:f,height:u,x:l,y:c},to:{width:f,height:u,x:l,y:c},duration:m,animationEasing:v,isActive:b},function(S){var y=S.width,x=S.height,O=S.x,j=S.y;return I.createElement(en,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:w,easing:v},I.createElement("path",Xo({},se(n,!0),{className:_,d:$m(O,j,y,x,d),ref:r})))}):I.createElement("path",Xo({},se(n,!0),{className:_,d:$m(l,c,f,u,d)}))};function gu(){return gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gu.apply(this,arguments)}var Xf=function(t){var n=t.cx,r=t.cy,i=t.r,a=t.className,o=ce("recharts-dot",a);return n===+n&&r===+r&&i===+i?P.createElement("circle",gu({},se(t,!1),mo(t),{className:o,cx:n,cy:r,r:i})):null};function na(e){"@babel/helpers - typeof";return na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},na(e)}var wF=["x","y","top","left","width","height","className"];function yu(){return yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yu.apply(this,arguments)}function Pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _F(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pm(Object(n),!0).forEach(function(r){SF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SF(e,t,n){return t=OF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OF(e){var t=AF(e,"string");return na(t)=="symbol"?t:t+""}function AF(e,t){if(na(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(na(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jF(e,t){if(e==null)return{};var n=$F(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $F(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var PF=function(t,n,r,i,a,o){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},TF=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.top,s=o===void 0?0:o,l=t.left,c=l===void 0?0:l,f=t.width,u=f===void 0?0:f,d=t.height,p=d===void 0?0:d,v=t.className,m=jF(t,wF),g=_F({x:r,y:a,top:s,left:c,width:u,height:p},m);return!W(r)||!W(a)||!W(u)||!W(p)||!W(s)||!W(c)?null:I.createElement("path",yu({},se(g,!0),{className:ce("recharts-cross",v),d:PF(r,a,u,p,s,c)}))},EF=Ly,NF=EF(Object.getPrototypeOf,Object),kF=NF,CF=nn,IF=kF,MF=rn,DF="[object Object]",LF=Function.prototype,RF=Object.prototype,_b=LF.toString,BF=RF.hasOwnProperty,FF=_b.call(Object);function UF(e){if(!MF(e)||CF(e)!=DF)return!1;var t=IF(e);if(t===null)return!0;var n=BF.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&_b.call(n)==FF}var qF=UF;const zF=Ae(qF);var KF=nn,WF=rn,HF="[object Boolean]";function VF(e){return e===!0||e===!1||WF(e)&&KF(e)==HF}var GF=VF;const YF=Ae(GF);function ra(e){"@babel/helpers - typeof";return ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ra(e)}function Jo(){return Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jo.apply(this,arguments)}function XF(e,t){return eU(e)||ZF(e,t)||QF(e,t)||JF()}function JF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QF(e,t){if(e){if(typeof e=="string")return Tm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tm(e,t)}}function Tm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZF(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function eU(e){if(Array.isArray(e))return e}function Em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Em(Object(n),!0).forEach(function(r){tU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Em(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tU(e,t,n){return t=nU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nU(e){var t=rU(e,"string");return ra(t)=="symbol"?t:t+""}function rU(e,t){if(ra(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ra(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var km=function(t,n,r,i,a){var o=r-i,s;return s="M ".concat(t,",").concat(n),s+="L ".concat(t+r,",").concat(n),s+="L ".concat(t+r-o/2,",").concat(n+a),s+="L ".concat(t+r-o/2-i,",").concat(n+a),s+="L ".concat(t,",").concat(n," Z"),s},iU={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aU=function(t){var n=Nm(Nm({},iU),t),r=P.useRef(),i=P.useState(-1),a=XF(i,2),o=a[0],s=a[1];P.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&s(_)}catch{}},[]);var l=n.x,c=n.y,f=n.upperWidth,u=n.lowerWidth,d=n.height,p=n.className,v=n.animationEasing,m=n.animationDuration,g=n.animationBegin,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||u!==+u||d!==+d||f===0&&u===0||d===0)return null;var b=ce("recharts-trapezoid",p);return w?I.createElement(en,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:d,x:l,y:c},to:{upperWidth:f,lowerWidth:u,height:d,x:l,y:c},duration:m,animationEasing:v,isActive:w},function(_){var S=_.upperWidth,y=_.lowerWidth,x=_.height,O=_.x,j=_.y;return I.createElement(en,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:v},I.createElement("path",Jo({},se(n,!0),{className:b,d:km(O,j,S,y,x),ref:r})))}):I.createElement("g",null,I.createElement("path",Jo({},se(n,!0),{className:b,d:km(l,c,f,u,d)})))},oU=["option","shapeType","propTransformer","activeClassName","isActive"];function ia(e){"@babel/helpers - typeof";return ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ia(e)}function sU(e,t){if(e==null)return{};var n=lU(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lU(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cm(Object(n),!0).forEach(function(r){cU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cU(e,t,n){return t=uU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uU(e){var t=fU(e,"string");return ia(t)=="symbol"?t:t+""}function fU(e,t){if(ia(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ia(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dU(e,t){return Qo(Qo({},t),e)}function hU(e,t){return e==="symbols"}function Im(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return I.createElement(Yf,n);case"trapezoid":return I.createElement(aU,n);case"sector":return I.createElement(pb,n);case"symbols":if(hU(t))return I.createElement(pf,n);break;default:return null}}function pU(e){return P.isValidElement(e)?e.props:e}function mU(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?dU:r,a=e.activeClassName,o=a===void 0?"recharts-active-shape":a,s=e.isActive,l=sU(e,oU),c;if(P.isValidElement(t))c=P.cloneElement(t,Qo(Qo({},l),pU(t)));else if(ae(t))c=t(l);else if(zF(t)&&!YF(t)){var f=i(t,l);c=I.createElement(Im,{shapeType:n,elementProps:f})}else{var u=l;c=I.createElement(Im,{shapeType:n,elementProps:u})}return s?I.createElement(Ne,{className:o},c):c}function Xs(e,t){return t!=null&&"trapezoids"in e.props}function Js(e,t){return t!=null&&"sectors"in e.props}function aa(e,t){return t!=null&&"points"in e.props}function gU(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&a}function yU(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function vU(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function bU(e,t){var n;return Xs(e,t)?n=gU:Js(e,t)?n=yU:aa(e,t)&&(n=vU),n}function xU(e,t){var n;return Xs(e,t)?n="trapezoids":Js(e,t)?n="sectors":aa(e,t)&&(n="points"),n}function wU(e,t){if(Xs(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Js(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return aa(e,t)?t.payload:{}}function _U(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=xU(n,t),a=wU(n,t),o=r.filter(function(l,c){var f=Vs(a,l),u=n.props[i].filter(function(v){var m=bU(n,t);return m(v,t)}),d=n.props[i].indexOf(u[u.length-1]),p=c===d;return f&&p}),s=r.indexOf(o[o.length-1]);return s}var SU=Math.ceil,OU=Math.max;function AU(e,t,n,r){for(var i=-1,a=OU(SU((t-e)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=e,e+=n;return o}var jU=AU,$U=nv,Mm=1/0,PU=17976931348623157e292;function TU(e){if(!e)return e===0?e:0;if(e=$U(e),e===Mm||e===-Mm){var t=e<0?-1:1;return t*PU}return e===e?e:0}var Sb=TU,EU=jU,NU=Rs,Ul=Sb;function kU(e){return function(t,n,r){return r&&typeof r!="number"&&NU(t,n,r)&&(n=r=void 0),t=Ul(t),n===void 0?(n=t,t=0):n=Ul(n),r=r===void 0?t<n?1:-1:Ul(r),EU(t,n,r,e)}}var CU=kU,IU=CU,MU=IU(),DU=MU;const Zo=Ae(DU);function oa(e){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oa(e)}function Dm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Lm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dm(Object(n),!0).forEach(function(r){Ob(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ob(e,t,n){return t=LU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LU(e){var t=RU(e,"string");return oa(t)=="symbol"?t:t+""}function RU(e,t){if(oa(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(oa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BU=["Webkit","Moz","O","ms"],FU=function(t,n){var r=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=BU.reduce(function(a,o){return Lm(Lm({},a),{},Ob({},o+r,n))},{});return i[t]=n,i};function Nr(e){"@babel/helpers - typeof";return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(e)}function es(){return es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},es.apply(this,arguments)}function Rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ql(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rm(Object(n),!0).forEach(function(r){ot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jb(r.key),r)}}function qU(e,t,n){return t&&Bm(e.prototype,t),n&&Bm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zU(e,t,n){return t=ts(t),KU(e,Ab()?Reflect.construct(t,n||[],ts(e).constructor):t.apply(e,n))}function KU(e,t){if(t&&(Nr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WU(e)}function WU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ab(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ab=function(){return!!e})()}function ts(e){return ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ts(e)}function HU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vu(e,t)}function vu(e,t){return vu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vu(e,t)}function ot(e,t,n){return t=jb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jb(e){var t=VU(e,"string");return Nr(t)=="symbol"?t:t+""}function VU(e,t){if(Nr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Nr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var GU=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,a=t.x,o=t.width,s=t.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=Ai().domain(Zo(0,l)).range([a,a+o-s]),f=c.domain().map(function(u){return c(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:f}},Fm=function(t){return t.changedTouches&&!!t.changedTouches.length},qn=function(e){function t(n){var r;return UU(this,t),r=zU(this,t,[n]),ot(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ot(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ot(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),ot(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ot(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ot(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ot(r,"handleSlideDragStart",function(i){var a=Fm(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return HU(t,e),qU(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,f=c.length-1,u=Math.min(i,a),d=Math.max(i,a),p=t.getIndexInRange(o,u),v=t.getIndexInRange(o,d);return{startIndex:p-p%l,endIndex:v===f?f:v-v%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=ut(a[r],s,r);return ae(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,c=l.x,f=l.width,u=l.travellerWidth,d=l.startIndex,p=l.endIndex,v=l.onChange,m=r.pageX-a;m>0?m=Math.min(m,c+f-u-s,c+f-u-o):m<0&&(m=Math.max(m,c-o,c-s));var g=this.getIndex({startX:o+m,endX:s+m});(g.startIndex!==d||g.endIndex!==p)&&v&&v(g),this.setState({startX:o+m,endX:s+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=Fm(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[o],f=this.props,u=f.x,d=f.width,p=f.travellerWidth,v=f.onChange,m=f.gap,g=f.data,w={startX:this.state.startX,endX:this.state.endX},b=r.pageX-a;b>0?b=Math.min(b,u+d-p-c):b<0&&(b=Math.max(b,u-c)),w[o]=c+b;var _=this.getIndex(w),S=_.startIndex,y=_.endIndex,x=function(){var j=g.length-1;return o==="startX"&&(s>l?S%m===0:y%m===0)||s<l&&y===j||o==="endX"&&(s>l?y%m===0:S%m===0)||s>l&&y===j};this.setState(ot(ot({},o,c+b),"brushMoveStartX",r.pageX),function(){v&&x()&&v(_)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,c=o.endX,f=this.state[i],u=s.indexOf(f);if(u!==-1){var d=u+r;if(!(d===-1||d>=s.length)){var p=s[d];i==="startX"&&p>=c||i==="endX"&&p<=l||this.setState(ot({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.fill,c=r.stroke;return I.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.data,c=r.children,f=r.padding,u=P.Children.only(c);return u?I.cloneElement(u,{x:i,y:a,width:o,height:s,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,s=this,l=this.props,c=l.y,f=l.travellerWidth,u=l.height,d=l.traveller,p=l.ariaLabel,v=l.data,m=l.startIndex,g=l.endIndex,w=Math.max(r,this.props.x),b=ql(ql({},se(this.props,!1)),{},{x:w,y:c,width:f,height:u}),_=p||"Min value: ".concat((a=v[m])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return I.createElement(Ne,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(y){["ArrowLeft","ArrowRight"].includes(y.key)&&(y.preventDefault(),y.stopPropagation(),s.handleTravellerMoveKeyboard(y.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,b))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,c=a.travellerWidth,f=Math.min(r,i)+c,u=Math.max(Math.abs(i-r)-c,0);return I.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:o,width:u,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,f=this.state,u=f.startX,d=f.endX,p=5,v={pointerEvents:"none",fill:c};return I.createElement(Ne,{className:"recharts-brush-texts"},I.createElement(Eo,es({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,d)-p,y:o+s/2},v),this.getTextOfTick(i)),I.createElement(Eo,es({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,d)+l+p,y:o+s/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,s=r.x,l=r.y,c=r.width,f=r.height,u=r.alwaysShowText,d=this.state,p=d.startX,v=d.endX,m=d.isTextActive,g=d.isSlideMoving,w=d.isTravellerMoving,b=d.isTravellerFocused;if(!i||!i.length||!W(s)||!W(l)||!W(c)||!W(f)||c<=0||f<=0)return null;var _=ce("recharts-brush",a),S=I.Children.count(o)===1,y=FU("userSelect","none");return I.createElement(Ne,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(m||g||w||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,s=r.height,l=r.stroke,c=Math.floor(a+s/2)-1;return I.createElement(I.Fragment,null,I.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),I.createElement("line",{x1:i+1,y1:c,x2:i+o-1,y2:c,fill:"none",stroke:"#fff"}),I.createElement("line",{x1:i+1,y1:c+2,x2:i+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return I.isValidElement(r)?a=I.cloneElement(r,i):ae(r)?a=r(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,f=r.startIndex,u=r.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return ql({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o},a&&a.length?GU({data:a,width:o,x:s,travellerWidth:l,startIndex:f,endIndex:u}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var d=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);r[l]>i?s=l:o=l}return i>=r[s]?s:o}}])}(P.PureComponent);ot(qn,"displayName","Brush");ot(qn,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var YU=wf;function XU(e,t){var n;return YU(e,function(r,i,a){return n=t(r,i,a),!n}),!!n}var JU=XU,QU=Ty,ZU=gn,eq=JU,tq=it,nq=Rs;function rq(e,t,n){var r=tq(e)?QU:eq;return n&&nq(e,t,n)&&(t=void 0),r(e,ZU(t))}var iq=rq;const aq=Ae(iq);var Dt=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},Um=Jy;function oq(e,t,n){t=="__proto__"&&Um?Um(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var sq=oq,lq=sq,cq=Yy,uq=gn;function fq(e,t){var n={};return t=uq(t),cq(e,function(r,i,a){lq(n,i,t(r,i,a))}),n}var dq=fq;const hq=Ae(dq);function pq(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var mq=pq,gq=wf;function yq(e,t){var n=!0;return gq(e,function(r,i,a){return n=!!t(r,i,a),n}),n}var vq=yq,bq=mq,xq=vq,wq=gn,_q=it,Sq=Rs;function Oq(e,t,n){var r=_q(e)?bq:xq;return n&&Sq(e,t,n)&&(t=void 0),r(e,wq(t))}var Aq=Oq;const $b=Ae(Aq);var jq=["x","y"];function sa(e){"@babel/helpers - typeof";return sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sa(e)}function bu(){return bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bu.apply(this,arguments)}function qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qm(Object(n),!0).forEach(function(r){$q(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $q(e,t,n){return t=Pq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pq(e){var t=Tq(e,"string");return sa(t)=="symbol"?t:t+""}function Tq(e,t){if(sa(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eq(e,t){if(e==null)return{};var n=Nq(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Nq(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function kq(e,t){var n=e.x,r=e.y,i=Eq(e,jq),a="".concat(n),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),c="".concat(t.height||i.height),f=parseInt(c,10),u="".concat(t.width||i.width),d=parseInt(u,10);return xi(xi(xi(xi(xi({},t),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:f,width:d,name:t.name,radius:t.radius})}function zm(e){return I.createElement(mU,bu({shapeType:"rectangle",propTransformer:kq,activeClassName:"recharts-active-bar"},e))}var Cq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof t=="number")return t;var a=W(r)||eS(r);return a?t(r,i):(a||Un(),n)}},Iq=["value","background"],Pb;function kr(e){"@babel/helpers - typeof";return kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kr(e)}function Mq(e,t){if(e==null)return{};var n=Dq(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Dq(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ns(){return ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ns.apply(this,arguments)}function Km(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Km(Object(n),!0).forEach(function(r){un(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Km(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eb(r.key),r)}}function Rq(e,t,n){return t&&Wm(e.prototype,t),n&&Wm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bq(e,t,n){return t=rs(t),Fq(e,Tb()?Reflect.construct(t,n||[],rs(e).constructor):t.apply(e,n))}function Fq(e,t){if(t&&(kr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uq(e)}function Uq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tb=function(){return!!e})()}function rs(e){return rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rs(e)}function qq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xu(e,t)}function xu(e,t){return xu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xu(e,t)}function un(e,t,n){return t=Eb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eb(e){var t=zq(e,"string");return kr(t)=="symbol"?t:t+""}function zq(e,t){if(kr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Aa=function(e){function t(){var n;Lq(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Bq(this,t,[].concat(i)),un(n,"state",{isAnimationFinished:!1}),un(n,"id",va("recharts-bar-")),un(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),un(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return qq(t,e),Rq(t,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,c=a.activeBar,f=se(this.props,!1);return r&&r.map(function(u,d){var p=d===l,v=p?c:o,m=Ce(Ce(Ce({},f),u),{},{isActive:p,option:v,index:d,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return I.createElement(Ne,ns({className:"recharts-bar-rectangle"},go(i.props,u,d),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value,"-").concat(d)}),I.createElement(zm,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,f=i.animationEasing,u=i.animationId,d=this.state.prevData;return I.createElement(en,{begin:l,duration:c,isActive:s,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,m=a.map(function(g,w){var b=d&&d[w];if(b){var _=Pt(b.x,g.x),S=Pt(b.y,g.y),y=Pt(b.width,g.width),x=Pt(b.height,g.height);return Ce(Ce({},g),{},{x:_(v),y:S(v),width:y(v),height:x(v)})}if(o==="horizontal"){var O=Pt(0,g.height),j=O(v);return Ce(Ce({},g),{},{y:g.y+g.height-j,height:j})}var $=Pt(0,g.width),T=$(v);return Ce(Ce({},g),{},{width:T})});return I.createElement(Ne,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!Vs(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=se(this.props.background,!1);return a.map(function(c,f){c.value;var u=c.background,d=Mq(c,Iq);if(!u)return null;var p=Ce(Ce(Ce(Ce(Ce({},d),{},{fill:"#eee"},u),l),go(r.props,c,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return I.createElement(zm,ns({key:"background-bar-".concat(f),option:r.props.background,isActive:f===s},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,c=a.layout,f=a.children,u=gt(f,Oa);if(!u)return null;var d=c==="vertical"?o[0].height/2:o[0].width/2,p=function(g,w){var b=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:b,errorVal:ut(g,w)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return I.createElement(Ne,v,u.map(function(m){return I.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,offset:d,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,s=r.xAxis,l=r.yAxis,c=r.left,f=r.top,u=r.width,d=r.height,p=r.isAnimationActive,v=r.background,m=r.id;if(i||!a||!a.length)return null;var g=this.state.isAnimationFinished,w=ce("recharts-bar",o),b=s&&s.allowDataOverflow,_=l&&l.allowDataOverflow,S=b||_,y=oe(m)?this.id:m;return I.createElement(Ne,{className:w},b||_?I.createElement("defs",null,I.createElement("clipPath",{id:"clipPath-".concat(y)},I.createElement("rect",{x:b?c:c-u/2,y:_?f:f-d/2,width:b?u:u*2,height:_?d:d*2}))):null,I.createElement(Ne,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(y,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,y),(!p||g)&&dn.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(P.PureComponent);Pb=Aa;un(Aa,"displayName","Bar");un(Aa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Qr.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});un(Aa,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,f=e.dataStartIndex,u=e.displayedData,d=e.offset,p=SL(r,n);if(!p)return null;var v=t.layout,m=n.type.defaultProps,g=m!==void 0?Ce(Ce({},m),n.props):n.props,w=g.dataKey,b=g.children,_=g.minPointSize,S=v==="horizontal"?o:a,y=c?S.scale.domain():null,x=NL({numericAxis:S}),O=gt(b,av),j=u.map(function($,T){var N,A,E,k,C,M;c?N=OL(c[f+T],y):(N=ut($,w),Array.isArray(N)||(N=[x,N]));var D=Cq(_,Pb.defaultProps.minPointSize)(N[1],T);if(v==="horizontal"){var L,R=[o.scale(N[0]),o.scale(N[1])],K=R[0],V=R[1];A=Kp({axis:a,ticks:s,bandSize:i,offset:p.offset,entry:$,index:T}),E=(L=V??K)!==null&&L!==void 0?L:void 0,k=p.size;var z=K-V;if(C=Number.isNaN(z)?0:z,M={x:A,y:o.y,width:k,height:o.height},Math.abs(D)>0&&Math.abs(C)<Math.abs(D)){var X=Et(C||D)*(Math.abs(D)-Math.abs(C));E-=X,C+=X}}else{var ne=[a.scale(N[0]),a.scale(N[1])],he=ne[0],Fe=ne[1];if(A=he,E=Kp({axis:o,ticks:l,bandSize:i,offset:p.offset,entry:$,index:T}),k=Fe-he,C=p.size,M={x:a.x,y:E,width:a.width,height:C},Math.abs(D)>0&&Math.abs(k)<Math.abs(D)){var et=Et(k||D)*(Math.abs(D)-Math.abs(k));k+=et}}return Ce(Ce(Ce({},$),{},{x:A,y:E,width:k,height:C,value:c?N:N[1],payload:$,background:M},O&&O[T]&&O[T].props),{},{tooltipPayload:[fb(n,$)],tooltipPosition:{x:A+k/2,y:E+C/2}})});return Ce({data:j,layout:v},d)});function la(e){"@babel/helpers - typeof";return la=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},la(e)}function Kq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nb(r.key),r)}}function Wq(e,t,n){return t&&Hm(e.prototype,t),n&&Hm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vm(Object(n),!0).forEach(function(r){Qs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qs(e,t,n){return t=Nb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nb(e){var t=Hq(e,"string");return la(t)=="symbol"?t:t+""}function Hq(e,t){if(la(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(la(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vq=function(t,n,r,i,a){var o=t.width,s=t.height,l=t.layout,c=t.children,f=Object.keys(n),u={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},d=!!st(c,Aa);return f.reduce(function(p,v){var m=n[v],g=m.orientation,w=m.domain,b=m.padding,_=b===void 0?{}:b,S=m.mirror,y=m.reversed,x="".concat(g).concat(S?"Mirror":""),O,j,$,T,N;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var A=w[1]-w[0],E=1/0,k=m.categoricalDomain.sort(rS);if(k.forEach(function(ne,he){he>0&&(E=Math.min((ne||0)-(k[he-1]||0),E))}),Number.isFinite(E)){var C=E/A,M=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(O=C*M/2),m.padding==="no-gap"){var D=Bn(t.barCategoryGap,C*M),L=C*M/2;O=L-D-(L-D)/M*D}}}i==="xAxis"?j=[r.left+(_.left||0)+(O||0),r.left+r.width-(_.right||0)-(O||0)]:i==="yAxis"?j=l==="horizontal"?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(O||0),r.top+r.height-(_.bottom||0)-(O||0)]:j=m.range,y&&(j=[j[1],j[0]]);var R=wL(m,a,d),K=R.scale,V=R.realScaleType;K.domain(w).range(j),_L(K);var z=EL(K,jt(jt({},m),{},{realScaleType:V}));i==="xAxis"?(N=g==="top"&&!S||g==="bottom"&&S,$=r.left,T=u[x]-N*m.height):i==="yAxis"&&(N=g==="left"&&!S||g==="right"&&S,$=u[x]-N*m.width,T=r.top);var X=jt(jt(jt({},m),z),{},{realScaleType:V,x:$,y:T,scale:K,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return X.bandSize=Ko(X,z),!m.hide&&i==="xAxis"?u[x]+=(N?-1:1)*X.height:m.hide||(u[x]+=(N?-1:1)*X.width),jt(jt({},p),{},Qs({},v,X))},{})},kb=function(t,n){var r=t.x,i=t.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},Gq=function(t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2;return kb({x:n,y:r},{x:i,y:a})},Cb=function(){function e(t){Kq(this,e),this.scale=t}return Wq(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();Qs(Cb,"EPS",1e-4);var Jf=function(t){var n=Object.keys(t).reduce(function(r,i){return jt(jt({},r),{},Qs({},i,Cb.create(t[i])))},{});return jt(jt({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return hq(i,function(l,c){return n[c].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return $b(i,function(a,o){return n[o].isInRange(a)})}})};function Yq(e){return(e%180+180)%180}var Xq=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Yq(i),o=a*Math.PI/180,s=Math.atan(r/n),l=o>s&&o<Math.PI-s?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},Jq=gn,Qq=ba,Zq=Ds;function ez(e){return function(t,n,r){var i=Object(t);if(!Qq(t)){var a=Jq(n);t=Zq(t),n=function(s){return a(i[s],s,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:void 0}}var tz=ez,nz=Sb;function rz(e){var t=nz(e),n=t%1;return t===t?n?t-n:t:0}var iz=rz,az=zy,oz=gn,sz=iz,lz=Math.max;function cz(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:sz(n);return i<0&&(i=lz(r+i,0)),az(e,oz(t),i)}var uz=cz,fz=tz,dz=uz,hz=fz(dz),pz=hz;const mz=Ae(pz);var gz=o_(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Qf=P.createContext(void 0),Zf=P.createContext(void 0),Ib=P.createContext(void 0),Mb=P.createContext({}),Db=P.createContext(void 0),Lb=P.createContext(0),Rb=P.createContext(0),Gm=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=t.clipPathId,s=t.children,l=t.width,c=t.height,f=gz(a);return I.createElement(Qf.Provider,{value:r},I.createElement(Zf.Provider,{value:i},I.createElement(Mb.Provider,{value:a},I.createElement(Ib.Provider,{value:f},I.createElement(Db.Provider,{value:o},I.createElement(Lb.Provider,{value:c},I.createElement(Rb.Provider,{value:l},s)))))))},yz=function(){return P.useContext(Db)},Bb=function(t){var n=P.useContext(Qf);n==null&&Un();var r=n[t];return r==null&&Un(),r},vz=function(){var t=P.useContext(Qf);return cn(t)},bz=function(){var t=P.useContext(Zf),n=mz(t,function(r){return $b(r.domain,Number.isFinite)});return n||cn(t)},Fb=function(t){var n=P.useContext(Zf);n==null&&Un();var r=n[t];return r==null&&Un(),r},xz=function(){var t=P.useContext(Ib);return t},wz=function(){return P.useContext(Mb)},ed=function(){return P.useContext(Rb)},td=function(){return P.useContext(Lb)};function Cr(e){"@babel/helpers - typeof";return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cr(e)}function _z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qb(r.key),r)}}function Oz(e,t,n){return t&&Sz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Az(e,t,n){return t=is(t),jz(e,Ub()?Reflect.construct(t,n||[],is(e).constructor):t.apply(e,n))}function jz(e,t){if(t&&(Cr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $z(e)}function $z(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ub(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ub=function(){return!!e})()}function is(e){return is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},is(e)}function Pz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wu(e,t)}function wu(e,t){return wu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wu(e,t)}function Ym(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ym(Object(n),!0).forEach(function(r){nd(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ym(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nd(e,t,n){return t=qb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qb(e){var t=Tz(e,"string");return Cr(t)=="symbol"?t:t+""}function Tz(e,t){if(Cr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ez(e,t){return Iz(e)||Cz(e,t)||kz(e,t)||Nz()}function Nz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kz(e,t){if(e){if(typeof e=="string")return Jm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jm(e,t)}}function Jm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cz(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Iz(e){if(Array.isArray(e))return e}function _u(){return _u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_u.apply(this,arguments)}var Mz=function(t,n){var r;return I.isValidElement(t)?r=I.cloneElement(t,n):ae(t)?r=t(n):r=I.createElement("line",_u({},n,{className:"recharts-reference-line-line"})),r},Dz=function(t,n,r,i,a,o,s,l,c){var f=a.x,u=a.y,d=a.width,p=a.height;if(r){var v=c.y,m=t.y.apply(v,{position:o});if(Dt(c,"discard")&&!t.y.isInRange(m))return null;var g=[{x:f+d,y:m},{x:f,y:m}];return l==="left"?g.reverse():g}if(n){var w=c.x,b=t.x.apply(w,{position:o});if(Dt(c,"discard")&&!t.x.isInRange(b))return null;var _=[{x:b,y:u+p},{x:b,y:u}];return s==="top"?_.reverse():_}if(i){var S=c.segment,y=S.map(function(x){return t.apply(x,{position:o})});return Dt(c,"discard")&&aq(y,function(x){return!t.isInRange(x)})?null:y}return null};function Lz(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,a=e.yAxisId,o=e.shape,s=e.className,l=e.alwaysShow,c=yz(),f=Bb(i),u=Fb(a),d=xz();if(!c||!d)return null;Gt(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Jf({x:f.scale,y:u.scale}),v=Re(t),m=Re(n),g=r&&r.length===2,w=Dz(p,v,m,g,d,e.position,f.orientation,u.orientation,e);if(!w)return null;var b=Ez(w,2),_=b[0],S=_.x,y=_.y,x=b[1],O=x.x,j=x.y,$=Dt(e,"hidden")?"url(#".concat(c,")"):void 0,T=Xm(Xm({clipPath:$},se(e,!0)),{},{x1:S,y1:y,x2:O,y2:j});return I.createElement(Ne,{className:ce("recharts-reference-line",s)},Mz(o,T),Ye.renderCallByParent(e,Gq({x1:S,y1:y,x2:O,y2:j})))}var rd=function(e){function t(){return _z(this,t),Az(this,t,arguments)}return Pz(t,e),Oz(t,[{key:"render",value:function(){return I.createElement(Lz,this.props)}}])}(I.Component);nd(rd,"displayName","ReferenceLine");nd(rd,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Su(){return Su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Su.apply(this,arguments)}function Ir(e){"@babel/helpers - typeof";return Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(e)}function Qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qm(Object(n),!0).forEach(function(r){Zs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kb(r.key),r)}}function Fz(e,t,n){return t&&Bz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uz(e,t,n){return t=as(t),qz(e,zb()?Reflect.construct(t,n||[],as(e).constructor):t.apply(e,n))}function qz(e,t){if(t&&(Ir(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zz(e)}function zz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zb=function(){return!!e})()}function as(e){return as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},as(e)}function Kz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ou(e,t)}function Ou(e,t){return Ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ou(e,t)}function Zs(e,t,n){return t=Kb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kb(e){var t=Wz(e,"string");return Ir(t)=="symbol"?t:t+""}function Wz(e,t){if(Ir(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ir(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hz=function(t){var n=t.x,r=t.y,i=t.xAxis,a=t.yAxis,o=Jf({x:i.scale,y:a.scale}),s=o.apply({x:n,y:r},{bandAware:!0});return Dt(t,"discard")&&!o.isInRange(s)?null:s},el=function(e){function t(){return Rz(this,t),Uz(this,t,arguments)}return Kz(t,e),Fz(t,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,s=r.alwaysShow,l=r.clipPathId,c=Re(i),f=Re(a);if(Gt(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!f)return null;var u=Hz(this.props);if(!u)return null;var d=u.x,p=u.y,v=this.props,m=v.shape,g=v.className,w=Dt(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=Zm(Zm({clipPath:w},se(this.props,!0)),{},{cx:d,cy:p});return I.createElement(Ne,{className:ce("recharts-reference-dot",g)},t.renderDot(m,b),Ye.renderCallByParent(this.props,{x:d-o,y:p-o,width:2*o,height:2*o}))}}])}(I.Component);Zs(el,"displayName","ReferenceDot");Zs(el,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Zs(el,"renderDot",function(e,t){var n;return I.isValidElement(e)?n=I.cloneElement(e,t):ae(e)?n=e(t):n=I.createElement(Xf,Su({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Au(){return Au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Au.apply(this,arguments)}function Mr(e){"@babel/helpers - typeof";return Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mr(e)}function eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eg(Object(n),!0).forEach(function(r){tl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hb(r.key),r)}}function Yz(e,t,n){return t&&Gz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xz(e,t,n){return t=os(t),Jz(e,Wb()?Reflect.construct(t,n||[],os(e).constructor):t.apply(e,n))}function Jz(e,t){if(t&&(Mr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qz(e)}function Qz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wb=function(){return!!e})()}function os(e){return os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},os(e)}function Zz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ju(e,t)}function ju(e,t){return ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ju(e,t)}function tl(e,t,n){return t=Hb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hb(e){var t=e3(e,"string");return Mr(t)=="symbol"?t:t+""}function e3(e,t){if(Mr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var t3=function(t,n,r,i,a){var o=a.x1,s=a.x2,l=a.y1,c=a.y2,f=a.xAxis,u=a.yAxis;if(!f||!u)return null;var d=Jf({x:f.scale,y:u.scale}),p={x:t?d.x.apply(o,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(l,{position:"start"}):d.y.rangeMin},v={x:n?d.x.apply(s,{position:"end"}):d.x.rangeMax,y:i?d.y.apply(c,{position:"end"}):d.y.rangeMax};return Dt(a,"discard")&&(!d.isInRange(p)||!d.isInRange(v))?null:kb(p,v)},nl=function(e){function t(){return Vz(this,t),Xz(this,t,arguments)}return Zz(t,e),Yz(t,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,f=r.clipPathId;Gt(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=Re(i),d=Re(a),p=Re(o),v=Re(s),m=this.props.shape;if(!u&&!d&&!p&&!v&&!m)return null;var g=t3(u,d,p,v,this.props);if(!g&&!m)return null;var w=Dt(this.props,"hidden")?"url(#".concat(f,")"):void 0;return I.createElement(Ne,{className:ce("recharts-reference-area",l)},t.renderRect(m,tg(tg({clipPath:w},se(this.props,!0)),g)),Ye.renderCallByParent(this.props,g))}}])}(I.Component);tl(nl,"displayName","ReferenceArea");tl(nl,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});tl(nl,"renderRect",function(e,t){var n;return I.isValidElement(e)?n=I.cloneElement(e,t):ae(e)?n=e(t):n=I.createElement(Yf,Au({},t,{className:"recharts-reference-area-rect"})),n});function Vb(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function n3(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Xq(r,n)}function r3(e,t,n){var r=n==="width",i=e.x,a=e.y,o=e.width,s=e.height;return t===1?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}function ss(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function i3(e,t){return Vb(e,t+1)}function a3(e,t,n,r,i){for(var a=(r||[]).slice(),o=t.start,s=t.end,l=0,c=1,f=o,u=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:Vb(r,c)};var m=l,g,w=function(){return g===void 0&&(g=n(v,m)),g},b=v.coordinate,_=l===0||ss(e,b,w,f,s);_||(l=0,f=o,c+=1),_&&(f=b+e*(w()/2+i),l+=c)},d;c<=a.length;)if(d=u(),d)return d.v;return[]}function ca(e){"@babel/helpers - typeof";return ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(e)}function ng(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ng(Object(n),!0).forEach(function(r){o3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ng(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o3(e,t,n){return t=s3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s3(e){var t=l3(e,"string");return ca(t)=="symbol"?t:t+""}function l3(e,t){if(ca(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ca(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c3(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,s=t.start,l=t.end,c=function(d){var p=a[d],v,m=function(){return v===void 0&&(v=n(p,d)),v};if(d===o-1){var g=e*(p.coordinate+e*m()/2-l);a[d]=p=Ge(Ge({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate})}else a[d]=p=Ge(Ge({},p),{},{tickCoord:p.coordinate});var w=ss(e,p.tickCoord,m,s,l);w&&(l=p.tickCoord-e*(m()/2+i),a[d]=Ge(Ge({},p),{},{isShow:!0}))},f=o-1;f>=0;f--)c(f);return a}function u3(e,t,n,r,i,a){var o=(r||[]).slice(),s=o.length,l=t.start,c=t.end;if(a){var f=r[s-1],u=n(f,s-1),d=e*(f.coordinate+e*u/2-c);o[s-1]=f=Ge(Ge({},f),{},{tickCoord:d>0?f.coordinate-d*e:f.coordinate});var p=ss(e,f.tickCoord,function(){return u},l,c);p&&(c=f.tickCoord-e*(u/2+i),o[s-1]=Ge(Ge({},f),{},{isShow:!0}))}for(var v=a?s-1:s,m=function(b){var _=o[b],S,y=function(){return S===void 0&&(S=n(_,b)),S};if(b===0){var x=e*(_.coordinate-e*y()/2-l);o[b]=_=Ge(Ge({},_),{},{tickCoord:x<0?_.coordinate-x*e:_.coordinate})}else o[b]=_=Ge(Ge({},_),{},{tickCoord:_.coordinate});var O=ss(e,_.tickCoord,y,l,c);O&&(l=_.tickCoord+e*(y()/2+i),o[b]=Ge(Ge({},_),{},{isShow:!0}))},g=0;g<v;g++)m(g);return o}function id(e,t,n){var r=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,c=e.tickFormatter,f=e.unit,u=e.angle;if(!i||!i.length||!r)return[];if(W(l)||Qr.isSsr)return i3(i,typeof l=="number"&&W(l)?l:0);var d=[],p=s==="top"||s==="bottom"?"width":"height",v=f&&p==="width"?Oi(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(_,S){var y=ae(c)?c(_.value,S):_.value;return p==="width"?n3(Oi(y,{fontSize:t,letterSpacing:n}),v,u):Oi(y,{fontSize:t,letterSpacing:n})[p]},g=i.length>=2?Et(i[1].coordinate-i[0].coordinate):1,w=r3(a,g,p);return l==="equidistantPreserveStart"?a3(g,w,m,i,o):(l==="preserveStart"||l==="preserveStartEnd"?d=u3(g,w,m,i,o,l==="preserveStartEnd"):d=c3(g,w,m,i,o),d.filter(function(b){return b.isShow}))}var f3=["viewBox"],d3=["viewBox"],h3=["ticks"];function Dr(e){"@babel/helpers - typeof";return Dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(e)}function sr(){return sr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sr.apply(this,arguments)}function rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rg(Object(n),!0).forEach(function(r){ad(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zl(e,t){if(e==null)return{};var n=p3(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function p3(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function m3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ig(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yb(r.key),r)}}function g3(e,t,n){return t&&ig(e.prototype,t),n&&ig(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y3(e,t,n){return t=ls(t),v3(e,Gb()?Reflect.construct(t,n||[],ls(e).constructor):t.apply(e,n))}function v3(e,t){if(t&&(Dr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b3(e)}function b3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gb=function(){return!!e})()}function ls(e){return ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ls(e)}function x3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$u(e,t)}function $u(e,t){return $u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$u(e,t)}function ad(e,t,n){return t=Yb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yb(e){var t=w3(e,"string");return Dr(t)=="symbol"?t:t+""}function w3(e,t){if(Dr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Dr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ni=function(e){function t(n){var r;return m3(this,t),r=y3(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return x3(t,e),g3(t,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=zl(r,f3),s=this.props,l=s.viewBox,c=zl(s,d3);return!mr(a,l)||!mr(o,c)||!mr(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,c=i.orientation,f=i.tickSize,u=i.mirror,d=i.tickMargin,p,v,m,g,w,b,_=u?-1:1,S=r.tickSize||f,y=W(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":p=v=r.coordinate,g=o+ +!u*l,m=g-_*S,b=m-_*d,w=y;break;case"left":m=g=r.coordinate,v=a+ +!u*s,p=v-_*S,w=p-_*d,b=y;break;case"right":m=g=r.coordinate,v=a+ +u*s,p=v+_*S,w=p+_*d,b=y;break;default:p=v=r.coordinate,g=o+ +u*l,m=g+_*S,b=m+_*d,w=y;break}return{line:{x1:p,y1:m,x2:v,y2:g},tick:{x:w,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.orientation,c=r.mirror,f=r.axisLine,u=De(De(De({},se(this.props,!1)),se(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var d=+(l==="top"&&!c||l==="bottom"&&c);u=De(De({},u),{},{x1:i,y1:a+d*s,x2:i+o,y2:a+d*s})}else{var p=+(l==="left"&&!c||l==="right"&&c);u=De(De({},u),{},{x1:i+p*o,y1:a,x2:i+p*o,y2:a+s})}return I.createElement("line",sr({},u,{className:ce("recharts-cartesian-axis-line",mt(f,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,s=this.props,l=s.tickLine,c=s.stroke,f=s.tick,u=s.tickFormatter,d=s.unit,p=id(De(De({},this.props),{},{ticks:r}),i,a),v=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=se(this.props,!1),w=se(f,!1),b=De(De({},g),{},{fill:"none"},se(l,!1)),_=p.map(function(S,y){var x=o.getTickLineCoord(S),O=x.line,j=x.tick,$=De(De(De(De({textAnchor:v,verticalAnchor:m},g),{},{stroke:"none",fill:c},w),j),{},{index:y,payload:S,visibleTicksCount:p.length,tickFormatter:u});return I.createElement(Ne,sr({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},go(o.props,S,y)),l&&I.createElement("line",sr({},b,O,{className:ce("recharts-cartesian-axis-tick-line",mt(l,"className"))})),f&&t.renderTickItem(f,$,"".concat(ae(u)?u(S.value,y):S.value).concat(d||"")))});return I.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,c=i.className,f=i.hide;if(f)return null;var u=this.props,d=u.ticks,p=zl(u,h3),v=d;return ae(l)&&(v=d&&d.length>0?l(this.props):l(p)),o<=0||s<=0||!v||!v.length?null:I.createElement(Ne,{className:ce("recharts-cartesian-axis",c),ref:function(g){r.layerReference=g}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Ye.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o,s=ce(i.className,"recharts-cartesian-axis-tick-value");return I.isValidElement(r)?o=I.cloneElement(r,De(De({},i),{},{className:s})):ae(r)?o=r(De(De({},i),{},{className:s})):o=I.createElement(Eo,sr({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(P.Component);ad(ni,"displayName","CartesianAxis");ad(ni,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _3=["x1","y1","x2","y2","key"],S3=["offset"];function zn(e){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(e)}function ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ag(Object(n),!0).forEach(function(r){O3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ag(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O3(e,t,n){return t=A3(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A3(e){var t=j3(e,"string");return zn(t)=="symbol"?t:t+""}function j3(e,t){if(zn(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function En(){return En=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},En.apply(this,arguments)}function og(e,t){if(e==null)return{};var n=$3(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $3(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var P3=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,a=t.y,o=t.width,s=t.height,l=t.ry;return I.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xb(e,t){var n;if(I.isValidElement(e))n=I.cloneElement(e,t);else if(ae(e))n=e(t);else{var r=t.x1,i=t.y1,a=t.x2,o=t.y2,s=t.key,l=og(t,_3),c=se(l,!1);c.offset;var f=og(c,S3);n=I.createElement("line",En({},f,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:s}))}return n}function T3(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Xe(Xe({},e),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(l),index:l});return Xb(i,c)});return I.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function E3(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,a=e.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Xe(Xe({},e),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(l),index:l});return Xb(i,c)});return I.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function N3(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,a=e.width,o=e.height,s=e.horizontalPoints,l=e.horizontal,c=l===void 0?!0:l;if(!c||!t||!t.length)return null;var f=s.map(function(d){return Math.round(d+i-i)}).sort(function(d,p){return d-p});i!==f[0]&&f.unshift(0);var u=f.map(function(d,p){var v=!f[p+1],m=v?i+o-d:f[p+1]-d;if(m<=0)return null;var g=p%t.length;return I.createElement("rect",{key:"react-".concat(p),y:d,x:r,height:m,width:a,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function k3(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,a=e.x,o=e.y,s=e.width,l=e.height,c=e.verticalPoints;if(!n||!r||!r.length)return null;var f=c.map(function(d){return Math.round(d+a-a)}).sort(function(d,p){return d-p});a!==f[0]&&f.unshift(0);var u=f.map(function(d,p){var v=!f[p+1],m=v?a+s-d:f[p+1]-d;if(m<=0)return null;var g=p%r.length;return I.createElement("rect",{key:"react-".concat(p),x:d,y:o,width:m,height:l,stroke:"none",fill:r[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var C3=function(t,n){var r=t.xAxis,i=t.width,a=t.height,o=t.offset;return cb(id(Xe(Xe(Xe({},ni.defaultProps),r),{},{ticks:Wt(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},I3=function(t,n){var r=t.yAxis,i=t.width,a=t.height,o=t.offset;return cb(id(Xe(Xe(Xe({},ni.defaultProps),r),{},{ticks:Wt(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},er={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function od(e){var t,n,r,i,a,o,s=ed(),l=td(),c=wz(),f=Xe(Xe({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:er.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:er.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:er.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:er.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:er.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:er.verticalFill,x:W(e.x)?e.x:c.left,y:W(e.y)?e.y:c.top,width:W(e.width)?e.width:c.width,height:W(e.height)?e.height:c.height}),u=f.x,d=f.y,p=f.width,v=f.height,m=f.syncWithTicks,g=f.horizontalValues,w=f.verticalValues,b=vz(),_=bz();if(!W(p)||p<=0||!W(v)||v<=0||!W(u)||u!==+u||!W(d)||d!==+d)return null;var S=f.verticalCoordinatesGenerator||C3,y=f.horizontalCoordinatesGenerator||I3,x=f.horizontalPoints,O=f.verticalPoints;if((!x||!x.length)&&ae(y)){var j=g&&g.length,$=y({yAxis:_?Xe(Xe({},_),{},{ticks:j?g:_.ticks}):void 0,width:s,height:l,offset:c},j?!0:m);Gt(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(zn($),"]")),Array.isArray($)&&(x=$)}if((!O||!O.length)&&ae(S)){var T=w&&w.length,N=S({xAxis:b?Xe(Xe({},b),{},{ticks:T?w:b.ticks}):void 0,width:s,height:l,offset:c},T?!0:m);Gt(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(zn(N),"]")),Array.isArray(N)&&(O=N)}return I.createElement("g",{className:"recharts-cartesian-grid"},I.createElement(P3,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),I.createElement(T3,En({},f,{offset:c,horizontalPoints:x,xAxis:b,yAxis:_})),I.createElement(E3,En({},f,{offset:c,verticalPoints:O,xAxis:b,yAxis:_})),I.createElement(N3,En({},f,{horizontalPoints:x})),I.createElement(k3,En({},f,{verticalPoints:O})))}od.displayName="CartesianGrid";var M3=["type","layout","connectNulls","ref"],D3=["key"];function Lr(e){"@babel/helpers - typeof";return Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lr(e)}function sg(e,t){if(e==null)return{};var n=L3(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function L3(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Pi(){return Pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pi.apply(this,arguments)}function lg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lg(Object(n),!0).forEach(function(r){$t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tr(e){return U3(e)||F3(e)||B3(e)||R3()}function R3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B3(e,t){if(e){if(typeof e=="string")return Pu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pu(e,t)}}function F3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U3(e){if(Array.isArray(e))return Pu(e)}function Pu(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qb(r.key),r)}}function z3(e,t,n){return t&&cg(e.prototype,t),n&&cg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function K3(e,t,n){return t=cs(t),W3(e,Jb()?Reflect.construct(t,n||[],cs(e).constructor):t.apply(e,n))}function W3(e,t){if(t&&(Lr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H3(e)}function H3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jb=function(){return!!e})()}function cs(e){return cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cs(e)}function V3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tu(e,t)}function Tu(e,t){return Tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Tu(e,t)}function $t(e,t,n){return t=Qb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qb(e){var t=G3(e,"string");return Lr(t)=="symbol"?t:t+""}function G3(e,t){if(Lr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Lr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ri=function(e){function t(){var n;q3(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=K3(this,t,[].concat(i)),$t(n,"state",{isAnimationFinished:!0,totalLength:0}),$t(n,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),$t(n,"getStrokeDasharray",function(o,s,l){var c=l.reduce(function(w,b){return w+b});if(!c)return n.generateSimpleStrokeDasharray(s,o);for(var f=Math.floor(o/c),u=o%c,d=s-o,p=[],v=0,m=0;v<l.length;m+=l[v],++v)if(m+l[v]>u){p=[].concat(tr(l.slice(0,v)),[u-m]);break}var g=p.length%2===0?[0,d]:[d];return[].concat(tr(t.repeat(l,f)),tr(p),g).map(function(w){return"".concat(w,"px")}).join(", ")}),$t(n,"id",va("recharts-line-")),$t(n,"pathRef",function(o){n.mainCurve=o}),$t(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),$t(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return V3(t,e),z3(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,s=a.xAxis,l=a.yAxis,c=a.layout,f=a.children,u=gt(f,Oa);if(!u)return null;var d=function(m,g){return{x:m.x,y:m.y,value:m.value,errorVal:ut(m.payload,g)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return I.createElement(Ne,p,u.map(function(v){return I.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,dataPointFormatter:d})}))}},{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,c=s.points,f=s.dataKey,u=se(this.props,!1),d=se(l,!0),p=c.map(function(m,g){var w=at(at(at({key:"dot-".concat(g),r:3},u),d),{},{index:g,cx:m.x,cy:m.y,value:m.value,dataKey:f,payload:m.payload,points:c});return t.renderDotItem(l,w)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return I.createElement(Ne,Pi({className:"recharts-line-dots",key:"dots"},v),p)}},{key:"renderCurveStatically",value:function(r,i,a,o){var s=this.props,l=s.type,c=s.layout,f=s.connectNulls;s.ref;var u=sg(s,M3),d=at(at(at({},se(u,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},o),{},{type:l,layout:c,connectNulls:f});return I.createElement(ou,Pi({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,o=this.props,s=o.points,l=o.strokeDasharray,c=o.isAnimationActive,f=o.animationBegin,u=o.animationDuration,d=o.animationEasing,p=o.animationId,v=o.animateNewValues,m=o.width,g=o.height,w=this.state,b=w.prevPoints,_=w.totalLength;return I.createElement(en,{begin:f,duration:u,isActive:c,easing:d,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var y=S.t;if(b){var x=b.length/s.length,O=s.map(function(A,E){var k=Math.floor(E*x);if(b[k]){var C=b[k],M=Pt(C.x,A.x),D=Pt(C.y,A.y);return at(at({},A),{},{x:M(y),y:D(y)})}if(v){var L=Pt(m*2,A.x),R=Pt(g/2,A.y);return at(at({},A),{},{x:L(y),y:R(y)})}return at(at({},A),{},{x:A.x,y:A.y})});return a.renderCurveStatically(O,r,i)}var j=Pt(0,_),$=j(y),T;if(l){var N="".concat(l).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});T=a.getStrokeDasharray($,_,N)}else T=a.generateSimpleStrokeDasharray(_,$);return a.renderCurveStatically(s,r,i,{strokeDasharray:T})})}},{key:"renderCurve",value:function(r,i){var a=this.props,o=a.points,s=a.isAnimationActive,l=this.state,c=l.prevPoints,f=l.totalLength;return s&&o&&o.length&&(!c&&f>0||!Vs(c,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,c=i.xAxis,f=i.yAxis,u=i.top,d=i.left,p=i.width,v=i.height,m=i.isAnimationActive,g=i.id;if(a||!s||!s.length)return null;var w=this.state.isAnimationFinished,b=s.length===1,_=ce("recharts-line",l),S=c&&c.allowDataOverflow,y=f&&f.allowDataOverflow,x=S||y,O=oe(g)?this.id:g,j=(r=se(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},$=j.r,T=$===void 0?3:$,N=j.strokeWidth,A=N===void 0?2:N,E=dS(o)?o:{},k=E.clipDot,C=k===void 0?!0:k,M=T*2+A;return I.createElement(Ne,{className:_},S||y?I.createElement("defs",null,I.createElement("clipPath",{id:"clipPath-".concat(O)},I.createElement("rect",{x:S?d:d-p/2,y:y?u:u-v/2,width:S?p:p*2,height:y?v:v*2})),!C&&I.createElement("clipPath",{id:"clipPath-dots-".concat(O)},I.createElement("rect",{x:d-M/2,y:u-M/2,width:p+M,height:v+M}))):null,!b&&this.renderCurve(x,O),this.renderErrorBar(x,O),(b||o)&&this.renderDots(x,C,O),(!m||w)&&dn.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(tr(r),[0]):r,o=[],s=0;s<i;++s)o=[].concat(tr(o),tr(a));return o}},{key:"renderDotItem",value:function(r,i){var a;if(I.isValidElement(r))a=I.cloneElement(r,i);else if(ae(r))a=r(i);else{var o=i.key,s=sg(i,D3),l=ce("recharts-line-dot",typeof r!="boolean"?r.className:"");a=I.createElement(Xf,Pi({key:o},s,{className:l}))}return a}}])}(P.PureComponent);$t(ri,"displayName","Line");$t(ri,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Qr.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});$t(ri,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,s=e.bandSize,l=e.displayedData,c=e.offset,f=t.layout,u=l.map(function(d,p){var v=ut(d,o);return f==="horizontal"?{x:zp({axis:n,ticks:i,bandSize:s,entry:d,index:p}),y:oe(v)?null:r.scale(v),value:v,payload:d}:{x:oe(v)?null:n.scale(v),y:zp({axis:r,ticks:a,bandSize:s,entry:d,index:p}),value:v,payload:d}});return at({points:u,layout:f},c)});function Rr(e){"@babel/helpers - typeof";return Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rr(e)}function Y3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t0(r.key),r)}}function J3(e,t,n){return t&&X3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q3(e,t,n){return t=us(t),Z3(e,Zb()?Reflect.construct(t,n||[],us(e).constructor):t.apply(e,n))}function Z3(e,t){if(t&&(Rr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eK(e)}function eK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zb=function(){return!!e})()}function us(e){return us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},us(e)}function tK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eu(e,t)}function Eu(e,t){return Eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Eu(e,t)}function e0(e,t,n){return t=t0(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t0(e){var t=nK(e,"string");return Rr(t)=="symbol"?t:t+""}function nK(e,t){if(Rr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Rr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Nu(){return Nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nu.apply(this,arguments)}function rK(e){var t=e.xAxisId,n=ed(),r=td(),i=Bb(t);return i==null?null:P.createElement(ni,Nu({},i,{className:ce("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Wt(o,!0)}}))}var ja=function(e){function t(){return Y3(this,t),Q3(this,t,arguments)}return tK(t,e),J3(t,[{key:"render",value:function(){return P.createElement(rK,this.props)}}])}(P.Component);e0(ja,"displayName","XAxis");e0(ja,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Br(e){"@babel/helpers - typeof";return Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Br(e)}function iK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i0(r.key),r)}}function oK(e,t,n){return t&&aK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sK(e,t,n){return t=fs(t),lK(e,n0()?Reflect.construct(t,n||[],fs(e).constructor):t.apply(e,n))}function lK(e,t){if(t&&(Br(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cK(e)}function cK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n0=function(){return!!e})()}function fs(e){return fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fs(e)}function uK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ku(e,t)}function ku(e,t){return ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ku(e,t)}function r0(e,t,n){return t=i0(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i0(e){var t=fK(e,"string");return Br(t)=="symbol"?t:t+""}function fK(e,t){if(Br(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Br(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Cu(){return Cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cu.apply(this,arguments)}var dK=function(t){var n=t.yAxisId,r=ed(),i=td(),a=Fb(n);return a==null?null:P.createElement(ni,Cu({},a,{className:ce("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return Wt(s,!0)}}))},$a=function(e){function t(){return iK(this,t),sK(this,t,arguments)}return uK(t,e),oK(t,[{key:"render",value:function(){return P.createElement(dK,this.props)}}])}(P.Component);r0($a,"displayName","YAxis");r0($a,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function ug(e){return gK(e)||mK(e)||pK(e)||hK()}function hK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pK(e,t){if(e){if(typeof e=="string")return Iu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Iu(e,t)}}function mK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gK(e){if(Array.isArray(e))return Iu(e)}function Iu(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mu=function(t,n,r,i,a){var o=gt(t,rd),s=gt(t,el),l=[].concat(ug(o),ug(s)),c=gt(t,nl),f="".concat(i,"Id"),u=i[0],d=n;if(l.length&&(d=l.reduce(function(m,g){if(g.props[f]===r&&Dt(g.props,"extendDomain")&&W(g.props[u])){var w=g.props[u];return[Math.min(m[0],w),Math.max(m[1],w)]}return m},d)),c.length){var p="".concat(u,"1"),v="".concat(u,"2");d=c.reduce(function(m,g){if(g.props[f]===r&&Dt(g.props,"extendDomain")&&W(g.props[p])&&W(g.props[v])){var w=g.props[p],b=g.props[v];return[Math.min(m[0],w,b),Math.max(m[1],w,b)]}return m},d)}return a&&a.length&&(d=a.reduce(function(m,g){return W(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},d)),d},a0={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function a(l,c,f,u,d){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,u||l,d),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],p]:l._events[v].push(p):(l._events[v]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],f,u;if(this._eventsCount===0)return c;for(u in f=this._events)t.call(f,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},s.prototype.listeners=function(c){var f=n?n+c:c,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,p=u.length,v=new Array(p);d<p;d++)v[d]=u[d].fn;return v},s.prototype.listenerCount=function(c){var f=n?n+c:c,u=this._events[f];return u?u.fn?1:u.length:0},s.prototype.emit=function(c,f,u,d,p,v){var m=n?n+c:c;if(!this._events[m])return!1;var g=this._events[m],w=arguments.length,b,_;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),w){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,f),!0;case 3:return g.fn.call(g.context,f,u),!0;case 4:return g.fn.call(g.context,f,u,d),!0;case 5:return g.fn.call(g.context,f,u,d,p),!0;case 6:return g.fn.call(g.context,f,u,d,p,v),!0}for(_=1,b=new Array(w-1);_<w;_++)b[_-1]=arguments[_];g.fn.apply(g.context,b)}else{var S=g.length,y;for(_=0;_<S;_++)switch(g[_].once&&this.removeListener(c,g[_].fn,void 0,!0),w){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,f);break;case 3:g[_].fn.call(g[_].context,f,u);break;case 4:g[_].fn.call(g[_].context,f,u,d);break;default:if(!b)for(y=1,b=new Array(w-1);y<w;y++)b[y-1]=arguments[y];g[_].fn.apply(g[_].context,b)}}return!0},s.prototype.on=function(c,f,u){return a(this,c,f,u,!1)},s.prototype.once=function(c,f,u){return a(this,c,f,u,!0)},s.prototype.removeListener=function(c,f,u,d){var p=n?n+c:c;if(!this._events[p])return this;if(!f)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===f&&(!d||v.once)&&(!u||v.context===u)&&o(this,p);else{for(var m=0,g=[],w=v.length;m<w;m++)(v[m].fn!==f||d&&!v[m].once||u&&v[m].context!==u)&&g.push(v[m]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},s.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(a0);var yK=a0.exports;const vK=Ae(yK);var Kl=new vK,Wl="recharts.syncMouseEvents";function ua(e){"@babel/helpers - typeof";return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ua(e)}function bK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o0(r.key),r)}}function wK(e,t,n){return t&&xK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hl(e,t,n){return t=o0(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o0(e){var t=_K(e,"string");return ua(t)=="symbol"?t:t+""}function _K(e,t){if(ua(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ua(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var SK=function(){function e(){bK(this,e),Hl(this,"activeIndex",0),Hl(this,"coordinateList",[]),Hl(this,"layout","horizontal")}return wK(e,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,o=n.container,s=o===void 0?null:o,l=n.layout,c=l===void 0?null:l,f=n.offset,u=f===void 0?null:f,d=n.mouseHandlerCallback,p=d===void 0?null:d;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,u=a+l+c,d=o+this.offset.top+s/2+f;this.mouseHandlerCallback({pageX:u,pageY:d})}}}])}();function OK(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&W(r)&&W(i))return!0}return!1}function AK(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function s0(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,a=e.endAngle,o=We(t,n,r,i),s=We(t,n,r,a);return{points:[o,s],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function jK(e,t,n){var r,i,a,o;if(e==="horizontal")r=t.x,a=r,i=n.top,o=n.top+n.height;else if(e==="vertical")i=t.y,o=i,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,c=t.innerRadius,f=t.outerRadius,u=t.angle,d=We(s,l,c,u),p=We(s,l,f,u);r=d.x,i=d.y,a=p.x,o=p.y}else return s0(t);return[{x:r,y:i},{x:a,y:o}]}function fa(e){"@babel/helpers - typeof";return fa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fa(e)}function fg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fg(Object(n),!0).forEach(function(r){$K(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $K(e,t,n){return t=PK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PK(e){var t=TK(e,"string");return fa(t)=="symbol"?t:t+""}function TK(e,t){if(fa(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EK(e){var t,n,r=e.element,i=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,s=e.activePayload,l=e.offset,c=e.activeTooltipIndex,f=e.tooltipAxisBandSize,u=e.layout,d=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!o||d!=="ScatterChart"&&i!=="axis")return null;var v,m=ou;if(d==="ScatterChart")v=o,m=TF;else if(d==="BarChart")v=AK(u,o,l,f),m=Yf;else if(u==="radial"){var g=s0(o),w=g.cx,b=g.cy,_=g.radius,S=g.startAngle,y=g.endAngle;v={cx:w,cy:b,startAngle:S,endAngle:y,innerRadius:_,outerRadius:_},m=pb}else v={points:jK(u,o,l)},m=ou;var x=Wa(Wa(Wa(Wa({stroke:"#ccc",pointerEvents:"none"},l),v),se(p,!1)),{},{payload:s,payloadIndex:c,className:ce("recharts-tooltip-cursor",p.className)});return P.isValidElement(p)?P.cloneElement(p,x):P.createElement(m,x)}var NK=["item"],kK=["children","className","width","height","style","compact","title","desc"];function Fr(e){"@babel/helpers - typeof";return Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fr(e)}function lr(){return lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lr.apply(this,arguments)}function dg(e,t){return MK(e)||IK(e,t)||c0(e,t)||CK()}function CK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function MK(e){if(Array.isArray(e))return e}function hg(e,t){if(e==null)return{};var n=DK(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function DK(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function LK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u0(r.key),r)}}function BK(e,t,n){return t&&RK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FK(e,t,n){return t=ds(t),UK(e,l0()?Reflect.construct(t,n||[],ds(e).constructor):t.apply(e,n))}function UK(e,t){if(t&&(Fr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qK(e)}function qK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l0=function(){return!!e})()}function ds(e){return ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ds(e)}function zK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Du(e,t)}function Du(e,t){return Du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Du(e,t)}function Ur(e){return HK(e)||WK(e)||c0(e)||KK()}function KK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c0(e,t){if(e){if(typeof e=="string")return Lu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lu(e,t)}}function WK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function HK(e){if(Array.isArray(e))return Lu(e)}function Lu(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pg(Object(n),!0).forEach(function(r){Z(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Z(e,t,n){return t=u0(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u0(e){var t=VK(e,"string");return Fr(t)=="symbol"?t:t+""}function VK(e,t){if(Fr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Fr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GK={xAxis:["bottom","top"],yAxis:["left","right"]},YK={width:"100%",height:"100%"},f0={x:0,y:0};function Ha(e){return e}var XK=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},JK=function(t,n,r,i){var a=n.find(function(f){return f&&f.index===r});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var o=a.coordinate,s=i.radius;return B(B(B({},i),We(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,c=i.angle;return B(B(B({},i),We(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return f0},rl=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(Ur(s),Ur(c)):s},[]);return o.length>0?o:t&&t.length&&W(i)&&W(a)?t.slice(i,a+1):[]};function d0(e){return e==="number"?[0,"auto"]:void 0}var Ru=function(t,n,r,i){var a=t.graphicalItems,o=t.tooltipAxis,s=rl(n,t);return r<0||!a||!a.length||r>=s.length?null:a.reduce(function(l,c){var f,u=(f=c.props.data)!==null&&f!==void 0?f:n;u&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(u=u.slice(t.dataStartIndex,t.dataEndIndex+1));var d;if(o.dataKey&&!o.allowDuplicatedCategory){var p=u===void 0?s:u;d=po(p,o.dataKey,i)}else d=u&&u[r]||s[r];return d?[].concat(Ur(l),[fb(c,d)]):l},[])},mg=function(t,n,r,i){var a=i||{x:t.chartX,y:t.chartY},o=XK(a,r),s=t.orderedTooltipTicks,l=t.tooltipAxis,c=t.tooltipTicks,f=mL(o,s,c,l);if(f>=0&&c){var u=c[f]&&c[f].value,d=Ru(t,n,f,u),p=JK(r,s,f,a);return{activeTooltipIndex:f,activeLabel:u,activePayload:d,activeCoordinate:p}}return null},QK=function(t,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=t.layout,u=t.children,d=t.stackOffset,p=lb(f,a);return r.reduce(function(v,m){var g,w=m.type.defaultProps!==void 0?B(B({},m.type.defaultProps),m.props):m.props,b=w.type,_=w.dataKey,S=w.allowDataOverflow,y=w.allowDuplicatedCategory,x=w.scale,O=w.ticks,j=w.includeHidden,$=w[o];if(v[$])return v;var T=rl(t.data,{graphicalItems:i.filter(function(z){var X,ne=o in z.props?z.props[o]:(X=z.type.defaultProps)===null||X===void 0?void 0:X[o];return ne===$}),dataStartIndex:l,dataEndIndex:c}),N=T.length,A,E,k;OK(w.domain,S,b)&&(A=tu(w.domain,null,S),p&&(b==="number"||x!=="auto")&&(k=ji(T,_,"category")));var C=d0(b);if(!A||A.length===0){var M,D=(M=w.domain)!==null&&M!==void 0?M:C;if(_){if(A=ji(T,_,b),b==="category"&&p){var L=nS(A);y&&L?(E=A,A=Zo(0,N)):y||(A=Vp(D,A,m).reduce(function(z,X){return z.indexOf(X)>=0?z:[].concat(Ur(z),[X])},[]))}else if(b==="category")y?A=A.filter(function(z){return z!==""&&!oe(z)}):A=Vp(D,A,m).reduce(function(z,X){return z.indexOf(X)>=0||X===""||oe(X)?z:[].concat(Ur(z),[X])},[]);else if(b==="number"){var R=xL(T,i.filter(function(z){var X,ne,he=o in z.props?z.props[o]:(X=z.type.defaultProps)===null||X===void 0?void 0:X[o],Fe="hide"in z.props?z.props.hide:(ne=z.type.defaultProps)===null||ne===void 0?void 0:ne.hide;return he===$&&(j||!Fe)}),_,a,f);R&&(A=R)}p&&(b==="number"||x!=="auto")&&(k=ji(T,_,"category"))}else p?A=Zo(0,N):s&&s[$]&&s[$].hasStack&&b==="number"?A=d==="expand"?[0,1]:ub(s[$].stackGroups,l,c):A=sb(T,i.filter(function(z){var X=o in z.props?z.props[o]:z.type.defaultProps[o],ne="hide"in z.props?z.props.hide:z.type.defaultProps.hide;return X===$&&(j||!ne)}),b,f,!0);if(b==="number")A=Mu(u,A,$,a,O),D&&(A=tu(D,A,S));else if(b==="category"&&D){var K=D,V=A.every(function(z){return K.indexOf(z)>=0});V&&(A=K)}}return B(B({},v),{},Z({},$,B(B({},w),{},{axisType:a,domain:A,categoricalDomain:k,duplicateDomain:E,originalDomain:(g=w.domain)!==null&&g!==void 0?g:C,isCategorical:p,layout:f})))},{})},ZK=function(t,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=t.layout,u=t.children,d=rl(t.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),p=d.length,v=lb(f,a),m=-1;return r.reduce(function(g,w){var b=w.type.defaultProps!==void 0?B(B({},w.type.defaultProps),w.props):w.props,_=b[o],S=d0("number");if(!g[_]){m++;var y;return v?y=Zo(0,p):s&&s[_]&&s[_].hasStack?(y=ub(s[_].stackGroups,l,c),y=Mu(u,y,_,a)):(y=tu(S,sb(d,r.filter(function(x){var O,j,$=o in x.props?x.props[o]:(O=x.type.defaultProps)===null||O===void 0?void 0:O[o],T="hide"in x.props?x.props.hide:(j=x.type.defaultProps)===null||j===void 0?void 0:j.hide;return $===_&&!T}),"number",f),i.defaultProps.allowDataOverflow),y=Mu(u,y,_,a)),B(B({},g),{},Z({},_,B(B({axisType:a},i.defaultProps),{},{hide:!0,orientation:mt(GK,"".concat(a,".").concat(m%2),null),domain:y,originalDomain:S,isCategorical:v,layout:f})))}return g},{})},eW=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,f=t.children,u="".concat(i,"Id"),d=gt(f,a),p={};return d&&d.length?p=QK(t,{axes:d,graphicalItems:o,axisType:i,axisIdKey:u,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(p=ZK(t,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:u,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),p},tW=function(t){var n=cn(t),r=Wt(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:_f(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Ko(n,r)}},gg=function(t){var n=t.children,r=t.defaultShowTooltip,i=st(n,qn),a=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},nW=function(t){return!t||!t.length?!1:t.some(function(n){var r=Vt(n&&n.type);return r&&r.indexOf("Bar")>=0})},yg=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},rW=function(t,n){var r=t.props,i=t.graphicalItems,a=t.xAxisMap,o=a===void 0?{}:a,s=t.yAxisMap,l=s===void 0?{}:s,c=r.width,f=r.height,u=r.children,d=r.margin||{},p=st(u,qn),v=st(u,In),m=Object.keys(l).reduce(function(y,x){var O=l[x],j=O.orientation;return!O.mirror&&!O.hide?B(B({},y),{},Z({},j,y[j]+O.width)):y},{left:d.left||0,right:d.right||0}),g=Object.keys(o).reduce(function(y,x){var O=o[x],j=O.orientation;return!O.mirror&&!O.hide?B(B({},y),{},Z({},j,mt(y,"".concat(j))+O.height)):y},{top:d.top||0,bottom:d.bottom||0}),w=B(B({},g),m),b=w.bottom;p&&(w.bottom+=p.props.height||qn.defaultProps.height),v&&n&&(w=vL(w,i,r,n));var _=c-w.left-w.right,S=f-w.top-w.bottom;return B(B({brushBottom:b},w),{},{width:Math.max(_,0),height:Math.max(S,0)})},iW=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},aW=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=t.axisComponents,c=t.legendContent,f=t.formatAxisMap,u=t.defaultProps,d=function(w,b){var _=b.graphicalItems,S=b.stackGroups,y=b.offset,x=b.updateId,O=b.dataStartIndex,j=b.dataEndIndex,$=w.barSize,T=w.layout,N=w.barGap,A=w.barCategoryGap,E=w.maxBarSize,k=yg(T),C=k.numericAxisName,M=k.cateAxisName,D=nW(_),L=[];return _.forEach(function(R,K){var V=rl(w.data,{graphicalItems:[R],dataStartIndex:O,dataEndIndex:j}),z=R.type.defaultProps!==void 0?B(B({},R.type.defaultProps),R.props):R.props,X=z.dataKey,ne=z.maxBarSize,he=z["".concat(C,"Id")],Fe=z["".concat(M,"Id")],et={},ke=l.reduce(function(Q,te){var ue=b["".concat(te.axisType,"Map")],ge=z["".concat(te.axisType,"Id")];ue&&ue[ge]||te.axisType==="zAxis"||Un();var we=ue[ge];return B(B({},Q),{},Z(Z({},te.axisType,we),"".concat(te.axisType,"Ticks"),Wt(we)))},et),H=ke[M],U=ke["".concat(M,"Ticks")],J=S&&S[he]&&S[he].hasStack&&kL(R,S[he].stackGroups),F=Vt(R.type).indexOf("Bar")>=0,re=Ko(H,U),ee=[],pe=D&&gL({barSize:$,stackGroups:S,totalSize:iW(ke,M)});if(F){var me,Me,tt=oe(ne)?E:ne,q=(me=(Me=Ko(H,U,!0))!==null&&Me!==void 0?Me:tt)!==null&&me!==void 0?me:0;ee=yL({barGap:N,barCategoryGap:A,bandSize:q!==re?q:re,sizeList:pe[Fe],maxBarSize:tt}),q!==re&&(ee=ee.map(function(Q){return B(B({},Q),{},{position:B(B({},Q.position),{},{offset:Q.position.offset-q/2})})}))}var G=R&&R.type&&R.type.getComposedData;G&&L.push({props:B(B({},G(B(B({},ke),{},{displayedData:V,props:w,dataKey:X,item:R,bandSize:re,barPosition:ee,offset:y,stackedData:J,layout:T,dataStartIndex:O,dataEndIndex:j}))),{},Z(Z(Z({key:R.key||"item-".concat(K)},C,ke[C]),M,ke[M]),"animationId",x)),childIndex:mS(R,w.children),item:R})}),L},p=function(w,b){var _=w.props,S=w.dataStartIndex,y=w.dataEndIndex,x=w.updateId;if(!Fd({props:_}))return null;var O=_.children,j=_.layout,$=_.stackOffset,T=_.data,N=_.reverseStackOrder,A=yg(j),E=A.numericAxisName,k=A.cateAxisName,C=gt(O,r),M=TL(T,C,"".concat(E,"Id"),"".concat(k,"Id"),$,N),D=l.reduce(function(z,X){var ne="".concat(X.axisType,"Map");return B(B({},z),{},Z({},ne,eW(_,B(B({},X),{},{graphicalItems:C,stackGroups:X.axisType===E&&M,dataStartIndex:S,dataEndIndex:y}))))},{}),L=rW(B(B({},D),{},{props:_,graphicalItems:C}),b==null?void 0:b.legendBBox);Object.keys(D).forEach(function(z){D[z]=f(_,D[z],L,z.replace("Map",""),n)});var R=D["".concat(k,"Map")],K=tW(R),V=d(_,B(B({},D),{},{dataStartIndex:S,dataEndIndex:y,updateId:x,graphicalItems:C,stackGroups:M,offset:L}));return B(B({formattedGraphicalItems:V,graphicalItems:C,offset:L,stackGroups:M},K),D)},v=function(g){function w(b){var _,S,y;return LK(this,w),y=FK(this,w,[b]),Z(y,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Z(y,"accessibilityManager",new SK),Z(y,"handleLegendBBoxUpdate",function(x){if(x){var O=y.state,j=O.dataStartIndex,$=O.dataEndIndex,T=O.updateId;y.setState(B({legendBBox:x},p({props:y.props,dataStartIndex:j,dataEndIndex:$,updateId:T},B(B({},y.state),{},{legendBBox:x}))))}}),Z(y,"handleReceiveSyncEvent",function(x,O,j){if(y.props.syncId===x){if(j===y.eventEmitterSymbol&&typeof y.props.syncMethod!="function")return;y.applySyncEvent(O)}}),Z(y,"handleBrushChange",function(x){var O=x.startIndex,j=x.endIndex;if(O!==y.state.dataStartIndex||j!==y.state.dataEndIndex){var $=y.state.updateId;y.setState(function(){return B({dataStartIndex:O,dataEndIndex:j},p({props:y.props,dataStartIndex:O,dataEndIndex:j,updateId:$},y.state))}),y.triggerSyncEvent({dataStartIndex:O,dataEndIndex:j})}}),Z(y,"handleMouseEnter",function(x){var O=y.getMouseInfo(x);if(O){var j=B(B({},O),{},{isTooltipActive:!0});y.setState(j),y.triggerSyncEvent(j);var $=y.props.onMouseEnter;ae($)&&$(j,x)}}),Z(y,"triggeredAfterMouseMove",function(x){var O=y.getMouseInfo(x),j=O?B(B({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};y.setState(j),y.triggerSyncEvent(j);var $=y.props.onMouseMove;ae($)&&$(j,x)}),Z(y,"handleItemMouseEnter",function(x){y.setState(function(){return{isTooltipActive:!0,activeItem:x,activePayload:x.tooltipPayload,activeCoordinate:x.tooltipPosition||{x:x.cx,y:x.cy}}})}),Z(y,"handleItemMouseLeave",function(){y.setState(function(){return{isTooltipActive:!1}})}),Z(y,"handleMouseMove",function(x){x.persist(),y.throttleTriggeredAfterMouseMove(x)}),Z(y,"handleMouseLeave",function(x){y.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};y.setState(O),y.triggerSyncEvent(O);var j=y.props.onMouseLeave;ae(j)&&j(O,x)}),Z(y,"handleOuterEvent",function(x){var O=pS(x),j=mt(y.props,"".concat(O));if(O&&ae(j)){var $,T;/.*touch.*/i.test(O)?T=y.getMouseInfo(x.changedTouches[0]):T=y.getMouseInfo(x),j(($=T)!==null&&$!==void 0?$:{},x)}}),Z(y,"handleClick",function(x){var O=y.getMouseInfo(x);if(O){var j=B(B({},O),{},{isTooltipActive:!0});y.setState(j),y.triggerSyncEvent(j);var $=y.props.onClick;ae($)&&$(j,x)}}),Z(y,"handleMouseDown",function(x){var O=y.props.onMouseDown;if(ae(O)){var j=y.getMouseInfo(x);O(j,x)}}),Z(y,"handleMouseUp",function(x){var O=y.props.onMouseUp;if(ae(O)){var j=y.getMouseInfo(x);O(j,x)}}),Z(y,"handleTouchMove",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&y.throttleTriggeredAfterMouseMove(x.changedTouches[0])}),Z(y,"handleTouchStart",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&y.handleMouseDown(x.changedTouches[0])}),Z(y,"handleTouchEnd",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&y.handleMouseUp(x.changedTouches[0])}),Z(y,"handleDoubleClick",function(x){var O=y.props.onDoubleClick;if(ae(O)){var j=y.getMouseInfo(x);O(j,x)}}),Z(y,"handleContextMenu",function(x){var O=y.props.onContextMenu;if(ae(O)){var j=y.getMouseInfo(x);O(j,x)}}),Z(y,"triggerSyncEvent",function(x){y.props.syncId!==void 0&&Kl.emit(Wl,y.props.syncId,x,y.eventEmitterSymbol)}),Z(y,"applySyncEvent",function(x){var O=y.props,j=O.layout,$=O.syncMethod,T=y.state.updateId,N=x.dataStartIndex,A=x.dataEndIndex;if(x.dataStartIndex!==void 0||x.dataEndIndex!==void 0)y.setState(B({dataStartIndex:N,dataEndIndex:A},p({props:y.props,dataStartIndex:N,dataEndIndex:A,updateId:T},y.state)));else if(x.activeTooltipIndex!==void 0){var E=x.chartX,k=x.chartY,C=x.activeTooltipIndex,M=y.state,D=M.offset,L=M.tooltipTicks;if(!D)return;if(typeof $=="function")C=$(L,x);else if($==="value"){C=-1;for(var R=0;R<L.length;R++)if(L[R].value===x.activeLabel){C=R;break}}var K=B(B({},D),{},{x:D.left,y:D.top}),V=Math.min(E,K.x+K.width),z=Math.min(k,K.y+K.height),X=L[C]&&L[C].value,ne=Ru(y.state,y.props.data,C),he=L[C]?{x:j==="horizontal"?L[C].coordinate:V,y:j==="horizontal"?z:L[C].coordinate}:f0;y.setState(B(B({},x),{},{activeLabel:X,activeCoordinate:he,activePayload:ne,activeTooltipIndex:C}))}else y.setState(x)}),Z(y,"renderCursor",function(x){var O,j=y.state,$=j.isTooltipActive,T=j.activeCoordinate,N=j.activePayload,A=j.offset,E=j.activeTooltipIndex,k=j.tooltipAxisBandSize,C=y.getTooltipEventType(),M=(O=x.props.active)!==null&&O!==void 0?O:$,D=y.props.layout,L=x.key||"_recharts-cursor";return I.createElement(EK,{key:L,activeCoordinate:T,activePayload:N,activeTooltipIndex:E,chartName:n,element:x,isActive:M,layout:D,offset:A,tooltipAxisBandSize:k,tooltipEventType:C})}),Z(y,"renderPolarAxis",function(x,O,j){var $=mt(x,"type.axisType"),T=mt(y.state,"".concat($,"Map")),N=x.type.defaultProps,A=N!==void 0?B(B({},N),x.props):x.props,E=T&&T[A["".concat($,"Id")]];return P.cloneElement(x,B(B({},E),{},{className:ce($,E.className),key:x.key||"".concat(O,"-").concat(j),ticks:Wt(E,!0)}))}),Z(y,"renderPolarGrid",function(x){var O=x.props,j=O.radialLines,$=O.polarAngles,T=O.polarRadius,N=y.state,A=N.radiusAxisMap,E=N.angleAxisMap,k=cn(A),C=cn(E),M=C.cx,D=C.cy,L=C.innerRadius,R=C.outerRadius;return P.cloneElement(x,{polarAngles:Array.isArray($)?$:Wt(C,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(T)?T:Wt(k,!0).map(function(K){return K.coordinate}),cx:M,cy:D,innerRadius:L,outerRadius:R,key:x.key||"polar-grid",radialLines:j})}),Z(y,"renderLegend",function(){var x=y.state.formattedGraphicalItems,O=y.props,j=O.children,$=O.width,T=O.height,N=y.props.margin||{},A=$-(N.left||0)-(N.right||0),E=ab({children:j,formattedGraphicalItems:x,legendWidth:A,legendContent:c});if(!E)return null;var k=E.item,C=hg(E,NK);return P.cloneElement(k,B(B({},C),{},{chartWidth:$,chartHeight:T,margin:N,onBBoxUpdate:y.handleLegendBBoxUpdate}))}),Z(y,"renderTooltip",function(){var x,O=y.props,j=O.children,$=O.accessibilityLayer,T=st(j,At);if(!T)return null;var N=y.state,A=N.isTooltipActive,E=N.activeCoordinate,k=N.activePayload,C=N.activeLabel,M=N.offset,D=(x=T.props.active)!==null&&x!==void 0?x:A;return P.cloneElement(T,{viewBox:B(B({},M),{},{x:M.left,y:M.top}),active:D,label:C,payload:D?k:[],coordinate:E,accessibilityLayer:$})}),Z(y,"renderBrush",function(x){var O=y.props,j=O.margin,$=O.data,T=y.state,N=T.offset,A=T.dataStartIndex,E=T.dataEndIndex,k=T.updateId;return P.cloneElement(x,{key:x.key||"_recharts-brush",onChange:Ua(y.handleBrushChange,x.props.onChange),data:$,x:W(x.props.x)?x.props.x:N.left,y:W(x.props.y)?x.props.y:N.top+N.height+N.brushBottom-(j.bottom||0),width:W(x.props.width)?x.props.width:N.width,startIndex:A,endIndex:E,updateId:"brush-".concat(k)})}),Z(y,"renderReferenceElement",function(x,O,j){if(!x)return null;var $=y,T=$.clipPathId,N=y.state,A=N.xAxisMap,E=N.yAxisMap,k=N.offset,C=x.type.defaultProps||{},M=x.props,D=M.xAxisId,L=D===void 0?C.xAxisId:D,R=M.yAxisId,K=R===void 0?C.yAxisId:R;return P.cloneElement(x,{key:x.key||"".concat(O,"-").concat(j),xAxis:A[L],yAxis:E[K],viewBox:{x:k.left,y:k.top,width:k.width,height:k.height},clipPathId:T})}),Z(y,"renderActivePoints",function(x){var O=x.item,j=x.activePoint,$=x.basePoint,T=x.childIndex,N=x.isRange,A=[],E=O.props.key,k=O.item.type.defaultProps!==void 0?B(B({},O.item.type.defaultProps),O.item.props):O.item.props,C=k.activeDot,M=k.dataKey,D=B(B({index:T,dataKey:M,cx:j.x,cy:j.y,r:4,fill:Gf(O.item),strokeWidth:2,stroke:"#fff",payload:j.payload,value:j.value},se(C,!1)),mo(C));return A.push(w.renderActiveDot(C,D,"".concat(E,"-activePoint-").concat(T))),$?A.push(w.renderActiveDot(C,B(B({},D),{},{cx:$.x,cy:$.y}),"".concat(E,"-basePoint-").concat(T))):N&&A.push(null),A}),Z(y,"renderGraphicChild",function(x,O,j){var $=y.filterFormatItem(x,O,j);if(!$)return null;var T=y.getTooltipEventType(),N=y.state,A=N.isTooltipActive,E=N.tooltipAxis,k=N.activeTooltipIndex,C=N.activeLabel,M=y.props.children,D=st(M,At),L=$.props,R=L.points,K=L.isRange,V=L.baseLine,z=$.item.type.defaultProps!==void 0?B(B({},$.item.type.defaultProps),$.item.props):$.item.props,X=z.activeDot,ne=z.hide,he=z.activeBar,Fe=z.activeShape,et=!!(!ne&&A&&D&&(X||he||Fe)),ke={};T!=="axis"&&D&&D.props.trigger==="click"?ke={onClick:Ua(y.handleItemMouseEnter,x.props.onClick)}:T!=="axis"&&(ke={onMouseLeave:Ua(y.handleItemMouseLeave,x.props.onMouseLeave),onMouseEnter:Ua(y.handleItemMouseEnter,x.props.onMouseEnter)});var H=P.cloneElement(x,B(B({},$.props),ke));function U(te){return typeof E.dataKey=="function"?E.dataKey(te.payload):null}if(et)if(k>=0){var J,F;if(E.dataKey&&!E.allowDuplicatedCategory){var re=typeof E.dataKey=="function"?U:"payload.".concat(E.dataKey.toString());J=po(R,re,C),F=K&&V&&po(V,re,C)}else J=R==null?void 0:R[k],F=K&&V&&V[k];if(Fe||he){var ee=x.props.activeIndex!==void 0?x.props.activeIndex:k;return[P.cloneElement(x,B(B(B({},$.props),ke),{},{activeIndex:ee})),null,null]}if(!oe(J))return[H].concat(Ur(y.renderActivePoints({item:$,activePoint:J,basePoint:F,childIndex:k,isRange:K})))}else{var pe,me=(pe=y.getItemByXY(y.state.activeCoordinate))!==null&&pe!==void 0?pe:{graphicalItem:H},Me=me.graphicalItem,tt=Me.item,q=tt===void 0?x:tt,G=Me.childIndex,Q=B(B(B({},$.props),ke),{},{activeIndex:G});return[P.cloneElement(q,Q),null,null]}return K?[H,null,null]:[H,null]}),Z(y,"renderCustomized",function(x,O,j){return P.cloneElement(x,B(B({key:"recharts-customized-".concat(j)},y.props),y.state))}),Z(y,"renderMap",{CartesianGrid:{handler:Ha,once:!0},ReferenceArea:{handler:y.renderReferenceElement},ReferenceLine:{handler:Ha},ReferenceDot:{handler:y.renderReferenceElement},XAxis:{handler:Ha},YAxis:{handler:Ha},Brush:{handler:y.renderBrush,once:!0},Bar:{handler:y.renderGraphicChild},Line:{handler:y.renderGraphicChild},Area:{handler:y.renderGraphicChild},Radar:{handler:y.renderGraphicChild},RadialBar:{handler:y.renderGraphicChild},Scatter:{handler:y.renderGraphicChild},Pie:{handler:y.renderGraphicChild},Funnel:{handler:y.renderGraphicChild},Tooltip:{handler:y.renderCursor,once:!0},PolarGrid:{handler:y.renderPolarGrid,once:!0},PolarAngleAxis:{handler:y.renderPolarAxis},PolarRadiusAxis:{handler:y.renderPolarAxis},Customized:{handler:y.renderCustomized}}),y.clipPathId="".concat((_=b.id)!==null&&_!==void 0?_:va("recharts"),"-clip"),y.throttleTriggeredAfterMouseMove=rv(y.triggeredAfterMouseMove,(S=b.throttleDelay)!==null&&S!==void 0?S:1e3/60),y.state={},y}return zK(w,g),BK(w,[{key:"componentDidMount",value:function(){var _,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,S=_.children,y=_.data,x=_.height,O=_.layout,j=st(S,At);if(j){var $=j.props.defaultIndex;if(!(typeof $!="number"||$<0||$>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[$]&&this.state.tooltipTicks[$].value,N=Ru(this.state,y,$,T),A=this.state.tooltipTicks[$].coordinate,E=(this.state.offset.top+x)/2,k=O==="horizontal",C=k?{x:A,y:E}:{y:A,x:E},M=this.state.formattedGraphicalItems.find(function(L){var R=L.item;return R.type.name==="Scatter"});M&&(C=B(B({},C),M.props.points[$].tooltipPosition),N=M.props.points[$].tooltipPayload);var D={activeTooltipIndex:$,isTooltipActive:!0,activeLabel:T,activePayload:N,activeCoordinate:C};this.setState(D),this.renderCursor(j),this.accessibilityManager.setIndex($)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var y,x;this.accessibilityManager.setDetails({offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0}})}return null}},{key:"componentDidUpdate",value:function(_){gc([st(_.children,At)],[st(this.props.children,At)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=st(this.props.children,At);if(_&&typeof _.props.shared=="boolean"){var S=_.props.shared?"axis":"item";return s.indexOf(S)>=0?S:a}return a}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var S=this.container,y=S.getBoundingClientRect(),x=UC(y),O={chartX:Math.round(_.pageX-x.left),chartY:Math.round(_.pageY-x.top)},j=y.width/S.offsetWidth||1,$=this.inRange(O.chartX,O.chartY,j);if(!$)return null;var T=this.state,N=T.xAxisMap,A=T.yAxisMap,E=this.getTooltipEventType(),k=mg(this.state,this.props.data,this.props.layout,$);if(E!=="axis"&&N&&A){var C=cn(N).scale,M=cn(A).scale,D=C&&C.invert?C.invert(O.chartX):null,L=M&&M.invert?M.invert(O.chartY):null;return B(B({},O),{},{xValue:D,yValue:L},k)}return k?B(B({},O),k):null}},{key:"inRange",value:function(_,S){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,x=this.props.layout,O=_/y,j=S/y;if(x==="horizontal"||x==="vertical"){var $=this.state.offset,T=O>=$.left&&O<=$.left+$.width&&j>=$.top&&j<=$.top+$.height;return T?{x:O,y:j}:null}var N=this.state,A=N.angleAxisMap,E=N.radiusAxisMap;if(A&&E){var k=cn(A);return Xp({x:O,y:j},k)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,S=this.getTooltipEventType(),y=st(_,At),x={};y&&S==="axis"&&(y.props.trigger==="click"?x={onClick:this.handleClick}:x={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=mo(this.props,this.handleOuterEvent);return B(B({},O),x)}},{key:"addListener",value:function(){Kl.on(Wl,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Kl.removeListener(Wl,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,S,y){for(var x=this.state.formattedGraphicalItems,O=0,j=x.length;O<j;O++){var $=x[O];if($.item===_||$.props.key===_.key||S===Vt($.item.type)&&y===$.childIndex)return $}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,S=this.state.offset,y=S.left,x=S.top,O=S.height,j=S.width;return I.createElement("defs",null,I.createElement("clipPath",{id:_},I.createElement("rect",{x:y,y:x,height:O,width:j})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(S,y){var x=dg(y,2),O=x[0],j=x[1];return B(B({},S),{},Z({},O,j.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(S,y){var x=dg(y,2),O=x[0],j=x[1];return B(B({},S),{},Z({},O,j.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[_])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(_){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[_])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(_){var S=this.state,y=S.formattedGraphicalItems,x=S.activeItem;if(y&&y.length)for(var O=0,j=y.length;O<j;O++){var $=y[O],T=$.props,N=$.item,A=N.type.defaultProps!==void 0?B(B({},N.type.defaultProps),N.props):N.props,E=Vt(N.type);if(E==="Bar"){var k=(T.data||[]).find(function(L){return bF(_,L)});if(k)return{graphicalItem:$,payload:k}}else if(E==="RadialBar"){var C=(T.data||[]).find(function(L){return Xp(_,L)});if(C)return{graphicalItem:$,payload:C}}else if(Xs($,x)||Js($,x)||aa($,x)){var M=_U({graphicalItem:$,activeTooltipItem:x,itemData:A.data}),D=A.activeIndex===void 0?M:A.activeIndex;return{graphicalItem:B(B({},$),{},{childIndex:D}),payload:aa($,x)?A.data[M]:$.props.data[M]}}}return null}},{key:"render",value:function(){var _=this;if(!Fd(this))return null;var S=this.props,y=S.children,x=S.className,O=S.width,j=S.height,$=S.style,T=S.compact,N=S.title,A=S.desc,E=hg(S,kK),k=se(E,!1);if(T)return I.createElement(Gm,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},I.createElement(vc,lr({},k,{width:O,height:j,title:N,desc:A}),this.renderClipPath(),qd(y,this.renderMap)));if(this.props.accessibilityLayer){var C,M;k.tabIndex=(C=this.props.tabIndex)!==null&&C!==void 0?C:0,k.role=(M=this.props.role)!==null&&M!==void 0?M:"application",k.onKeyDown=function(L){_.accessibilityManager.keyboardEvent(L)},k.onFocus=function(){_.accessibilityManager.focus()}}var D=this.parseEventsOfWrapper();return I.createElement(Gm,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},I.createElement("div",lr({className:ce("recharts-wrapper",x),style:B({position:"relative",cursor:"default",width:O,height:j},$)},D,{ref:function(R){_.container=R}}),I.createElement(vc,lr({},k,{width:O,height:j,title:N,desc:A,style:YK}),this.renderClipPath(),qd(y,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(P.Component);Z(v,"displayName",n),Z(v,"defaultProps",B({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Z(v,"getDerivedStateFromProps",function(g,w){var b=g.dataKey,_=g.data,S=g.children,y=g.width,x=g.height,O=g.layout,j=g.stackOffset,$=g.margin,T=w.dataStartIndex,N=w.dataEndIndex;if(w.updateId===void 0){var A=gg(g);return B(B(B({},A),{},{updateId:0},p(B(B({props:g},A),{},{updateId:0}),w)),{},{prevDataKey:b,prevData:_,prevWidth:y,prevHeight:x,prevLayout:O,prevStackOffset:j,prevMargin:$,prevChildren:S})}if(b!==w.prevDataKey||_!==w.prevData||y!==w.prevWidth||x!==w.prevHeight||O!==w.prevLayout||j!==w.prevStackOffset||!mr($,w.prevMargin)){var E=gg(g),k={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},C=B(B({},mg(w,_,O)),{},{updateId:w.updateId+1}),M=B(B(B({},E),k),C);return B(B(B({},M),p(B({props:g},M),w)),{},{prevDataKey:b,prevData:_,prevWidth:y,prevHeight:x,prevLayout:O,prevStackOffset:j,prevMargin:$,prevChildren:S})}if(!gc(S,w.prevChildren)){var D,L,R,K,V=st(S,qn),z=V&&(D=(L=V.props)===null||L===void 0?void 0:L.startIndex)!==null&&D!==void 0?D:T,X=V&&(R=(K=V.props)===null||K===void 0?void 0:K.endIndex)!==null&&R!==void 0?R:N,ne=z!==T||X!==N,he=!oe(_),Fe=he&&!ne?w.updateId:w.updateId+1;return B(B({updateId:Fe},p(B(B({props:g},w),{},{updateId:Fe,dataStartIndex:z,dataEndIndex:X}),w)),{},{prevChildren:S,dataStartIndex:z,dataEndIndex:X})}return null}),Z(v,"renderActiveDot",function(g,w,b){var _;return P.isValidElement(g)?_=P.cloneElement(g,w):ae(g)?_=g(w):_=I.createElement(Xf,w),I.createElement(Ne,{className:"recharts-active-dot",key:b},_)});var m=P.forwardRef(function(w,b){return I.createElement(v,lr({},w,{ref:b}))});return m.displayName=v.displayName,m},h0=aW({chartName:"LineChart",GraphicalChild:ri,axisComponents:[{axisType:"xAxis",AxisComp:ja},{axisType:"yAxis",AxisComp:$a}],formatAxisMap:Vq});const vg=["#38bdf8","#22c55e","#f97316","#a855f7","#eab308","#ec4899"];function oW(e){return String(e||"").normalize("NFD").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"-").toLowerCase()}function bg(e,t="$"){return`${(Number.isFinite(Number(e))?Number(e):0).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})} ${t}`.trim()}function sW(e,t="$"){const n=Number.isFinite(Number(e))?Number(e):0;return`${n>=0?"+":"-"}${Math.abs(n).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})} ${t}`.trim()}function jn(e){const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"})}function lW(e=[]){const t=new Map,n=[];return e.forEach((i,a)=>{if(!i||typeof i!="object")return;const o=i.name||`Portfolio ${a+1}`,s=o,l=vg[a%vg.length],c=i.owner||null,f=i.currency||"$";n.push({key:s,label:o,owner:c,color:l,slug:oW(o),currency:f}),(i.series||[]).forEach(u=>{if(!u||typeof u!="object")return;const d=u.timestamp,p=Number(u.value??u.balance??0),v=u.pnl,m=new Date(d);if(Number.isNaN(m.getTime()))return;const g=m.toISOString(),w=t.get(g)||{timestamp:g,timestampValue:m.getTime(),label:jn(m)};w[s]=p,typeof v=="number"&&(w[`${s}__pnl`]=v),t.set(g,w)})}),{data:Array.from(t.values()).sort((i,a)=>i.timestampValue-a.timestampValue),seriesMeta:n}}function cW({history:e=[],currency:t="$"}){const{data:n,seriesMeta:r}=P.useMemo(()=>lW(e),[e]),i=P.useRef(null),[a,o]=P.useState([]),[s,l]=P.useState({startIndex:0,endIndex:0}),[c,f]=P.useState(null),[u,d]=P.useState(!1),p=P.useMemo(()=>{if(!Array.isArray(e))return t;const A=e.find(E=>E&&E.currency);return(A==null?void 0:A.currency)||t},[e,t]);if(P.useEffect(()=>{const A=r.map(E=>E.key);o(E=>{if(!E.length)return A;const k=new Set(A),C=E.filter(M=>k.has(M));return C.length?C:A})},[r]),P.useEffect(()=>{if(!n.length){l({startIndex:0,endIndex:0}),f(null);return}l({startIndex:0,endIndex:n.length-1}),f([n[0].timestampValue,n[n.length-1].timestampValue])},[n]),!r.length||!n.length)return h.jsx("div",{className:"chart-container__status",role:"status",children:"Données historiques indisponibles pour le moment."});const v=P.useMemo(()=>r.filter(A=>a.includes(A.key)),[r,a]),m=P.useMemo(()=>{if(!c||c.length!==2)return n;const[A,E]=c;return n.filter(k=>{const C=k.timestampValue;return C>=A&&C<=E})},[n,c]),g=({active:A,payload:E,label:k})=>{var M,D;if(!A||!(E!=null&&E.length))return null;const C=typeof k=="number"?jn(k):((D=(M=E[0])==null?void 0:M.payload)==null?void 0:D.label)||String(k);return h.jsxs("div",{className:"chart-tooltip",children:[h.jsx("p",{className:"chart-tooltip__title",children:C}),h.jsx("ul",{className:"chart-tooltip__list",children:E.map(L=>{var V;const R=r.find(z=>z.key===L.dataKey),K=(V=L.payload)==null?void 0:V[`${L.dataKey}__pnl`];return h.jsxs("li",{className:"chart-tooltip__item",children:[h.jsxs("span",{className:"chart-tooltip__label",children:[h.jsx("span",{"aria-hidden":"true",style:{display:"inline-block",width:"0.75rem",height:"0.75rem",borderRadius:"9999px",backgroundColor:L.color||(R==null?void 0:R.color)||"#38bdf8"}}),(R==null?void 0:R.label)||L.name||L.dataKey,R!=null&&R.owner?` · ${R.owner}`:""]}),h.jsxs("span",{className:"chart-tooltip__value",children:[bg(L.value,p),typeof K=="number"?` (${sW(K,p)})`:""]})]},L.dataKey)})})]})},w=P.useCallback(A=>{o(E=>E.includes(A)?E.length===1?E:E.filter(k=>k!==A):[...E,A])},[]),b=P.useCallback(A=>{A&&A.dataKey&&w(A.dataKey)},[w]),_=P.useCallback(A=>{A&&l(E=>{const k=n.length-1,C=Math.max(0,Math.min(k,A.startIndex??E.startIndex)),M=Math.max(C,Math.min(k,A.endIndex??E.endIndex)),D=n[C],L=n[M];return D&&L&&f([D.timestampValue,L.timestampValue]),{startIndex:C,endIndex:M}})},[n]),S=P.useCallback(A=>{!A||typeof A.startIndex!="number"||typeof A.endIndex!="number"||_({startIndex:A.startIndex,endIndex:A.endIndex})},[_]),y=P.useCallback(A=>{const E=Number.parseInt(A.target.value,10);_({startIndex:Number.isNaN(E)?0:E})},[_]),x=P.useCallback(A=>{const E=Number.parseInt(A.target.value,10);_({endIndex:Number.isNaN(E)?n.length-1:E})},[_,n.length]),O=P.useCallback(()=>{n.length&&(l({startIndex:0,endIndex:n.length-1}),f([n[0].timestampValue,n[n.length-1].timestampValue]))},[n]),j=P.useMemo(()=>{if(!n.length)return"Aucune donnée";const A=n[s.startIndex],E=n[s.endIndex];if(!A||!E)return"Affichage complet";const k=n[0].timestamp===A.timestamp&&n[n.length-1].timestamp===E.timestamp,C=jn(A.timestampValue),M=jn(E.timestampValue);return k?"Affichage complet":`Zoom : ${C} → ${M}`},[n,s]),$=P.useCallback(()=>{if(!v.length||!m.length)return;const A=["Date",...v.map(R=>R.label)],E=m.map(R=>[R.label,...v.map(K=>{const V=R[K.key];return Number.isFinite(V)?V:""})]),k=R=>{if(typeof R=="number")return R.toString();const K=String(R??"");return K.includes(";")||K.includes('"')?`"${K.replace(/"/g,'""')}"`:K},C=[A,...E].map(R=>R.map(k).join(";")).join(`
`),M=new Blob([C],{type:"text/csv;charset=utf-8"}),D=URL.createObjectURL(M),L=document.createElement("a");L.href=D,L.download=`portfolios-${new Date().toISOString().slice(0,19).replace(/[T:]/g,"-")}.csv`,document.body.appendChild(L),L.click(),L.remove(),setTimeout(()=>URL.revokeObjectURL(D),0)},[v,m]),T=P.useCallback(A=>new Promise((E,k)=>{const C=A==null?void 0:A.querySelector("svg");if(!C){k(new Error("SVG introuvable"));return}const M=C.cloneNode(!0);M.getAttribute("xmlns")||M.setAttribute("xmlns","http://www.w3.org/2000/svg");const L=new XMLSerializer().serializeToString(M),R=Number.parseFloat(M.getAttribute("width"))||C.clientWidth||800,K=Number.parseFloat(M.getAttribute("height"))||C.clientHeight||320,V=new Blob([L],{type:"image/svg+xml;charset=utf-8"}),z=URL.createObjectURL(V),X=new Image;X.onload=()=>{try{const ne=document.createElement("canvas");ne.width=R,ne.height=K;const he=ne.getContext("2d");if(!he)throw new Error("Canvas context non disponible");he.fillStyle="#0f172a",he.fillRect(0,0,ne.width,ne.height),he.drawImage(X,0,0,R,K),URL.revokeObjectURL(z),E(ne.toDataURL("image/png"))}catch(ne){URL.revokeObjectURL(z),k(ne)}},X.onerror=ne=>{URL.revokeObjectURL(z),k(ne instanceof ErrorEvent?ne.error:new Error("Export PNG impossible"))},X.src=z}),[]),N=P.useCallback(async()=>{if(i.current)try{d(!0);const A=await T(i.current),E=document.createElement("a");E.href=A,E.download=`portfolios-${new Date().toISOString().slice(0,19).replace(/[T:]/g,"-")}.png`,document.body.appendChild(E),E.click(),E.remove()}catch(A){console.error("Impossible d'exporter le graphique en PNG",A)}finally{d(!1)}},[T]);return h.jsxs("div",{className:"portfolio-chart",ref:i,children:[h.jsxs("div",{className:"chart-toolbar",role:"group","aria-label":"Options du graphique des portefeuilles",children:[h.jsx("div",{className:"chart-toolbar__group chart-toolbar__series",role:"group","aria-label":"Sélection de portefeuilles",children:r.map(A=>{const E=`portfolio-toggle-${A.slug}`;return h.jsxs("label",{className:"chart-toolbar__checkbox",htmlFor:E,children:[h.jsx("input",{id:E,type:"checkbox",checked:a.includes(A.key),onChange:()=>w(A.key)}),h.jsx("span",{className:"chart-toolbar__swatch","aria-hidden":"true",style:{backgroundColor:A.color}}),h.jsx("span",{children:A.owner?`${A.label} · ${A.owner}`:A.label})]},A.key)})}),h.jsxs("div",{className:"chart-toolbar__actions",children:[h.jsx("div",{className:"chart-toolbar__zoom",role:"status","aria-live":"polite",children:j}),h.jsxs("div",{className:"chart-toolbar__sliders",role:"group","aria-label":"Contrôle du zoom",children:[h.jsxs("label",{className:"chart-toolbar__slider",children:[h.jsx("span",{children:"Début"}),h.jsx("input",{type:"range",min:"0",max:Math.max(s.endIndex,0),value:s.startIndex,onInput:y,onChange:y,"aria-label":"Début du zoom"})]}),h.jsxs("label",{className:"chart-toolbar__slider",children:[h.jsx("span",{children:"Fin"}),h.jsx("input",{type:"range",min:s.startIndex,max:Math.max(n.length-1,s.startIndex),value:s.endIndex,onInput:x,onChange:x,"aria-label":"Fin du zoom"})]}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:O,children:"Réinitialiser le zoom"})]}),h.jsxs("div",{className:"chart-toolbar__downloads",role:"group","aria-label":"Exports du graphique",children:[h.jsx("button",{type:"button",className:"button button--secondary",onClick:$,disabled:!v.length||!m.length,children:"Exporter CSV"}),h.jsx("button",{type:"button",className:"button button--secondary",onClick:N,disabled:u,children:u?"Export PNG…":"Exporter PNG"})]})]})]}),h.jsx(iv,{width:"100%",height:320,debounce:200,children:h.jsxs(h0,{data:n,margin:{top:20,right:24,left:12,bottom:12},children:[h.jsx(od,{stroke:"#1f2a4d",strokeDasharray:"4 8"}),h.jsx(ja,{dataKey:"timestampValue",type:"number",domain:c||["auto","auto"],tick:{fill:"#cbd5f5",fontSize:12},axisLine:{stroke:"#334155"},tickLine:!1,tickFormatter:A=>jn(A)}),h.jsx($a,{tickFormatter:A=>bg(A,p),tick:{fill:"#cbd5f5",fontSize:12},axisLine:{stroke:"#334155"},tickLine:!1,width:120}),h.jsx(At,{content:g,cursor:{stroke:"#475569",strokeWidth:1},labelFormatter:A=>jn(A)}),h.jsx(In,{verticalAlign:"top",align:"right",wrapperStyle:{color:"#cbd5f5"},onClick:b,formatter:(A,E)=>{const k=r.find(C=>C.key===E.dataKey);return k?k.owner?`${k.label} · ${k.owner}`:k.label:E.value}}),h.jsx(qn,{dataKey:"timestampValue",startIndex:s.startIndex,endIndex:s.endIndex,onChange:S,travellerWidth:12,height:24,stroke:"#38bdf8",tickFormatter:A=>jn(A)}),r.map(A=>h.jsx(ri,{type:"monotone",dataKey:A.key,name:A.label,stroke:A.color,strokeWidth:2,dot:!1,isAnimationActive:!1,className:`portfolio-line portfolio-line--${A.slug}`,legendType:"circle",hide:!a.includes(A.key)},A.key))]})})]})}const uW=[{type:"email",target:"",enabled:!1},{type:"push",target:"",enabled:!1},{type:"webhook",target:"",enabled:!1}];function Va(){return{title:"",detail:"",risk:"info",acknowledged:!1,rule:{symbol:"",timeframe:"",conditions:{pnl:{enabled:!1,operator:"below",value:""},drawdown:{enabled:!1,operator:"above",value:""},indicators:[]}},channels:uW.map(e=>({...e})),throttle_minutes:0}}const fW=[{value:"info",label:"Information"},{value:"warning",label:"Avertissement"},{value:"critical",label:"Critique"}];function dW({mode:e,initialAlert:t,onSubmit:n,onCancel:r,submitting:i,error:a}){const[o,s]=P.useState(()=>{const b=Va();return t?{...b,...l(t)}:b});P.useEffect(()=>{s(()=>{const b=Va();return t?{...b,...l(t)}:b})},[t,e]);function l(b){var j,$,T,N,A,E,k,C,M;if(!b)return Va();const _=typeof b.risk=="string"?b.risk:((j=b.risk)==null?void 0:j.value)||"info",S=Va(),y=b.rule&&typeof b.rule=="object"?b.rule:S.rule,x=y.conditions||S.rule.conditions,O=Array.isArray(b.channels)?b.channels.map(D=>({type:(D==null?void 0:D.type)||"email",target:(D==null?void 0:D.target)||"",enabled:(D==null?void 0:D.enabled)!==void 0?!!D.enabled:!0})):S.channels;return{title:b.title||"",detail:b.detail||"",risk:_,acknowledged:!!b.acknowledged,rule:{symbol:y.symbol||b.symbol||"",timeframe:y.timeframe||"",conditions:{pnl:{enabled:!!(($=x==null?void 0:x.pnl)!=null&&$.enabled),operator:((T=x==null?void 0:x.pnl)==null?void 0:T.operator)||"below",value:((N=x==null?void 0:x.pnl)==null?void 0:N.value)!==void 0&&((A=x==null?void 0:x.pnl)==null?void 0:A.value)!==null?String(x.pnl.value):""},drawdown:{enabled:!!((E=x==null?void 0:x.drawdown)!=null&&E.enabled),operator:((k=x==null?void 0:x.drawdown)==null?void 0:k.operator)||"above",value:((C=x==null?void 0:x.drawdown)==null?void 0:C.value)!==void 0&&((M=x==null?void 0:x.drawdown)==null?void 0:M.value)!==null?String(x.drawdown.value):""},indicators:Array.isArray(x==null?void 0:x.indicators)?x.indicators.map((D,L)=>({id:D.id||`indicator-${L}`,name:D.name||"RSI",operator:D.operator||"above",value:D.value!==void 0&&D.value!==null?String(D.value):"",lookback:D.lookback!==void 0&&D.lookback!==null?String(D.lookback):"",enabled:D.enabled!==void 0?!!D.enabled:!0})):[]}},channels:O,throttle_minutes:Math.max(0,Math.round(Number(b.throttle_seconds||b.throttleMinutes||0)/60))}}function c(b){const{name:_,value:S,type:y,checked:x}=b.target;s(O=>({...O,[_]:y==="checkbox"?x:S}))}function f(b,_){s(S=>({...S,rule:{...S.rule,[b]:_}}))}function u(b,_,S){s(y=>({...y,rule:{...y.rule,conditions:{...y.rule.conditions,[b]:{...y.rule.conditions[b],[_]:_==="enabled"?!!S:S}}}}))}function d(b,_,S){s(y=>{const O=(y.rule.conditions.indicators||[]).map((j,$)=>$!==b?j:{...j,[_]:_==="enabled"?!!S:S});return{...y,rule:{...y.rule,conditions:{...y.rule.conditions,indicators:O}}}})}function p(){s(b=>({...b,rule:{...b.rule,conditions:{...b.rule.conditions,indicators:[...b.rule.conditions.indicators,{id:`indicator-${Math.random().toString(36).slice(2)}`,name:"RSI",operator:"below",value:"30",lookback:"14",enabled:!0}]}}}))}function v(b){s(_=>({..._,rule:{..._.rule,conditions:{..._.rule.conditions,indicators:_.rule.conditions.indicators.filter((S,y)=>y!==b)}}}))}function m(b,_,S){s(y=>({...y,channels:y.channels.map((x,O)=>O===b?{...x,[_]:_==="enabled"?!!S:S}:x)}))}function g(b){const _=Math.max(0,Number.isNaN(Number(b))?0:Number(b));s(S=>({...S,throttle_minutes:_}))}function w(b){if(b.preventDefault(),!o.title.trim()||!o.detail.trim())return;const _=(o.rule.conditions.indicators||[]).map(y=>({id:y.id||`indicator-${Math.random().toString(36).slice(2)}`,name:y.name||"RSI",operator:y.operator||"below",value:y.value!==""&&y.value!==null?Number(y.value):0,lookback:y.lookback!==""&&y.lookback!==null?Number(y.lookback):null,enabled:y.enabled!==void 0?!!y.enabled:!0})),S={title:o.title.trim(),detail:o.detail.trim(),risk:o.risk,acknowledged:!!o.acknowledged,rule:{symbol:o.rule.symbol.trim(),timeframe:o.rule.timeframe?o.rule.timeframe.trim():null,conditions:{pnl:{enabled:!!o.rule.conditions.pnl.enabled,operator:o.rule.conditions.pnl.operator||"below",value:o.rule.conditions.pnl.value!==""&&o.rule.conditions.pnl.value!==null?Number(o.rule.conditions.pnl.value):null},drawdown:{enabled:!!o.rule.conditions.drawdown.enabled,operator:o.rule.conditions.drawdown.operator||"above",value:o.rule.conditions.drawdown.value!==""&&o.rule.conditions.drawdown.value!==null?Number(o.rule.conditions.drawdown.value):null},indicators:_}},channels:o.channels.map(y=>({type:y.type,target:y.target?y.target.trim():null,enabled:!!y.enabled})),throttle_seconds:Math.max(0,Math.round(Number(o.throttle_minutes)*60))};S.rule.symbol&&(n==null||n({...S}))}return h.jsx("form",{className:"alerts-form",onSubmit:w,children:h.jsxs("fieldset",{className:"alerts-form__fieldset",disabled:i,children:[h.jsx("legend",{className:"sr-only",children:e==="edit"?"Modifier l'alerte":"Créer une alerte"}),h.jsxs("div",{className:"alerts-form__field",children:[h.jsx("label",{htmlFor:"alert-title",children:"Titre"}),h.jsx("input",{id:"alert-title",name:"title",type:"text",value:o.title,onChange:c,required:!0,placeholder:"Synthèse de l'alerte"})]}),h.jsxs("div",{className:"alerts-form__field",children:[h.jsx("label",{htmlFor:"alert-detail",children:"Description"}),h.jsx("textarea",{id:"alert-detail",name:"detail",rows:3,value:o.detail,onChange:c,required:!0,placeholder:"Détails permettant d'agir"})]}),h.jsxs("div",{className:"alerts-form__row",children:[h.jsxs("div",{className:"alerts-form__field",children:[h.jsx("label",{htmlFor:"alert-risk",children:"Niveau de risque"}),h.jsx("select",{id:"alert-risk",name:"risk",value:o.risk,onChange:c,children:fW.map(b=>h.jsx("option",{value:b.value,children:b.label},b.value))})]}),h.jsx("div",{className:"alerts-form__checkbox",children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",name:"acknowledged",checked:o.acknowledged,onChange:c}),h.jsx("span",{children:"Accusée"})]})})]}),h.jsxs("fieldset",{className:"alerts-form__group",children:[h.jsx("legend",{children:"Définition de la règle"}),h.jsxs("div",{className:"alerts-form__field",children:[h.jsx("label",{htmlFor:"alert-symbol",children:"Symbole surveillé"}),h.jsx("input",{id:"alert-symbol",name:"rule.symbol",type:"text",value:o.rule.symbol,onChange:b=>f("symbol",b.target.value),required:!0,placeholder:"ex: BTCUSDT"})]}),h.jsxs("div",{className:"alerts-form__field",children:[h.jsx("label",{htmlFor:"alert-timeframe",children:"Période (optionnelle)"}),h.jsx("input",{id:"alert-timeframe",name:"rule.timeframe",type:"text",value:o.rule.timeframe,onChange:b=>f("timeframe",b.target.value),placeholder:"ex: 1h"})]}),h.jsxs("div",{className:"alerts-form__conditions",children:[h.jsx("h4",{className:"heading heading--sm",children:"Conditions de performance"}),h.jsxs("div",{className:"alerts-form__row",children:[h.jsxs("label",{className:"alerts-form__checkbox",children:[h.jsx("input",{type:"checkbox",checked:o.rule.conditions.pnl.enabled,onChange:b=>u("pnl","enabled",b.target.checked)}),h.jsx("span",{children:"Activer P&L"})]}),h.jsxs("select",{value:o.rule.conditions.pnl.operator,onChange:b=>u("pnl","operator",b.target.value),disabled:!o.rule.conditions.pnl.enabled,children:[h.jsx("option",{value:"above",children:"Supérieur ou égal"}),h.jsx("option",{value:"below",children:"Inférieur ou égal"})]}),h.jsx("input",{type:"number",step:"0.01",value:o.rule.conditions.pnl.value,onChange:b=>u("pnl","value",b.target.value),placeholder:"Seuil P&L",disabled:!o.rule.conditions.pnl.enabled})]}),h.jsxs("div",{className:"alerts-form__row",children:[h.jsxs("label",{className:"alerts-form__checkbox",children:[h.jsx("input",{type:"checkbox",checked:o.rule.conditions.drawdown.enabled,onChange:b=>u("drawdown","enabled",b.target.checked)}),h.jsx("span",{children:"Activer drawdown"})]}),h.jsxs("select",{value:o.rule.conditions.drawdown.operator,onChange:b=>u("drawdown","operator",b.target.value),disabled:!o.rule.conditions.drawdown.enabled,children:[h.jsx("option",{value:"above",children:"Supérieur ou égal"}),h.jsx("option",{value:"below",children:"Inférieur ou égal"})]}),h.jsx("input",{type:"number",step:"0.01",value:o.rule.conditions.drawdown.value,onChange:b=>u("drawdown","value",b.target.value),placeholder:"Seuil drawdown",disabled:!o.rule.conditions.drawdown.enabled})]})]}),h.jsxs("div",{className:"alerts-form__indicators",children:[h.jsxs("div",{className:"alerts-form__indicators-header",children:[h.jsx("h4",{className:"heading heading--sm",children:"Indicateurs techniques"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:p,children:"Ajouter un indicateur"})]}),o.rule.conditions.indicators.length===0?h.jsx("p",{className:"text text--muted",children:"Aucun indicateur configuré."}):h.jsx("ul",{className:"alerts-form__indicator-list",children:o.rule.conditions.indicators.map((b,_)=>h.jsx("li",{className:"alerts-form__indicator-item",children:h.jsxs("div",{className:"alerts-form__row",children:[h.jsxs("label",{className:"alerts-form__checkbox",children:[h.jsx("input",{type:"checkbox",checked:b.enabled!==!1,onChange:S=>d(_,"enabled",S.target.checked)}),h.jsx("span",{children:"Actif"})]}),h.jsx("input",{type:"text",value:b.name,onChange:S=>d(_,"name",S.target.value),placeholder:"RSI"}),h.jsxs("select",{value:b.operator,onChange:S=>d(_,"operator",S.target.value),children:[h.jsx("option",{value:"above",children:"Supérieur ou égal"}),h.jsx("option",{value:"below",children:"Inférieur ou égal"})]}),h.jsx("input",{type:"number",step:"0.01",value:b.value,onChange:S=>d(_,"value",S.target.value),placeholder:"Valeur"}),h.jsx("input",{type:"number",step:"1",value:b.lookback,onChange:S=>d(_,"lookback",S.target.value),placeholder:"Période"}),h.jsx("button",{type:"button",className:"button button--danger",onClick:()=>v(_),children:"Retirer"})]})},b.id||_))})]})]}),h.jsxs("fieldset",{className:"alerts-form__group",children:[h.jsx("legend",{children:"Canaux de notification"}),o.channels.map((b,_)=>h.jsxs("div",{className:"alerts-form__row",children:[h.jsxs("label",{className:"alerts-form__checkbox",children:[h.jsx("input",{type:"checkbox",checked:b.enabled,onChange:S=>m(_,"enabled",S.target.checked)}),h.jsx("span",{children:b.type==="webhook"?"Webhook":b.type==="push"?"Push":"Email"})]}),h.jsx("input",{type:"text",value:b.target,onChange:S=>m(_,"target",S.target.value),placeholder:b.type==="webhook"?"https://example.com/webhook":b.type==="push"?"Identifiant de device":"destinataire@domaine.com"})]},b.type))]}),h.jsxs("div",{className:"alerts-form__field",children:[h.jsx("label",{htmlFor:"alert-throttle",children:"Fréquence minimale entre deux notifications (minutes)"}),h.jsx("input",{id:"alert-throttle",type:"number",min:"0",step:"1",value:o.throttle_minutes,onChange:b=>g(b.target.value)})]}),a?h.jsx("p",{className:"alerts-form__error",role:"alert",children:a}):null,h.jsxs("div",{className:"alerts-form__actions",children:[h.jsx("button",{type:"submit",className:"button button--primary",children:e==="edit"?"Mettre à jour":"Créer"}),e==="edit"?h.jsx("button",{type:"button",className:"button button--secondary",onClick:r,children:"Annuler"}):null]})]})})}const xg={info:{label:"Information",className:"badge--info"},warning:{label:"Avertissement",className:"badge--warning"},critical:{label:"Critique",className:"badge--critical"}};function hW(e){if(!e)return"";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function pW({alerts:e,onEdit:t,onDelete:n,loading:r,pendingId:i}){return h.jsxs("div",{className:"alerts-table",children:[h.jsxs("div",{className:"alerts-table__header",children:[h.jsx("h3",{className:"heading heading--md",children:"Alertes actives"}),h.jsx("p",{className:"text text--muted",children:"Suivez les signaux générés par le moteur d'alertes."})]}),h.jsx("div",{className:"alerts-table__content",role:"region","aria-live":"polite",children:h.jsxs("table",{className:"table alerts-table__grid",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",children:"Titre"}),h.jsx("th",{scope:"col",children:"Risque"}),h.jsx("th",{scope:"col",children:"Statut"}),h.jsx("th",{scope:"col",children:"Créée"}),h.jsx("th",{scope:"col",children:"Actions"})]})}),h.jsx("tbody",{children:e.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:5,children:h.jsx("p",{className:"text text--muted",children:r?"Chargement des alertes…":"Aucune alerte enregistrée pour le moment."})})}):e.map(a=>{var l;const o=typeof a.risk=="string"?a.risk:((l=a.risk)==null?void 0:l.value)||"info",s=xg[o]||xg.info;return h.jsxs("tr",{children:[h.jsxs("td",{"data-label":"Titre",children:[h.jsx("div",{className:"alerts-table__title",children:a.title}),h.jsx("p",{className:"alerts-table__detail",children:a.detail})]}),h.jsx("td",{"data-label":"Risque",children:h.jsx("span",{className:`badge ${s.className}`,children:s.label})}),h.jsx("td",{"data-label":"Statut",children:h.jsx("span",{className:`badge ${a.acknowledged?"badge--neutral":"badge--info"}`,children:a.acknowledged?"Accusée":"À traiter"})}),h.jsx("td",{"data-label":"Créée",children:hW(a.created_at||a.createdAt)}),h.jsxs("td",{"data-label":"Actions",className:"alerts-table__actions",children:[h.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>t==null?void 0:t(a),disabled:i===a.id,children:"Modifier"}),h.jsx("button",{type:"button",className:"button button--danger",onClick:()=>n==null?void 0:n(a),disabled:i===a.id,children:"Supprimer"})]})]},a.id)})})]})})]})}function mW(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`alert-${Math.random().toString(36).slice(2,10)}`}function gW(e,t=""){var i,a,o,s,l,c,f,u;if(!e||typeof e!="object")return{symbol:t,timeframe:null,conditions:{pnl:{enabled:!1,operator:"below",value:null},drawdown:{enabled:!1,operator:"above",value:null},indicators:[]}};const n=typeof e.symbol=="string"?e.symbol:t,r=e.conditions||{};return{symbol:n||t,timeframe:e.timeframe||null,conditions:{pnl:{enabled:!!((i=r==null?void 0:r.pnl)!=null&&i.enabled),operator:((a=r==null?void 0:r.pnl)==null?void 0:a.operator)||"below",value:((o=r==null?void 0:r.pnl)==null?void 0:o.value)!==void 0&&((s=r==null?void 0:r.pnl)==null?void 0:s.value)!==null?Number(r.pnl.value):null},drawdown:{enabled:!!((l=r==null?void 0:r.drawdown)!=null&&l.enabled),operator:((c=r==null?void 0:r.drawdown)==null?void 0:c.operator)||"above",value:((f=r==null?void 0:r.drawdown)==null?void 0:f.value)!==void 0&&((u=r==null?void 0:r.drawdown)==null?void 0:u.value)!==null?Number(r.drawdown.value):null},indicators:Array.isArray(r==null?void 0:r.indicators)?r.indicators.map(d=>({id:d.id||`indicator-${Math.random().toString(36).slice(2)}`,name:d.name||"RSI",operator:d.operator||"above",value:d.value!==void 0&&d.value!==null?Number(d.value):0,lookback:d.lookback!==void 0&&d.lookback!==null?Number(d.lookback):null,enabled:d.enabled!==void 0?!!d.enabled:!0})):[]}}}function yW(e){return Array.isArray(e)?e.map((t,n)=>({type:(t==null?void 0:t.type)||"email",target:(t==null?void 0:t.target)||"",enabled:(t==null?void 0:t.enabled)!==void 0?!!t.enabled:!0,_internalId:(t==null?void 0:t.id)||`channel-${n}`})):[]}function Bu(e){var r;if(!e||typeof e!="object")return null;const t=typeof e.risk=="string"?e.risk:((r=e.risk)==null?void 0:r.value)||"info",n=e.created_at||e.createdAt||new Date().toISOString();return{id:String(e.id??e.title??mW()),title:e.title||"Alerte",detail:e.detail||"",risk:t,acknowledged:!!e.acknowledged,created_at:n,rule:gW(e.rule,e.symbol||""),channels:yW(e.channels),throttle_seconds:Number.isFinite(e.throttle_seconds)?Number(e.throttle_seconds):0}}function nr(e){return Array.isArray(e)?e.map(t=>Bu(t)).filter(Boolean).sort((t,n)=>new Date(n.created_at).getTime()-new Date(t.created_at).getTime()):[]}function vW({initialAlerts:e=[],endpoint:t="/alerts",authToken:n="",enableInitialFetch:r=!0}){const[i,a]=P.useState(()=>nr(e)),[o,s]=P.useState(!1),[l,c]=P.useState("create"),[f,u]=P.useState(null),[d,p]=P.useState(null),[v,m]=P.useState(null),[g,w]=P.useState(!1),[b,_]=P.useState(null),S=P.useMemo(()=>t.replace(/\/$/,""),[t]),y=P.useCallback((E=!1)=>{const k={Accept:"application/json"};return E&&(k["Content-Type"]="application/json"),n&&(k.Authorization=`Bearer ${n}`),k},[n]),x=P.useCallback(async(E,k="",C)=>{var V,z;const M=k?`/${String(k).replace(/^\//,"")}`:"",D=`${S}${M}`,L=await fetch(D,{method:E,headers:y(C!==void 0),body:C!==void 0?JSON.stringify(C):void 0});let R=null;if((((z=(V=L.headers)==null?void 0:V.get)==null?void 0:z.call(V,"content-type"))||"").includes("application/json")&&(R=await L.json()),!L.ok){const X=(R==null?void 0:R.detail)||(R==null?void 0:R.message)||(R==null?void 0:R.error),ne=new Error(X||"Le service d'alertes a renvoyé une erreur.");throw ne.status=L.status,ne}return R||{}},[S,y]),O=P.useCallback(async()=>{s(!0);try{const E=await x("GET");E&&Array.isArray(E.items)&&a(nr(E.items)),m(null)}catch(E){m({type:"error",message:E.message||"Impossible de récupérer les alertes."})}finally{s(!1)}},[x]);P.useEffect(()=>{r&&O()},[O,r]),P.useEffect(()=>{function E(C){const M=C.detail;if(!(!M||!Array.isArray(M.items))&&(a(nr(M.items)),M.message)){const D=M.type||"info";m({type:D,message:M.message})}}function k(C){var D;const M=((D=C.detail)==null?void 0:D.message)||"Flux temps réel indisponible.";m({type:"error",message:M})}return document.addEventListener("alerts:update",E),document.addEventListener("alerts:fallback",E),document.addEventListener("alerts:error",k),()=>{document.removeEventListener("alerts:update",E),document.removeEventListener("alerts:fallback",E),document.removeEventListener("alerts:error",k)}},[]);const j=P.useCallback(async E=>{w(!0),p(null);try{const k=await x("POST","",E),C=Bu(k);a(M=>{if(!C)return M;const D=M.findIndex(L=>L.id===C.id);if(D>=0){const L=[...M];return L[D]={...L[D],...C},nr(L)}return nr([C,...M])}),m({type:"success",message:"Alerte créée avec succès."}),c("create"),u(null)}catch(k){p(k.message||"Impossible de créer l'alerte.")}finally{w(!1)}},[x]),$=P.useCallback(E=>{c("edit"),u(E),p(null)},[]),T=P.useCallback(()=>{c("create"),u(null),p(null)},[]),N=P.useCallback(async E=>{if(f){w(!0),p(null);try{const k=await x("PUT",f.id,E),C=Bu({...f,...k});a(M=>{if(!C)return M;const D=M.findIndex(R=>R.id===f.id);if(D<0)return M;const L=[...M];return L[D]={...L[D],...C},nr(L)}),m({type:"success",message:"Alerte mise à jour."}),c("create"),u(null)}catch(k){p(k.message||"Impossible de mettre à jour l'alerte.")}finally{w(!1)}}},[f,x]),A=P.useCallback(async E=>{if(!(!E||!(!(typeof window<"u")||window.confirm(`Supprimer l'alerte "${E.title}" ?`)))){_(E.id);try{await x("DELETE",E.id),a(C=>C.filter(M=>M.id!==E.id)),f&&f.id===E.id&&(c("create"),u(null)),m({type:"success",message:"Alerte supprimée."})}catch(C){m({type:"error",message:C.message||"Impossible de supprimer l'alerte."})}finally{_(null)}}},[f,x]);return h.jsxs("section",{className:"alerts-manager","aria-labelledby":"alerts-title",children:[v?h.jsx("div",{className:`alerts-manager__banner alerts-manager__banner--${v.type}`,role:v.type==="error"?"alert":"status",children:v.message}):null,h.jsxs("div",{className:"alerts-manager__grid",children:[h.jsxs("div",{className:"alerts-manager__form",children:[h.jsx("h3",{className:"heading heading--md",children:l==="edit"?"Modifier l'alerte":"Créer une alerte"}),h.jsx(dW,{mode:l,initialAlert:f,onSubmit:l==="edit"?N:j,onCancel:T,submitting:g,error:d})]}),h.jsx("div",{className:"alerts-manager__list",children:h.jsx(pW,{alerts:i,loading:o,onEdit:$,onDelete:A,pendingId:b})})]})]})}const bW=(e,t,n,r)=>{var a,o,s,l;const i=[n,{code:t,...r||{}}];if((o=(a=e==null?void 0:e.services)==null?void 0:a.logger)!=null&&o.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);Ln(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(l=(s=e==null?void 0:e.services)==null?void 0:s.logger)!=null&&l.warn?e.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},wg={},Fu=(e,t,n,r)=>{Ln(n)&&wg[n]||(Ln(n)&&(wg[n]=new Date),bW(e,t,n,r))},p0=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},Uu=(e,t,n)=>{e.loadNamespaces(t,p0(e,n))},_g=(e,t,n,r)=>{if(Ln(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Uu(e,n,r);n.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,p0(e,r))},xW=(e,t,n={})=>!t.languages||!t.languages.length?(Fu(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,e))return!1}}),Ln=e=>typeof e=="string",wW=e=>typeof e=="object"&&e!==null,_W=(e,t)=>{const n=P.useRef();return P.useEffect(()=>{n.current=e},[e,t]),n.current},m0=(e,t,n,r)=>e.getFixedT(t,n,r),SW=(e,t,n,r)=>P.useCallback(m0(e,t,n,r),[e,t,n,r]),ii=(e,t={})=>{var S,y,x,O;const{i18n:n}=t,{i18n:r,defaultNS:i}=P.useContext(bx)||{},a=n||r||xx();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new wx),!a){Fu(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const j=(T,N)=>Ln(N)?N:wW(N)&&Ln(N.defaultValue)?N.defaultValue:Array.isArray(T)?T[T.length-1]:T,$=[j,{},!1];return $.t=j,$.i18n={},$.ready=!1,$}(S=a.options.react)!=null&&S.wait&&Fu(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={..._x(),...a.options.react,...t},{useSuspense:s,keyPrefix:l}=o;let c=i||((y=a.options)==null?void 0:y.defaultNS);c=Ln(c)?[c]:c||["translation"],(O=(x=a.reportNamespaces).addUsedNamespaces)==null||O.call(x,c);const f=(a.isInitialized||a.initializedStoreOnce)&&c.every(j=>xW(j,a,o)),u=SW(a,t.lng||null,o.nsMode==="fallback"?c:c[0],l),d=()=>u,p=()=>m0(a,t.lng||null,o.nsMode==="fallback"?c:c[0],l),[v,m]=P.useState(d);let g=c.join();t.lng&&(g=`${t.lng}${g}`);const w=_W(g),b=P.useRef(!0);P.useEffect(()=>{const{bindI18n:j,bindI18nStore:$}=o;b.current=!0,!f&&!s&&(t.lng?_g(a,t.lng,c,()=>{b.current&&m(p)}):Uu(a,c,()=>{b.current&&m(p)})),f&&w&&w!==g&&b.current&&m(p);const T=()=>{b.current&&m(p)};return j&&(a==null||a.on(j,T)),$&&(a==null||a.store.on($,T)),()=>{b.current=!1,a&&j&&(j==null||j.split(" ").forEach(N=>a.off(N,T))),$&&a&&$.split(" ").forEach(N=>a.store.off(N,T))}},[a,g]),P.useEffect(()=>{b.current&&f&&m(d)},[a,l,f]);const _=[v,a,f];if(_.t=v,_.i18n=a,_.ready=f,f||!f&&!s)return _;throw new Promise(j=>{t.lng?_g(a,t.lng,c,()=>j()):Uu(a,c,()=>j())})};function OW(e,t="fr"){if(!e)return"";try{const n=new Date(e);return new Intl.DateTimeFormat(t,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(n)}catch{return String(e)}}function AW({endpoint:e="/alerts/history"}){const{t,i18n:n}=ii(),[r,i]=P.useState("idle"),[a,o]=P.useState([]),[s,l]=P.useState({page:1,pages:1,total:0,page_size:10}),[c,f]=P.useState({strategy:"",severity:""}),[u,d]=P.useState({strategies:[],severities:[]}),p=P.useMemo(()=>{const y=new URLSearchParams;return y.set("page",s.page),y.set("page_size",s.page_size||10),c.strategy&&y.set("strategy",c.strategy),c.severity&&y.set("severity",c.severity),y.toString()},[s.page,s.page_size,c.strategy,c.severity]);P.useEffect(()=>{async function y(){i("loading");try{const x=`${e}?${p}`,O=await fetch(x,{headers:{Accept:"application/json"}});if(!O.ok)throw new Error(`HTTP ${O.status}`);const j=await O.json();o(Array.isArray(j.items)?j.items:[]);const $=j.pagination||{};l(T=>({page:$.page||T.page,pages:$.pages||$.total_pages||1,total:$.total??T.total,page_size:$.page_size||T.page_size})),j.available_filters&&d({strategies:j.available_filters.strategies||[],severities:j.available_filters.severities||[]}),i("ready")}catch{i("error")}}y()},[e,p]);const v=s.page>1,m=s.page<(s.pages||1);function g(y){f(x=>({...x,severity:y.target.value})),l(x=>({...x,page:1}))}function w(y){f(x=>({...x,strategy:y.target.value})),l(x=>({...x,page:1}))}function b(y){const x=Number.parseInt(y.target.value,10)||10;l(O=>({...O,page_size:x,page:1}))}function _(){v&&l(y=>({...y,page:Math.max(1,y.page-1)}))}function S(){m&&l(y=>({...y,page:y.page+1}))}return h.jsxs("section",{className:"history-panel","aria-live":"polite",children:[h.jsxs("header",{className:"history-panel__header",children:[h.jsx("h2",{className:"heading heading--lg",children:t("Historique des alertes")}),h.jsx("p",{className:"text text--muted",children:t("Consultez les déclenchements passés et leurs métadonnées.")})]}),h.jsxs("div",{className:"history-panel__filters",children:[h.jsxs("label",{className:"form-field",children:[h.jsx("span",{className:"form-field__label",children:t("Sévérité")}),h.jsxs("select",{value:c.severity,onChange:g,children:[h.jsx("option",{value:"",children:t("Toutes")}),u.severities.map(y=>h.jsx("option",{value:y,children:y},y))]})]}),h.jsxs("label",{className:"form-field",children:[h.jsx("span",{className:"form-field__label",children:t("Stratégie")}),h.jsxs("select",{value:c.strategy,onChange:w,children:[h.jsx("option",{value:"",children:t("Toutes")}),u.strategies.map(y=>h.jsx("option",{value:y,children:y},y))]})]}),h.jsxs("label",{className:"form-field",children:[h.jsx("span",{className:"form-field__label",children:t("Entrées par page")}),h.jsx("select",{value:s.page_size,onChange:b,children:[5,10,20,50].map(y=>h.jsx("option",{value:y,children:y},y))})]})]}),r==="loading"&&h.jsx("p",{className:"text",role:"status",children:t("Chargement de l'historique…")}),r==="error"&&h.jsx("p",{className:"text text--critical",role:"alert",children:t("Impossible de récupérer l'historique pour le moment.")}),r==="ready"&&a.length===0&&h.jsx("p",{className:"text text--muted",children:t("Aucun déclenchement enregistré pour ces filtres.")}),a.length>0&&h.jsx("div",{className:"table-responsive",children:h.jsxs("table",{className:"table history-table",role:"grid",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",children:t("Déclenchée le")}),h.jsx("th",{scope:"col",children:t("Type")}),h.jsx("th",{scope:"col",children:t("Canal")}),h.jsx("th",{scope:"col",children:t("Règle")}),h.jsx("th",{scope:"col",children:t("Stratégie")}),h.jsx("th",{scope:"col",children:t("Sévérité")}),h.jsx("th",{scope:"col",children:t("Symbole")})]})}),h.jsx("tbody",{children:a.map(y=>h.jsxs("tr",{children:[h.jsx("td",{"data-label":t("Déclenchée le"),children:OW(y.triggered_at,n.language)}),h.jsx("td",{"data-label":t("Type"),children:y.notification_type||"trigger"}),h.jsx("td",{"data-label":t("Canal"),children:y.notification_channel||"-"}),h.jsx("td",{"data-label":t("Règle"),children:y.rule_name}),h.jsx("td",{"data-label":t("Stratégie"),children:y.strategy}),h.jsx("td",{"data-label":t("Sévérité"),children:h.jsx("span",{className:`badge badge--${y.severity||"info"}`,children:y.severity})}),h.jsx("td",{"data-label":t("Symbole"),children:y.symbol})]},y.id||`${y.trigger_id}-${y.rule_id}`))})]})}),h.jsxs("footer",{className:"history-panel__footer",children:[h.jsx("button",{type:"button",className:"button button--ghost",onClick:_,disabled:!v,children:t("Précédent")}),h.jsx("span",{className:"text text--muted",children:t("Page {page} sur {pages} ({total} alertes)",{page:s.page,pages:s.pages||1,total:s.total})}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:S,disabled:!m,children:t("Suivant")})]})]})}const Sg={success:{label:"Terminé",className:"badge--success"},completed:{label:"Terminé",className:"badge--success"},ready:{label:"Prêt",className:"badge--success"},running:{label:"En cours",className:"badge--info"},processing:{label:"En cours",className:"badge--info"},pending:{label:"En file",className:"badge--warning"},queued:{label:"En file",className:"badge--warning"},failure:{label:"Échec",className:"badge--critical"},failed:{label:"Échec",className:"badge--critical"}};function jW(e,t){if(!e||typeof e!="object")return null;const n=e.report_type||e.reportType||e.title||"Rapport personnalisé",r=e.period||e.coverage||null,i=e.generated_at||e.generatedAt||null,a=e.download_url||e.downloadUrl||null,o=e.filename||e.fileName||null,s=e.status||e.state||null,l=e.id||e.identifier||e.uid||e.uuid||e.slug||null;return{uid:l?String(l):`report-${t}`,identifier:l?String(l):null,reportType:n,period:r,generatedAt:i,downloadUrl:a,filename:o,status:s}}function $W(e){if(!e)return null;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?typeof e=="string"?e:String(e):t.toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function PW(e){if(!e||typeof e!="string")return null;const t=e.toLowerCase();return Sg[t]?Sg[t]:{label:e,className:"badge--info"}}function TW(e){const t=Number(e);return!Number.isFinite(t)||t<=0?5:Math.max(1,Math.floor(t))}async function EW(e,t,n){const{downloadUrl:r,reportType:i,filename:a,uid:o}=e;if(!r){t("Téléchargement indisponible pour ce rapport.");return}t(null),n(o);try{const s=await fetch(r,{headers:{Accept:"application/pdf,application/octet-stream"}});if(!s.ok)throw new Error(`HTTP ${s.status}`);const l=await s.blob();if(typeof window>"u")return;const c=window.URL||URL;if(c&&typeof c.createObjectURL=="function"){const f=c.createObjectURL(l),u=document.createElement("a");u.href=f,u.download=a||`${i.replace(/\s+/g,"-").toLowerCase()}.bin`,document.body.appendChild(u),u.click(),u.remove(),typeof c.revokeObjectURL=="function"&&c.revokeObjectURL(f)}else typeof window.open=="function"&&window.open(r,"_blank","noopener")}catch(s){console.error("Impossible de télécharger le rapport",s),t("Téléchargement impossible pour le moment.")}finally{n(null)}}function NW({reports:e=[],pageSize:t=5}){const n=P.useMemo(()=>Array.isArray(e)?e.map((w,b)=>jW(w,b)).filter(Boolean):[],[e]),r=TW(t),[i,a]=P.useState(0),[o,s]=P.useState(null),[l,c]=P.useState(null);P.useEffect(()=>{a(0)},[n.length,r]),P.useEffect(()=>{c(null)},[i]);const f=Math.max(1,Math.ceil(n.length/r)),u=Math.min(i,f-1),d=u*r,p=n.slice(d,d+r),v=()=>{a(w=>Math.max(0,w-1))},m=()=>{a(w=>Math.min(f-1,w+1))},g=w=>{EW(w,c,s)};return n.length?h.jsxs("div",{className:"reports-center",children:[h.jsx("ul",{className:"reports-list",role:"list",children:p.map(w=>{const b=PW(w.status),_=$W(w.generatedAt),S=o===w.uid;return h.jsxs("li",{className:"reports-list__item",role:"listitem",children:[h.jsxs("div",{className:"reports-list__meta",children:[h.jsx("span",{className:"reports-list__title heading heading--md",children:w.reportType}),h.jsxs("p",{className:"reports-list__period text text--muted",children:[w.period?`Période : ${w.period}`:"Période non précisée",_?` · Généré le ${_}`:""]}),b?h.jsx("span",{className:`badge ${b.className} reports-list__status`,children:b.label}):null]}),h.jsx("div",{className:"reports-list__actions",children:h.jsx("button",{type:"button",className:"button button--primary",onClick:()=>g(w),disabled:!w.downloadUrl||S,children:S?"Téléchargement…":"Télécharger"})})]},w.uid)})}),h.jsxs("div",{className:"reports-pagination",children:[h.jsxs("span",{children:["Page ",u+1," / ",f]}),h.jsxs("div",{className:"reports-pagination__controls",children:[h.jsx("button",{type:"button",className:"button button--ghost",onClick:v,disabled:u===0,children:"Précédent"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:m,disabled:u>=f-1,children:"Suivant"})]})]}),l?h.jsx("p",{role:"alert",className:"reports-error",children:l}):null]}):h.jsxs("div",{className:"reports-center",children:[h.jsx("p",{className:"text text--muted",children:"Aucun rapport disponible pour le moment."}),l?h.jsx("p",{role:"alert",className:"reports-error",children:l}):null]})}const Og=[{id:"breakout",label:"Breakout intraday",prompt:"Identifie les cassures de range sur BTC/USDT en 15 minutes avec confirmation de volume."},{id:"mean_reversion",label:"Retour à la moyenne",prompt:"Stratégie de retour à la moyenne sur ETH en 1h avec RSI et bandes de Bollinger."},{id:"trend_following",label:"Suivi de tendance",prompt:"Suivi de tendance daily sur indices avec croisements de moyennes mobiles et trailing stop."}],kW=["RSI","MACD","EMA 20","EMA 50","Bollinger Bands","VWAP","SuperTrend","OBV"];function CW(e,t){return e.includes(t)?e.filter(n=>n!==t):[...e,t]}function IW(e){return e?e.split(",").map(t=>t.trim()).filter(t=>t.length>0):[]}function g0({generateEndpoint:e="/strategies/generate",importEndpoint:t="/strategies/import/assistant"}){const[n,r]=P.useState({prompt:"",selectedPrompt:"",preferredFormat:"yaml",riskProfile:"",timeframe:"",capital:"",indicators:[],notes:""}),[i,a]=P.useState({state:"idle"}),[o,s]=P.useState(null),[l,c]=P.useState(""),[f,u]=P.useState(""),[d,p]=P.useState(""),[v,m]=P.useState(""),[g,w]=P.useState(!1),[b,_]=P.useState({state:"idle"}),S=P.useMemo(()=>kW.map($=>({label:$,selected:n.indicators.includes($)})),[n.indicators]);async function y($){var N;$.preventDefault(),a({state:"loading"}),_({state:"idle"});const T={prompt:n.prompt,preferred_format:n.preferredFormat,risk_profile:n.riskProfile||void 0,timeframe:n.timeframe||void 0,capital:n.capital||void 0,indicators:n.indicators,notes:n.notes||void 0};try{const A=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(T)});if(!A.ok){const k=await A.json().catch(()=>({}));throw new Error(k.detail||`HTTP ${A.status}`)}const E=await A.json();s(E.draft),c(E.draft.yaml||""),u(E.draft.python||""),p(((N=E.draft.metadata)==null?void 0:N.suggested_name)||""),a({state:"ready"})}catch(A){console.error("Impossible de générer la stratégie",A),a({state:"error",message:A.message})}}function x($){const T=$.target.value,N=Og.find(A=>A.id===T);r(A=>({...A,selectedPrompt:T,prompt:N?N.prompt:A.prompt}))}function O($){r(T=>({...T,indicators:CW(T.indicators,$)}))}async function j($){const T=$==="yaml"?l:f;if(!T||T.trim().length===0){_({state:"error",message:"Contenu vide."});return}_({state:"loading"});const N={format:$,content:T,enabled:g,tags:IW(v)};d.trim().length>0&&(N.name=d.trim()),o&&o.metadata&&(N.metadata=o.metadata);try{const A=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(N)});if(!A.ok){const k=await A.json().catch(()=>({}));throw new Error(k.detail||`HTTP ${A.status}`)}const E=await A.json();_({state:"success",strategy:E})}catch(A){console.error("Import impossible",A),_({state:"error",message:A.message})}}return h.jsxs("section",{className:"ai-strategy-assistant",children:[h.jsx("h2",{children:"Assistant IA pour stratégies"}),h.jsx("p",{className:"assistant__intro",children:"Décrivez votre idée ou sélectionnez un prompt prédéfini pour générer un brouillon de stratégie au format YAML ou Python. Vous pouvez ensuite l'affiner avant de l'importer."}),h.jsxs("form",{className:"assistant__form",onSubmit:y,children:[h.jsxs("div",{className:"assistant__field",children:[h.jsx("label",{htmlFor:"assistant-prompt-select",children:"Prompts prédéfinis"}),h.jsxs("select",{id:"assistant-prompt-select",value:n.selectedPrompt,onChange:x,children:[h.jsx("option",{value:"",children:"Choisir un prompt…"}),Og.map($=>h.jsx("option",{value:$.id,children:$.label},$.id))]})]}),h.jsxs("div",{className:"assistant__field",children:[h.jsx("label",{htmlFor:"assistant-prompt",children:"Description de la stratégie"}),h.jsx("textarea",{id:"assistant-prompt",value:n.prompt,onChange:$=>r(T=>({...T,prompt:$.target.value})),rows:4,placeholder:"Ex: Détecter les cassures de tendance sur BTC avec confirmation du volume",required:!0})]}),h.jsxs("div",{className:"assistant__field",children:[h.jsx("label",{htmlFor:"assistant-format",children:"Format souhaité"}),h.jsxs("select",{id:"assistant-format",value:n.preferredFormat,onChange:$=>r(T=>({...T,preferredFormat:$.target.value})),children:[h.jsx("option",{value:"yaml",children:"YAML"}),h.jsx("option",{value:"python",children:"Python"}),h.jsx("option",{value:"both",children:"Les deux"})]})]}),h.jsxs("div",{className:"assistant__grid",children:[h.jsxs("div",{className:"assistant__field",children:[h.jsx("label",{htmlFor:"assistant-risk",children:"Profil de risque"}),h.jsx("input",{id:"assistant-risk",type:"text",value:n.riskProfile,onChange:$=>r(T=>({...T,riskProfile:$.target.value})),placeholder:"Ex: modéré"})]}),h.jsxs("div",{className:"assistant__field",children:[h.jsx("label",{htmlFor:"assistant-timeframe",children:"Timeframe"}),h.jsx("input",{id:"assistant-timeframe",type:"text",value:n.timeframe,onChange:$=>r(T=>({...T,timeframe:$.target.value})),placeholder:"Ex: 1h"})]}),h.jsxs("div",{className:"assistant__field",children:[h.jsx("label",{htmlFor:"assistant-capital",children:"Capital"}),h.jsx("input",{id:"assistant-capital",type:"text",value:n.capital,onChange:$=>r(T=>({...T,capital:$.target.value})),placeholder:"Ex: 10 000 €"})]})]}),h.jsxs("fieldset",{className:"assistant__field",children:[h.jsx("legend",{children:"Indicateurs suggérés"}),h.jsx("div",{className:"assistant__chips",children:S.map($=>h.jsx("button",{type:"button",className:$.selected?"assistant__chip assistant__chip--active":"assistant__chip",onClick:()=>O($.label),children:$.label},$.label))})]}),h.jsxs("div",{className:"assistant__field",children:[h.jsx("label",{htmlFor:"assistant-notes",children:"Contraintes supplémentaires"}),h.jsx("textarea",{id:"assistant-notes",value:n.notes,onChange:$=>r(T=>({...T,notes:$.target.value})),rows:3,placeholder:"Ex: Limiter le drawdown à 5%, privilégier les signaux multi-timeframe"})]}),h.jsx("button",{className:"assistant__submit",type:"submit",disabled:i.state==="loading",children:i.state==="loading"?"Génération en cours…":"Générer la stratégie"}),i.state==="error"&&h.jsx("p",{className:"assistant__error",children:i.message})]}),o&&h.jsxs("section",{className:"assistant__results",children:[h.jsx("h3",{children:"Proposition générée"}),h.jsx("p",{className:"assistant__summary",children:o.summary}),o.warnings&&o.warnings.length>0&&h.jsx("ul",{className:"assistant__warnings",children:o.warnings.map(($,T)=>h.jsx("li",{children:$},T))}),o.indicators&&o.indicators.length>0&&h.jsxs("p",{className:"assistant__indicators",children:["Indicateurs recommandés : ",h.jsx("strong",{children:o.indicators.join(", ")})]}),o.yaml!==null&&h.jsxs("div",{className:"assistant__editor",children:[h.jsx("label",{htmlFor:"assistant-yaml",children:"Définition YAML"}),h.jsx("textarea",{id:"assistant-yaml",rows:12,value:l,onChange:$=>c($.target.value)})]}),o.python!==null&&h.jsxs("div",{className:"assistant__editor",children:[h.jsx("label",{htmlFor:"assistant-python",children:"Implémentation Python"}),h.jsx("textarea",{id:"assistant-python",rows:12,value:f,onChange:$=>u($.target.value)})]}),h.jsxs("div",{className:"assistant__import",children:[h.jsx("h4",{children:"Importer dans l'algo engine"}),h.jsxs("div",{className:"assistant__field",children:[h.jsx("label",{htmlFor:"assistant-name",children:"Nom de la stratégie"}),h.jsx("input",{id:"assistant-name",type:"text",value:d,onChange:$=>p($.target.value),placeholder:"Ex: Breakout AI"})]}),h.jsxs("div",{className:"assistant__field",children:[h.jsx("label",{htmlFor:"assistant-tags",children:"Tags (séparés par des virgules)"}),h.jsx("input",{id:"assistant-tags",type:"text",value:v,onChange:$=>m($.target.value),placeholder:"momentum, IA"})]}),h.jsxs("label",{className:"assistant__checkbox",children:[h.jsx("input",{type:"checkbox",checked:g,onChange:$=>w($.target.checked)}),"Activer immédiatement la stratégie"]}),h.jsxs("div",{className:"assistant__buttons",children:[o.yaml!==null&&h.jsx("button",{type:"button",onClick:()=>j("yaml"),children:"Importer la version YAML"}),o.python!==null&&h.jsx("button",{type:"button",onClick:()=>j("python"),children:"Importer la version Python"})]}),b.state==="loading"&&h.jsx("p",{children:"Import en cours…"}),b.state==="error"&&h.jsx("p",{className:"assistant__error",children:b.message}),b.state==="success"&&h.jsxs("p",{className:"assistant__success",children:["Stratégie importée avec l'identifiant ",b.strategy.id,"."]})]})]})]})}g0.propTypes={generateEndpoint:fe.string,importEndpoint:fe.string};const sd="application/x-strategy-block",Ag=["indicator","indicator_macd","indicator_bollinger","indicator_atr"],He={condition:{type:"condition",label:"Condition",description:"Comparer un champ de marché à une valeur cible et définir le déclencheur d'une règle.",accepts:Ag,category:"conditions",defaultConfig:{field:"close",operator:"gt",value:"100"},validation:{required:[{field:"field",label:"Champ"},{field:"operator",label:"Opérateur"},{field:"value",label:"Valeur"}],maxChildren:1}},market_cross:{type:"market_cross",label:"Croisement",description:"Détecter le croisement de deux indicateurs (ex. MACD vs moyenne mobile).",accepts:Ag,category:"conditions",defaultConfig:{direction:"above",lookback:"3"},validation:{required:[{field:"direction",label:"Direction"}],minChildren:2,maxChildren:2}},market_volume:{type:"market_volume",label:"Volume seuil",description:"Vérifier si le volume respecte un seuil donné sur un intervalle.",accepts:[],category:"conditions",defaultConfig:{operator:"gt",value:"100000",timeframe:"1h"},validation:{required:[{field:"operator",label:"Opérateur"},{field:"value",label:"Seuil"},{field:"timeframe",label:"Intervalle"}]}},indicator:{type:"indicator",label:"Indicateur simple",description:"Calculer une mesure technique (SMA, RSI, VWAP…) afin de l'utiliser dans une condition.",accepts:[],category:"conditions",defaultConfig:{source:"close",kind:"sma",period:"20"},validation:{required:[{field:"source",label:"Source"},{field:"kind",label:"Type"},{field:"period",label:"Période"}]}},indicator_macd:{type:"indicator_macd",label:"MACD",description:"Oscillateur MACD avec périodes rapide/lente et signal configurable.",accepts:[],category:"conditions",defaultConfig:{source:"close",fastPeriod:"12",slowPeriod:"26",signalPeriod:"9"},validation:{required:[{field:"source",label:"Source"},{field:"fastPeriod",label:"Période rapide"},{field:"slowPeriod",label:"Période lente"},{field:"signalPeriod",label:"Période signal"}]}},indicator_bollinger:{type:"indicator_bollinger",label:"Bandes de Bollinger",description:"Bandes de volatilité basées sur une moyenne mobile et une déviation.",accepts:[],category:"conditions",defaultConfig:{source:"close",period:"20",deviation:"2"},validation:{required:[{field:"source",label:"Source"},{field:"period",label:"Période"},{field:"deviation",label:"Déviation"}]}},indicator_atr:{type:"indicator_atr",label:"ATR",description:"Average True Range permettant d'évaluer la volatilité.",accepts:[],category:"conditions",defaultConfig:{source:"hlc3",period:"14",smoothing:"14"},validation:{required:[{field:"source",label:"Source"},{field:"period",label:"Période"},{field:"smoothing",label:"Lissage"}]}},logic:{type:"logic",label:"Opérateur logique",description:"Regrouper plusieurs conditions avec un ET/OU imbriqué.",accepts:["condition","market_cross","market_volume","logic","negation","group"],category:"conditions",defaultConfig:{mode:"all"},validation:{required:[{field:"mode",label:"Mode"}],minChildren:2}},negation:{type:"negation",label:"Négation",description:"Inverser le résultat d'une condition (NON / NOT).",accepts:["condition","market_cross","market_volume","logic","group"],category:"conditions",defaultConfig:{},validation:{minChildren:1,maxChildren:1}},group:{type:"group",label:"Parenthèses",description:"Créer un sous-groupe afin de prioriser certaines conditions.",accepts:["condition","market_cross","market_volume","logic","negation"],category:"conditions",defaultConfig:{},validation:{minChildren:1}},action:{type:"action",label:"Action d'exécution",description:"Déclencher un ordre via le moteur d'exécution.",accepts:[],category:"actions",defaultConfig:{action:"buy",size:"1"},validation:{required:[{field:"action",label:"Action"},{field:"size",label:"Taille"}]}},take_profit:{type:"take_profit",label:"Take-profit",description:"Sécuriser les gains une fois qu'un objectif est atteint.",accepts:[],category:"actions",defaultConfig:{mode:"percent",value:"5",size:"full"},validation:{required:[{field:"mode",label:"Type de cible"},{field:"value",label:"Valeur"}]}},stop_loss:{type:"stop_loss",label:"Stop-loss",description:"Limiter les pertes avec un seuil fixe ou suiveur.",accepts:[],category:"actions",defaultConfig:{mode:"percent",value:"2",trailing:!1},validation:{required:[{field:"mode",label:"Type de seuil"},{field:"value",label:"Valeur"}]}},close_position:{type:"close_position",label:"Fermer la position",description:"Clôturer tout ou partie de la position ouverte.",accepts:[],category:"actions",defaultConfig:{side:"all"},validation:{required:[{field:"side",label:"Cible"}]}},alert:{type:"alert",label:"Alerte",description:"Notifier une équipe ou un canal externe lors du déclenchement.",accepts:[],category:"actions",defaultConfig:{channel:"email",message:"Alerte stratégie"},validation:{required:[{field:"channel",label:"Canal"},{field:"message",label:"Message"}]}},delay:{type:"delay",label:"Temporisation",description:"Attendre un délai défini avant l'étape suivante de la stratégie.",accepts:[],category:"actions",defaultConfig:{seconds:"60"},validation:{required:[{field:"seconds",label:"Délai (secondes)"}]}}};function il(e){const t=He[e];return t?JSON.parse(JSON.stringify(t.defaultConfig||{})):{}}function MW({type:e,definition:t,onAdd:n}){const r=a=>{a.dataTransfer.setData(sd,e),a.dataTransfer.effectAllowed="copyMove"},i=a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),n({type:e,section:t.category}))};return h.jsxs("article",{className:"palette-item",role:"listitem",children:[h.jsxs("header",{className:"palette-item__header",children:[h.jsxs("div",{children:[h.jsx("span",{className:"palette-item__title heading heading--sm",children:t.label}),h.jsx("p",{className:"palette-item__category text text--muted",children:t.category==="actions"?"Action":"Condition"})]}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>n({type:e,section:t.category}),"aria-label":`Ajouter ${t.label}`,children:"Ajouter"})]}),h.jsx("p",{className:"palette-item__description text",children:t.description}),h.jsx("div",{className:"palette-item__draggable",role:"button",tabIndex:0,draggable:!0,"data-testid":`palette-item-${e}`,onDragStart:r,onKeyDown:i,"aria-label":`Glisser ${t.label} vers la zone de composition`,children:"Glisser-déposer"})]})}function DW({onAdd:e}){return h.jsxs("section",{className:"designer-panel designer-panel--palette","aria-labelledby":"palette-title",children:[h.jsxs("div",{className:"designer-panel__header",children:[h.jsx("h2",{id:"palette-title",className:"heading heading--md",children:"Bibliothèque de blocs"}),h.jsx("p",{className:"text text--muted",children:"Faites glisser un bloc dans la colonne « Composition » ou cliquez sur « Ajouter » pour l'insérer."})]}),h.jsx("div",{className:"designer-panel__body",role:"list","aria-label":"Types de blocs disponibles",children:Object.entries(He).map(([t,n])=>h.jsx(MW,{type:t,definition:n,onAdd:e},t))})]})}function le({label:e,children:t}){return h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:e}),t]})}function LW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Champ",children:h.jsx("input",{type:"text",value:e.config.field||"",onChange:n=>t({...e.config,field:n.target.value})})}),h.jsx(le,{label:"Opérateur",children:h.jsxs("select",{value:e.config.operator||"gt",onChange:n=>t({...e.config,operator:n.target.value}),children:[h.jsx("option",{value:"gt",children:"Supérieur à"}),h.jsx("option",{value:"lt",children:"Inférieur à"}),h.jsx("option",{value:"gte",children:"Supérieur ou égal"}),h.jsx("option",{value:"lte",children:"Inférieur ou égal"}),h.jsx("option",{value:"eq",children:"Égal"}),h.jsx("option",{value:"neq",children:"Différent"})]})}),h.jsx(le,{label:"Valeur",children:h.jsx("input",{type:"text",value:e.config.value??"",onChange:n=>t({...e.config,value:n.target.value})})})]})}function RW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Source",children:h.jsxs("select",{value:e.config.source||"close",onChange:n=>t({...e.config,source:n.target.value}),children:[h.jsx("option",{value:"close",children:"Clôture"}),h.jsx("option",{value:"open",children:"Ouverture"}),h.jsx("option",{value:"high",children:"Haut"}),h.jsx("option",{value:"low",children:"Bas"}),h.jsx("option",{value:"volume",children:"Volume"})]})}),h.jsx(le,{label:"Type",children:h.jsxs("select",{value:e.config.kind||"sma",onChange:n=>t({...e.config,kind:n.target.value}),children:[h.jsx("option",{value:"sma",children:"Moyenne mobile"}),h.jsx("option",{value:"ema",children:"EMA"}),h.jsx("option",{value:"rsi",children:"RSI"}),h.jsx("option",{value:"vwap",children:"VWAP"})]})}),h.jsx(le,{label:"Période",children:h.jsx("input",{type:"number",min:"1",value:e.config.period||"",onChange:n=>t({...e.config,period:n.target.value})})})]})}function BW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Source",children:h.jsxs("select",{value:e.config.source||"close",onChange:n=>t({...e.config,source:n.target.value}),children:[h.jsx("option",{value:"close",children:"Clôture"}),h.jsx("option",{value:"open",children:"Ouverture"}),h.jsx("option",{value:"high",children:"Haut"}),h.jsx("option",{value:"low",children:"Bas"})]})}),h.jsx(le,{label:"Période rapide",children:h.jsx("input",{type:"number",min:"1",value:e.config.fastPeriod||"",onChange:n=>t({...e.config,fastPeriod:n.target.value})})}),h.jsx(le,{label:"Période lente",children:h.jsx("input",{type:"number",min:"1",value:e.config.slowPeriod||"",onChange:n=>t({...e.config,slowPeriod:n.target.value})})}),h.jsx(le,{label:"Période signal",children:h.jsx("input",{type:"number",min:"1",value:e.config.signalPeriod||"",onChange:n=>t({...e.config,signalPeriod:n.target.value})})})]})}function FW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Source",children:h.jsxs("select",{value:e.config.source||"close",onChange:n=>t({...e.config,source:n.target.value}),children:[h.jsx("option",{value:"close",children:"Clôture"}),h.jsx("option",{value:"open",children:"Ouverture"}),h.jsx("option",{value:"high",children:"Haut"}),h.jsx("option",{value:"low",children:"Bas"})]})}),h.jsx(le,{label:"Période",children:h.jsx("input",{type:"number",min:"1",value:e.config.period||"",onChange:n=>t({...e.config,period:n.target.value})})}),h.jsx(le,{label:"Déviation",children:h.jsx("input",{type:"number",step:"0.1",min:"0",value:e.config.deviation||"",onChange:n=>t({...e.config,deviation:n.target.value})})})]})}function UW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Source",children:h.jsxs("select",{value:e.config.source||"hlc3",onChange:n=>t({...e.config,source:n.target.value}),children:[h.jsx("option",{value:"hlc3",children:"HLC3"}),h.jsx("option",{value:"close",children:"Clôture"}),h.jsx("option",{value:"high",children:"Haut"}),h.jsx("option",{value:"low",children:"Bas"})]})}),h.jsx(le,{label:"Période",children:h.jsx("input",{type:"number",min:"1",value:e.config.period||"",onChange:n=>t({...e.config,period:n.target.value})})}),h.jsx(le,{label:"Lissage",children:h.jsx("input",{type:"number",min:"1",value:e.config.smoothing||"",onChange:n=>t({...e.config,smoothing:n.target.value})})})]})}function qW({node:e,onChange:t}){return h.jsx(le,{label:"Mode",children:h.jsxs("select",{value:e.config.mode||"all",onChange:n=>t({...e.config,mode:n.target.value}),children:[h.jsx("option",{value:"all",children:"Toutes les conditions"}),h.jsx("option",{value:"any",children:"Au moins une condition"})]})})}function zW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Direction du croisement",children:h.jsxs("select",{value:e.config.direction||"above",onChange:n=>t({...e.config,direction:n.target.value}),children:[h.jsx("option",{value:"above",children:"Croise au-dessus"}),h.jsx("option",{value:"below",children:"Croise sous"})]})}),h.jsx(le,{label:"Fenêtre d'observation",children:h.jsx("input",{type:"number",min:"1",value:e.config.lookback||"",onChange:n=>t({...e.config,lookback:n.target.value})})})]})}function KW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Opérateur",children:h.jsxs("select",{value:e.config.operator||"gt",onChange:n=>t({...e.config,operator:n.target.value}),children:[h.jsx("option",{value:"gt",children:"Supérieur à"}),h.jsx("option",{value:"lt",children:"Inférieur à"}),h.jsx("option",{value:"gte",children:"Supérieur ou égal"}),h.jsx("option",{value:"lte",children:"Inférieur ou égal"}),h.jsx("option",{value:"eq",children:"Égal"}),h.jsx("option",{value:"neq",children:"Différent"})]})}),h.jsx(le,{label:"Seuil",children:h.jsx("input",{type:"number",min:"0",value:e.config.value||"",onChange:n=>t({...e.config,value:n.target.value})})}),h.jsx(le,{label:"Intervalle",children:h.jsx("input",{type:"text",value:e.config.timeframe||"",onChange:n=>t({...e.config,timeframe:n.target.value})})})]})}function WW(){return h.jsx("p",{className:"text text--muted",children:"Ce bloc inverse le résultat de son enfant direct."})}function HW(){return h.jsx("p",{className:"text text--muted",children:"Utilisez ce regroupement pour prioriser l'évaluation des sous-conditions."})}function VW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Action",children:h.jsxs("select",{value:e.config.action||"buy",onChange:n=>t({...e.config,action:n.target.value}),children:[h.jsx("option",{value:"buy",children:"Achat"}),h.jsx("option",{value:"sell",children:"Vente"}),h.jsx("option",{value:"rebalance",children:"Rééquilibrage"}),h.jsx("option",{value:"alert",children:"Envoyer une alerte"})]})}),h.jsx(le,{label:"Taille",children:h.jsx("input",{type:"number",step:"0.1",value:e.config.size||"",onChange:n=>t({...e.config,size:n.target.value})})})]})}function GW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Type de cible",children:h.jsxs("select",{value:e.config.mode||"percent",onChange:n=>t({...e.config,mode:n.target.value}),children:[h.jsx("option",{value:"percent",children:"Pourcentage"}),h.jsx("option",{value:"price",children:"Prix"})]})}),h.jsx(le,{label:"Valeur",children:h.jsx("input",{type:"number",step:"0.1",value:e.config.value||"",onChange:n=>t({...e.config,value:n.target.value})})}),h.jsx(le,{label:"Part de la position",children:h.jsxs("select",{value:e.config.size||"full",onChange:n=>t({...e.config,size:n.target.value}),children:[h.jsx("option",{value:"full",children:"100 %"}),h.jsx("option",{value:"half",children:"50 %"}),h.jsx("option",{value:"custom",children:"Personnalisé"})]})}),e.config.size==="custom"?h.jsx(le,{label:"Taille personnalisée",children:h.jsx("input",{type:"number",step:"0.1",value:e.config.customSize||"",onChange:n=>t({...e.config,customSize:n.target.value})})}):null]})}function YW({node:e,onChange:t}){const n=r=>{t({...e.config,trailing:r.target.checked})};return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Type de seuil",children:h.jsxs("select",{value:e.config.mode||"percent",onChange:r=>t({...e.config,mode:r.target.value}),children:[h.jsx("option",{value:"percent",children:"Pourcentage"}),h.jsx("option",{value:"price",children:"Prix"})]})}),h.jsx(le,{label:"Valeur",children:h.jsx("input",{type:"number",step:"0.1",value:e.config.value||"",onChange:r=>t({...e.config,value:r.target.value})})}),h.jsxs("label",{className:"designer-field designer-field--inline",children:[h.jsx("input",{type:"checkbox",checked:!!e.config.trailing,onChange:n}),h.jsx("span",{className:"designer-field__label",children:"Activer le trailing stop"})]})]})}function XW({node:e,onChange:t}){return h.jsx(le,{label:"Cible",children:h.jsxs("select",{value:e.config.side||"all",onChange:n=>t({...e.config,side:n.target.value}),children:[h.jsx("option",{value:"all",children:"Tout fermer"}),h.jsx("option",{value:"long",children:"Positions longues"}),h.jsx("option",{value:"short",children:"Positions courtes"})]})})}function JW({node:e,onChange:t}){return h.jsxs("div",{className:"designer-field-grid",children:[h.jsx(le,{label:"Canal",children:h.jsxs("select",{value:e.config.channel||"email",onChange:n=>t({...e.config,channel:n.target.value}),children:[h.jsx("option",{value:"email",children:"E-mail"}),h.jsx("option",{value:"sms",children:"SMS"}),h.jsx("option",{value:"webhook",children:"Webhook"})]})}),h.jsx(le,{label:"Message",children:h.jsx("textarea",{value:e.config.message||"",onChange:n=>t({...e.config,message:n.target.value})})})]})}function QW({node:e,onChange:t}){return h.jsx(le,{label:"Délai (secondes)",children:h.jsx("input",{type:"number",min:"0",value:e.config.seconds||"",onChange:n=>t({...e.config,seconds:n.target.value})})})}function ZW(e,t){switch(e.type){case"condition":return h.jsx(LW,{node:e,onChange:t});case"market_cross":return h.jsx(zW,{node:e,onChange:t});case"market_volume":return h.jsx(KW,{node:e,onChange:t});case"indicator":return h.jsx(RW,{node:e,onChange:t});case"indicator_macd":return h.jsx(BW,{node:e,onChange:t});case"indicator_bollinger":return h.jsx(FW,{node:e,onChange:t});case"indicator_atr":return h.jsx(UW,{node:e,onChange:t});case"logic":return h.jsx(qW,{node:e,onChange:t});case"negation":return h.jsx(WW,{node:e,onChange:t});case"group":return h.jsx(HW,{node:e,onChange:t});case"action":return h.jsx(VW,{node:e,onChange:t});case"take_profit":return h.jsx(GW,{node:e,onChange:t});case"stop_loss":return h.jsx(YW,{node:e,onChange:t});case"close_position":return h.jsx(XW,{node:e,onChange:t});case"alert":return h.jsx(JW,{node:e,onChange:t});case"delay":return h.jsx(QW,{node:e,onChange:t});default:return null}}function y0({node:e,section:t,layout:n,selection:r,clipboardAvailable:i,onDrop:a,onConfigChange:o,onRemove:s,onSelect:l,onCopy:c,onPaste:f,onDuplicate:u,depth:d=0}){const p=He[e.type]||{accepts:[]},v=Array.isArray(p.accepts)&&p.accepts.length>0,m=(n==null?void 0:n[e.id])||{},g=(r==null?void 0:r.section)===t&&(r==null?void 0:r.nodeId)===e.id,w=T=>{T.preventDefault(),T.stopPropagation();const N=T.dataTransfer.getData(sd);N&&a({section:t,targetId:e.id,type:N})},b=T=>{T.preventDefault(),T.stopPropagation(),T.dataTransfer.dropEffect="copy"},_=T=>{o({section:t,nodeId:e.id,config:T})},S=()=>{s({section:t,nodeId:e.id})},y=T=>{T.stopPropagation(),l==null||l({section:t,nodeId:e.id})},x=T=>{T.preventDefault(),T.stopPropagation(),c==null||c({section:t,nodeId:e.id})},O=T=>{T.stopPropagation(),c==null||c({section:t,nodeId:e.id})},j=T=>{T.stopPropagation(),f==null||f({section:t,nodeId:e.id})},$=T=>{T.stopPropagation(),u==null||u({section:t,nodeId:e.id})};return h.jsxs("article",{className:`designer-block${g?" designer-block--selected":""}`,"data-node-id":e.id,"data-node-type":e.type,"data-depth":d,"data-layout-column":m.column??d,"data-layout-row":m.row??0,tabIndex:0,onClick:y,onFocus:y,onContextMenu:x,style:{"--layout-column":m.column??d,"--layout-row":m.row??0},children:[h.jsxs("header",{className:"designer-block__header",children:[h.jsx("span",{className:"designer-block__title heading heading--sm",children:p.label||e.type}),h.jsxs("div",{className:"designer-block__actions","aria-label":"Actions du bloc",children:[h.jsx("button",{type:"button",className:"button button--ghost",onClick:O,"aria-label":"Copier le bloc",children:"Copier"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:$,"aria-label":"Dupliquer le bloc",children:"Dupliquer"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:j,"aria-label":"Coller un bloc enfant",disabled:!i,children:"Coller"}),h.jsx("button",{type:"button",className:"button button--ghost designer-block__remove",onClick:S,"aria-label":`Supprimer le bloc ${p.label||e.type}`,children:"Retirer"})]})]}),h.jsx("div",{className:"designer-block__body",children:ZW(e,_)}),v?h.jsxs("div",{className:"designer-block__children",children:[(e.children||[]).map(T=>h.jsx(y0,{node:T,section:t,layout:n,selection:r,clipboardAvailable:i,onDrop:a,onConfigChange:o,onRemove:s,onSelect:l,onCopy:c,onPaste:f,onDuplicate:u,depth:d+1},T.id)),h.jsx("div",{className:"designer-dropzone","data-testid":`designer-dropzone-${e.type}`,"data-node-type":e.type,onDragOver:b,onDrop:w,children:"Déposer un bloc compatible ici"})]}):null]})}function jg({title:e,description:t,emptyMessage:n,nodes:r,section:i,layout:a,selection:o,clipboardAvailable:s,onDrop:l,onConfigChange:c,onRemove:f,onSelect:u,onSectionFocus:d,onCopy:p,onPaste:v,onDuplicate:m,onClearSelection:g,dropTestId:w}){const b=$=>{$.preventDefault();const T=$.dataTransfer.getData(sd);T&&l({section:i,targetId:null,type:T})},_=$=>{$.preventDefault(),$.dataTransfer.dropEffect="copy"},S=(o==null?void 0:o.section)===i&&!(o!=null&&o.nodeId),y=Math.max(0,...Object.values(a||{}).map($=>typeof $.column=="number"?$.column:0)),x=$=>{$.target===$.currentTarget&&(d==null||d(i))},O=()=>{d==null||d(i)},j=$=>{$.currentTarget.contains($.relatedTarget)||g==null||g()};return h.jsxs("section",{className:"designer-panel designer-panel--canvas","aria-labelledby":`${w}-title`,children:[h.jsxs("div",{className:"designer-panel__header",children:[h.jsx("h2",{id:`${w}-title`,className:"heading heading--md",children:e}),h.jsx("p",{className:"text text--muted",children:t})]}),h.jsx("div",{className:`designer-canvas${S?" designer-canvas--active":""}`,onDragOver:_,onDrop:b,onClick:x,onFocus:O,onBlur:j,"data-testid":w,tabIndex:0,"aria-selected":S,style:{"--layout-columns":y+1},children:r.length?r.map($=>h.jsx(y0,{node:$,section:i,layout:a,selection:o,clipboardAvailable:s,onDrop:l,onConfigChange:c,onRemove:f,onSelect:u,onCopy:p,onPaste:v,onDuplicate:m},$.id)):h.jsx("p",{className:"designer-canvas__empty text text--muted",children:n})})]})}function eH({conditions:e,actions:t,layout:n,selection:r,clipboardAvailable:i,onDrop:a,onConfigChange:o,onRemove:s,onSelect:l,onSectionFocus:c,onCopy:f,onPaste:u,onDuplicate:d,onClearSelection:p}){return h.jsxs("div",{className:"designer-canvas-grid",onClick:v=>{v.target===v.currentTarget&&(p==null||p())},children:[h.jsx(jg,{title:"Conditions",description:"Construisez l'arbre logique déclenchant la stratégie.",emptyMessage:"Glissez une condition, un opérateur logique ou un indicateur pour démarrer.",nodes:e,section:"conditions",layout:n,selection:r,clipboardAvailable:i,onDrop:a,onConfigChange:o,onRemove:s,onSelect:l,onSectionFocus:c,onCopy:f,onPaste:u,onDuplicate:d,onClearSelection:p,dropTestId:"designer-conditions-dropzone"}),h.jsx(jg,{title:"Actions",description:"Définissez la liste des actions à exécuter lorsque les conditions sont satisfaites.",emptyMessage:"Ajoutez une action d'exécution ou une temporisation.",nodes:t,section:"actions",layout:n,selection:r,clipboardAvailable:i,onDrop:a,onConfigChange:o,onRemove:s,onSelect:l,onSectionFocus:c,onCopy:f,onPaste:u,onDuplicate:d,onClearSelection:p,dropTestId:"designer-actions-dropzone"})]})}const ld=Symbol.for("yaml.alias"),qu=Symbol.for("yaml.document"),hn=Symbol.for("yaml.map"),v0=Symbol.for("yaml.pair"),Ft=Symbol.for("yaml.scalar"),ai=Symbol.for("yaml.seq"),bt=Symbol.for("yaml.node.type"),xn=e=>!!e&&typeof e=="object"&&e[bt]===ld,Yn=e=>!!e&&typeof e=="object"&&e[bt]===qu,oi=e=>!!e&&typeof e=="object"&&e[bt]===hn,$e=e=>!!e&&typeof e=="object"&&e[bt]===v0,xe=e=>!!e&&typeof e=="object"&&e[bt]===Ft,si=e=>!!e&&typeof e=="object"&&e[bt]===ai;function Pe(e){if(e&&typeof e=="object")switch(e[bt]){case hn:case ai:return!0}return!1}function Te(e){if(e&&typeof e=="object")switch(e[bt]){case ld:case hn:case Ft:case ai:return!0}return!1}const b0=e=>(xe(e)||Pe(e))&&!!e.anchor,nt=Symbol("break visit"),x0=Symbol("skip children"),Lt=Symbol("remove node");function Xn(e,t){const n=w0(t);Yn(e)?cr(null,e.contents,n,Object.freeze([e]))===Lt&&(e.contents=null):cr(null,e,n,Object.freeze([]))}Xn.BREAK=nt;Xn.SKIP=x0;Xn.REMOVE=Lt;function cr(e,t,n,r){const i=_0(e,t,n,r);if(Te(i)||$e(i))return S0(e,r,i),cr(e,i,n,r);if(typeof i!="symbol"){if(Pe(t)){r=Object.freeze(r.concat(t));for(let a=0;a<t.items.length;++a){const o=cr(a,t.items[a],n,r);if(typeof o=="number")a=o-1;else{if(o===nt)return nt;o===Lt&&(t.items.splice(a,1),a-=1)}}}else if($e(t)){r=Object.freeze(r.concat(t));const a=cr("key",t.key,n,r);if(a===nt)return nt;a===Lt&&(t.key=null);const o=cr("value",t.value,n,r);if(o===nt)return nt;o===Lt&&(t.value=null)}}return i}async function al(e,t){const n=w0(t);Yn(e)?await ur(null,e.contents,n,Object.freeze([e]))===Lt&&(e.contents=null):await ur(null,e,n,Object.freeze([]))}al.BREAK=nt;al.SKIP=x0;al.REMOVE=Lt;async function ur(e,t,n,r){const i=await _0(e,t,n,r);if(Te(i)||$e(i))return S0(e,r,i),ur(e,i,n,r);if(typeof i!="symbol"){if(Pe(t)){r=Object.freeze(r.concat(t));for(let a=0;a<t.items.length;++a){const o=await ur(a,t.items[a],n,r);if(typeof o=="number")a=o-1;else{if(o===nt)return nt;o===Lt&&(t.items.splice(a,1),a-=1)}}}else if($e(t)){r=Object.freeze(r.concat(t));const a=await ur("key",t.key,n,r);if(a===nt)return nt;a===Lt&&(t.key=null);const o=await ur("value",t.value,n,r);if(o===nt)return nt;o===Lt&&(t.value=null)}}return i}function w0(e){return typeof e=="object"&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function _0(e,t,n,r){var i,a,o,s,l;if(typeof n=="function")return n(e,t,r);if(oi(t))return(i=n.Map)==null?void 0:i.call(n,e,t,r);if(si(t))return(a=n.Seq)==null?void 0:a.call(n,e,t,r);if($e(t))return(o=n.Pair)==null?void 0:o.call(n,e,t,r);if(xe(t))return(s=n.Scalar)==null?void 0:s.call(n,e,t,r);if(xn(t))return(l=n.Alias)==null?void 0:l.call(n,e,t,r)}function S0(e,t,n){const r=t[t.length-1];if(Pe(r))r.items[e]=n;else if($e(r))e==="key"?r.key=n:r.value=n;else if(Yn(r))r.contents=n;else{const i=xn(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const tH={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},nH=e=>e.replace(/[!,[\]{}]/g,t=>tH[t]);class Qe{constructor(t,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Qe.defaultYaml,t),this.tags=Object.assign({},Qe.defaultTags,n)}clone(){const t=new Qe(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new Qe(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Qe.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Qe.defaultTags);break}return t}add(t,n){this.atNextDocument&&(this.yaml={explicit:Qe.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Qe.defaultTags),this.atNextDocument=!1);const r=t.trim().split(/[ \t]+/),i=r.shift();switch(i){case"%TAG":{if(r.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[a,o]=r;return this.tags[a]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[a]=r;if(a==="1.1"||a==="1.2")return this.yaml.version=a,!0;{const o=/^\d+\.\d+$/.test(a);return n(6,`Unsupported YAML version ${a}`,o),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(t,n){if(t==="!")return"!";if(t[0]!=="!")return n(`Not a valid tag: ${t}`),null;if(t[1]==="<"){const o=t.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,r,i]=t.match(/^(.*!)([^!]*)$/s);i||n(`The ${t} tag has no suffix`);const a=this.tags[r];if(a)try{return a+decodeURIComponent(i)}catch(o){return n(String(o)),null}return r==="!"?t:(n(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[n,r]of Object.entries(this.tags))if(t.startsWith(r))return n+nH(t.substring(r.length));return t[0]==="!"?t:`!<${t}>`}toString(t){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let i;if(t&&r.length>0&&Te(t.contents)){const a={};Xn(t.contents,(o,s)=>{Te(s)&&s.tag&&(a[s.tag]=!0)}),i=Object.keys(a)}else i=[];for(const[a,o]of r)a==="!!"&&o==="tag:yaml.org,2002:"||(!t||i.some(s=>s.startsWith(o)))&&n.push(`%TAG ${a} ${o}`);return n.join(`
`)}}Qe.defaultYaml={explicit:!1,version:"1.2"};Qe.defaultTags={"!!":"tag:yaml.org,2002:"};function O0(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw new Error(n)}return!0}function A0(e){const t=new Set;return Xn(e,{Value(n,r){r.anchor&&t.add(r.anchor)}}),t}function j0(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}function rH(e,t){const n=[],r=new Map;let i=null;return{onAnchor:a=>{n.push(a),i??(i=A0(e));const o=j0(t,i);return i.add(o),o},setAnchors:()=>{for(const a of n){const o=r.get(a);if(typeof o=="object"&&o.anchor&&(xe(o.node)||Pe(o.node)))o.node.anchor=o.anchor;else{const s=new Error("Failed to resolve repeated object (this should not happen)");throw s.source=a,s}}},sourceObjects:r}}function fr(e,t,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,a=r.length;i<a;++i){const o=r[i],s=fr(e,r,String(i),o);s===void 0?delete r[i]:s!==o&&(r[i]=s)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const a=r.get(i),o=fr(e,r,i,a);o===void 0?r.delete(i):o!==a&&r.set(i,o)}else if(r instanceof Set)for(const i of Array.from(r)){const a=fr(e,r,i,i);a===void 0?r.delete(i):a!==i&&(r.delete(i),r.add(a))}else for(const[i,a]of Object.entries(r)){const o=fr(e,r,i,a);o===void 0?delete r[i]:o!==a&&(r[i]=o)}return e.call(t,n,r)}function yt(e,t,n){if(Array.isArray(e))return e.map((r,i)=>yt(r,String(i),n));if(e&&typeof e.toJSON=="function"){if(!n||!b0(e))return e.toJSON(t,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(e,r),n.onCreate=a=>{r.res=a,delete n.onCreate};const i=e.toJSON(t,n);return n.onCreate&&n.onCreate(i),i}return typeof e=="bigint"&&!(n!=null&&n.keep)?Number(e):e}class cd{constructor(t){Object.defineProperty(this,bt,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:a}={}){if(!Yn(t))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:t,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},s=yt(this,"",o);if(typeof i=="function")for(const{count:l,res:c}of o.anchors.values())i(c,l);return typeof a=="function"?fr(a,{"":s},"",s):s}}class ol extends cd{constructor(t){super(ld),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,n){let r;n!=null&&n.aliasResolveCache?r=n.aliasResolveCache:(r=[],Xn(t,{Node:(a,o)=>{(xn(o)||b0(o))&&r.push(o)}}),n&&(n.aliasResolveCache=r));let i;for(const a of r){if(a===this)break;a.anchor===this.source&&(i=a)}return i}toJSON(t,n){if(!n)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:a}=n,o=this.resolve(i,n);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let s=r.get(o);if(s||(yt(o,null,n),s=r.get(o)),!s||s.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(a>=0&&(s.count+=1,s.aliasCount===0&&(s.aliasCount=so(i,o,r)),s.count*s.aliasCount>a)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return s.res}toString(t,n,r){const i=`*${this.source}`;if(t){if(O0(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const a=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(a)}if(t.implicitKey)return`${i} `}return i}}function so(e,t,n){if(xn(t)){const r=t.resolve(e),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(Pe(t)){let r=0;for(const i of t.items){const a=so(e,i,n);a>r&&(r=a)}return r}else if($e(t)){const r=so(e,t.key,n),i=so(e,t.value,n);return Math.max(r,i)}return 1}const $0=e=>!e||typeof e!="function"&&typeof e!="object";class ie extends cd{constructor(t){super(Ft),this.value=t}toJSON(t,n){return n!=null&&n.keep?this.value:yt(this.value,t,n)}toString(){return String(this.value)}}ie.BLOCK_FOLDED="BLOCK_FOLDED";ie.BLOCK_LITERAL="BLOCK_LITERAL";ie.PLAIN="PLAIN";ie.QUOTE_DOUBLE="QUOTE_DOUBLE";ie.QUOTE_SINGLE="QUOTE_SINGLE";const iH="tag:yaml.org,2002:";function aH(e,t,n){if(t){const r=n.filter(a=>a.tag===t),i=r.find(a=>!a.format)??r[0];if(!i)throw new Error(`Tag ${t} not found`);return i}return n.find(r=>{var i;return((i=r.identify)==null?void 0:i.call(r,e))&&!r.format})}function da(e,t,n){var u,d,p;if(Yn(e)&&(e=e.contents),Te(e))return e;if($e(e)){const v=(d=(u=n.schema[hn]).createNode)==null?void 0:d.call(u,n.schema,null,n);return v.items.push(e),v}(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt<"u"&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:a,schema:o,sourceObjects:s}=n;let l;if(r&&e&&typeof e=="object"){if(l=s.get(e),l)return l.anchor??(l.anchor=i(e)),new ol(l.anchor);l={anchor:null,node:null},s.set(e,l)}t!=null&&t.startsWith("!!")&&(t=iH+t.slice(2));let c=aH(e,t,o.tags);if(!c){if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),!e||typeof e!="object"){const v=new ie(e);return l&&(l.node=v),v}c=e instanceof Map?o[hn]:Symbol.iterator in Object(e)?o[ai]:o[hn]}a&&(a(c),delete n.onTagObj);const f=c!=null&&c.createNode?c.createNode(n.schema,e,n):typeof((p=c==null?void 0:c.nodeClass)==null?void 0:p.from)=="function"?c.nodeClass.from(n.schema,e,n):new ie(e);return t?f.tag=t:c.default||(f.tag=c.tag),l&&(l.node=f),f}function hs(e,t,n){let r=n;for(let i=t.length-1;i>=0;--i){const a=t[i];if(typeof a=="number"&&Number.isInteger(a)&&a>=0){const o=[];o[a]=r,r=o}else r=new Map([[a,r]])}return da(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const Si=e=>e==null||typeof e=="object"&&!!e[Symbol.iterator]().next().done;class P0 extends cd{constructor(t,n){super(t),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(t){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(n.schema=t),n.items=n.items.map(r=>Te(r)||$e(r)?r.clone(t):r),this.range&&(n.range=this.range.slice()),n}addIn(t,n){if(Si(t))this.add(n);else{const[r,...i]=t,a=this.get(r,!0);if(Pe(a))a.addIn(i,n);else if(a===void 0&&this.schema)this.set(r,hs(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(t){const[n,...r]=t;if(r.length===0)return this.delete(n);const i=this.get(n,!0);if(Pe(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}getIn(t,n){const[r,...i]=t,a=this.get(r,!0);return i.length===0?!n&&xe(a)?a.value:a:Pe(a)?a.getIn(i,n):void 0}hasAllNullValues(t){return this.items.every(n=>{if(!$e(n))return!1;const r=n.value;return r==null||t&&xe(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(t){const[n,...r]=t;if(r.length===0)return this.has(n);const i=this.get(n,!0);return Pe(i)?i.hasIn(r):!1}setIn(t,n){const[r,...i]=t;if(i.length===0)this.set(r,n);else{const a=this.get(r,!0);if(Pe(a))a.setIn(i,n);else if(a===void 0&&this.schema)this.set(r,hs(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}const oH=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function Ht(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const Nn=(e,t,n)=>e.endsWith(`
`)?Ht(n,t):n.includes(`
`)?`
`+Ht(n,t):(e.endsWith(" ")?"":" ")+n,T0="flow",zu="block",lo="quoted";function sl(e,t,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:a=20,onFold:o,onOverflow:s}={}){if(!i||i<0)return e;i<a&&(a=0);const l=Math.max(1+a,1+i-t.length);if(e.length<=l)return e;const c=[],f={};let u=i-t.length;typeof r=="number"&&(r>i-Math.max(2,a)?c.push(0):u=i-r);let d,p,v=!1,m=-1,g=-1,w=-1;n===zu&&(m=$g(e,m,t.length),m!==-1&&(u=m+l));for(let _;_=e[m+=1];){if(n===lo&&_==="\\"){switch(g=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}w=m}if(_===`
`)n===zu&&(m=$g(e,m,t.length)),u=m+t.length+l,d=void 0;else{if(_===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){const S=e[m+1];S&&S!==" "&&S!==`
`&&S!=="	"&&(d=m)}if(m>=u)if(d)c.push(d),u=d+l,d=void 0;else if(n===lo){for(;p===" "||p==="	";)p=_,_=e[m+=1],v=!0;const S=m>w+1?m-2:g-1;if(f[S])return e;c.push(S),f[S]=!0,u=S+l,d=void 0}else v=!0}p=_}if(v&&s&&s(),c.length===0)return e;o&&o();let b=e.slice(0,c[0]);for(let _=0;_<c.length;++_){const S=c[_],y=c[_+1]||e.length;S===0?b=`
${t}${e.slice(0,y)}`:(n===lo&&f[S]&&(b+=`${e[S]}\\`),b+=`
${t}${e.slice(S+1,y)}`)}return b}function $g(e,t,n){let r=t,i=t+1,a=e[i];for(;a===" "||a==="	";)if(t<i+n)a=e[++t];else{do a=e[++t];while(a&&a!==`
`);r=t,i=t+1,a=e[i]}return r}const ll=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),cl=e=>/^(%|---|\.\.\.)/m.test(e);function sH(e,t,n){if(!t||t<0)return!1;const r=t-n,i=e.length;if(i<=r)return!1;for(let a=0,o=0;a<i;++a)if(e[a]===`
`){if(a-o>r)return!0;if(o=a+1,i-o<=r)return!1}return!0}function Ti(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,i=t.options.doubleQuotedMinMultiLineLength,a=t.indent||(cl(e)?"  ":"");let o="",s=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(s,l)+"\\ ",l+=1,s=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{o+=n.slice(s,l);const f=n.substr(l+2,4);switch(f){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:f.substr(0,2)==="00"?o+="\\x"+f.substr(2):o+=n.substr(l,6)}l+=5,s=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(o+=n.slice(s,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=a,n[l+2]===" "&&(o+="\\"),l+=1,s=l+1}break;default:l+=1}return o=s?o+n.slice(s):n,r?o:sl(o,a,lo,ll(t,!1))}function Ku(e,t){if(t.options.singleQuote===!1||t.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return Ti(e,t);const n=t.indent||(cl(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return t.implicitKey?r:sl(r,n,T0,ll(t,!1))}function dr(e,t){const{singleQuote:n}=t.options;let r;if(n===!1)r=Ti;else{const i=e.includes('"'),a=e.includes("'");i&&!a?r=Ku:a&&!i?r=Ti:r=n?Ku:Ti}return r(e,t)}let Wu;try{Wu=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Wu=/\n+(?!\n|$)/g}function co({comment:e,type:t,value:n},r,i,a){const{blockQuote:o,commentString:s,lineWidth:l}=r.options;if(!o||/\n[\t ]+$/.test(n))return dr(n,r);const c=r.indent||(r.forceBlockIndent||cl(n)?"  ":""),f=o==="literal"?!0:o==="folded"||t===ie.BLOCK_FOLDED?!1:t===ie.BLOCK_LITERAL?!0:!sH(n,l,c.length);if(!n)return f?`|
`:`>
`;let u,d;for(d=n.length;d>0;--d){const y=n[d-1];if(y!==`
`&&y!=="	"&&y!==" ")break}let p=n.substring(d);const v=p.indexOf(`
`);v===-1?u="-":n===p||v!==p.length-1?(u="+",a&&a()):u="",p&&(n=n.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(Wu,`$&${c}`));let m=!1,g,w=-1;for(g=0;g<n.length;++g){const y=n[g];if(y===" ")m=!0;else if(y===`
`)w=g;else break}let b=n.substring(0,w<g?w+1:g);b&&(n=n.substring(b.length),b=b.replace(/\n+/g,`$&${c}`));let S=(m?c?"2":"1":"")+u;if(e&&(S+=" "+s(e.replace(/ ?[\r\n]+/g," ")),i&&i()),!f){const y=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let x=!1;const O=ll(r,!0);o!=="folded"&&t!==ie.BLOCK_FOLDED&&(O.onOverflow=()=>{x=!0});const j=sl(`${b}${y}${p}`,c,zu,O);if(!x)return`>${S}
${c}${j}`}return n=n.replace(/\n+/g,`$&${c}`),`|${S}
${c}${b}${n}${p}`}function lH(e,t,n,r){const{type:i,value:a}=e,{actualString:o,implicitKey:s,indent:l,indentStep:c,inFlow:f}=t;if(s&&a.includes(`
`)||f&&/[[\]{},]/.test(a))return dr(a,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return s||f||!a.includes(`
`)?dr(a,t):co(e,t,n,r);if(!s&&!f&&i!==ie.PLAIN&&a.includes(`
`))return co(e,t,n,r);if(cl(a)){if(l==="")return t.forceBlockIndent=!0,co(e,t,n,r);if(s&&l===c)return dr(a,t)}const u=a.replace(/\n+/g,`$&
${l}`);if(o){const d=m=>{var g;return m.default&&m.tag!=="tag:yaml.org,2002:str"&&((g=m.test)==null?void 0:g.test(u))},{compat:p,tags:v}=t.doc.schema;if(v.some(d)||p!=null&&p.some(d))return dr(a,t)}return s?u:sl(u,l,T0,ll(t,!1))}function Pa(e,t,n,r){const{implicitKey:i,inFlow:a}=t,o=typeof e.value=="string"?e:Object.assign({},e,{value:String(e.value)});let{type:s}=e;s!==ie.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(s=ie.QUOTE_DOUBLE);const l=f=>{switch(f){case ie.BLOCK_FOLDED:case ie.BLOCK_LITERAL:return i||a?dr(o.value,t):co(o,t,n,r);case ie.QUOTE_DOUBLE:return Ti(o.value,t);case ie.QUOTE_SINGLE:return Ku(o.value,t);case ie.PLAIN:return lH(o,t,n,r);default:return null}};let c=l(s);if(c===null){const{defaultKeyType:f,defaultStringType:u}=t.options,d=i&&f||u;if(c=l(d),c===null)throw new Error(`Unsupported default string type ${d}`)}return c}function E0(e,t){const n=Object.assign({blockQuote:!0,commentString:oH,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function cH(e,t){var i;if(t.tag){const a=e.filter(o=>o.tag===t.tag);if(a.length>0)return a.find(o=>o.format===t.format)??a[0]}let n,r;if(xe(t)){r=t.value;let a=e.filter(o=>{var s;return(s=o.identify)==null?void 0:s.call(o,r)});if(a.length>1){const o=a.filter(s=>s.test);o.length>0&&(a=o)}n=a.find(o=>o.format===t.format)??a.find(o=>!o.format)}else r=t,n=e.find(a=>a.nodeClass&&r instanceof a.nodeClass);if(!n){const a=((i=r==null?void 0:r.constructor)==null?void 0:i.name)??(r===null?"null":typeof r);throw new Error(`Tag not resolved for ${a} value`)}return n}function uH(e,t,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],a=(xe(e)||Pe(e))&&e.anchor;a&&O0(a)&&(n.add(a),i.push(`&${a}`));const o=e.tag??(t.default?null:t.tag);return o&&i.push(r.directives.tagString(o)),i.join(" ")}function qr(e,t,n,r){var l;if($e(e))return e.toString(t,n,r);if(xn(e)){if(t.doc.directives)return e.toString(t);if((l=t.resolvedAliases)!=null&&l.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let i;const a=Te(e)?e:t.doc.createNode(e,{onTagObj:c=>i=c});i??(i=cH(t.doc.schema.tags,a));const o=uH(a,i,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);const s=typeof i.stringify=="function"?i.stringify(a,t,n,r):xe(a)?Pa(a,t,n,r):a.toString(t,n,r);return o?xe(a)||s[0]==="{"||s[0]==="["?`${o} ${s}`:`${o}
${t.indent}${s}`:s}function fH({key:e,value:t},n,r,i){const{allNullValues:a,doc:o,indent:s,indentStep:l,options:{commentString:c,indentSeq:f,simpleKeys:u}}=n;let d=Te(e)&&e.comment||null;if(u){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(Pe(e)||!Te(e)&&typeof e=="object"){const O="With simple keys, collection cannot be used as a key value";throw new Error(O)}}let p=!u&&(!e||d&&t==null&&!n.inFlow||Pe(e)||(xe(e)?e.type===ie.BLOCK_FOLDED||e.type===ie.BLOCK_LITERAL:typeof e=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!p&&(u||!a),indent:s+l});let v=!1,m=!1,g=qr(e,n,()=>v=!0,()=>m=!0);if(!p&&!n.inFlow&&g.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(n.inFlow){if(a||t==null)return v&&r&&r(),g===""?"?":p?`? ${g}`:g}else if(a&&!u||t==null&&p)return g=`? ${g}`,d&&!v?g+=Nn(g,n.indent,c(d)):m&&i&&i(),g;v&&(d=null),p?(d&&(g+=Nn(g,n.indent,c(d))),g=`? ${g}
${s}:`):(g=`${g}:`,d&&(g+=Nn(g,n.indent,c(d))));let w,b,_;Te(t)?(w=!!t.spaceBefore,b=t.commentBefore,_=t.comment):(w=!1,b=null,_=null,t&&typeof t=="object"&&(t=o.createNode(t))),n.implicitKey=!1,!p&&!d&&xe(t)&&(n.indentAtStart=g.length+1),m=!1,!f&&l.length>=2&&!n.inFlow&&!p&&si(t)&&!t.flow&&!t.tag&&!t.anchor&&(n.indent=n.indent.substring(2));let S=!1;const y=qr(t,n,()=>S=!0,()=>m=!0);let x=" ";if(d||w||b){if(x=w?`
`:"",b){const O=c(b);x+=`
${Ht(O,n.indent)}`}y===""&&!n.inFlow?x===`
`&&(x=`

`):x+=`
${n.indent}`}else if(!p&&Pe(t)){const O=y[0],j=y.indexOf(`
`),$=j!==-1,T=n.inFlow??t.flow??t.items.length===0;if($||!T){let N=!1;if($&&(O==="&"||O==="!")){let A=y.indexOf(" ");O==="&"&&A!==-1&&A<j&&y[A+1]==="!"&&(A=y.indexOf(" ",A+1)),(A===-1||j<A)&&(N=!0)}N||(x=`
${n.indent}`)}}else(y===""||y[0]===`
`)&&(x="");return g+=x+y,n.inFlow?S&&r&&r():_&&!S?g+=Nn(g,n.indent,c(_)):m&&i&&i(),g}function N0(e,t){(e==="debug"||e==="warn")&&console.warn(t)}const Ga="<<",Xt={identify:e=>e===Ga||typeof e=="symbol"&&e.description===Ga,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new ie(Symbol(Ga)),{addToJSMap:k0}),stringify:()=>Ga},dH=(e,t)=>(Xt.identify(t)||xe(t)&&(!t.type||t.type===ie.PLAIN)&&Xt.identify(t.value))&&(e==null?void 0:e.doc.schema.tags.some(n=>n.tag===Xt.tag&&n.default));function k0(e,t,n){if(n=e&&xn(n)?n.resolve(e.doc):n,si(n))for(const r of n.items)Vl(e,t,r);else if(Array.isArray(n))for(const r of n)Vl(e,t,r);else Vl(e,t,n)}function Vl(e,t,n){const r=e&&xn(n)?n.resolve(e.doc):n;if(!oi(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,e,Map);for(const[a,o]of i)t instanceof Map?t.has(a)||t.set(a,o):t instanceof Set?t.add(a):Object.prototype.hasOwnProperty.call(t,a)||Object.defineProperty(t,a,{value:o,writable:!0,enumerable:!0,configurable:!0});return t}function C0(e,t,{key:n,value:r}){if(Te(n)&&n.addToJSMap)n.addToJSMap(e,t,r);else if(dH(e,n))k0(e,t,r);else{const i=yt(n,"",e);if(t instanceof Map)t.set(i,yt(r,i,e));else if(t instanceof Set)t.add(i);else{const a=hH(n,i,e),o=yt(r,a,e);a in t?Object.defineProperty(t,a,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[a]=o}}return t}function hH(e,t,n){if(t===null)return"";if(typeof t!="object")return String(t);if(Te(e)&&(n!=null&&n.doc)){const r=E0(n.doc,{});r.anchors=new Set;for(const a of n.anchors.keys())r.anchors.add(a.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=e.toString(r);if(!n.mapKeyWarned){let a=JSON.stringify(i);a.length>40&&(a=a.substring(0,36)+'..."'),N0(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${a}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(t)}function ud(e,t,n){const r=da(e,void 0,n),i=da(t,void 0,n);return new Je(r,i)}class Je{constructor(t,n=null){Object.defineProperty(this,bt,{value:v0}),this.key=t,this.value=n}clone(t){let{key:n,value:r}=this;return Te(n)&&(n=n.clone(t)),Te(r)&&(r=r.clone(t)),new Je(n,r)}toJSON(t,n){const r=n!=null&&n.mapAsMap?new Map:{};return C0(n,r,this)}toString(t,n,r){return t!=null&&t.doc?fH(this,t,n,r):JSON.stringify(this)}}function I0(e,t,n){return(t.inFlow??e.flow?mH:pH)(e,t,n)}function pH({comment:e,items:t},n,{blockItemPrefix:r,flowChars:i,itemIndent:a,onChompKeep:o,onComment:s}){const{indent:l,options:{commentString:c}}=n,f=Object.assign({},n,{indent:a,type:null});let u=!1;const d=[];for(let v=0;v<t.length;++v){const m=t[v];let g=null;if(Te(m))!u&&m.spaceBefore&&d.push(""),ps(n,d,m.commentBefore,u),m.comment&&(g=m.comment);else if($e(m)){const b=Te(m.key)?m.key:null;b&&(!u&&b.spaceBefore&&d.push(""),ps(n,d,b.commentBefore,u))}u=!1;let w=qr(m,f,()=>g=null,()=>u=!0);g&&(w+=Nn(w,a,c(g))),u&&g&&(u=!1),d.push(r+w)}let p;if(d.length===0)p=i.start+i.end;else{p=d[0];for(let v=1;v<d.length;++v){const m=d[v];p+=m?`
${l}${m}`:`
`}}return e?(p+=`
`+Ht(c(e),l),s&&s()):u&&o&&o(),p}function mH({items:e},t,{flowChars:n,itemIndent:r}){const{indent:i,indentStep:a,flowCollectionPadding:o,options:{commentString:s}}=t;r+=a;const l=Object.assign({},t,{indent:r,inFlow:!0,type:null});let c=!1,f=0;const u=[];for(let v=0;v<e.length;++v){const m=e[v];let g=null;if(Te(m))m.spaceBefore&&u.push(""),ps(t,u,m.commentBefore,!1),m.comment&&(g=m.comment);else if($e(m)){const b=Te(m.key)?m.key:null;b&&(b.spaceBefore&&u.push(""),ps(t,u,b.commentBefore,!1),b.comment&&(c=!0));const _=Te(m.value)?m.value:null;_?(_.comment&&(g=_.comment),_.commentBefore&&(c=!0)):m.value==null&&(b!=null&&b.comment)&&(g=b.comment)}g&&(c=!0);let w=qr(m,l,()=>g=null);v<e.length-1&&(w+=","),g&&(w+=Nn(w,r,s(g))),!c&&(u.length>f||w.includes(`
`))&&(c=!0),u.push(w),f=u.length}const{start:d,end:p}=n;if(u.length===0)return d+p;if(!c){const v=u.reduce((m,g)=>m+g.length+2,2);c=t.options.lineWidth>0&&v>t.options.lineWidth}if(c){let v=d;for(const m of u)v+=m?`
${a}${i}${m}`:`
`;return`${v}
${i}${p}`}else return`${d}${o}${u.join(" ")}${o}${p}`}function ps({indent:e,options:{commentString:t}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const a=Ht(t(r),e);n.push(a.trimStart())}}function kn(e,t){const n=xe(t)?t.value:t;for(const r of e)if($e(r)&&(r.key===t||r.key===n||xe(r.key)&&r.key.value===n))return r}class ct extends P0{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(hn,t),this.items=[]}static from(t,n,r){const{keepUndefined:i,replacer:a}=r,o=new this(t),s=(l,c)=>{if(typeof a=="function")c=a.call(n,l,c);else if(Array.isArray(a)&&!a.includes(l))return;(c!==void 0||i)&&o.items.push(ud(l,c,r))};if(n instanceof Map)for(const[l,c]of n)s(l,c);else if(n&&typeof n=="object")for(const l of Object.keys(n))s(l,n[l]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}add(t,n){var o;let r;$e(t)?r=t:!t||typeof t!="object"||!("key"in t)?r=new Je(t,t==null?void 0:t.value):r=new Je(t.key,t.value);const i=kn(this.items,r.key),a=(o=this.schema)==null?void 0:o.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);xe(i.value)&&$0(r.value)?i.value.value=r.value:i.value=r.value}else if(a){const s=this.items.findIndex(l=>a(r,l)<0);s===-1?this.items.push(r):this.items.splice(s,0,r)}else this.items.push(r)}delete(t){const n=kn(this.items,t);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(t,n){const r=kn(this.items,t),i=r==null?void 0:r.value;return(!n&&xe(i)?i.value:i)??void 0}has(t){return!!kn(this.items,t)}set(t,n){this.add(new Je(t,n),!0)}toJSON(t,n,r){const i=r?new r:n!=null&&n.mapAsMap?new Map:{};n!=null&&n.onCreate&&n.onCreate(i);for(const a of this.items)C0(n,i,a);return i}toString(t,n,r){if(!t)return JSON.stringify(this);for(const i of this.items)if(!$e(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),I0(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:r,onComment:n})}}const li={collection:"map",default:!0,nodeClass:ct,tag:"tag:yaml.org,2002:map",resolve(e,t){return oi(e)||t("Expected a mapping for this tag"),e},createNode:(e,t,n)=>ct.from(e,t,n)};class pn extends P0{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(ai,t),this.items=[]}add(t){this.items.push(t)}delete(t){const n=Ya(t);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(t,n){const r=Ya(t);if(typeof r!="number")return;const i=this.items[r];return!n&&xe(i)?i.value:i}has(t){const n=Ya(t);return typeof n=="number"&&n<this.items.length}set(t,n){const r=Ya(t);if(typeof r!="number")throw new Error(`Expected a valid index, not ${t}.`);const i=this.items[r];xe(i)&&$0(n)?i.value=n:this.items[r]=n}toJSON(t,n){const r=[];n!=null&&n.onCreate&&n.onCreate(r);let i=0;for(const a of this.items)r.push(yt(a,String(i++),n));return r}toString(t,n,r){return t?I0(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(t,n,r){const{replacer:i}=r,a=new this(t);if(n&&Symbol.iterator in Object(n)){let o=0;for(let s of n){if(typeof i=="function"){const l=n instanceof Set?s:String(o++);s=i.call(n,l,s)}a.items.push(da(s,void 0,r))}}return a}}function Ya(e){let t=xe(e)?e.value:e;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}const ci={collection:"seq",default:!0,nodeClass:pn,tag:"tag:yaml.org,2002:seq",resolve(e,t){return si(e)||t("Expected a sequence for this tag"),e},createNode:(e,t,n)=>pn.from(e,t,n)},ul={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,n,r){return t=Object.assign({actualString:!0},t),Pa(e,t,n,r)}},fl={identify:e=>e==null,createNode:()=>new ie(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ie(null),stringify:({source:e},t)=>typeof e=="string"&&fl.test.test(e)?e:t.options.nullStr},fd={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new ie(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},n){if(e&&fd.test.test(e)){const r=e[0]==="t"||e[0]==="T";if(t===r)return e}return t?n.options.trueStr:n.options.falseStr}};function kt({format:e,minFractionDigits:t,tag:n,value:r}){if(typeof r=="bigint")return String(r);const i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let a=JSON.stringify(r);if(!e&&t&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(a)){let o=a.indexOf(".");o<0&&(o=a.length,a+=".");let s=t-(a.length-o-1);for(;s-- >0;)a+="0"}return a}const M0={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:kt},D0={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():kt(e)}},L0={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new ie(parseFloat(e)),n=e.indexOf(".");return n!==-1&&e[e.length-1]==="0"&&(t.minFractionDigits=e.length-n-1),t},stringify:kt},dl=e=>typeof e=="bigint"||Number.isInteger(e),dd=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function R0(e,t,n){const{value:r}=e;return dl(r)&&r>=0?n+r.toString(t):kt(e)}const B0={identify:e=>dl(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>dd(e,2,8,n),stringify:e=>R0(e,8,"0o")},F0={identify:dl,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>dd(e,0,10,n),stringify:kt},U0={identify:e=>dl(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>dd(e,2,16,n),stringify:e=>R0(e,16,"0x")},gH=[li,ci,ul,fl,fd,B0,F0,U0,M0,D0,L0];function Pg(e){return typeof e=="bigint"||Number.isInteger(e)}const Xa=({value:e})=>JSON.stringify(e),yH=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Xa},{identify:e=>e==null,createNode:()=>new ie(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Xa},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:Xa},{identify:Pg,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>Pg(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Xa}],vH={default:!0,tag:"",test:/^/,resolve(e,t){return t(`Unresolved plain scalar ${JSON.stringify(e)}`),e}},bH=[li,ci].concat(yH,vH),hd={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof atob=="function"){const n=atob(e.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},r,i,a){if(!n)return"";const o=n;let s;if(typeof btoa=="function"){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);s=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=ie.BLOCK_LITERAL),t!==ie.QUOTE_DOUBLE){const l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),c=Math.ceil(s.length/l),f=new Array(c);for(let u=0,d=0;u<c;++u,d+=l)f[u]=s.substr(d,l);s=f.join(t===ie.BLOCK_LITERAL?`
`:" ")}return Pa({comment:e,type:t,value:s},r,i,a)}};function q0(e,t){if(si(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!$e(r)){if(oi(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");const i=r.items[0]||new Je(new ie(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){const a=i.value??i.key;a.comment=a.comment?`${r.comment}
${a.comment}`:r.comment}r=i}e.items[n]=$e(r)?r:new Je(r)}}else t("Expected a sequence for this tag");return e}function z0(e,t,n){const{replacer:r}=n,i=new pn(e);i.tag="tag:yaml.org,2002:pairs";let a=0;if(t&&Symbol.iterator in Object(t))for(let o of t){typeof r=="function"&&(o=r.call(t,String(a++),o));let s,l;if(Array.isArray(o))if(o.length===2)s=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const c=Object.keys(o);if(c.length===1)s=c[0],l=o[s];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else s=o;i.items.push(ud(s,l,n))}return i}const pd={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:q0,createNode:z0};class vr extends pn{constructor(){super(),this.add=ct.prototype.add.bind(this),this.delete=ct.prototype.delete.bind(this),this.get=ct.prototype.get.bind(this),this.has=ct.prototype.has.bind(this),this.set=ct.prototype.set.bind(this),this.tag=vr.tag}toJSON(t,n){if(!n)return super.toJSON(t);const r=new Map;n!=null&&n.onCreate&&n.onCreate(r);for(const i of this.items){let a,o;if($e(i)?(a=yt(i.key,"",n),o=yt(i.value,a,n)):a=yt(i,"",n),r.has(a))throw new Error("Ordered maps must not include duplicate keys");r.set(a,o)}return r}static from(t,n,r){const i=z0(t,n,r),a=new this;return a.items=i.items,a}}vr.tag="tag:yaml.org,2002:omap";const md={collection:"seq",identify:e=>e instanceof Map,nodeClass:vr,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=q0(e,t),r=[];for(const{key:i}of n.items)xe(i)&&(r.includes(i.value)?t(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new vr,n)},createNode:(e,t,n)=>vr.from(e,t,n)};function K0({value:e,source:t},n){return t&&(e?W0:H0).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const W0={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ie(!0),stringify:K0},H0={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new ie(!1),stringify:K0},xH={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:kt},wH={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():kt(e)}},_H={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new ie(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(n!==-1){const r=e.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(t.minFractionDigits=r.length)}return t},stringify:kt},Ta=e=>typeof e=="bigint"||Number.isInteger(e);function hl(e,t,n,{intAsBigInt:r}){const i=e[0];if((i==="-"||i==="+")&&(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}const o=BigInt(e);return i==="-"?BigInt(-1)*o:o}const a=parseInt(e,n);return i==="-"?-1*a:a}function gd(e,t,n){const{value:r}=e;if(Ta(r)){const i=r.toString(t);return r<0?"-"+n+i.substr(1):n+i}return kt(e)}const SH={identify:Ta,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>hl(e,2,2,n),stringify:e=>gd(e,2,"0b")},OH={identify:Ta,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>hl(e,1,8,n),stringify:e=>gd(e,8,"0")},AH={identify:Ta,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>hl(e,0,10,n),stringify:kt},jH={identify:Ta,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>hl(e,2,16,n),stringify:e=>gd(e,16,"0x")};class br extends ct{constructor(t){super(t),this.tag=br.tag}add(t){let n;$e(t)?n=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?n=new Je(t.key,null):n=new Je(t,null),kn(this.items,n.key)||this.items.push(n)}get(t,n){const r=kn(this.items,t);return!n&&$e(r)?xe(r.key)?r.key.value:r.key:r}set(t,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const r=kn(this.items,t);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new Je(t))}toJSON(t,n){return super.toJSON(t,n,Set)}toString(t,n,r){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),n,r);throw new Error("Set items must all have null values")}static from(t,n,r){const{replacer:i}=r,a=new this(t);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof i=="function"&&(o=i.call(n,o,o)),a.items.push(ud(o,null,r));return a}}br.tag="tag:yaml.org,2002:set";const yd={collection:"map",identify:e=>e instanceof Set,nodeClass:br,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>br.from(e,t,n),resolve(e,t){if(oi(e)){if(e.hasAllNullValues(!0))return Object.assign(new br,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function vd(e,t){const n=e[0],r=n==="-"||n==="+"?e.substring(1):e,i=o=>t?BigInt(o):Number(o),a=r.replace(/_/g,"").split(":").reduce((o,s)=>o*i(60)+i(s),i(0));return n==="-"?i(-1)*a:a}function V0(e){let{value:t}=e,n=o=>o;if(typeof t=="bigint")n=o=>BigInt(o);else if(isNaN(t)||!isFinite(t))return kt(e);let r="";t<0&&(r="-",t*=n(-1));const i=n(60),a=[t%i];return t<60?a.unshift(0):(t=(t-a[0])/i,a.unshift(t%i),t>=60&&(t=(t-a[0])/i,a.unshift(t))),r+a.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const G0={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>vd(e,n),stringify:V0},Y0={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>vd(e,!1),stringify:V0},pl={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(pl.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,a,o,s]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let c=Date.UTC(n,r-1,i,a||0,o||0,s||0,l);const f=t[8];if(f&&f!=="Z"){let u=vd(f,!1);Math.abs(u)<30&&(u*=60),c-=6e4*u}return new Date(c)},stringify:({value:e})=>(e==null?void 0:e.toISOString().replace(/(T00:00:00)?\.000Z$/,""))??""},Tg=[li,ci,ul,fl,W0,H0,SH,OH,AH,jH,xH,wH,_H,hd,Xt,md,pd,yd,G0,Y0,pl],Eg=new Map([["core",gH],["failsafe",[li,ci,ul]],["json",bH],["yaml11",Tg],["yaml-1.1",Tg]]),Ng={binary:hd,bool:fd,float:L0,floatExp:D0,floatNaN:M0,floatTime:Y0,int:F0,intHex:U0,intOct:B0,intTime:G0,map:li,merge:Xt,null:fl,omap:md,pairs:pd,seq:ci,set:yd,timestamp:pl},$H={"tag:yaml.org,2002:binary":hd,"tag:yaml.org,2002:merge":Xt,"tag:yaml.org,2002:omap":md,"tag:yaml.org,2002:pairs":pd,"tag:yaml.org,2002:set":yd,"tag:yaml.org,2002:timestamp":pl};function Gl(e,t,n){const r=Eg.get(t);if(r&&!e)return n&&!r.includes(Xt)?r.concat(Xt):r.slice();let i=r;if(!i)if(Array.isArray(e))i=[];else{const a=Array.from(Eg.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${a} or define customTags array`)}if(Array.isArray(e))for(const a of e)i=i.concat(a);else typeof e=="function"&&(i=e(i.slice()));return n&&(i=i.concat(Xt)),i.reduce((a,o)=>{const s=typeof o=="string"?Ng[o]:o;if(!s){const l=JSON.stringify(o),c=Object.keys(Ng).map(f=>JSON.stringify(f)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${c}`)}return a.includes(s)||a.push(s),a},[])}const PH=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class ml{constructor({compat:t,customTags:n,merge:r,resolveKnownTags:i,schema:a,sortMapEntries:o,toStringDefaults:s}){this.compat=Array.isArray(t)?Gl(t,"compat"):t?Gl(null,t):null,this.name=typeof a=="string"&&a||"core",this.knownTags=i?$H:{},this.tags=Gl(n,this.name,r),this.toStringOptions=s??null,Object.defineProperty(this,hn,{value:li}),Object.defineProperty(this,Ft,{value:ul}),Object.defineProperty(this,ai,{value:ci}),this.sortMapEntries=typeof o=="function"?o:o===!0?PH:null}clone(){const t=Object.create(ml.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function TH(e,t){var l;const n=[];let r=t.directives===!0;if(t.directives!==!1&&e.directives){const c=e.directives.toString(e);c?(n.push(c),r=!0):e.directives.docStart&&(r=!0)}r&&n.push("---");const i=E0(e,t),{commentString:a}=i.options;if(e.commentBefore){n.length!==1&&n.unshift("");const c=a(e.commentBefore);n.unshift(Ht(c,""))}let o=!1,s=null;if(e.contents){if(Te(e.contents)){if(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore){const u=a(e.contents.commentBefore);n.push(Ht(u,""))}i.forceBlockIndent=!!e.comment,s=e.contents.comment}const c=s?void 0:()=>o=!0;let f=qr(e.contents,i,()=>s=null,c);s&&(f+=Nn(f,"",a(s))),(f[0]==="|"||f[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${f}`:n.push(f)}else n.push(qr(e.contents,i));if((l=e.directives)!=null&&l.docEnd)if(e.comment){const c=a(e.comment);c.includes(`
`)?(n.push("..."),n.push(Ht(c,""))):n.push(`... ${c}`)}else n.push("...");else{let c=e.comment;c&&o&&(c=c.replace(/^\n+/,"")),c&&((!o||s)&&n[n.length-1]!==""&&n.push(""),n.push(Ht(a(c),"")))}return n.join(`
`)+`
`}class ui{constructor(t,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,bt,{value:qu});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);const a=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=a;let{version:o}=a;r!=null&&r._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Qe({version:o}),this.setSchema(o,r),this.contents=t===void 0?null:this.createNode(t,i,r)}clone(){const t=Object.create(ui.prototype,{[bt]:{value:qu}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=Te(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){rr(this.contents)&&this.contents.add(t)}addIn(t,n){rr(this.contents)&&this.contents.addIn(t,n)}createAlias(t,n){if(!t.anchor){const r=A0(this);t.anchor=!n||r.has(n)?j0(n||"a",r):n}return new ol(t.anchor)}createNode(t,n,r){let i;if(typeof n=="function")t=n.call({"":t},"",t),i=n;else if(Array.isArray(n)){const g=b=>typeof b=="number"||b instanceof String||b instanceof Number,w=n.filter(g).map(String);w.length>0&&(n=n.concat(w)),i=n}else r===void 0&&n&&(r=n,n=void 0);const{aliasDuplicateObjects:a,anchorPrefix:o,flow:s,keepUndefined:l,onTagObj:c,tag:f}=r??{},{onAnchor:u,setAnchors:d,sourceObjects:p}=rH(this,o||"a"),v={aliasDuplicateObjects:a??!0,keepUndefined:l??!1,onAnchor:u,onTagObj:c,replacer:i,schema:this.schema,sourceObjects:p},m=da(t,f,v);return s&&Pe(m)&&(m.flow=!0),d(),m}createPair(t,n,r={}){const i=this.createNode(t,null,r),a=this.createNode(n,null,r);return new Je(i,a)}delete(t){return rr(this.contents)?this.contents.delete(t):!1}deleteIn(t){return Si(t)?this.contents==null?!1:(this.contents=null,!0):rr(this.contents)?this.contents.deleteIn(t):!1}get(t,n){return Pe(this.contents)?this.contents.get(t,n):void 0}getIn(t,n){return Si(t)?!n&&xe(this.contents)?this.contents.value:this.contents:Pe(this.contents)?this.contents.getIn(t,n):void 0}has(t){return Pe(this.contents)?this.contents.has(t):!1}hasIn(t){return Si(t)?this.contents!==void 0:Pe(this.contents)?this.contents.hasIn(t):!1}set(t,n){this.contents==null?this.contents=hs(this.schema,[t],n):rr(this.contents)&&this.contents.set(t,n)}setIn(t,n){Si(t)?this.contents=n:this.contents==null?this.contents=hs(this.schema,Array.from(t),n):rr(this.contents)&&this.contents.setIn(t,n)}setSchema(t,n={}){typeof t=="number"&&(t=String(t));let r;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Qe({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new Qe({version:t}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const i=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new ml(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:a,reviver:o}={}){const s={anchors:new Map,doc:this,keep:!t,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=yt(this.contents,n??"",s);if(typeof a=="function")for(const{count:c,res:f}of s.anchors.values())a(f,c);return typeof o=="function"?fr(o,{"":l},"",l):l}toJSON(t,n){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:n})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const n=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return TH(this,t)}}function rr(e){if(Pe(e))return!0;throw new Error("Expected a YAML collection as document contents")}class bd extends Error{constructor(t,n,r,i){super(),this.name=t,this.code=r,this.message=i,this.pos=n}}class Cn extends bd{constructor(t,n,r){super("YAMLParseError",t,n,r)}}class X0 extends bd{constructor(t,n,r){super("YAMLWarning",t,n,r)}}const ms=(e,t)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(s=>t.linePos(s));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let a=i-1,o=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(a>=60&&o.length>80){const s=Math.min(a-39,o.length-79);o="…"+o.substring(s),a-=s-1}if(o.length>80&&(o=o.substring(0,79)+"…"),r>1&&/^ *$/.test(o.substring(0,a))){let s=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);s.length>80&&(s=s.substring(0,79)+`…
`),o=s+o}if(/[^ ]/.test(o)){let s=1;const l=n.linePos[1];l&&l.line===r&&l.col>i&&(s=Math.max(1,Math.min(l.col-i,80-a)));const c=" ".repeat(a)+"^".repeat(s);n.message+=`:

${o}
${c}
`}};function zr(e,{flow:t,indicator:n,next:r,offset:i,onError:a,parentIndent:o,startOnNewline:s}){let l=!1,c=s,f=s,u="",d="",p=!1,v=!1,m=null,g=null,w=null,b=null,_=null,S=null,y=null;for(const j of e)switch(v&&(j.type!=="space"&&j.type!=="newline"&&j.type!=="comma"&&a(j.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),v=!1),m&&(c&&j.type!=="comment"&&j.type!=="newline"&&a(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),j.type){case"space":!t&&(n!=="doc-start"||(r==null?void 0:r.type)!=="flow-collection")&&j.source.includes("	")&&(m=j),f=!0;break;case"comment":{f||a(j,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const $=j.source.substring(1)||" ";u?u+=d+$:u=$,d="",c=!1;break}case"newline":c?u?u+=j.source:(!S||n!=="seq-item-ind")&&(l=!0):d+=j.source,c=!0,p=!0,(g||w)&&(b=j),f=!0;break;case"anchor":g&&a(j,"MULTIPLE_ANCHORS","A node can have at most one anchor"),j.source.endsWith(":")&&a(j.offset+j.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),g=j,y??(y=j.offset),c=!1,f=!1,v=!0;break;case"tag":{w&&a(j,"MULTIPLE_TAGS","A node can have at most one tag"),w=j,y??(y=j.offset),c=!1,f=!1,v=!0;break}case n:(g||w)&&a(j,"BAD_PROP_ORDER",`Anchors and tags must be after the ${j.source} indicator`),S&&a(j,"UNEXPECTED_TOKEN",`Unexpected ${j.source} in ${t??"collection"}`),S=j,c=n==="seq-item-ind"||n==="explicit-key-ind",f=!1;break;case"comma":if(t){_&&a(j,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),_=j,c=!1,f=!1;break}default:a(j,"UNEXPECTED_TOKEN",`Unexpected ${j.type} token`),c=!1,f=!1}const x=e[e.length-1],O=x?x.offset+x.source.length:i;return v&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&a(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(c&&m.indent<=o||(r==null?void 0:r.type)==="block-map"||(r==null?void 0:r.type)==="block-seq")&&a(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:_,found:S,spaceBefore:l,comment:u,hasNewline:p,anchor:g,tag:w,newlineAfterProp:b,end:O,start:y??O}}function ha(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(const t of e.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(const t of e.items){for(const n of t.start)if(n.type==="newline")return!0;if(t.sep){for(const n of t.sep)if(n.type==="newline")return!0}if(ha(t.key)||ha(t.value))return!0}return!1;default:return!0}}function Hu(e,t,n){if((t==null?void 0:t.type)==="flow-collection"){const r=t.end[0];r.indent===e&&(r.source==="]"||r.source==="}")&&ha(t)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function J0(e,t,n){const{uniqueKeys:r}=e.options;if(r===!1)return!1;const i=typeof r=="function"?r:(a,o)=>a===o||xe(a)&&xe(o)&&a.value===o.value;return t.some(a=>i(a.key,n))}const kg="All mapping items must start at the same column";function EH({composeNode:e,composeEmptyNode:t},n,r,i,a){var f;const o=(a==null?void 0:a.nodeClass)??ct,s=new o(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,c=null;for(const u of r.items){const{start:d,key:p,sep:v,value:m}=u,g=zr(d,{indicator:"explicit-key-ind",next:p??(v==null?void 0:v[0]),offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0}),w=!g.found;if(w){if(p&&(p.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in p&&p.indent!==r.indent&&i(l,"BAD_INDENT",kg)),!g.anchor&&!g.tag&&!v){c=g.end,g.comment&&(s.comment?s.comment+=`
`+g.comment:s.comment=g.comment);continue}(g.newlineAfterProp||ha(p))&&i(p??d[d.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((f=g.found)==null?void 0:f.indent)!==r.indent&&i(l,"BAD_INDENT",kg);n.atKey=!0;const b=g.end,_=p?e(n,p,g,i):t(n,b,d,null,g,i);n.schema.compat&&Hu(r.indent,p,i),n.atKey=!1,J0(n,s.items,_)&&i(b,"DUPLICATE_KEY","Map keys must be unique");const S=zr(v??[],{indicator:"map-value-ind",next:m,offset:_.range[2],onError:i,parentIndent:r.indent,startOnNewline:!p||p.type==="block-scalar"});if(l=S.end,S.found){w&&((m==null?void 0:m.type)==="block-map"&&!S.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&g.start<S.found.offset-1024&&i(_.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const y=m?e(n,m,S,i):t(n,l,v,null,S,i);n.schema.compat&&Hu(r.indent,m,i),l=y.range[2];const x=new Je(_,y);n.options.keepSourceTokens&&(x.srcToken=u),s.items.push(x)}else{w&&i(_.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),S.comment&&(_.comment?_.comment+=`
`+S.comment:_.comment=S.comment);const y=new Je(_);n.options.keepSourceTokens&&(y.srcToken=u),s.items.push(y)}}return c&&c<l&&i(c,"IMPOSSIBLE","Map comment with trailing content"),s.range=[r.offset,l,c??l],s}function NH({composeNode:e,composeEmptyNode:t},n,r,i,a){const o=(a==null?void 0:a.nodeClass)??pn,s=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=r.offset,c=null;for(const{start:f,value:u}of r.items){const d=zr(f,{indicator:"seq-item-ind",next:u,offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0});if(!d.found)if(d.anchor||d.tag||u)u&&u.type==="block-seq"?i(d.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{c=d.end,d.comment&&(s.comment=d.comment);continue}const p=u?e(n,u,d,i):t(n,d.end,f,null,d,i);n.schema.compat&&Hu(r.indent,u,i),l=p.range[2],s.items.push(p)}return s.range=[r.offset,l,c??l],s}function Ea(e,t,n,r){let i="";if(e){let a=!1,o="";for(const s of e){const{source:l,type:c}=s;switch(c){case"space":a=!0;break;case"comment":{n&&!a&&r(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const f=l.substring(1)||" ";i?i+=o+f:i=f,o="";break}case"newline":i&&(o+=l),a=!0;break;default:r(s,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}t+=l.length}}return{comment:i,offset:t}}const Yl="Block collections are not allowed within flow collections",Xl=e=>e&&(e.type==="block-map"||e.type==="block-seq");function kH({composeNode:e,composeEmptyNode:t},n,r,i,a){const o=r.start.source==="{",s=o?"flow map":"flow sequence",l=(a==null?void 0:a.nodeClass)??(o?ct:pn),c=new l(n.schema);c.flow=!0;const f=n.atRoot;f&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let u=r.offset+r.start.source.length;for(let g=0;g<r.items.length;++g){const w=r.items[g],{start:b,key:_,sep:S,value:y}=w,x=zr(b,{flow:s,indicator:"explicit-key-ind",next:_??(S==null?void 0:S[0]),offset:u,onError:i,parentIndent:r.indent,startOnNewline:!1});if(!x.found){if(!x.anchor&&!x.tag&&!S&&!y){g===0&&x.comma?i(x.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):g<r.items.length-1&&i(x.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),x.comment&&(c.comment?c.comment+=`
`+x.comment:c.comment=x.comment),u=x.end;continue}!o&&n.options.strict&&ha(_)&&i(_,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(g===0)x.comma&&i(x.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(x.comma||i(x.start,"MISSING_CHAR",`Missing , between ${s} items`),x.comment){let O="";e:for(const j of b)switch(j.type){case"comma":case"space":break;case"comment":O=j.source.substring(1);break e;default:break e}if(O){let j=c.items[c.items.length-1];$e(j)&&(j=j.value??j.key),j.comment?j.comment+=`
`+O:j.comment=O,x.comment=x.comment.substring(O.length+1)}}if(!o&&!S&&!x.found){const O=y?e(n,y,x,i):t(n,x.end,S,null,x,i);c.items.push(O),u=O.range[2],Xl(y)&&i(O.range,"BLOCK_IN_FLOW",Yl)}else{n.atKey=!0;const O=x.end,j=_?e(n,_,x,i):t(n,O,b,null,x,i);Xl(_)&&i(j.range,"BLOCK_IN_FLOW",Yl),n.atKey=!1;const $=zr(S??[],{flow:s,indicator:"map-value-ind",next:y,offset:j.range[2],onError:i,parentIndent:r.indent,startOnNewline:!1});if($.found){if(!o&&!x.found&&n.options.strict){if(S)for(const A of S){if(A===$.found)break;if(A.type==="newline"){i(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}x.start<$.found.offset-1024&&i($.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else y&&("source"in y&&y.source&&y.source[0]===":"?i(y,"MISSING_CHAR",`Missing space after : in ${s}`):i($.start,"MISSING_CHAR",`Missing , or : between ${s} items`));const T=y?e(n,y,$,i):$.found?t(n,$.end,S,null,$,i):null;T?Xl(y)&&i(T.range,"BLOCK_IN_FLOW",Yl):$.comment&&(j.comment?j.comment+=`
`+$.comment:j.comment=$.comment);const N=new Je(j,T);if(n.options.keepSourceTokens&&(N.srcToken=w),o){const A=c;J0(n,A.items,j)&&i(O,"DUPLICATE_KEY","Map keys must be unique"),A.items.push(N)}else{const A=new ct(n.schema);A.flow=!0,A.items.push(N);const E=(T??j).range;A.range=[j.range[0],E[1],E[2]],c.items.push(A)}u=T?T.range[2]:$.end}}const d=o?"}":"]",[p,...v]=r.end;let m=u;if(p&&p.source===d)m=p.offset+p.source.length;else{const g=s[0].toUpperCase()+s.substring(1),w=f?`${g} must end with a ${d}`:`${g} in block collection must be sufficiently indented and end with a ${d}`;i(u,f?"MISSING_CHAR":"BAD_INDENT",w),p&&p.source.length!==1&&v.unshift(p)}if(v.length>0){const g=Ea(v,m,n.options.strict,i);g.comment&&(c.comment?c.comment+=`
`+g.comment:c.comment=g.comment),c.range=[r.offset,m,g.offset]}else c.range=[r.offset,m,m];return c}function Jl(e,t,n,r,i,a){const o=n.type==="block-map"?EH(e,t,n,r,a):n.type==="block-seq"?NH(e,t,n,r,a):kH(e,t,n,r,a),s=o.constructor;return i==="!"||i===s.tagName?(o.tag=s.tagName,o):(i&&(o.tag=i),o)}function CH(e,t,n,r,i){var d;const a=r.tag,o=a?t.directives.tagName(a.source,p=>i(a,"TAG_RESOLVE_FAILED",p)):null;if(n.type==="block-seq"){const{anchor:p,newlineAfterProp:v}=r,m=p&&a?p.offset>a.offset?p:a:p??a;m&&(!v||v.offset<m.offset)&&i(m,"MISSING_CHAR","Missing newline after block sequence props")}const s=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!a||!o||o==="!"||o===ct.tagName&&s==="map"||o===pn.tagName&&s==="seq")return Jl(e,t,n,i,o);let l=t.schema.tags.find(p=>p.tag===o&&p.collection===s);if(!l){const p=t.schema.knownTags[o];if(p&&p.collection===s)t.schema.tags.push(Object.assign({},p,{default:!1})),l=p;else return p?i(a,"BAD_COLLECTION_TYPE",`${p.tag} used for ${s} collection, but expects ${p.collection??"scalar"}`,!0):i(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Jl(e,t,n,i,o)}const c=Jl(e,t,n,i,o,l),f=((d=l.resolve)==null?void 0:d.call(l,c,p=>i(a,"TAG_RESOLVE_FAILED",p),t.options))??c,u=Te(f)?f:new ie(f);return u.range=c.range,u.tag=o,l!=null&&l.format&&(u.format=l.format),u}function Q0(e,t,n){const r=t.offset,i=IH(t,e.options.strict,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const a=i.mode===">"?ie.BLOCK_FOLDED:ie.BLOCK_LITERAL,o=t.source?MH(t.source):[];let s=o.length;for(let m=o.length-1;m>=0;--m){const g=o[m][1];if(g===""||g==="\r")s=m;else break}if(s===0){const m=i.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let g=r+i.length;return t.source&&(g+=t.source.length),{value:m,type:a,comment:i.comment,range:[r,g,g]}}let l=t.indent+i.indent,c=t.offset+i.length,f=0;for(let m=0;m<s;++m){const[g,w]=o[m];if(w===""||w==="\r")i.indent===0&&g.length>l&&(l=g.length);else{g.length<l&&n(c+g.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=g.length),f=m,l===0&&!e.atRoot&&n(c,"BAD_INDENT","Block scalar values in collections must be indented");break}c+=g.length+w.length+1}for(let m=o.length-1;m>=s;--m)o[m][0].length>l&&(s=m+1);let u="",d="",p=!1;for(let m=0;m<f;++m)u+=o[m][0].slice(l)+`
`;for(let m=f;m<s;++m){let[g,w]=o[m];c+=g.length+w.length+1;const b=w[w.length-1]==="\r";if(b&&(w=w.slice(0,-1)),w&&g.length<l){const S=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(c-w.length-(b?2:1),"BAD_INDENT",S),g=""}a===ie.BLOCK_LITERAL?(u+=d+g.slice(l)+w,d=`
`):g.length>l||w[0]==="	"?(d===" "?d=`
`:!p&&d===`
`&&(d=`

`),u+=d+g.slice(l)+w,d=`
`,p=!0):w===""?d===`
`?u+=`
`:d=`
`:(u+=d+w,d=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let m=s;m<o.length;++m)u+=`
`+o[m][0].slice(l);u[u.length-1]!==`
`&&(u+=`
`);break;default:u+=`
`}const v=r+i.length+t.source.length;return{value:u,type:a,comment:i.comment,range:[r,v,v]}}function IH({offset:e,props:t},n,r){if(t[0].type!=="block-scalar-header")return r(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=t[0],a=i[0];let o=0,s="",l=-1;for(let d=1;d<i.length;++d){const p=i[d];if(!s&&(p==="-"||p==="+"))s=p;else{const v=Number(p);!o&&v?o=v:l===-1&&(l=e+d)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let c=!1,f="",u=i.length;for(let d=1;d<t.length;++d){const p=t[d];switch(p.type){case"space":c=!0;case"newline":u+=p.source.length;break;case"comment":n&&!c&&r(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),u+=p.source.length,f=p.source.substring(1);break;case"error":r(p,"UNEXPECTED_TOKEN",p.message),u+=p.source.length;break;default:{const v=`Unexpected token in block scalar header: ${p.type}`;r(p,"UNEXPECTED_TOKEN",v);const m=p.source;m&&typeof m=="string"&&(u+=m.length)}}}return{mode:a,indent:o,chomp:s,comment:f,length:u}}function MH(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),a=[r!=null&&r[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let o=1;o<t.length;o+=2)a.push([t[o],t[o+1]]);return a}function Z0(e,t,n){const{offset:r,type:i,source:a,end:o}=e;let s,l;const c=(d,p,v)=>n(r+d,p,v);switch(i){case"scalar":s=ie.PLAIN,l=DH(a,c);break;case"single-quoted-scalar":s=ie.QUOTE_SINGLE,l=LH(a,c);break;case"double-quoted-scalar":s=ie.QUOTE_DOUBLE,l=RH(a,c);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+a.length,r+a.length]}}const f=r+a.length,u=Ea(o,f,t,n);return{value:l,type:s,comment:u.comment,range:[r,f,u.offset]}}function DH(e,t){let n="";switch(e[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${e[0]}`;break}case"@":case"`":{n=`reserved character ${e[0]}`;break}}return n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),ex(e)}function LH(e,t){return(e[e.length-1]!=="'"||e.length===1)&&t(e.length,"MISSING_CHAR","Missing closing 'quote"),ex(e.slice(1,-1)).replace(/''/g,"'")}function ex(e){let t,n;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=t.exec(e);if(!r)return e;let i=r[1],a=" ",o=t.lastIndex;for(n.lastIndex=o;r=n.exec(e);)r[1]===""?a===`
`?i+=a:a=`
`:(i+=a+r[1],a=" "),o=n.lastIndex;const s=/[ \t]*(.*)/sy;return s.lastIndex=o,r=s.exec(e),i+a+((r==null?void 0:r[1])??"")}function RH(e,t){let n="";for(let r=1;r<e.length-1;++r){const i=e[r];if(!(i==="\r"&&e[r+1]===`
`))if(i===`
`){const{fold:a,offset:o}=BH(e,r);n+=a,r=o}else if(i==="\\"){let a=e[++r];const o=FH[a];if(o)n+=o;else if(a===`
`)for(a=e[r+1];a===" "||a==="	";)a=e[++r+1];else if(a==="\r"&&e[r+1]===`
`)for(a=e[++r+1];a===" "||a==="	";)a=e[++r+1];else if(a==="x"||a==="u"||a==="U"){const s={x:2,u:4,U:8}[a];n+=UH(e,r+1,s,t),r+=s}else{const s=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${s}`),n+=s}}else if(i===" "||i==="	"){const a=r;let o=e[r+1];for(;o===" "||o==="	";)o=e[++r+1];o!==`
`&&!(o==="\r"&&e[r+2]===`
`)&&(n+=r>a?e.slice(a,r+1):i)}else n+=i}return(e[e.length-1]!=='"'||e.length===1)&&t(e.length,"MISSING_CHAR",'Missing closing "quote'),n}function BH(e,t){let n="",r=e[t+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&e[t+2]!==`
`);)r===`
`&&(n+=`
`),t+=1,r=e[t+1];return n||(n=" "),{fold:n,offset:t}}const FH={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function UH(e,t,n,r){const i=e.substr(t,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const s=e.substr(t-2,n+2);return r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${s}`),s}return String.fromCodePoint(o)}function tx(e,t,n,r){const{value:i,type:a,comment:o,range:s}=t.type==="block-scalar"?Q0(e,t,r):Z0(t,e.options.strict,r),l=n?e.directives.tagName(n.source,u=>r(n,"TAG_RESOLVE_FAILED",u)):null;let c;e.options.stringKeys&&e.atKey?c=e.schema[Ft]:l?c=qH(e.schema,i,l,n,r):t.type==="scalar"?c=zH(e,i,t,r):c=e.schema[Ft];let f;try{const u=c.resolve(i,d=>r(n??t,"TAG_RESOLVE_FAILED",d),e.options);f=xe(u)?u:new ie(u)}catch(u){const d=u instanceof Error?u.message:String(u);r(n??t,"TAG_RESOLVE_FAILED",d),f=new ie(i)}return f.range=s,f.source=i,a&&(f.type=a),l&&(f.tag=l),c.format&&(f.format=c.format),o&&(f.comment=o),f}function qH(e,t,n,r,i){var s;if(n==="!")return e[Ft];const a=[];for(const l of e.tags)if(!l.collection&&l.tag===n)if(l.default&&l.test)a.push(l);else return l;for(const l of a)if((s=l.test)!=null&&s.test(t))return l;const o=e.knownTags[n];return o&&!o.collection?(e.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),e[Ft])}function zH({atKey:e,directives:t,schema:n},r,i,a){const o=n.tags.find(s=>{var l;return(s.default===!0||e&&s.default==="key")&&((l=s.test)==null?void 0:l.test(r))})||n[Ft];if(n.compat){const s=n.compat.find(l=>{var c;return l.default&&((c=l.test)==null?void 0:c.test(r))})??n[Ft];if(o.tag!==s.tag){const l=t.tagString(o.tag),c=t.tagString(s.tag),f=`Value may be parsed as either ${l} or ${c}`;a(i,"TAG_RESOLVE_FAILED",f,!0)}}return o}function KH(e,t,n){if(t){n??(n=t.length);for(let r=n-1;r>=0;--r){let i=t[r];switch(i.type){case"space":case"comment":case"newline":e-=i.source.length;continue}for(i=t[++r];(i==null?void 0:i.type)==="space";)e+=i.source.length,i=t[++r];break}}return e}const WH={composeNode:nx,composeEmptyNode:xd};function nx(e,t,n,r){const i=e.atKey,{spaceBefore:a,comment:o,anchor:s,tag:l}=n;let c,f=!0;switch(t.type){case"alias":c=HH(e,t,r),(s||l)&&r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=tx(e,t,l,r),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=CH(WH,e,t,n,r),s&&(c.anchor=s.source.substring(1));break;default:{const u=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;r(t,"UNEXPECTED_TOKEN",u),c=xd(e,t.offset,void 0,null,n,r),f=!1}}return s&&c.anchor===""&&r(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&e.options.stringKeys&&(!xe(c)||typeof c.value!="string"||c.tag&&c.tag!=="tag:yaml.org,2002:str")&&r(l??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),a&&(c.spaceBefore=!0),o&&(t.type==="scalar"&&t.source===""?c.comment=o:c.commentBefore=o),e.options.keepSourceTokens&&f&&(c.srcToken=t),c}function xd(e,t,n,r,{spaceBefore:i,comment:a,anchor:o,tag:s,end:l},c){const f={type:"scalar",offset:KH(t,n,r),indent:-1,source:""},u=tx(e,f,s,c);return o&&(u.anchor=o.source.substring(1),u.anchor===""&&c(o,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(u.spaceBefore=!0),a&&(u.comment=a,u.range[2]=l),u}function HH({options:e},{offset:t,source:n,end:r},i){const a=new ol(n.substring(1));a.source===""&&i(t,"BAD_ALIAS","Alias cannot be an empty string"),a.source.endsWith(":")&&i(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=t+n.length,s=Ea(r,o,e.strict,i);return a.range=[t,o,s.offset],s.comment&&(a.comment=s.comment),a}function VH(e,t,{offset:n,start:r,value:i,end:a},o){const s=Object.assign({_directives:t},e),l=new ui(void 0,s),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},f=zr(r,{indicator:"doc-start",next:i??(a==null?void 0:a[0]),offset:n,onError:o,parentIndent:0,startOnNewline:!0});f.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!f.hasNewline&&o(f.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?nx(c,i,f,o):xd(c,f.end,r,null,f,o);const u=l.contents.range[2],d=Ea(a,u,!1,o);return d.comment&&(l.comment=d.comment),l.range=[n,u,d.offset],l}function wi(e){if(typeof e=="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+(typeof n=="string"?n.length:1)]}function Cg(e){var i;let t="",n=!1,r=!1;for(let a=0;a<e.length;++a){const o=e[a];switch(o[0]){case"#":t+=(t===""?"":r?`

`:`
`)+(o.substring(1)||" "),n=!0,r=!1;break;case"%":((i=e[a+1])==null?void 0:i[0])!=="#"&&(a+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:t,afterEmptyLine:r}}class wd{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,a)=>{const o=wi(n);a?this.warnings.push(new X0(o,r,i)):this.errors.push(new Cn(o,r,i))},this.directives=new Qe({version:t.version||"1.2"}),this.options=t}decorate(t,n){const{comment:r,afterEmptyLine:i}=Cg(this.prelude);if(r){const a=t.contents;if(n)t.comment=t.comment?`${t.comment}
${r}`:r;else if(i||t.directives.docStart||!a)t.commentBefore=r;else if(Pe(a)&&!a.flow&&a.items.length>0){let o=a.items[0];$e(o)&&(o=o.key);const s=o.commentBefore;o.commentBefore=s?`${r}
${s}`:r}else{const o=a.commentBefore;a.commentBefore=o?`${r}
${o}`:r}}n?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Cg(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,n=!1,r=-1){for(const i of t)yield*this.next(i);yield*this.end(n,r)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(n,r,i)=>{const a=wi(t);a[0]+=n,this.onError(a,"BAD_DIRECTIVE",r,i)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const n=VH(this.options,this.directives,t,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const n=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,r=new Cn(wi(t),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new Cn(wi(t),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const n=Ea(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Cn(wi(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const r=Object.assign({_directives:this.directives},this.options),i=new ui(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}}function GH(e,t=!0,n){if(e){const r=(i,a,o)=>{const s=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(n)n(s,a,o);else throw new Cn([s,s+1],a,o)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Z0(e,t,r);case"block-scalar":return Q0({options:{strict:t}},e,r)}}return null}function YH(e,t){const{implicitKey:n=!1,indent:r,inFlow:i=!1,offset:a=-1,type:o="PLAIN"}=t,s=Pa({type:o,value:e},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=t.end??[{type:"newline",offset:-1,indent:r,source:`
`}];switch(s[0]){case"|":case">":{const c=s.indexOf(`
`),f=s.substring(0,c),u=s.substring(c+1)+`
`,d=[{type:"block-scalar-header",offset:a,indent:r,source:f}];return rx(d,l)||d.push({type:"newline",offset:-1,indent:r,source:`
`}),{type:"block-scalar",offset:a,indent:r,props:d,source:u}}case'"':return{type:"double-quoted-scalar",offset:a,indent:r,source:s,end:l};case"'":return{type:"single-quoted-scalar",offset:a,indent:r,source:s,end:l};default:return{type:"scalar",offset:a,indent:r,source:s,end:l}}}function XH(e,t,n={}){let{afterKey:r=!1,implicitKey:i=!1,inFlow:a=!1,type:o}=n,s="indent"in e?e.indent:null;if(r&&typeof s=="number"&&(s+=2),!o)switch(e.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{const c=e.props[0];if(c.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o=c.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}const l=Pa({type:o,value:t},{implicitKey:i||s===null,indent:s!==null&&s>0?" ".repeat(s):"",inFlow:a,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":JH(e,l);break;case'"':Ql(e,l,"double-quoted-scalar");break;case"'":Ql(e,l,"single-quoted-scalar");break;default:Ql(e,l,"scalar")}}function JH(e,t){const n=t.indexOf(`
`),r=t.substring(0,n),i=t.substring(n+1)+`
`;if(e.type==="block-scalar"){const a=e.props[0];if(a.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a.source=r,e.source=i}else{const{offset:a}=e,o="indent"in e?e.indent:-1,s=[{type:"block-scalar-header",offset:a,indent:o,source:r}];rx(s,"end"in e?e.end:void 0)||s.push({type:"newline",offset:-1,indent:o,source:`
`});for(const l of Object.keys(e))l!=="type"&&l!=="offset"&&delete e[l];Object.assign(e,{type:"block-scalar",indent:o,props:s,source:i})}}function rx(e,t){if(t)for(const n of t)switch(n.type){case"space":case"comment":e.push(n);break;case"newline":return e.push(n),!0}return!1}function Ql(e,t,n){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=n,e.source=t;break;case"block-scalar":{const r=e.props.slice(1);let i=t.length;e.props[0].type==="block-scalar-header"&&(i-=e.props[0].source.length);for(const a of r)a.offset+=i;delete e.props,Object.assign(e,{type:n,source:t,end:r});break}case"block-map":case"block-seq":{const i={type:"newline",offset:e.offset+t.length,indent:e.indent,source:`
`};delete e.items,Object.assign(e,{type:n,source:t,end:[i]});break}default:{const r="indent"in e?e.indent:-1,i="end"in e&&Array.isArray(e.end)?e.end.filter(a=>a.type==="space"||a.type==="comment"||a.type==="newline"):[];for(const a of Object.keys(e))a!=="type"&&a!=="offset"&&delete e[a];Object.assign(e,{type:n,indent:r,source:t,end:i})}}}const QH=e=>"type"in e?gs(e):uo(e);function gs(e){switch(e.type){case"block-scalar":{let t="";for(const n of e.props)t+=gs(n);return t+e.source}case"block-map":case"block-seq":{let t="";for(const n of e.items)t+=uo(n);return t}case"flow-collection":{let t=e.start.source;for(const n of e.items)t+=uo(n);for(const n of e.end)t+=n.source;return t}case"document":{let t=uo(e);if(e.end)for(const n of e.end)t+=n.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const n of e.end)t+=n.source;return t}}}function uo({start:e,key:t,sep:n,value:r}){let i="";for(const a of e)i+=a.source;if(t&&(i+=gs(t)),n)for(const a of n)i+=a.source;return r&&(i+=gs(r)),i}const Vu=Symbol("break visit"),ZH=Symbol("skip children"),ix=Symbol("remove item");function Kn(e,t){"type"in e&&e.type==="document"&&(e={start:e.start,value:e.value}),ax(Object.freeze([]),e,t)}Kn.BREAK=Vu;Kn.SKIP=ZH;Kn.REMOVE=ix;Kn.itemAtPath=(e,t)=>{let n=e;for(const[r,i]of t){const a=n==null?void 0:n[r];if(a&&"items"in a)n=a.items[i];else return}return n};Kn.parentCollection=(e,t)=>{const n=Kn.itemAtPath(e,t.slice(0,-1)),r=t[t.length-1][0],i=n==null?void 0:n[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function ax(e,t,n){let r=n(t,e);if(typeof r=="symbol")return r;for(const i of["key","value"]){const a=t[i];if(a&&"items"in a){for(let o=0;o<a.items.length;++o){const s=ax(Object.freeze(e.concat([[i,o]])),a.items[o],n);if(typeof s=="number")o=s-1;else{if(s===Vu)return Vu;s===ix&&(a.items.splice(o,1),o-=1)}}typeof r=="function"&&i==="key"&&(r=r(t,e))}}return typeof r=="function"?r(t,e):r}const gl="\uFEFF",yl="",vl="",pa="",e5=e=>!!e&&"items"in e,t5=e=>!!e&&(e.type==="scalar"||e.type==="single-quoted-scalar"||e.type==="double-quoted-scalar"||e.type==="block-scalar");function n5(e){switch(e){case gl:return"<BOM>";case yl:return"<DOC>";case vl:return"<FLOW_END>";case pa:return"<SCALAR>";default:return JSON.stringify(e)}}function ox(e){switch(e){case gl:return"byte-order-mark";case yl:return"doc-mode";case vl:return"flow-error-end";case pa:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const r5=Object.freeze(Object.defineProperty({__proto__:null,BOM:gl,DOCUMENT:yl,FLOW_END:vl,SCALAR:pa,createScalarToken:YH,isCollection:e5,isScalar:t5,prettyToken:n5,resolveAsScalar:GH,setScalarValue:XH,stringify:QH,tokenType:ox,visit:Kn},Symbol.toStringTag,{value:"Module"}));function Ot(e){switch(e){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const Ig=new Set("0123456789ABCDEFabcdef"),i5=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Ja=new Set(",[]{}"),a5=new Set(` ,[]{}
\r	`),Zl=e=>!e||a5.has(e);class sx{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,n=!1){if(t){if(typeof t!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let t=this.pos,n=this.buffer[t];for(;n===" "||n==="	";)n=this.buffer[++t];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let n=this.buffer[t];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+t];if(n==="\r"){const i=this.buffer[r+t+1];if(i===`
`||!i&&!this.atEnd)return t+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?t+r:-1}if(n==="-"||n==="."){const r=this.buffer.substr(t,3);if((r==="---"||r==="...")&&Ot(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===gl&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let n=t.length,r=t.indexOf("#");for(;r!==-1;){const a=t[r-1];if(a===" "||a==="	"){n=r-1;break}else r=t.indexOf("#",r+1)}for(;;){const a=t[n-1];if(a===" "||a==="	")n-=1;else break}const i=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-n),yield*this.pushNewline(),"stream"}return yield yl,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&Ot(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Ot(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&Ot(n)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(t===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(t[n]){case"#":yield*this.pushCount(t.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Zl),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,n,r=-1;do t=yield*this.pushNewline(),t>0?(n=yield*this.pushSpaces(!1),this.indentValue=r=n):n=0,n+=yield*this.pushSpaces(!0);while(t+n>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&Ot(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield vl,yield*this.parseLineStart();let a=0;for(;i[a]===",";)a+=yield*this.pushCount(1),a+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(a+=yield*this.pushIndicators(),i[a]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-a),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Zl),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||Ot(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let n=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let a=0;for(;this.buffer[n-1-a]==="\\";)a+=1;if(a%2===0)break;n=this.buffer.indexOf('"',n+1)}const r=this.buffer.substring(0,n);let i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const a=this.continueScalar(i+1);if(a===-1)break;i=r.indexOf(`
`,a)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const n=this.buffer[++t];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>Ot(n)||n==="#")}*parseBlockScalar(){let t=this.pos-1,n=0,r;e:for(let a=this.pos;r=this.buffer[a];++a)switch(r){case" ":n+=1;break;case`
`:t=a,n=0;break;case"\r":{const o=this.buffer[a+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const a=this.continueScalar(t+1);if(a===-1)break;t=this.buffer.indexOf(`
`,a)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let i=t+1;for(r=this.buffer[i];r===" ";)r=this.buffer[++i];if(r==="	"){for(;r==="	"||r===" "||r==="\r"||r===`
`;)r=this.buffer[++i];t=i-1}else if(!this.blockScalarKeep)do{let a=t-1,o=this.buffer[a];o==="\r"&&(o=this.buffer[--a]);const s=a;for(;o===" ";)o=this.buffer[--a];if(o===`
`&&a>=this.pos&&a+1+n>s)t=a;else break}while(!0);return yield pa,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){const a=this.buffer[r+1];if(Ot(a)||t&&Ja.has(a))break;n=r}else if(Ot(i)){let a=this.buffer[r+1];if(i==="\r"&&(a===`
`,a=this.buffer[r+1]):n=r),a==="#"||t&&Ja.has(a))break;if(i===`
`){const o=this.continueScalar(r+1);if(o===-1)break;r=Math.max(r,o-2)}}else{if(t&&Ja.has(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield pa,yield*this.pushToIndex(n+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,n){const r=this.buffer.slice(this.pos,t);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Zl))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,n=this.charAt(1);if(Ot(n)||t&&Ja.has(n))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,n=this.buffer[t];for(;!Ot(n)&&n!==">";)n=this.buffer[++t];return yield*this.pushToIndex(n===">"?t+1:t,!1)}else{let t=this.pos+1,n=this.buffer[t];for(;n;)if(i5.has(n))n=this.buffer[++t];else if(n==="%"&&Ig.has(this.buffer[t+1])&&Ig.has(this.buffer[t+2]))n=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||t&&r==="	");const i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(t){let n=this.pos,r=this.buffer[n];for(;!t(r);)r=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class lx{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let n=0,r=this.lineStarts.length;for(;n<r;){const a=n+r>>1;this.lineStarts[a]<t?n=a+1:r=a}if(this.lineStarts[n]===t)return{line:n+1,col:1};if(n===0)return{line:0,col:t};const i=this.lineStarts[n-1];return{line:n,col:t-i+1}}}}function ln(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function Mg(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function cx(e){switch(e==null?void 0:e.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Qa(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function ir(e){var n;if(e.length===0)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((n=e[++t])==null?void 0:n.type)==="space";);return e.splice(t,e.length)}function Dg(e){if(e.start.type==="flow-seq-start")for(const t of e.items)t.sep&&!t.value&&!ln(t.start,"explicit-key-ind")&&!ln(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,cx(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class _d{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new sx,this.onNewLine=t}*parse(t,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(t,n))yield*this.next(r);n||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}const n=ox(t);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const r=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if(this.type==="doc-end"&&(!t||t.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){const n=t??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&Dg(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{const i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{const i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{const i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&Mg(i.start)===-1&&(n.indent===0||i.start.every(a=>a.type!=="comment"||a.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{Mg(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}const n=this.startBlockValue(t);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){const n=Qa(this.peek(2)),r=ir(n);let i;t.end?(i=t.end,i.push(this.sourceToken),delete t.end):i=[this.sourceToken];const a={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:r,key:t,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){var r;const n=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const i="end"in n.value?n.value.end:void 0,a=Array.isArray(i)?i[i.length-1]:void 0;(a==null?void 0:a.type)==="comment"?i==null||i.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)t.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,t.indent)){const i=t.items[t.items.length-2],a=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(a)){Array.prototype.push.apply(a,n.start),a.push(this.sourceToken),t.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const i=!this.onKeyLine&&this.indent===t.indent,a=i&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let o=[];if(a&&n.sep&&!n.value){const s=[];for(let l=0;l<n.sep.length;++l){const c=n.sep[l];switch(c.type){case"newline":s.push(l);break;case"space":break;case"comment":c.indent>t.indent&&(s.length=0);break;default:s.length=0}}s.length>=2&&(o=n.sep.splice(s[1]))}switch(this.type){case"anchor":case"tag":a||n.value?(o.push(this.sourceToken),t.items.push({start:o}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):a||n.value?(o.push(this.sourceToken),t.items.push({start:o,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(ln(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(cx(n.key)&&!ln(n.sep,"newline")){const s=ir(n.start),l=n.key,c=n.sep;c.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:l,sep:c}]})}else o.length>0?n.sep=n.sep.concat(o,this.sourceToken):n.sep.push(this.sourceToken);else if(ln(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const s=ir(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||a?t.items.push({start:o,key:null,sep:[this.sourceToken]}):ln(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const s=this.flowScalar(this.type);a||n.value?(t.items.push({start:o,key:s,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(s):(Object.assign(n,{key:s,sep:[]}),this.onKeyLine=!0);return}default:{const s=this.startBlockValue(t);if(s){if(s.type==="block-seq"){if(!n.explicitKey&&n.sep&&!ln(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else i&&t.items.push({start:o});this.stack.push(s);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){var r;const n=t.items[t.items.length-1];switch(this.type){case"newline":if(n.value){const i="end"in n.value?n.value.end:void 0,a=Array.isArray(i)?i[i.length-1]:void 0;(a==null?void 0:a.type)==="comment"?i==null||i.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,t.indent)){const i=t.items[t.items.length-2],a=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(a)){Array.prototype.push.apply(a,n.start),a.push(this.sourceToken),t.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=t.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;n.value||ln(n.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>t.indent){const i=this.startBlockValue(t);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){const n=t.items[t.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?t.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!n||n.value?t.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}const r=this.startBlockValue(t);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===t.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const i=Qa(r),a=ir(i);Dg(t);const o=t.end.splice(1,t.end.length);o.push(this.sourceToken);const s={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:a,key:t,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let n=this.source.indexOf(`
`,n)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=Qa(t),r=ir(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=Qa(t),r=ir(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,n){return this.type!=="comment"||this.indent<=n?!1:t.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function ux(e){const t=e.prettyErrors!==!1;return{lineCounter:e.lineCounter||t&&new lx||null,prettyErrors:t}}function o5(e,t={}){const{lineCounter:n,prettyErrors:r}=ux(t),i=new _d(n==null?void 0:n.addNewLine),a=new wd(t),o=Array.from(a.compose(i.parse(e)));if(r&&n)for(const s of o)s.errors.forEach(ms(e,n)),s.warnings.forEach(ms(e,n));return o.length>0?o:Object.assign([],{empty:!0},a.streamInfo())}function fx(e,t={}){const{lineCounter:n,prettyErrors:r}=ux(t),i=new _d(n==null?void 0:n.addNewLine),a=new wd(t);let o=null;for(const s of a.compose(i.parse(e),!0,e.length))if(!o)o=s;else if(o.options.logLevel!=="silent"){o.errors.push(new Cn(s.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(o.errors.forEach(ms(e,n)),o.warnings.forEach(ms(e,n))),o}function s5(e,t,n){let r;typeof t=="function"?r=t:n===void 0&&t&&typeof t=="object"&&(n=t);const i=fx(e,n);if(!i)return null;if(i.warnings.forEach(a=>N0(i.options.logLevel,a)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}function l5(e,t,n){let r=null;if(typeof t=="function"||Array.isArray(t)?r=t:n===void 0&&t&&(n=t),typeof n=="string"&&(n=n.length),typeof n=="number"){const i=Math.round(n);n=i<1?void 0:i>8?{indent:8}:{indent:i}}if(e===void 0){const{keepUndefined:i}=n??t??{};if(!i)return}return Yn(e)&&!r?e.toString(n):new ui(e,r,n).toString(n)}const dx=Object.freeze(Object.defineProperty({__proto__:null,Alias:ol,CST:r5,Composer:wd,Document:ui,Lexer:sx,LineCounter:lx,Pair:Je,Parser:_d,Scalar:ie,Schema:ml,YAMLError:bd,YAMLMap:ct,YAMLParseError:Cn,YAMLSeq:pn,YAMLWarning:X0,isAlias:xn,isCollection:Pe,isDocument:Yn,isMap:oi,isNode:Te,isPair:$e,isScalar:xe,isSeq:si,parse:s5,parseAllDocuments:o5,parseDocument:fx,stringify:l5,visit:Xn,visitAsync:al},Symbol.toStringTag,{value:"Module"})),ec=new Set(["indicator","indicator_macd","indicator_bollinger","indicator_atr"]);function Ei(e){if(!e)return null;if(e.type==="logic"){const t=e.config.mode==="any"?"any":"all",n=(e.children||[]).map(Ei).filter(r=>r!==null);return n.length?{[t]:n}:null}if(e.type==="group"){const t=(e.children||[]).map(Ei).filter(n=>n!==null);return t.length?{all:t}:null}if(e.type==="negation"){const t=Ei((e.children||[])[0]);return t?{not:t}:null}if(e.type==="condition"){const t={field:e.config.field||"close",operator:e.config.operator||"gt",value:Lg(e.config.value)},n=(e.children||[]).find(r=>ec.has(r.type));return n&&(t.field=Za(n.config,n.type)),t}if(e.type==="market_cross"){const t=(e.children||[]).filter(i=>ec.has(i.type));if(t.length<2)return null;const n=t[0],r=t[1];return{cross:{left:Za(n.config,n.type),right:Za(r.config,r.type),direction:e.config.direction==="below"?"below":"above",lookback:Number(e.config.lookback)||1}}}if(e.type==="market_volume"){const t={field:"volume",operator:e.config.operator||"gt",value:Lg(e.config.value)};return e.config.timeframe&&(t.timeframe=e.config.timeframe),t}return ec.has(e.type)?{field:Za(e.config,e.type),operator:"exists",value:!0}:null}function Lg(e){if(e==null)return null;const t=Number(e);return!Number.isNaN(t)&&String(e).trim()!==""?t:e}function Za(e={},t="indicator"){const n=e.source||"close";if(t==="indicator_macd")return`MACD(${n}, ${e.fastPeriod||"12"}, ${e.slowPeriod||"26"}, ${e.signalPeriod||"9"})`;if(t==="indicator_bollinger")return`BOLL(${n}, ${e.period||"20"}, ${e.deviation||"2"})`;if(t==="indicator_atr")return`ATR(${e.source||"hlc3"}, ${e.period||"14"}, ${e.smoothing||"14"})`;const r=(e.kind||"sma").toUpperCase(),i=e.period||"20";return`${r}(${n}, ${i})`}function c5(e){if(!e||!e.length)return{action:"noop"};const t=[];for(const i of e)if(i.type==="action")t.push({type:"order",action:i.config.action||"buy",size:Number(i.config.size)||1});else if(i.type==="delay")t.push({type:"delay",seconds:Number(i.config.seconds)||0});else if(i.type==="take_profit"){const a={type:"take_profit",mode:i.config.mode||"percent",value:Number(i.config.value)||0,size:i.config.size||"full"};i.config.size==="custom"&&(a.customSize=Number(i.config.customSize)||0),t.push(a)}else i.type==="stop_loss"?t.push({type:"stop_loss",mode:i.config.mode||"percent",value:Number(i.config.value)||0,trailing:!!i.config.trailing}):i.type==="close_position"?t.push({type:"close_position",side:i.config.side||"all"}):i.type==="alert"&&t.push({type:"alert",channel:i.config.channel||"email",message:i.config.message||""});const n=t.find(i=>i.type==="order"),r={steps:t};return n&&(r.action=n.action,r.size=n.size),r.action||(r.action="noop"),r}function u5(e){if(!e||!e.length)return{};if(e.length===1)return Ei(e[0])||{};const t=e.map(Ei).filter(n=>n!==null);return t.length?{all:t}:{}}function f5(e,t,n){const r=u5(t),i=c5(n);return{name:e||"Nouvelle stratégie",rules:[{when:r,signal:i}],metadata:{editor:"web-dashboard"}}}function d5(e){if(typeof e=="function")return()=>e();let t=1;return()=>`node-${t++}`}function h5(e,t){return e==="trailing"?!!t:t==null?"":typeof t=="boolean"?t:String(t)}function Ke(e,t,n,r){var o;const a={...il(e)};return Object.entries(t||{}).forEach(([s,l])=>{a[s]=h5(s,l)}),{id:r(),type:e,label:((o=He[e])==null?void 0:o.label)||e,config:a,children:Array.isArray(n)?n:[]}}const p5=/^MACD\(([^,]+),\s*([^,]+),\s*([^,]+),\s*([^)]+)\)$/i,m5=/^BOLL\(([^,]+),\s*([^,]+),\s*([^)]+)\)$/i,g5=/^ATR\(([^,]+),\s*([^,]+),\s*([^)]+)\)$/i,y5=/^([A-Z0-9_]+)\(([^,]+),\s*([^)]+)\)$/i;function eo(e){if(typeof e!="string")return null;const t=e.trim(),n=t.match(p5);if(n)return{type:"indicator_macd",config:{source:n[1].trim(),fastPeriod:n[2].trim(),slowPeriod:n[3].trim(),signalPeriod:n[4].trim()}};const r=t.match(m5);if(r)return{type:"indicator_bollinger",config:{source:r[1].trim(),period:r[2].trim(),deviation:r[3].trim()}};const i=t.match(g5);if(i)return{type:"indicator_atr",config:{source:i[1].trim(),period:i[2].trim(),smoothing:i[3].trim()}};const a=t.match(y5);return a?{type:"indicator",config:{kind:a[1].trim().toLowerCase(),source:a[2].trim(),period:a[3].trim()}}:null}function fo(e,t,n,r="condition"){if(!e||typeof e!="object")return n.push(`${r}: bloc de condition invalide.`),null;if(Array.isArray(e)){if(!e.length)return n.push(`${r}: la condition est vide.`),null;const i=e.map((a,o)=>fo(a,t,n,`${r}[${o}]`)).filter(Boolean);return i.length?Ke("logic",{mode:"all"},i,t):null}if(e.any||e.all){const i=Array.isArray(e.any)?"any":"all",o=(Array.isArray(e[i])?e[i]:[]).map((l,c)=>fo(l,t,n,`${r}.${i}[${c}]`)).filter(Boolean);return o.length?Ke("logic",{mode:i==="any"?"any":"all"},o,t):(n.push(`${r}: aucune sous-condition valide n'a été trouvée.`),null)}if(e.not!==void 0){const i=fo(e.not,t,n,`${r}.not`);return i?Ke("negation",{},[i],t):(n.push(`${r}: la négation n'a pas de bloc valide.`),null)}if(e.cross){if(!Rt(e.cross))return n.push(`${r}: le croisement est mal formé.`),null;const{left:i,right:a,direction:o,lookback:s}=e.cross,l=[],c=eo(i);c?l.push(Ke(c.type,c.config,[],t)):i&&n.push(`${r}: indicateur de gauche inconnu (${i}).`);const f=eo(a);f?l.push(Ke(f.type,f.config,[],t)):a&&n.push(`${r}: indicateur de droite inconnu (${a}).`),l.length<2&&n.push(`${r}: un croisement requiert deux indicateurs valides.`);const u={direction:o==="below"?"below":"above"};return s!==void 0&&(u.lookback=s),Ke("market_cross",u,l.slice(0,2),t)}if(e.operator==="exists"&&e.field){const i=eo(e.field);if(i)return Ke(i.type,i.config,[],t)}if(e.field&&typeof e.field=="string"){if(e.field.trim().toLowerCase()==="volume"){const s={operator:e.operator||"gt",value:e.value,timeframe:e.timeframe};return Ke("market_volume",s,[],t)}const i=eo(e.field),a=[],o={field:e.field,operator:e.operator||"gt",value:e.value};if(i){a.push(Ke(i.type,i.config,[],t));const s=il("condition").field;o.field=s||"close"}return Ke("condition",o,a,t)}return n.push(`${r}: condition non reconnue.`),null}function v5(e,t,n){if(!e||typeof e!="object"||Object.keys(e).length===0)return[];const r=fo(e,t,n,"when");return r?[r]:[]}function b5(e,t,n){if(!e||typeof e!="object")return n.push("Signal invalide dans la stratégie importée."),[];const r=Array.isArray(e.steps)?e.steps:[],i=[],a=()=>{i.some(o=>o.type==="action")||i.unshift(Ke("action",{action:e.action||"buy",size:e.size??1},[],t))};return r.forEach((o,s)=>{if(!Rt(o)){n.push(`Étape de signal invalide à l'index ${s}.`);return}switch(o.type){case"order":i.push(Ke("action",{action:o.action||e.action||"buy",size:o.size??e.size??1},[],t));break;case"delay":i.push(Ke("delay",{seconds:o.seconds??0},[],t));break;case"take_profit":i.push(Ke("take_profit",{mode:o.mode||"percent",value:o.value??0,size:o.size||"full",customSize:o.customSize??""},[],t));break;case"stop_loss":i.push(Ke("stop_loss",{mode:o.mode||"percent",value:o.value??0,trailing:!!o.trailing},[],t));break;case"close_position":i.push(Ke("close_position",{side:o.side||"all"},[],t));break;case"alert":i.push(Ke("alert",{channel:o.channel||"email",message:o.message||""},[],t));break;default:n.push(`Type d'action inconnu: ${o.type}`);break}}),!r.length&&(e.action||e.size)&&a(),i.length||a(),i}function x5(e){const t=e.indexOf("{");if(t===-1)throw new Error("Aucun dictionnaire trouvé dans le fichier Python.");let n=0;for(let r=t;r<e.length;r+=1){const i=e[r];if(i==="{")n+=1;else if(i==="}"&&(n-=1,n===0))return e.slice(t,r+1)}throw new Error("Parenthèses non équilibrées dans le fichier Python.")}function w5(e){const n=x5(e).replace(/\bTrue\b/g,"true").replace(/\bFalse\b/g,"false").replace(/\bNone\b/g,"null");return dx.parse(n)}function _5(e,t="yaml"){const n=[];if(!e||!e.trim())return n.push("Le contenu de la stratégie est vide."),{document:null,errors:n};const r=t==="python"?"python":"yaml";let i=null;try{r==="python"?i=w5(e):i=dx.parse(e)}catch{return n.push("Impossible d'analyser le fichier de stratégie fourni."),{document:null,errors:n}}return Rt(i)?{document:i,errors:n}:(n.push("Le document de stratégie doit être un objet JSON/YAML valide."),{document:null,errors:n})}function S5(e,t){const n=[];if(!Rt(e))return n.push("Le document de stratégie doit être un objet."),{name:"",metadata:{},conditions:[],actions:[],errors:n};const r=d5(t),i=Array.isArray(e.rules)?e.rules:[];if(!i.length)return n.push("La stratégie ne contient aucune règle."),{name:e.name||"",metadata:e.metadata||{},conditions:[],actions:[],errors:n};const a=i[0];if(!Rt(a))return n.push("La règle principale est invalide."),{name:e.name||"",metadata:e.metadata||{},conditions:[],actions:[],errors:n};const o=v5(a.when||{},r,n),s=b5(a.signal||{},r,n);return{name:typeof e.name=="string"?e.name:"",metadata:Rt(e.metadata)?e.metadata:{},conditions:o,actions:s,errors:n}}function tc({code:e,format:t="yaml",createId:n}={}){const r=_5(e,t),i=r.document?S5(r.document,n):{name:"",metadata:{},conditions:[],actions:[],errors:[]};return{name:i.name,metadata:i.metadata,conditions:i.conditions,actions:i.actions,format:t==="python"?"python":"yaml",errors:[...r.errors,...i.errors]}}function Rt(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function hr(e){return"  ".repeat(e)}function O5(e,t){if(Array.isArray(e))return e.length?`
${e.map(n=>`${hr(t+1)}- ${ma(n,t+1)}`).join(`
`)}`:"[]";if(Rt(e)){const n=Object.entries(e);return n.length?`
${n.map(([r,i])=>`${hr(t+1)}${r}: ${ma(i,t+1)}`).join(`
`)}`:"{}"}return typeof e=="string"?/[:\n#-]/.test(e)?`'${e.replace(/'/g,"''")}'`:e:typeof e=="boolean"?e?"true":"false":e==null?"null":String(e)}function ma(e,t){if(Array.isArray(e))return e.length?`
${e.map(r=>{const i=ma(r,t+1);return Array.isArray(r)||Rt(r)?`
${hr(t+2)}${i.trimStart()}`:i}).map((r,i)=>{const a=e[i];return Array.isArray(a)||Rt(a)?`${hr(t+1)}- ${r.trimStart()}`:`${hr(t+1)}- ${r}`}).join(`
`)}`:"[]";if(Rt(e)){const n=Object.entries(e);return n.length?`
${n.map(([r,i])=>`${hr(t+1)}${r}: ${ma(i,t+1)}`).join(`
`)}`:"{}"}return O5(e,t)}function A5(e){return Object.entries(e||{}).map(([n,r])=>`${n}: ${ma(r,0)}`).join(`
`)}function j5(e){return`STRATEGY = ${JSON.stringify(e||{},null,2).replace(/true/g,"True").replace(/false/g,"False").replace(/null/g,"None")}`}function $5(e,t,n){const r=f5(e,t,n);return{document:r,yaml:A5(r),python:j5(r)}}const Sd=[{id:"momentum_breakout",label:"Cassure momentum",description:"Détecte une cassure haussière via le MACD accompagné d'un volume soutenu, puis sécurise la position.",format:"yaml",content:`name: Cassure Momentum
        - type: close_position
`}];function P5(e){return Sd.find(t=>t.id===e)||null}const ar=new Set(Object.keys(He).filter(e=>e.startsWith("indicator"))),Rg={gt:">",gte:"≥",lt:"<",lte:"≤",eq:"=",neq:"≠"};function pr(e){if(e==null||e==="")return null;const t=Number(e);return Number.isNaN(t)?null:t}function Od(e,t,n,r){const i=(t==null?void 0:t.validation)||{},a=(e==null?void 0:e.config)||{},o=Array.isArray(e==null?void 0:e.children)?e.children:[],s=Array.isArray(i.required)?i.required:[];for(const l of s){const c=typeof l=="string"?l:l.field,f=typeof l=="string"?l:l.label||l.field||l.toString(),u=a[c];(u==null||typeof u=="string"&&u.trim()==="")&&r.push(`${n} — ${t.label}: le champ « ${f} » est requis.`)}return typeof i.minChildren=="number"&&o.length<i.minChildren&&r.push(`${n} — ${t.label}: au moins ${i.minChildren} bloc(s) enfant sont requis.`),typeof i.maxChildren=="number"&&o.length>i.maxChildren&&r.push(`${n} — ${t.label}: maximum ${i.maxChildren} bloc(s) enfant autorisés.`),Array.isArray(t.accepts)&&(t.accepts.length===0&&o.length?r.push(`${n} — ${t.label}: n'accepte pas de bloc enfant.`):t.accepts.length>0&&o.forEach((l,c)=>{var f;if(!t.accepts.includes(l.type)){const u=((f=He[l.type])==null?void 0:f.label)||l.type;r.push(`${n} — ${t.label}: le bloc enfant #${c+1} (${u}) est incompatible.`)}})),o}function to(e,t,n){const r=He[e.type];if(!r)return n.push(`${t}: type d'indicateur inconnu (${e.type}).`),null;Od(e,r,t,n);const i=e.config||{};switch(e.type){case"indicator":{const a=(i.kind||"sma").toUpperCase(),o=i.source||"source",s=i.period||"?";return`${a}(${o}, ${s})`}case"indicator_macd":return`MACD(${i.source||"source"}, ${i.fastPeriod||"?"}, ${i.slowPeriod||"?"}, ${i.signalPeriod||"?"})`;case"indicator_bollinger":return`BOLL(${i.source||"source"}, ${i.period||"?"}, ${i.deviation||"?"})`;case"indicator_atr":return`ATR(${i.source||"hlc3"}, ${i.period||"?"}, ${i.smoothing||"?"})`;default:return n.push(`${t}: type d'indicateur non géré (${e.type}).`),null}}function ho(e,t,n){var o,s;const r=He[e.type];if(!r)return n.push(`${t}: type de condition inconnu (${e.type}).`),null;const i=Od(e,r,t,n),a=e.config||{};switch(e.type){case"condition":{let l=a.field||"champ";const c=i.find(d=>ar.has(d.type));if(c){const d=to(c,`${t} > ${((o=He[c.type])==null?void 0:o.label)||c.type}`,n);d&&(l=d)}const f=Rg[a.operator]||a.operator||"?",u=a.value??"?";return`${l} ${f} ${u}`}case"market_cross":{const l=pr(a.lookback);(l===null||l<=0)&&n.push(`${t} — ${r.label}: la fenêtre d'observation doit être un entier positif.`);const[c,f]=i;c&&!ar.has(c.type)&&n.push(`${t} — ${r.label}: seuls des indicateurs peuvent être utilisés.`),f&&!ar.has(f.type)&&n.push(`${t} — ${r.label}: seuls des indicateurs peuvent être utilisés.`);const u=c&&ar.has(c.type)?to(c,`${t} > Indicateur #1`,n):null,d=f&&ar.has(f.type)?to(f,`${t} > Indicateur #2`,n):null;if(!u||!d)return null;const p=a.direction==="below"?"croise sous":"croise au-dessus",v=a.lookback?` (fenêtre ${a.lookback})`:"";return`${u} ${p} ${d}${v}`}case"market_volume":{const l=pr(a.value);(l===null||l<0)&&n.push(`${t} — ${r.label}: le seuil de volume doit être un nombre positif.`);const c=Rg[a.operator]||a.operator||"?",f=a.timeframe?` (${a.timeframe})`:"";return`Volume ${c} ${a.value??"?"}${f}`}case"logic":{const l=a.mode==="any"?" OU ":" ET ",c=i.map((f,u)=>ho(f,`${t} > Bloc ${u+1}`,n)).filter(Boolean);return c.length?c.map(f=>`(${f})`).join(l):null}case"negation":{const[l]=i;if(!l)return null;const c=ho(l,`${t} > ${((s=He[l.type])==null?void 0:s.label)||l.type}`,n);return c?`NON (${c})`:null}case"group":{const l=i.map((c,f)=>ho(c,`${t} > Bloc ${f+1}`,n)).filter(Boolean);return l.length?`(${l.join(" ET ")})`:null}default:return ar.has(e.type)?to(e,t,n):(n.push(`${t}: type de condition non géré (${e.type}).`),null)}}function T5(e,t,n,r){const i=He[e.type];if(!i)return n.push(`${t}: type d'action inconnu (${e.type}).`),null;Od(e,i,t,n).length&&r.push(`${t} — ${i.label}: les blocs enfants seront ignorés lors de l'exécution.`);const o=e.config||{};switch(e.type){case"action":return`${(o.action||"").toUpperCase()||"ACTION"} x${o.size||"?"}`;case"take_profit":{const s=pr(o.value);if((s===null||s<=0)&&n.push(`${t} — ${i.label}: renseignez une valeur numérique strictement positive.`),o.size==="custom"){const f=pr(o.customSize);(f===null||f<=0)&&n.push(`${t} — ${i.label}: la taille personnalisée doit être un nombre positif.`)}const l=o.mode==="price"?" (prix)":"%";let c="";return o.size==="half"?c=" (50 %)":o.size==="custom"?c=` (${o.customSize||"?"})`:c=" (100 %)",`Take-profit ${o.value||"?"}${l}${c}`}case"stop_loss":{const s=pr(o.value);(s===null||s<=0)&&n.push(`${t} — ${i.label}: renseignez une valeur numérique strictement positive.`);const l=o.mode==="price"?" (prix)":"%",c=o.trailing?" (trailing)":"";return`Stop-loss ${o.value||"?"}${l}${c}`}case"close_position":return{all:"Fermer toutes les positions",long:"Fermer les positions longues",short:"Fermer les positions courtes"}[o.side]||`Fermer (${o.side||"?"})`;case"alert":return`Alerte ${o.channel||"?"}: ${o.message||"?"}`;case"delay":{const s=pr(o.seconds);return(s===null||s<0)&&n.push(`${t} — ${i.label}: le délai doit être un nombre positif.`),`Attendre ${o.seconds||"?"}s`}default:return n.push(`${t}: type d'action non géré (${e.type}).`),null}}function E5(e,t){const n=[],r=[],i=[];!e||!e.length?n.push("Ajoutez au moins une condition."):e.forEach((c,f)=>{const u=ho(c,`Condition #${f+1}`,n);u&&i.push(u)});const a=[];!t||!t.length?n.push("Ajoutez au moins une action."):t.forEach((c,f)=>{const u=T5(c,`Action #${f+1}`,n,r);u&&a.push(u)});const o=i.length===0?null:i.length===1?i[0]:i.map(c=>`(${c})`).join(" ET "),s=a.length===0?null:a.join(" puis "),l=o&&s?`${o} ⇒ ${s}`:null;return{errors:n,warnings:r,conditionExpression:o,actionSummary:s,rule:l,isValid:n.length===0}}function N5(e,t){const n=He[e];return{id:`node-${t.current++}`,type:e,label:n?n.label:e,config:il(e),children:[]}}function Ad(e){return{type:e.type,config:e.config,children:Array.isArray(e.children)?e.children.map(t=>Ad(t)):[]}}function Gu(e,t){const n=He[e.type];return{id:`node-${t.current++}`,type:e.type,label:n?n.label:e.type,config:e.config?{...e.config}:il(e.type),children:Array.isArray(e.children)?e.children.map(r=>Gu(r,t)):[]}}function xr(e,t){for(const n of e){if(n.id===t)return n;const r=xr(n.children||[],t);if(r)return r}return null}function Yu(e,t,n){if(!t)return[...e,n];let r=!1;const i=e.map(a=>{if(a.id===t){r=!0;const o=Array.isArray(a.children)?[...a.children,n]:[n];return{...a,children:o}}if(a.children&&a.children.length){const o=Yu(a.children,t,n);if(o!==a.children)return r=!0,{...a,children:o}}return a});return r?i:e}function hx(e,t,n){let r=!1;const i=e.map(a=>{if(a.id===t)return r=!0,n(a);if(a.children&&a.children.length){const o=hx(a.children,t,n);if(o!==a.children)return r=!0,{...a,children:o}}return a});return r?i:e}function px(e,t){let n=!1;const r=[];for(const i of e){if(i.id===t){n=!0;continue}let a=i;if(i.children&&i.children.length){const o=px(i.children,t);o!==i.children&&(a={...i,children:o},n=!0)}r.push(a)}return n?r:e}function mx(e,t,n){const r=e.findIndex(o=>o.id===t);if(r!==-1){const o=e.slice();return o.splice(r+1,0,n),o}let i=!1;const a=e.map(o=>{if(o.children&&o.children.length){const s=mx(o.children,t,n);if(s!==o.children)return i=!0,{...o,children:s}}return o});return i?a:e}function Xu(e,t=0,n=1,r={}){let i=n;return e.forEach(a=>{r[a.id]={row:i,column:t},i+=1,a.children&&a.children.length&&(i=Xu(a.children,t+1,i,r).nextRow)}),{map:r,nextRow:i}}function no(e,t){if(!t)return null;const n=e[t.section];return n?t.nodeId?xr(n,t.nodeId)?t:null:t:null}function k5(e,t){const n=JSON.stringify(e.present),r=JSON.stringify(t);return n===r?e:{past:[...e.past,e.present],present:t,future:[]}}function C5(e){if(!e.past.length)return e;const t=e.past[e.past.length-1];return{past:e.past.slice(0,-1),present:t,future:[e.present,...e.future]}}function I5(e){if(!e.future.length)return e;const[t,...n]=e.future;return{past:[...e.past,e.present],present:t,future:n}}const M5={past:[],present:{conditions:[],actions:[]},future:[]};function D5(e,t){var n;switch(t.type){case"APPLY":{const r=t.updater(e.history.present),i=k5(e.history,r);return i===e.history?e:{...e,history:i,selection:no(i.present,e.selection)}}case"SET_PRESENT":{const r={past:t.resetHistory?[]:e.history.past,present:t.present,future:[]};return{...e,history:r,selection:no(t.present,e.selection)}}case"UNDO":{const r=C5(e.history);return r===e.history?e:{...e,history:r,selection:no(r.present,e.selection)}}case"REDO":{const r=I5(e.history);return r===e.history?e:{...e,history:r,selection:no(r.present,e.selection)}}case"SELECT":return{...e,selection:t.selection};case"CLEAR_SELECTION":return{...e,selection:null};case"COPY":{if(!((n=e.selection)!=null&&n.nodeId))return e;const r=e.history.present[e.selection.section],i=xr(r,e.selection.nodeId);return i?{...e,clipboard:JSON.stringify(Ad(i))}:e}case"CLEAR_CLIPBOARD":return{...e,clipboard:null};case"SET_CLIPBOARD":return{...e,clipboard:t.clipboard};default:return e}}function L5({presets:e,onApply:t}){return!Array.isArray(e)||e.length===0?null:h.jsxs("section",{className:"designer-panel designer-panel--presets","aria-labelledby":"presets-title",children:[h.jsxs("div",{className:"designer-panel__header",children:[h.jsx("h2",{id:"presets-title",className:"heading heading--md",children:"Modèles rapides"}),h.jsx("p",{className:"text text--muted",children:"Chargez une base préconfigurée puis personnalisez-la dans la composition."})]}),h.jsx("div",{className:"designer-panel__body",role:"list","aria-label":"Modèles de stratégies",children:e.map(n=>h.jsxs("article",{className:"palette-item palette-item--preset",role:"listitem",children:[h.jsxs("header",{className:"palette-item__header",children:[h.jsx("div",{children:h.jsx("span",{className:"palette-item__title heading heading--sm",children:n.label})}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>t==null?void 0:t(n.id),"data-testid":`preset-apply-${n.id}`,children:"Charger"})]}),h.jsx("p",{className:"palette-item__description text",children:n.description})]},n.id))})]})}function R5({saveEndpoint:e="/strategies/save",defaultName:t="Nouvelle stratégie",defaultFormat:n="yaml",presets:r=Sd,initialStrategy:i=null}){const a=P.useRef(1),o=((i==null?void 0:i.name)||"").trim()||t,s=(i==null?void 0:i.source_format)==="python"||(i==null?void 0:i.format)==="python"||n==="python"?"python":"yaml",l=i!=null&&i.status_message?{type:i.status_type||"success",message:i.status_message}:{type:"idle",message:null},[c,f]=P.useState(o),[u,d]=P.useState(s),[p,v]=P.useState(l),[m,g]=P.useState(null),[w,b]=P.useReducer(D5,{history:M5,selection:null,clipboard:null}),{conditions:_,actions:S}=w.history.present,{selection:y,clipboard:x}=w,O=P.useMemo(()=>$5(c,_,S),[c,_,S]),j=P.useMemo(()=>E5(_,S),[_,S]),$=P.useMemo(()=>Array.isArray(r)?r:[],[r]),T=P.useRef(null),N=P.useCallback(()=>`node-${a.current++}`,[]),A=P.useRef(!1),E=P.useCallback(q=>{b({type:"APPLY",updater:G=>{const Q=q(G);if(!Q)return G;const te=Array.isArray(Q.conditions)?Q.conditions:G.conditions,ue=Array.isArray(Q.actions)?Q.actions:G.actions;return te===G.conditions&&ue===G.actions?G:{conditions:te,actions:ue}}})},[b]),k=P.useCallback((q,{resetHistory:G=!1}={})=>{b({type:"SET_PRESENT",present:q,resetHistory:G})},[b]),C=P.useCallback(()=>{b({type:"CLEAR_SELECTION"}),b({type:"CLEAR_CLIPBOARD"})},[b]),M=P.useCallback((q,G,Q="")=>{var we;if(!q||Array.isArray(q.errors)&&q.errors.length>0){const Ve=(we=q==null?void 0:q.errors)!=null&&we.length?q.errors.join(" "):"Impossible d'importer la stratégie fournie.";return v({type:"error",message:Ve}),!1}const ue={conditions:Array.isArray(q.conditions)?q.conditions:[],actions:Array.isArray(q.actions)?q.actions:[]};k(ue,{resetHistory:!0}),d(q.format==="python"?"python":"yaml");const ge=(q.name||"").trim()||(Q||"").trim();return ge&&f(ge),g(null),v({type:"success",message:G}),C(),!0},[C,k]),D=P.useCallback(q=>{const G=$.find(te=>te.id===q)||P5(q);if(!G){v({type:"error",message:"Modèle introuvable."});return}const Q=tc({code:G.content,format:G.format,createId:N});M(Q,`Modèle « ${G.label} » chargé.`,G.label)},[M,$,N]),L=()=>{var q;(q=T.current)==null||q.click()},R=async q=>{var ge;const{files:G}=q.target,Q=G&&G[0];if(!Q)return;const te=(ge=Q.name.split(".").pop())==null?void 0:ge.toLowerCase();let ue="yaml";te==="py"||Q.type.includes("python")?ue="python":(te==="yaml"||te==="yml")&&(ue="yaml");try{const we=await Q.text(),Ve=tc({code:we,format:ue,createId:N}),_t=Q.name.replace(/\.[^.]+$/,"").trim();M(Ve,`Fichier « ${Q.name} » importé.`,_t)}catch{v({type:"error",message:"Impossible de lire le fichier sélectionné."})}finally{q.target&&(q.target.value="")}};P.useEffect(()=>{if(!i||A.current)return;A.current=!0;const q=typeof i.source=="string"?i.source:null,G=typeof i.source_format=="string"?i.source_format:typeof i.format=="string"?i.format:null,Q=(i.name||"").toString(),te=typeof i.status_message=="string"?i.status_message:null,ue=typeof i.status_type=="string"?i.status_type:"success";if(q&&G){const ge=tc({code:q,format:G,createId:N}),we=te||(Q?`Stratégie « ${Q} » chargée.`:"Stratégie clonée chargée.");!M(ge,we,Q)&&te&&v({type:ue,message:te})}else Q&&f(Q),te&&v({type:ue,message:te}),G&&d(G==="python"?"python":"yaml")},[i,M,N]);const K=P.useCallback(q=>{b(q?{type:"SELECT",selection:q}:{type:"CLEAR_SELECTION"})},[b]),V=P.useCallback(({section:q,targetId:G,type:Q})=>{var Ve,_t;const te=He[Q];if(!te){v({type:"error",message:"Type de bloc inconnu."});return}if(q==="conditions"&&te.category!=="conditions"){v({type:"error",message:"Ce bloc ne peut pas être utilisé dans les conditions."});return}if(q==="actions"&&te.category!=="actions"){v({type:"error",message:"Ce bloc ne peut pas être utilisé dans les actions."});return}const ge=G?xr(q==="conditions"?_:S,G):null;if(G&&(!ge||!((_t=(Ve=He[ge.type])==null?void 0:Ve.accepts)!=null&&_t.includes(Q)))){v({type:"error",message:"La cible ne peut pas contenir ce type de bloc."});return}const we=N5(Q,a);E(Ct=>({...Ct,[q]:Yu(Ct[q],G,we)})),K({section:q,nodeId:we.id}),v({type:"idle",message:null})},[S,E,_,K]),z=({section:q,type:G})=>{V({section:q,targetId:null,type:G})},X=P.useCallback(({section:q,nodeId:G,config:Q})=>{E(te=>({...te,[q]:hx(te[q],G,ue=>({...ue,config:Q}))})),v({type:"idle",message:null})},[E]),ne=P.useCallback(({section:q,nodeId:G})=>{E(Q=>({...Q,[q]:px(Q[q],G)})),v({type:"idle",message:null})},[E]),he=P.useCallback(q=>{q&&K(q);const G=q||y;G!=null&&G.nodeId&&(b({type:"COPY"}),v({type:"idle",message:null}))},[b,K,y]),Fe=P.useCallback(()=>{if(!x)return null;try{return JSON.parse(x)}catch{return null}},[x]),et=P.useCallback(({section:q,nodeId:G}={})=>{const Q=Fe();if(!Q){v({type:"error",message:"Presse-papiers vide ou invalide."});return}const te=q?{section:q,nodeId:G}:y||{section:"conditions",nodeId:null},ue=te.section||"conditions",ge=He[Q.type];if(!ge){v({type:"error",message:"Bloc inconnu dans le presse-papiers."});return}if(ue==="conditions"&&ge.category!=="conditions"){v({type:"error",message:"Ce bloc ne peut pas être collé dans les conditions."});return}if(ue==="actions"&&ge.category!=="actions"){v({type:"error",message:"Ce bloc ne peut pas être collé dans les actions."});return}let we=null,Ve=!1;const _t=()=>(we||(we=Gu(Q,a)),we);E(Ct=>{var jd;const Jn=Ct[ue]||[];if(te.nodeId){const Na=xr(Jn,te.nodeId),yx=((jd=He[Na==null?void 0:Na.type])==null?void 0:jd.accepts)||[];if(Na&&yx.includes(Q.type)){Ve=!0;const vx=_t();return{...Ct,[ue]:Yu(Jn,te.nodeId,vx)}}}Ve=!0;const gx=_t();return{...Ct,[ue]:[...Jn,gx]}}),we&&Ve?(K({section:ue,nodeId:we.id}),v({type:"idle",message:null})):Ve||v({type:"error",message:"Impossible de coller le bloc ici."})},[E,K,Fe,y]),ke=P.useCallback(({section:q,nodeId:G})=>{const te=xr(q==="actions"?S:_,G);if(!te)return;const ue=Ad(te);let ge=null,we=!1;E(Ve=>{const _t=Ve[q]||[],Ct=Gu(ue,a);ge=Ct;const Jn=mx(_t,G,Ct);return Jn!==_t?(we=!0,{...Ve,[q]:Jn}):(we=!0,{...Ve,[q]:[..._t,Ct]})}),ge&&we&&(K({section:q,nodeId:ge.id}),b({type:"SET_CLIPBOARD",clipboard:JSON.stringify(ue)}),v({type:"idle",message:null}))},[S,E,_,b,K]),H=P.useCallback(q=>{K({section:q,nodeId:null})},[K]),U=P.useCallback(()=>{b({type:"CLEAR_SELECTION"})},[b]),J=w.history.past.length>0,F=w.history.future.length>0,re=!!x,ee=P.useCallback(()=>{J&&b({type:"UNDO"})},[J,b]),pe=P.useCallback(()=>{F&&b({type:"REDO"})},[F,b]);P.useEffect(()=>{const q=G=>{if(!(G.metaKey||G.ctrlKey))return;const te=G.key.toLowerCase();if(te==="z"){G.preventDefault(),G.shiftKey?pe():ee();return}if(te==="y"){G.preventDefault(),pe();return}if(te==="c"){y!=null&&y.nodeId&&(G.preventDefault(),he());return}if(te==="v"){re&&(G.preventDefault(),et());return}te==="d"&&y!=null&&y.nodeId&&(G.preventDefault(),ke(y))};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[he,ke,et,pe,ee,re,y]);const me=P.useMemo(()=>{const q=Xu(_);return Xu(S,0,q.nextRow,q.map).map},[S,_]),Me=j.errors.length?"error":j.warnings.length?"warning":"success",tt=async q=>{if(q.preventDefault(),!j.isValid){v({type:"error",message:"Corrigez la configuration avant d'enregistrer."});return}v({type:"saving",message:"Enregistrement en cours…"}),g(null);const G={name:c.trim(),format:u,code:u==="python"?O.python:O.yaml};try{const Q=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!Q.ok){let ue=`Échec de l'enregistrement (HTTP ${Q.status}).`;try{const ge=await Q.json();ge&&ge.detail&&(ue=Array.isArray(ge.detail)?ge.detail.map(we=>we.msg||we.detail).join("; "):typeof ge.detail=="string"?ge.detail:JSON.stringify(ge.detail))}catch{}v({type:"error",message:ue});return}let te=null;try{te=await Q.json()}catch{te=null}g(te),v({type:"success",message:"Stratégie enregistrée avec succès."})}catch{v({type:"error",message:"Impossible de contacter le service de sauvegarde des stratégies."})}};return h.jsxs("form",{className:"strategy-designer",onSubmit:tt,"aria-labelledby":"designer-title",children:[h.jsxs("header",{className:"strategy-designer__header",children:[h.jsxs("div",{children:[h.jsx("h1",{id:"designer-title",className:"heading heading--lg",children:"Éditeur de stratégies"}),h.jsx("p",{className:"text text--muted",children:"Composez vos règles en glissant-déposant des blocs puis exportez-les vers l'algo-engine."})]}),h.jsxs("div",{className:"strategy-designer__actions",children:[h.jsxs("label",{className:"designer-field strategy-designer__name-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Nom de la stratégie"}),h.jsx("input",{type:"text",value:c,onChange:q=>f(q.target.value),required:!0})]}),h.jsxs("label",{className:"designer-field strategy-designer__format-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Format d'export"}),h.jsxs("select",{value:u,onChange:q=>d(q.target.value),children:[h.jsx("option",{value:"yaml",children:"YAML"}),h.jsx("option",{value:"python",children:"Python"})]})]}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:L,"data-testid":"designer-import-button",children:"Importer un fichier"}),h.jsx("input",{ref:T,type:"file",accept:".yaml,.yml,.py,.json,.txt",style:{display:"none"},onChange:R,"data-testid":"designer-file-input"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:ee,disabled:!J,"data-testid":"designer-undo-button",children:"Annuler"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:pe,disabled:!F,"data-testid":"designer-redo-button",children:"Rétablir"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>et(),disabled:!re,"data-testid":"designer-paste-button",children:"Coller"}),h.jsx("button",{type:"submit",className:"button button--primary",children:"Enregistrer la stratégie"})]})]}),p.message?h.jsx("div",{className:`designer-status designer-status--${p.type}`,role:p.type==="error"?"alert":"status","aria-live":"polite",children:p.message}):null,h.jsxs("div",{className:"strategy-designer__layout",children:[h.jsxs("div",{className:"designer-sidebar",children:[h.jsx(L5,{presets:$,onApply:D}),h.jsx(DW,{onAdd:z})]}),h.jsx(eH,{conditions:_,actions:S,layout:me,selection:y,clipboardAvailable:re,onDrop:V,onConfigChange:X,onRemove:ne,onSelect:K,onSectionFocus:H,onCopy:he,onPaste:et,onDuplicate:ke,onClearSelection:U}),h.jsxs("section",{className:"designer-panel designer-panel--validation","aria-labelledby":"validation-title",children:[h.jsxs("div",{className:"designer-panel__header",children:[h.jsx("h2",{id:"validation-title",className:"heading heading--md",children:"Validation temps réel"}),h.jsx("p",{className:"text text--muted",children:"Contrôlez la cohérence de la règle lors de la composition."})]}),h.jsx("div",{className:"designer-panel__body",children:h.jsx("div",{className:`designer-validation designer-validation--${Me}`,"data-testid":"designer-validation",role:"region","aria-live":"polite",children:j.errors.length?h.jsxs(h.Fragment,{children:[h.jsx("h3",{className:"heading heading--sm",children:"Erreurs de configuration"}),h.jsx("ul",{children:j.errors.map((q,G)=>h.jsx("li",{children:q},G))}),j.warnings.length?h.jsxs(h.Fragment,{children:[h.jsx("h4",{className:"heading heading--xs",children:"Avertissements"}),h.jsx("ul",{children:j.warnings.map((q,G)=>h.jsx("li",{children:q},`warning-${G}`))})]}):null]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text",children:"Règle valide : vous pouvez sauvegarder ou exporter la stratégie."}),j.rule?h.jsx("p",{className:"text text--muted designer-validation__rule",children:j.rule}):null,j.warnings.length?h.jsxs(h.Fragment,{children:[h.jsx("h4",{className:"heading heading--xs",children:"Avertissements"}),h.jsx("ul",{children:j.warnings.map((q,G)=>h.jsx("li",{children:q},`warning-${G}`))})]}):null]})})})]}),h.jsxs("section",{className:"designer-panel designer-panel--preview","aria-labelledby":"preview-title",children:[h.jsxs("div",{className:"designer-panel__header",children:[h.jsx("h2",{id:"preview-title",className:"heading heading--md",children:"Aperçu du code"}),h.jsx("p",{className:"text text--muted",children:"Utilisez les onglets YAML / Python pour vérifier le rendu avant sauvegarde."})]}),h.jsxs("div",{className:"designer-panel__body",children:[h.jsx("textarea",{className:"designer-preview",readOnly:!0,value:u==="python"?O.python:O.yaml,"data-testid":"strategy-preview","aria-label":`Aperçu ${u}`}),m?h.jsxs("details",{className:"designer-response",children:[h.jsx("summary",{children:"Réponse du moteur"}),h.jsx("pre",{children:JSON.stringify(m,null,2)})]}):null]})]})]})]})}const nc=new Map;function _n(e){return!e||typeof e!="string"?"":e.trim().toUpperCase()}function Bg(e,t){if(!e||!t||typeof t!="object")return"";const n=new Map;Object.entries(t).forEach(([i,a])=>{typeof i=="string"&&typeof a=="string"&&n.set(i.toLowerCase(),a)});const r=[];e.id&&r.push(String(e.id)),e.name&&r.push(String(e.name)),e.strategy_type&&r.push(String(e.strategy_type)),r.push("__default__");for(const i of r){const a=n.get(i.toLowerCase());if(a)return a}return""}function B5(e){if(typeof window<"u"&&window.TradingView&&typeof window.TradingView.widget=="function")return Promise.resolve();if(!e)return Promise.reject(new Error("Aucun bundle TradingView disponible"));if(nc.has(e))return nc.get(e);const t=new Promise((n,r)=>{if(typeof document>"u"){r(new Error("Environnement non compatible avec le chargement du script TradingView"));return}const i=document.createElement("script");i.src=e,i.type="text/javascript",i.async=!0,i.onload=()=>n(),i.onerror=a=>{r(new Error("Impossible de charger la librairie TradingView"))},document.body.appendChild(i)});return nc.set(e,t),t}async function F5(e,t){const n=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({overlays:t})});let r={};try{r=await n.json()}catch{r={}}if(!n.ok){const i=(r==null?void 0:r.detail)||(r==null?void 0:r.message),a=typeof i=="string"?i:`HTTP ${n.status}`;throw new Error(a)}return r&&Array.isArray(r.overlays)?r.overlays:t}function U5({configEndpoint:e="/config/tradingview",updateEndpoint:t="/config/tradingview",selectedStrategy:n=null,symbol:r="",onSymbolChange:i}){const a=P.useId().replace(/[:]/g,"-"),o=P.useRef(null),s=P.useRef(null),l=P.useRef(!1),c=P.useRef(""),f=P.useRef(new Set),u=P.useRef([]),[d,p]=P.useState("loading"),[v,m]=P.useState(null),[g,w]=P.useState(null),[b,_]=P.useState(_n(r)),[S,y]=P.useState([]),[x,O]=P.useState("idle"),[j,$]=P.useState({title:"RSI",type:"indicator"});P.useEffect(()=>{u.current=S,!(!l.current||!s.current)&&S.forEach(A=>{if(!A||!A.id||f.current.has(A.id))return;const E=typeof s.current.chart=="function"?s.current.chart():null;if(E){if(A.type==="annotation"){if(typeof E.createShape=="function"){const k=A.settings&&typeof A.settings=="object"?A.settings:{};E.createShape({text:A.title,shape:"label",...k})}}else if(typeof E.createStudy=="function"){const k=A.settings&&typeof A.settings=="object"?A.settings:{},C=Array.isArray(k.inputs)?k.inputs:[],M=k.options&&typeof k.options=="object"?k.options:{},D=typeof k.overlay=="boolean"?k.overlay:!0;E.createStudy(A.title,D,C,M)}f.current.add(A.id)}})},[S]),P.useEffect(()=>{let A=!1;p("loading"),m(null);async function E(){try{const k=await fetch(e,{headers:{Accept:"application/json"}});if(!k.ok)throw new Error(`HTTP ${k.status}`);const C=await k.json();if(A)return;w(C);const M=Array.isArray(C.overlays)?C.overlays:[];y(M),u.current=M,p("ready")}catch(k){A||(p("error"),m(k))}}return E(),()=>{A=!0}},[e]),P.useEffect(()=>{if(d!=="ready"||!g||!o.current)return;let A=!1;async function E(){try{if(await B5(g.library_url),A)return;if(!window.TradingView||typeof window.TradingView.widget!="function")throw new Error("La librairie TradingView n'est pas disponible");const k=_n(b||Bg(n,g.symbol_map)||g.default_symbol)||"BINANCE:BTCUSDT";c.current=k;const C=window.TradingView.widget({symbol:k,interval:"60",container:a,locale:"fr",autosize:!0,timezone:"Etc/UTC",theme:"dark",studies_overrides:{}});s.current=C,f.current=new Set,typeof C.onChartReady=="function"?C.onChartReady(()=>{if(A)return;l.current=!0;const M=c.current||k;M&&typeof C.setSymbol=="function"&&C.setSymbol(M,()=>{}),u.current.forEach(D=>{if(D&&D.id){const L=typeof C.chart=="function"?C.chart():null;if(!L)return;if(D.type==="annotation"){if(typeof L.createShape=="function"){const R=D.settings&&typeof D.settings=="object"?D.settings:{};L.createShape({text:D.title,shape:"label",...R})}}else if(typeof L.createStudy=="function"){const R=D.settings&&typeof D.settings=="object"?D.settings:{},K=Array.isArray(R.inputs)?R.inputs:[],V=R.options&&typeof R.options=="object"?R.options:{},z=typeof R.overlay=="boolean"?R.overlay:!0;L.createStudy(D.title,z,K,V)}f.current.add(D.id)}})}):l.current=!0}catch(k){A||(p("error"),m(k))}}return E(),()=>{A=!0,l.current=!1,s.current&&typeof s.current.remove=="function"&&s.current.remove(),s.current=null,f.current=new Set}},[d,g,a,b,n]);const T=P.useMemo(()=>g?_n(r)||_n(Bg(n,g.symbol_map))||_n(g.default_symbol):_n(r),[r,n,g]);P.useEffect(()=>{if(!g)return;const A=T||"";if(!A)return;if(A===b){c.current=A;return}_(A),c.current=A,l.current&&s.current&&typeof s.current.setSymbol=="function"&&s.current.setSymbol(A,()=>{});const E=_n(r);i&&A&&A!==E&&i(A)},[T,g,b,i,r]);const N=async A=>{A.preventDefault();const E=j.title?j.title.trim():"";if(!E)return;const k=`overlay-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,C=j.type==="annotation"?{shape:"label",text:E}:{overlay:!0,inputs:[],options:{}},M={id:k,title:E,type:j.type,settings:C},D=u.current,L=[...D,M];u.current=L,y(L),O("saving");try{const R=await F5(t,L);u.current=R,y(R),O("saved"),$({title:"",type:j.type})}catch(R){u.current=D,y(D),O("error"),console.error("Impossible de persister les overlays TradingView",R)}};return d==="loading"?h.jsx("div",{className:"tradingview-panel",role:"status",children:"Chargement de la configuration TradingView…"}):d==="error"?h.jsx("div",{className:"tradingview-panel tradingview-panel--error",role:"alert",children:"Impossible d'initialiser le graphique TradingView."}):h.jsxs("section",{className:"tradingview-panel","aria-label":"Graphique TradingView et overlays",children:[h.jsx("div",{id:a,ref:o,className:"tradingview-panel__chart",role:"img","aria-label":`Graphique TradingView pour ${b||"l'instrument sélectionné"}`}),h.jsxs("form",{className:"tradingview-panel__form",onSubmit:N,children:[h.jsxs("label",{className:"tradingview-panel__field",children:[h.jsx("span",{className:"tradingview-panel__label",children:"Nom de l'overlay"}),h.jsx("input",{type:"text",value:j.title,onChange:A=>$(E=>({...E,title:A.target.value})),placeholder:"RSI"})]}),h.jsxs("label",{className:"tradingview-panel__field",children:[h.jsx("span",{className:"tradingview-panel__label",children:"Type"}),h.jsxs("select",{value:j.type,onChange:A=>$(E=>({...E,type:A.target.value})),children:[h.jsx("option",{value:"indicator",children:"Indicateur"}),h.jsx("option",{value:"annotation",children:"Annotation"})]})]}),h.jsx("button",{type:"submit",className:"button button--secondary",children:"Ajouter l'overlay"}),x==="saving"&&h.jsx("span",{className:"tradingview-panel__status",role:"status",children:"Sauvegarde en cours…"}),x==="error"&&h.jsx("span",{className:"tradingview-panel__status tradingview-panel__status--error",role:"alert",children:"Impossible d'enregistrer l'overlay."}),x==="saved"&&h.jsx("span",{className:"tradingview-panel__status tradingview-panel__status--success",role:"status",children:"Overlay enregistré."})]}),h.jsxs("ul",{className:"tradingview-panel__overlays","aria-live":"polite",children:[S.length===0&&h.jsx("li",{className:"tradingview-panel__overlays-empty",children:"Aucun overlay enregistré."}),S.map(A=>h.jsxs("li",{className:"tradingview-panel__overlay",children:[h.jsx("strong",{children:A.title}),h.jsx("span",{className:"tradingview-panel__overlay-type",children:A.type==="annotation"?"Annotation":"Indicateur"})]},A.id))]})]})}const q5=[{value:"15m",label:"15 minutes"},{value:"1h",label:"1 heure"},{value:"4h",label:"4 heures"},{value:"1d",label:"1 jour"}];function rc(e){if(!e||typeof e!="object")return null;const t=Array.isArray(e.equity_curve)?e.equity_curve:[],n=typeof e.pnl=="number"?e.pnl:typeof e.profit_loss=="number"?e.profit_loss:0,r=typeof e.drawdown=="number"?e.drawdown:typeof e.max_drawdown=="number"?e.max_drawdown:0,i=typeof e.total_return=="number"?e.total_return:0,a=typeof e.initial_balance=="number"?e.initial_balance:0;return{...e,equity_curve:t,pnl:n,drawdown:r,total_return:i,initial_balance:a}}function ro(e,t="USD"){try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:t,maximumFractionDigits:2}).format(e||0)}catch{return`${(e||0).toFixed(2)} ${t}`}}function ic(e){return`${(typeof e=="number"?e*100:0).toFixed(2)} %`}function ac(e,t){return!e||!t?"":e.replace("__id__",encodeURIComponent(t))}function z5({strategiesEndpoint:e,runEndpointTemplate:t,uiEndpointTemplate:n,historyEndpointTemplate:r,defaultStrategyId:i="",defaultSymbol:a="BTCUSDT",historyPageSize:o=5,tradingViewConfigEndpoint:s="/config/tradingview",tradingViewUpdateEndpoint:l="/config/tradingview"}){const[c,f]=P.useState([]),[u,d]=P.useState("idle"),[p,v]=P.useState(i),[m,g]=P.useState(a),[w,b]=P.useState("1h"),[_,S]=P.useState(30),[y,x]=P.useState(1e4),[O,j]=P.useState(null),[$,T]=P.useState({items:[],total:0,page:1}),[N,A]=P.useState("idle"),[E,k]=P.useState("idle"),[C,M]=P.useState(""),[D,L]=P.useState(null),R=P.useMemo(()=>c.find(U=>U.id===p)||null,[c,p]),K=P.useCallback(async()=>{if(!e){f([]),d("ready");return}d("loading");try{const U=await fetch(e,{headers:{Accept:"application/json"}});if(!U.ok)throw new Error(`HTTP ${U.status}`);const J=await U.json(),F=Array.isArray(J.items)?J.items.filter(re=>re&&re.id):[];f(F),d("ready"),v(re=>{var ee;return re||(((ee=F[0])==null?void 0:ee.id)??"")})}catch(U){console.error("Impossible de charger les stratégies",U),f([]),d("error"),L(U)}},[e]);P.useEffect(()=>{K()},[K]);const V=P.useCallback(async U=>{if(!U||!n){j(null);return}const J=ac(n,U);try{const F=await fetch(J,{headers:{Accept:"application/json"}});if(!F.ok)throw new Error(`HTTP ${F.status}`);const re=await F.json();j(rc(re))}catch(F){console.error("Impossible de charger les métriques du backtest",F)}},[n]),z=P.useCallback(async(U,J=1,F=!1)=>{if(!U||!r){T({items:[],total:0,page:1});return}const re=ac(r,U);if(re){A("loading");try{const ee=new URL(re,window.location.origin);ee.searchParams.set("page",String(J)),ee.searchParams.set("page_size",String(o));const pe=await fetch(ee.toString(),{headers:{Accept:"application/json"}});if(!pe.ok)throw new Error(`HTTP ${pe.status}`);const me=await pe.json(),tt=(Array.isArray(me.items)?me.items:[]).map(q=>rc(q)).filter(Boolean);T(q=>({page:J,total:typeof me.total=="number"?me.total:tt.length,items:F?[...q.items,...tt]:tt})),A("ready")}catch(ee){console.error("Impossible de charger l'historique des backtests",ee),A("error")}}},[r,o]);P.useEffect(()=>{if(!p){j(null),T({items:[],total:0,page:1});return}V(p),z(p,1,!1)},[p,V,z]);const X=P.useMemo(()=>!O||!Array.isArray(O.equity_curve)?[]:O.equity_curve.map((U,J)=>({index:J,equity:typeof U=="number"?U:Number.parseFloat(U)||0})),[O]),ne=P.useMemo(()=>O&&O.metadata&&O.metadata.currency?O.metadata.currency:"USD",[O]),he=!!(p&&m.trim()),Fe=$.items.length<$.total,et=P.useCallback(async U=>{if(U.preventDefault(),!p){L(new Error("Aucune stratégie sélectionnée."));return}const J=ac(t,p);if(!J){L(new Error("Endpoint de backtest introuvable."));return}k("running"),M(""),L(null);const F={symbol:m.trim(),timeframe:w,lookback_days:_,initial_balance:y};try{const re=await fetch(J,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(F)});if(!re.ok){const me=await re.json().catch(()=>null),Me=me&&me.message?me.message:`HTTP ${re.status}`;throw new Error(Me)}const ee=await re.json(),pe=rc(ee);j(pe),k("success"),M("Backtest exécuté avec succès."),await V(p),await z(p,1,!1)}catch(re){console.error("Échec de l'exécution du backtest",re),k("error"),L(re)}},[p,t,m,w,_,y,V,z]),ke=P.useCallback(U=>{U&&g(U.toUpperCase())},[]),H=P.useCallback(()=>{p&&z(p,$.page+1,!0)},[p,$.page,z]);return h.jsxs("div",{className:"backtest-console",children:[h.jsxs("form",{className:"backtest-console__form",onSubmit:et,children:[h.jsxs("div",{className:"backtest-console__fields",children:[h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Stratégie"}),h.jsxs("select",{value:p,onChange:U=>v(U.target.value),disabled:u==="loading",children:[c.length===0&&h.jsx("option",{value:"",disabled:!0,children:u==="loading"?"Chargement des stratégies…":"Aucune stratégie disponible"}),c.map(U=>h.jsx("option",{value:U.id,children:U.name||U.id},U.id))]})]}),h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Actif"}),h.jsx("input",{type:"text",value:m,onChange:U=>g(U.target.value.toUpperCase()),placeholder:"BTCUSDT"})]}),h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Période"}),h.jsx("select",{value:w,onChange:U=>b(U.target.value),children:q5.map(U=>h.jsx("option",{value:U.value,children:U.label},U.value))})]}),h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Fenêtre (jours)"}),h.jsx("input",{type:"number",min:"1",max:"180",value:_,onChange:U=>S(Math.max(1,Number.parseInt(U.target.value,10)||1))})]}),h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Capital initial"}),h.jsx("input",{type:"number",min:"100",step:"100",value:y,onChange:U=>x(Math.max(100,Number.parseFloat(U.target.value)||100))})]})]}),h.jsx("div",{className:"backtest-console__actions",children:h.jsx("button",{type:"submit",className:"button button--primary",disabled:!he||E==="running",children:E==="running"?"Backtest en cours…":"Lancer le backtest"})})]}),h.jsxs("section",{className:"backtest-console__tradingview","aria-labelledby":"backtest-tradingview-title",children:[h.jsx("h3",{id:"backtest-tradingview-title",className:"heading heading--md",children:"Analyse graphique TradingView"}),h.jsx(U5,{configEndpoint:s,updateEndpoint:l,selectedStrategy:R,symbol:m,onSymbolChange:ke})]}),C&&h.jsx("div",{className:"backtest-console__message",role:"status",children:C}),D&&h.jsx("div",{className:"backtest-console__error",role:"alert",children:D.message||"Une erreur est survenue lors du backtest."}),h.jsxs("section",{className:"backtest-console__results","aria-labelledby":"backtest-results-title",children:[h.jsx("h3",{id:"backtest-results-title",className:"heading heading--md",children:"Résultat du dernier backtest"}),!O&&h.jsx("p",{className:"text text--muted",children:"Lancez un backtest pour visualiser l'équity et les indicateurs de performance."}),O&&h.jsxs(h.Fragment,{children:[h.jsxs("ul",{className:"backtest-console__metrics",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"P&L"}),h.jsx("span",{children:ro(O.pnl,ne)})]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Rendement"}),h.jsx("span",{children:ic(O.total_return)})]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Max drawdown"}),h.jsx("span",{children:ic(O.drawdown)})]})]}),X.length>0?h.jsx("div",{className:"backtest-console__chart",role:"img","aria-label":"Équity du backtest",children:h.jsx(iv,{width:"100%",height:240,children:h.jsxs(h0,{data:X,margin:{top:8,right:16,bottom:8,left:8},children:[h.jsx(od,{strokeDasharray:"3 3"}),h.jsx(ja,{dataKey:"index",tickFormatter:U=>`#${U}`}),h.jsx($a,{tickFormatter:U=>ro(U,ne)}),h.jsx(At,{formatter:U=>ro(U,ne),labelFormatter:U=>`Point ${U}`}),h.jsx(ri,{type:"monotone",dataKey:"equity",stroke:"#2563eb",strokeWidth:2,dot:!1})]})})}):h.jsx("p",{className:"text text--muted",children:"Les données d'équity ne sont pas disponibles pour ce backtest."})]})]}),h.jsxs("section",{className:"backtest-console__history","aria-labelledby":"backtest-history-title",children:[h.jsx("h3",{id:"backtest-history-title",className:"heading heading--md",children:"Historique des backtests"}),N==="error"&&h.jsx("p",{className:"text text--muted",role:"alert",children:"Impossible de charger l'historique pour le moment."}),$.items.length===0&&N!=="error"?h.jsx("p",{className:"text text--muted",children:"Aucun backtest enregistré pour cette stratégie."}):h.jsx("ul",{className:"backtest-console__history-list","aria-live":"polite",children:$.items.map((U,J)=>h.jsxs("li",{children:[h.jsxs("div",{children:[h.jsx("strong",{children:U.metadata&&U.metadata.symbol?`${U.metadata.symbol}`:"Backtest"}),h.jsx("span",{className:"text text--muted",children:U.ran_at?` — ${new Date(U.ran_at).toLocaleString()}`:""})]}),h.jsxs("div",{className:"backtest-console__history-metrics",children:[h.jsx("span",{children:ro(U.pnl,ne)}),h.jsx("span",{children:ic(U.total_return)})]})]},`${U.ran_at||J}-${J}`))}),Fe&&h.jsx("div",{className:"backtest-console__load-more",children:h.jsx("button",{type:"button",className:"button button--secondary",onClick:H,disabled:N==="loading",children:N==="loading"?"Chargement…":"Charger plus"})})]})]})}function K5({onSubmit:e,status:t,errorMessage:n}){const{t:r}=ii(),[i,a]=P.useState(5),[o,s]=P.useState("");async function l(c){c.preventDefault(),await e({rating:Number(i),comment:o.trim()})&&s("")}return h.jsxs("form",{className:"review-form",onSubmit:l,children:[h.jsx("h3",{className:"heading heading--sm",children:r("Partager un avis")}),h.jsxs("div",{className:"review-form__fields",children:[h.jsxs("label",{className:"review-form__field",children:[h.jsx("span",{className:"review-form__label",children:r("Note")}),h.jsx("select",{value:i,onChange:c=>a(c.target.value),className:"input",children:[1,2,3,4,5].map(c=>h.jsx("option",{value:c,children:r("{value} / 5",{value:c})},c))})]}),h.jsxs("label",{className:"review-form__field review-form__field--grow",children:[h.jsx("span",{className:"review-form__label",children:r("Commentaire")}),h.jsx("textarea",{value:o,onChange:c=>s(c.target.value),className:"input",rows:3,placeholder:r("Décrivez votre expérience")})]})]}),h.jsxs("div",{className:"review-form__actions",children:[h.jsx("button",{type:"submit",className:"button",disabled:t==="submitting",children:r(t==="submitting"?"Envoi…":"Envoyer")}),t==="success"&&h.jsx("span",{className:"text text--success",children:r("Avis enregistré")}),t==="error"&&h.jsx("span",{className:"text text--critical",children:n||r("Erreur lors de l'envoi")})]})]})}function W5(e,t,n){const r=Number(e||0)/100;try{return new Intl.NumberFormat(n,{style:"currency",currency:t}).format(r)}catch{return`${r.toFixed(2)} ${t}`}}function Fg(e,t){return e==null?t("ND"):Number.parseFloat(e).toFixed(1)}function H5({listing:e,reviewsEndpoint:t}){const{t:n,i18n:r}=ii(),[i,a]=P.useState(!1),[o,s]=P.useState(e),[l,c]=P.useState([]),[f,u]=P.useState("idle"),[d,p]=P.useState("idle"),[v,m]=P.useState(null);P.useEffect(()=>{s(e)},[e]);const g=P.useCallback(async()=>{u("loading");try{const S=await fetch(t,{headers:{Accept:"application/json"}});if(!S.ok)throw new Error(`HTTP ${S.status}`);const y=await S.json(),x=Array.isArray(y)?y:[];c(x);const O=x.reduce((j,$)=>j+Number($.rating||0),0);s(j=>({...j,reviews_count:x.length,average_rating:x.length?Number((O/x.length).toFixed(2)):null})),u("ready")}catch(S){console.error("Impossible de charger les avis",S),u("error")}},[t]);P.useEffect(()=>{i&&(f==="idle"||f==="error")&&g()},[i,f,g]),P.useEffect(()=>{if(d==="success"){const S=setTimeout(()=>p("idle"),2e3);return()=>clearTimeout(S)}},[d]);const w=P.useMemo(()=>!o||o.average_rating===null||o.average_rating===void 0?n("Non notée"):n("{rating} / 5",{rating:Number.parseFloat(o.average_rating).toFixed(1)}),[o,n]),b=P.useCallback(async({rating:S,comment:y})=>{p("submitting"),m(null);try{const x=await fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({rating:S,comment:y||null})});if(!x.ok)throw new Error(`HTTP ${x.status}`);return await g(),p("success"),!0}catch(x){return console.error("Impossible d'enregistrer l'avis",x),p("error"),m(n("Impossible d'enregistrer l'avis")),!1}},[g,t,n]),_=r.language||"fr";return h.jsxs("article",{className:"marketplace-card",role:"listitem",children:[h.jsxs("header",{className:"marketplace-card__header",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"heading heading--md marketplace-card__title",children:o.strategy_name}),h.jsx("p",{className:"text text--muted marketplace-card__owner",children:n("Créateur #{ownerId}",{ownerId:o.owner_id})})]}),h.jsx("div",{className:"marketplace-card__price","aria-label":n("Prix"),children:W5(o.price_cents,o.currency,_)})]}),o.description&&h.jsx("p",{className:"text marketplace-card__description",children:o.description}),h.jsxs("dl",{className:"marketplace-card__metrics",children:[h.jsxs("div",{className:"marketplace-card__metric",children:[h.jsx("dt",{children:n("Performance")}),h.jsx("dd",{children:Fg(o.performance_score,n)})]}),h.jsxs("div",{className:"marketplace-card__metric",children:[h.jsx("dt",{children:n("Risque")}),h.jsx("dd",{children:Fg(o.risk_score,n)})]}),h.jsxs("div",{className:"marketplace-card__metric",children:[h.jsx("dt",{children:n("Notes")}),h.jsx("dd",{children:w})]}),h.jsxs("div",{className:"marketplace-card__metric",children:[h.jsx("dt",{children:n("Avis")}),h.jsx("dd",{children:o.reviews_count||0})]})]}),h.jsx("div",{className:"marketplace-card__actions",children:h.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>a(S=>!S),children:n(i?"Masquer les détails":"Voir les détails")})}),i&&h.jsxs("div",{className:"marketplace-card__details",children:[h.jsxs("section",{className:"marketplace-card__reviews","aria-label":n("Avis des utilisateurs"),children:[f==="loading"&&h.jsx("p",{className:"text",children:n("Chargement des avis…")}),f==="error"&&h.jsx("p",{className:"text text--critical",children:n("Impossible de récupérer les avis pour le moment.")}),f==="ready"&&l.length===0&&h.jsx("p",{className:"text text--muted",children:n("Aucun avis pour le moment.")}),f==="ready"&&l.length>0&&h.jsx("ul",{className:"reviews",role:"list",children:l.map(S=>h.jsxs("li",{className:"reviews__item",role:"listitem",children:[h.jsxs("div",{className:"reviews__header",children:[h.jsx("span",{className:"reviews__rating",children:n("{rating} / 5",{rating:S.rating})}),h.jsx("time",{dateTime:S.created_at,className:"text text--muted",children:new Intl.DateTimeFormat(_).format(new Date(S.created_at))})]}),S.comment&&h.jsx("p",{className:"text reviews__comment",children:S.comment})]},S.id))})]}),h.jsx(K5,{onSubmit:b,status:d,errorMessage:v})]})]})}function V5(e){const t=new URLSearchParams;return e.search&&t.set("search",e.search),e.minPerformance&&t.set("min_performance",e.minPerformance),e.maxRisk&&t.set("max_risk",e.maxRisk),e.maxPrice&&t.set("max_price",e.maxPrice),e.sort&&t.set("sort",e.sort),t.toString()}function G5({listingsEndpoint:e,reviewsEndpointTemplate:t}){const{t:n}=ii(),[r,i]=P.useState({search:"",minPerformance:"",maxRisk:"",maxPrice:"",sort:"created_desc"}),[a,o]=P.useState({status:"idle",items:[],error:null}),s=P.useMemo(()=>[{value:"created_desc",label:n("Plus récents")},{value:"price_asc",label:n("Prix croissant")},{value:"price_desc",label:n("Prix décroissant")},{value:"performance_desc",label:n("Performance décroissante")},{value:"performance_asc",label:n("Performance croissante")},{value:"risk_asc",label:n("Risque croissant")},{value:"risk_desc",label:n("Risque décroissant")},{value:"rating_desc",label:n("Mieux notées")}],[n]);P.useEffect(()=>{const u=new AbortController;async function d(){o(p=>({...p,status:"loading",error:null}));try{const p=V5(r),v=await fetch(p?`${e}?${p}`:e,{headers:{Accept:"application/json"},signal:u.signal});if(!v.ok)throw new Error(`HTTP ${v.status}`);const m=await v.json();u.signal.aborted||o({status:"ready",items:m||[],error:null})}catch(p){u.signal.aborted||(console.error("Impossible de charger les listings",p),o({status:"error",items:[],error:p}))}}return d(),()=>u.abort()},[r,e]);const l=P.useMemo(()=>!!(r.search||r.minPerformance||r.maxRisk||r.maxPrice||r.sort!=="created_desc"),[r]);function c(u){const{name:d,value:p}=u.target;i(v=>({...v,[d]:p}))}function f(){i({search:"",minPerformance:"",maxRisk:"",maxPrice:"",sort:"created_desc"})}return h.jsxs("div",{className:"marketplace",children:[h.jsxs("header",{className:"marketplace__header",children:[h.jsx("h1",{className:"heading heading--xl",children:n("Marketplace de stratégies")}),h.jsx("p",{className:"text text--muted",children:n("Comparez les stratégies publiées selon la performance, le profil de risque et le budget.")})]}),h.jsx("section",{className:"marketplace__filters","aria-label":n("Filtres de recherche"),children:h.jsxs("form",{className:"marketplace-filters",onSubmit:u=>{u.preventDefault()},children:[h.jsxs("div",{className:"marketplace-filters__row",children:[h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Rechercher")}),h.jsx("input",{type:"search",name:"search",value:r.search,onChange:c,placeholder:n("Nom de stratégie"),className:"input"})]}),h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Performance min.")}),h.jsx("input",{type:"number",step:"0.1",min:"0",name:"minPerformance",value:r.minPerformance,onChange:c,className:"input"})]}),h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Risque max.")}),h.jsx("input",{type:"number",step:"0.1",min:"0",name:"maxRisk",value:r.maxRisk,onChange:c,className:"input"})]}),h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Prix max. (USD)")}),h.jsx("input",{type:"number",min:"0",name:"maxPrice",value:r.maxPrice,onChange:c,className:"input"})]}),h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Tri")}),h.jsx("select",{name:"sort",value:r.sort,onChange:c,className:"input",children:s.map(u=>h.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),h.jsx("div",{className:"marketplace-filters__actions",children:h.jsx("button",{type:"button",className:"button button--ghost",onClick:f,disabled:!l,children:n("Réinitialiser")})})]})}),h.jsxs("section",{className:"marketplace__results","aria-live":"polite",children:[a.status==="loading"&&h.jsx("p",{className:"text",children:n("Chargement des listings…")}),a.status==="error"&&h.jsx("p",{className:"text text--critical",children:n("Impossible de récupérer les listings pour le moment.")}),a.status==="ready"&&a.items.length===0&&h.jsx("p",{className:"text text--muted",children:n("Aucune stratégie ne correspond à vos filtres.")}),a.status==="ready"&&a.items.length>0&&h.jsx("div",{className:"marketplace-grid",role:"list",children:a.items.map(u=>h.jsx(H5,{listing:u,reviewsEndpoint:t.replace("__id__",String(u.id))},u.id))})]})]})}function Y5({label:e,children:t}){const n=P.useId(),[r,i]=P.useState(!1);return h.jsxs("span",{className:`tooltip${r?" tooltip--open":""}`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onFocus:()=>i(!0),onBlur:()=>i(!1),children:[h.jsx("button",{type:"button",className:"tooltip__trigger","aria-describedby":n,children:t}),h.jsx("span",{role:"tooltip",id:n,className:"tooltip__panel",children:e})]})}const Ju=[{id:"connect-broker",title:"Connexion broker",description:"Renseignez les clés API ou OAuth pour relier votre compte broker et synchroniser vos portefeuilles.",tooltip:"Une connexion réussie permet de récupérer automatiquement soldes, positions et historique d'ordres.",videoUrl:"https://www.youtube-nocookie.com/embed/ysz5S6PUM-U",videoTitle:"Connecter un broker"},{id:"create-strategy",title:"Créer une stratégie",description:"Assemblez vos indicateurs, conditions d'entrée/sortie et règles de gestion du risque pour générer un plan trading.",tooltip:"Utilisez l'assistant IA ou le designer visuel pour accélérer la mise en place tout en gardant la main sur les paramètres.",videoUrl:"https://www.youtube-nocookie.com/embed/2alg7MQ6_sI",videoTitle:"Composer une stratégie"},{id:"run-first-test",title:"Premier backtest",description:"Lancez un backtest rapide sur données historiques afin de vérifier la robustesse avant un déploiement live.",tooltip:"Analysez la courbe d'équité, le drawdown et les principaux ratios pour décider d'un passage en production.",videoUrl:"https://www.youtube-nocookie.com/embed/_OBlgSz8sSM",videoTitle:"Réaliser un backtest"}];Ju.map(e=>e.id);function X5(e=[]){if(!Array.isArray(e)||!e.length)return Ju;const t=new Map(Ju.map(n=>[n.id,n]));return e.map(n=>{if(!n||typeof n!="object")return null;const r=t.get(n.id)||{};return{...r,...n,tooltip:n.tooltip??r.tooltip,videoUrl:n.videoUrl??r.videoUrl,videoTitle:n.videoTitle??r.videoTitle??n.title}}).filter(Boolean)}function oc(e){var l;const t=X5(e==null?void 0:e.steps),n=Array.isArray(e==null?void 0:e.completed_steps)?e.completed_steps.filter(c=>t.some(f=>f.id===c)):[],r=[];n.forEach(c=>{r.includes(c)||r.push(c)});const i=(e==null?void 0:e.is_complete)??r.length>=t.length,a=e==null?void 0:e.current_step,o=t.find(c=>!r.includes(c.id)),s=i?null:((l=t.find(c=>c.id===a))==null?void 0:l.id)||(o==null?void 0:o.id)||null;return{userId:(e==null?void 0:e.user_id)??null,steps:t,completedSteps:r,currentStepId:s,isComplete:i,updatedAt:(e==null?void 0:e.updated_at)??null,restartedAt:(e==null?void 0:e.restarted_at)??null}}function J5(e,t){return!e||!t?null:e.replace("__STEP__",encodeURIComponent(t))}function Q5({progressEndpoint:e,stepTemplate:t,resetEndpoint:n,userId:r}){var j,$;const{t:i,i18n:a}=ii(),[o,s]=P.useState(null),[l,c]=P.useState(!0),[f,u]=P.useState(null),[d,p]=P.useState(null),[v,m]=P.useState(!1),g=P.useMemo(()=>{const T={Accept:"application/json"};return r&&(T["X-User-Id"]=r),T},[r]),w=P.useCallback(async()=>{if(!e){u(i("Point d'accès onboarding non configuré.")),s(null),c(!1);return}c(!0),u(null);try{const T=await fetch(e,{method:"GET",headers:{...g},credentials:"same-origin"});if(!T.ok)throw new Error(`HTTP ${T.status}`);const N=await T.json();s(oc(N))}catch(T){console.error("Impossible de charger la progression d'onboarding",T),u(i("Impossible de récupérer la progression pour le moment.")),s(null)}finally{c(!1)}},[e,g,i]),b=P.useCallback(async T=>{const N=J5(t,T);if(!N){u(i("Impossible de déterminer l'étape à enregistrer."));return}p(T),u(null);try{const A=await fetch(N,{method:"POST",headers:{...g},credentials:"same-origin"});if(!A.ok)throw new Error(`HTTP ${A.status}`);const E=await A.json();s(oc(E))}catch(A){console.error("Impossible de marquer l'étape d'onboarding",A),u(i("Enregistrement de l'étape impossible. Réessayez."))}finally{p(null)}},[g,t,i]),_=P.useCallback(async()=>{if(!n){u(i("Point d'accès de réinitialisation manquant."));return}m(!0),u(null);try{const T=await fetch(n,{method:"POST",headers:{...g},credentials:"same-origin"});if(!T.ok)throw new Error(`HTTP ${T.status}`);const N=await T.json();s(oc(N))}catch(T){console.error("Impossible de réinitialiser le tutoriel",T),u(i("Réinitialisation impossible. Merci de réessayer."))}finally{m(!1)}},[g,n,i]);P.useEffect(()=>{w()},[w]);const S=((j=o==null?void 0:o.steps)==null?void 0:j.length)??0,y=(($=o==null?void 0:o.completedSteps)==null?void 0:$.length)??0,x=P.useMemo(()=>a.language||"fr",[a.language]),O=S?o!=null&&o.isComplete?i("{completed} / {total} étapes complétées – Parcours terminé !",{completed:y,total:S}):i("{completed} / {total} étapes complétées",{completed:y,total:S}):i("Chargement du parcours d'onboarding");return h.jsxs("section",{className:"onboarding__container","aria-busy":l||!!d||v,children:[h.jsxs("header",{className:"onboarding__header",children:[h.jsx("p",{className:"onboarding__summary",role:"status","aria-live":"polite",children:O}),h.jsx("button",{type:"button",className:"onboarding__restart",onClick:_,disabled:v||l||!o,children:i(v?"Réinitialisation…":"Relancer le tutoriel")})]}),f?h.jsx("p",{className:"onboarding__error",role:"alert",children:f}):null,l&&!o?h.jsx("p",{className:"onboarding__loading",role:"status",children:i("Chargement du tutoriel…")}):null,o&&S?h.jsxs(h.Fragment,{children:[h.jsx("ol",{className:"onboarding__steps",role:"list","aria-labelledby":"onboarding-title",children:o.steps.map((T,N)=>{const A=o.completedSteps.includes(T.id),E=!A&&(o.currentStepId===T.id||!o.currentStepId&&!o.isComplete&&N===y),k=i(A?"Terminée":E?"Étape en cours":"À faire");return h.jsxs("li",{className:`onboarding-step${A?" onboarding-step--completed":""}${E?" onboarding-step--current":""}`,role:"listitem",children:[h.jsxs("div",{className:"onboarding-step__header",children:[h.jsxs("h3",{className:"onboarding-step__title",children:[T.title,T.tooltip?h.jsxs(Y5,{label:T.tooltip,children:[h.jsx("span",{"aria-hidden":"true",children:"?"}),h.jsx("span",{className:"sr-only",children:i("Aide sur {title}",{title:T.title})})]}):null]}),h.jsx("span",{className:`badge onboarding-step__status${A?" badge--success":E?" badge--info":" badge--neutral"}`,children:k})]}),h.jsx("p",{className:"onboarding-step__description",children:T.description}),T.videoUrl?h.jsxs("details",{className:"onboarding-step__video",children:[h.jsx("summary",{children:i("Voir la vidéo d'accompagnement")}),h.jsx("div",{className:"onboarding-step__video-frame",children:h.jsx("iframe",{src:T.videoUrl,title:T.videoTitle||T.title,allow:"accelerometer; autoplay; encrypted-media",allowFullScreen:!0})})]}):null,h.jsx("div",{className:"onboarding-step__actions",children:h.jsx("button",{type:"button",className:"onboarding-step__action",onClick:()=>b(T.id),disabled:A||d===T.id||l,children:d===T.id?i("Enregistrement…"):i('Marquer "{title}" comme terminé',{title:T.title})})})]},T.id)})}),h.jsx("p",{className:"onboarding__footnote text text--muted",children:o.updatedAt?i("Dernière mise à jour : {timestamp}",{timestamp:new Intl.DateTimeFormat(x,{dateStyle:"short",timeStyle:"short"}).format(new Date(o.updatedAt))}):i("Suivez les étapes pour débloquer l'ensemble des fonctionnalités.")})]}):null]})}function Z5(){const e=document.getElementById("dashboard-bootstrap");if(!e||!e.textContent)return{};try{return JSON.parse(e.textContent)}catch(t){return console.error("Impossible de parser la configuration du tableau de bord",t),{}}}function eV({endpoint:e,currency:t}){const{t:n}=ii(),[r,i]=P.useState({status:"loading",items:[],currency:t});return P.useEffect(()=>{let a=!1;async function o(){i(s=>({...s,status:"loading"}));try{const s=await fetch(e,{headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`HTTP ${s.status}`);const l=await s.json();if(a)return;const c=Array.isArray(l.items)?l.items:[];i({status:"ready",items:c,currency:l.currency||t})}catch(s){a||(console.error("Impossible de récupérer l'historique des portefeuilles",s),i(l=>({...l,status:"error",error:s})))}}return o(),()=>{a=!0}},[e,t]),r.status==="loading"?h.jsx("div",{className:"chart-container__status",role:"status",children:n("Chargement des données historiques…")}):r.status==="error"?h.jsx("div",{className:"chart-container__status",role:"alert",children:n("Impossible de charger l'historique pour le moment.")}):h.jsx(cW,{history:r.items,currency:r.currency||t})}const io=Z5();function on(e,t){e.render(h.jsx(P.StrictMode,{children:h.jsx(Sx,{i18n:Ug,children:t})}))}const ao=document.getElementById("reports-center");if(ao){let e=[];const t=ao.dataset.reports||"[]";try{e=JSON.parse(t)}catch(i){console.error("Impossible de parser la liste des rapports",i)}const n=Number.parseInt(ao.dataset.pageSize||"5",10),r=tn(ao);on(r,h.jsx(NW,{reports:e,pageSize:Number.isNaN(n)?5:n}))}const oo=document.getElementById("portfolio-chart");if(oo){const e=oo.dataset.endpoint||"/portfolios/history",t=oo.dataset.currency||"$",n=tn(oo);on(n,h.jsx(eV,{endpoint:e,currency:t}))}const sc=document.getElementById("alerts-manager");if(sc){const e=sc.dataset||{},t=e.endpoint||"/alerts",n=e.authToken||"",r=(io&&io.context&&Array.isArray(io.context.alerts)?io.context.alerts:[])||[],i=tn(sc);on(i,h.jsx(vW,{initialAlerts:r,endpoint:t,authToken:n}))}const lc=document.getElementById("alerts-history");if(lc){const t=(lc.dataset||{}).endpoint||"/alerts/history",n=tn(lc);on(n,h.jsx(AW,{endpoint:t}))}const cc=document.getElementById("strategy-designer-root");if(cc){const e=cc.dataset||{},t=e.saveEndpoint||"/strategies/save",n=e.defaultName||"Nouvelle stratégie";let i=e.defaultFormat||"yaml";i!=="python"&&(i="yaml");let a=Sd;if(e.presets)try{const l=JSON.parse(e.presets);Array.isArray(l)&&l.length&&(a=l)}catch(l){console.error("Impossible de parser les modèles de stratégies",l)}let o=null;if(e.initialStrategy)try{const l=JSON.parse(e.initialStrategy);l&&typeof l=="object"&&(o=l)}catch(l){console.error("Impossible de parser la stratégie initiale",l)}const s=tn(cc);on(s,h.jsx(R5,{saveEndpoint:t,defaultName:n,defaultFormat:i,presets:a,initialStrategy:o}))}const uc=document.getElementById("marketplace-root");if(uc){const e=uc.dataset||{},t=tn(uc);on(t,h.jsx(G5,{listingsEndpoint:e.endpoint||"/marketplace/listings",reviewsEndpointTemplate:e.reviewsEndpointTemplate||"/marketplace/listings/__id__/reviews"}))}const fc=document.getElementById("ai-strategy-assistant-root");if(fc){const e=fc.dataset||{},t=e.generateEndpoint||"/strategies/generate",n=e.importEndpoint||"/strategies/import",r=tn(fc);on(r,h.jsx(g0,{generateEndpoint:t,importEndpoint:n}))}const dc=document.getElementById("strategy-backtest-root");if(dc){const e=dc.dataset||{},t=Number.parseInt(e.historyPageSize||"5",10),n=tn(dc);on(n,h.jsx(z5,{strategiesEndpoint:e.strategiesEndpoint||"/api/strategies",runEndpointTemplate:e.runEndpointTemplate||"/api/strategies/__id__/backtest",uiEndpointTemplate:e.uiEndpointTemplate||"/api/strategies/__id__/backtest/ui",historyEndpointTemplate:e.historyEndpointTemplate||"/api/strategies/__id__/backtests",defaultStrategyId:e.defaultStrategyId||"",defaultSymbol:e.defaultSymbol||"BTCUSDT",historyPageSize:Number.isNaN(t)?5:t,tradingViewConfigEndpoint:e.tradingviewConfigEndpoint||"/config/tradingview",tradingViewUpdateEndpoint:e.tradingviewUpdateEndpoint||"/config/tradingview"}))}const hc=document.getElementById("onboarding-root");if(hc){const e=hc.dataset||{},t=tn(hc);on(t,h.jsx(Q5,{progressEndpoint:e.progressEndpoint||"",stepTemplate:e.stepTemplate||"",resetEndpoint:e.resetEndpoint||"",userId:e.userId||""}))}function tV(){const e=document.querySelector("[data-language-selector]");e&&e.addEventListener("change",t=>{const{value:n}=t.target;if(!n)return;Ug.changeLanguage(n),document.documentElement.setAttribute("lang",n);const r=`dashboard_lang=${n};path=/;max-age=${60*60*24*365}`;document.cookie=r;const i=new URL(window.location.href);i.searchParams.set("lang",n),window.location.assign(i.toString())})}tV();
${n.map(([r,i])=>`${fa(t+1)}${r}: ${hl(i,t+1)}`).join(`
`)}`:"{}"}return jZ(e,t)}function kZ(e){return Object.entries(e||{}).map(([n,r])=>`${n}: ${hl(r,0)}`).join(`
`)}function TZ(e){return`STRATEGY = ${JSON.stringify(e||{},null,2).replace(/true/g,"True").replace(/false/g,"False").replace(/null/g,"None")}`}function CZ(e,t,n){const r=yZ(e,t,n);return{document:r,yaml:kZ(r),python:TZ(r)}}const Kv=[{id:"momentum_breakout",label:"Cassure momentum",description:"Détecte une cassure haussière via le MACD accompagné d'un volume soutenu, puis sécurise la position.",format:"yaml",content:`name: Cassure Momentum
rules:
  - when:
      all:
        - field: MACD(close, 12, 26, 9)
          operator: gt
          value: 0
        - field: volume
          operator: gt
          value: 150000
          timeframe: 1h
    signal:
      action: buy
      size: 1
      steps:
        - type: order
          action: buy
          size: 1
        - type: take_profit
          mode: percent
          value: 6
          size: half
        - type: stop_loss
          mode: percent
          value: 2
metadata:
  preset: momentum_breakout
`},{id:"mean_reversion",label:"Retour à la moyenne",description:"Vend lorsque le prix touche la bande haute de Bollinger et rouvre lors du retour vers la moyenne.",format:"yaml",content:`name: Retour à la moyenne
rules:
  - when:
      all:
        - field: BOLL(close, 20, 2)
          operator: gt
          value: close
        - field: ATR(hlc3, 14, 14)
          operator: lt
          value: 3
    signal:
      action: sell
      size: 1
      steps:
        - type: order
          action: sell
          size: 1
        - type: take_profit
          mode: price
          value: 0.5
          size: half
        - type: delay
          seconds: 3600
`}];function rte(e){return Ab.find(t=>t.id===e)||null}const ia=new Set(Object.keys(mt).filter(e=>e.startsWith("indicator"))),QS={gt:">",gte:"≥",lt:"<",lte:"≤",eq:"=",neq:"≠"};function Aa(e){if(e==null||e==="")return null;const t=Number(e);return Number.isNaN(t)?null:t}function Pb(e,t,n,r){const i=(t==null?void 0:t.validation)||{},a=(e==null?void 0:e.config)||{},o=Array.isArray(e==null?void 0:e.children)?e.children:[],s=Array.isArray(i.required)?i.required:[];for(const l of s){const u=typeof l=="string"?l:l.field,f=typeof l=="string"?l:l.label||l.field||l.toString(),c=a[u];(c==null||typeof c=="string"&&c.trim()==="")&&r.push(`${n} — ${t.label}: le champ « ${f} » est requis.`)}return typeof i.minChildren=="number"&&o.length<i.minChildren&&r.push(`${n} — ${t.label}: au moins ${i.minChildren} bloc(s) enfant sont requis.`),typeof i.maxChildren=="number"&&o.length>i.maxChildren&&r.push(`${n} — ${t.label}: maximum ${i.maxChildren} bloc(s) enfant autorisés.`),Array.isArray(t.accepts)&&(t.accepts.length===0&&o.length?r.push(`${n} — ${t.label}: n'accepte pas de bloc enfant.`):t.accepts.length>0&&o.forEach((l,u)=>{var f;if(!t.accepts.includes(l.type)){const c=((f=mt[l.type])==null?void 0:f.label)||l.type;r.push(`${n} — ${t.label}: le bloc enfant #${u+1} (${c}) est incompatible.`)}})),o}function Fu(e,t,n){const r=mt[e.type];if(!r)return n.push(`${t}: type d'indicateur inconnu (${e.type}).`),null;Pb(e,r,t,n);const i=e.config||{};switch(e.type){case"indicator":{const a=(i.kind||"sma").toUpperCase(),o=i.source||"source",s=i.period||"?";return`${a}(${o}, ${s})`}case"indicator_macd":return`MACD(${i.source||"source"}, ${i.fastPeriod||"?"}, ${i.slowPeriod||"?"}, ${i.signalPeriod||"?"})`;case"indicator_bollinger":return`BOLL(${i.source||"source"}, ${i.period||"?"}, ${i.deviation||"?"})`;case"indicator_atr":return`ATR(${i.source||"hlc3"}, ${i.period||"?"}, ${i.smoothing||"?"})`;default:return n.push(`${t}: type d'indicateur non géré (${e.type}).`),null}}function cc(e,t,n){var o,s;const r=mt[e.type];if(!r)return n.push(`${t}: type de condition inconnu (${e.type}).`),null;const i=Pb(e,r,t,n),a=e.config||{};switch(e.type){case"condition":{let l=a.field||"champ";const u=i.find(d=>ia.has(d.type));if(u){const d=Fu(u,`${t} > ${((o=mt[u.type])==null?void 0:o.label)||u.type}`,n);d&&(l=d)}const f=QS[a.operator]||a.operator||"?",c=a.value??"?";return`${l} ${f} ${c}`}case"market_cross":{const l=Aa(a.lookback);(l===null||l<=0)&&n.push(`${t} — ${r.label}: la fenêtre d'observation doit être un entier positif.`);const[u,f]=i;u&&!ia.has(u.type)&&n.push(`${t} — ${r.label}: seuls des indicateurs peuvent être utilisés.`),f&&!ia.has(f.type)&&n.push(`${t} — ${r.label}: seuls des indicateurs peuvent être utilisés.`);const c=u&&ia.has(u.type)?Fu(u,`${t} > Indicateur #1`,n):null,d=f&&ia.has(f.type)?Fu(f,`${t} > Indicateur #2`,n):null;if(!c||!d)return null;const p=a.direction==="below"?"croise sous":"croise au-dessus",y=a.lookback?` (fenêtre ${a.lookback})`:"";return`${c} ${p} ${d}${y}`}case"market_volume":{const l=Aa(a.value);(l===null||l<0)&&n.push(`${t} — ${r.label}: le seuil de volume doit être un nombre positif.`);const u=QS[a.operator]||a.operator||"?",f=a.timeframe?` (${a.timeframe})`:"";return`Volume ${u} ${a.value??"?"}${f}`}case"logic":{const l=a.mode==="any"?" OU ":" ET ",u=i.map((f,c)=>cc(f,`${t} > Bloc ${c+1}`,n)).filter(Boolean);return u.length?u.map(f=>`(${f})`).join(l):null}case"negation":{const[l]=i;if(!l)return null;const u=cc(l,`${t} > ${((s=mt[l.type])==null?void 0:s.label)||l.type}`,n);return u?`NON (${u})`:null}case"group":{const l=i.map((u,f)=>cc(u,`${t} > Bloc ${f+1}`,n)).filter(Boolean);return l.length?`(${l.join(" ET ")})`:null}default:return ia.has(e.type)?Fu(e,t,n):(n.push(`${t}: type de condition non géré (${e.type}).`),null)}}function ite(e,t,n,r){const i=mt[e.type];if(!i)return n.push(`${t}: type d'action inconnu (${e.type}).`),null;Pb(e,i,t,n).length&&r.push(`${t} — ${i.label}: les blocs enfants seront ignorés lors de l'exécution.`);const o=e.config||{};switch(e.type){case"action":return`${(o.action||"").toUpperCase()||"ACTION"} x${o.size||"?"}`;case"take_profit":{const s=Aa(o.value);if((s===null||s<=0)&&n.push(`${t} — ${i.label}: renseignez une valeur numérique strictement positive.`),o.size==="custom"){const f=Aa(o.customSize);(f===null||f<=0)&&n.push(`${t} — ${i.label}: la taille personnalisée doit être un nombre positif.`)}const l=o.mode==="price"?" (prix)":"%";let u="";return o.size==="half"?u=" (50 %)":o.size==="custom"?u=` (${o.customSize||"?"})`:u=" (100 %)",`Take-profit ${o.value||"?"}${l}${u}`}case"stop_loss":{const s=Aa(o.value);(s===null||s<=0)&&n.push(`${t} — ${i.label}: renseignez une valeur numérique strictement positive.`);const l=o.mode==="price"?" (prix)":"%",u=o.trailing?" (trailing)":"";return`Stop-loss ${o.value||"?"}${l}${u}`}case"close_position":return{all:"Fermer toutes les positions",long:"Fermer les positions longues",short:"Fermer les positions courtes"}[o.side]||`Fermer (${o.side||"?"})`;case"alert":return`Alerte ${o.channel||"?"}: ${o.message||"?"}`;case"delay":{const s=Aa(o.seconds);return(s===null||s<0)&&n.push(`${t} — ${i.label}: le délai doit être un nombre positif.`),`Attendre ${o.seconds||"?"}s`}default:return n.push(`${t}: type d'action non géré (${e.type}).`),null}}function ate(e,t){const n=[],r=[],i=[];!e||!e.length?n.push("Ajoutez au moins une condition."):e.forEach((u,f)=>{const c=cc(u,`Condition #${f+1}`,n);c&&i.push(c)});const a=[];!t||!t.length?n.push("Ajoutez au moins une action."):t.forEach((u,f)=>{const c=ite(u,`Action #${f+1}`,n,r);c&&a.push(c)});const o=i.length===0?null:i.length===1?i[0]:i.map(u=>`(${u})`).join(" ET "),s=a.length===0?null:a.join(" puis "),l=o&&s?`${o} ⇒ ${s}`:null;return{errors:n,warnings:r,conditionExpression:o,actionSummary:s,rule:l,isValid:n.length===0}}function ote(e,t){const n=mt[e];return{id:`node-${t.current++}`,type:e,label:n?n.label:e,config:qd(e),children:[]}}function kb(e){return{type:e.type,config:e.config,children:Array.isArray(e.children)?e.children.map(t=>kb(t)):[]}}function ny(e,t){const n=mt[e.type];return{id:`node-${t.current++}`,type:e.type,label:n?n.label:e.type,config:e.config?{...e.config}:qd(e.type),children:Array.isArray(e.children)?e.children.map(r=>ny(r,t)):[]}}function Ra(e,t){for(const n of e){if(n.id===t)return n;const r=Ra(n.children||[],t);if(r)return r}return null}function ry(e,t,n){if(!t)return[...e,n];let r=!1;const i=e.map(a=>{if(a.id===t){r=!0;const o=Array.isArray(a.children)?[...a.children,n]:[n];return{...a,children:o}}if(a.children&&a.children.length){const o=ry(a.children,t,n);if(o!==a.children)return r=!0,{...a,children:o}}return a});return r?i:e}function nE(e,t,n){let r=!1;const i=e.map(a=>{if(a.id===t)return r=!0,n(a);if(a.children&&a.children.length){const o=nE(a.children,t,n);if(o!==a.children)return r=!0,{...a,children:o}}return a});return r?i:e}function rE(e,t){let n=!1;const r=[];for(const i of e){if(i.id===t){n=!0;continue}let a=i;if(i.children&&i.children.length){const o=rE(i.children,t);o!==i.children&&(a={...i,children:o},n=!0)}r.push(a)}return n?r:e}function iE(e,t,n){const r=e.findIndex(o=>o.id===t);if(r!==-1){const o=e.slice();return o.splice(r+1,0,n),o}let i=!1;const a=e.map(o=>{if(o.children&&o.children.length){const s=iE(o.children,t,n);if(s!==o.children)return i=!0,{...o,children:s}}return o});return i?a:e}function iy(e,t=0,n=1,r={}){let i=n;return e.forEach(a=>{r[a.id]={row:i,column:t},i+=1,a.children&&a.children.length&&(i=iy(a.children,t+1,i,r).nextRow)}),{map:r,nextRow:i}}function zu(e,t){if(!t)return null;const n=e[t.section];return n?t.nodeId?Ra(n,t.nodeId)?t:null:t:null}function ste(e,t){const n=JSON.stringify(e.present),r=JSON.stringify(t);return n===r?e:{past:[...e.past,e.present],present:t,future:[]}}function lte(e){if(!e.past.length)return e;const t=e.past[e.past.length-1];return{past:e.past.slice(0,-1),present:t,future:[e.present,...e.future]}}function ute(e){if(!e.future.length)return e;const[t,...n]=e.future;return{past:[...e.past,e.present],present:t,future:n}}const cte={past:[],present:{conditions:[],actions:[]},future:[]};function fte(e,t){var n;switch(t.type){case"APPLY":{const r=t.updater(e.history.present),i=ste(e.history,r);return i===e.history?e:{...e,history:i,selection:zu(i.present,e.selection)}}case"SET_PRESENT":{const r={past:t.resetHistory?[]:e.history.past,present:t.present,future:[]};return{...e,history:r,selection:zu(t.present,e.selection)}}case"UNDO":{const r=lte(e.history);return r===e.history?e:{...e,history:r,selection:zu(r.present,e.selection)}}case"REDO":{const r=ute(e.history);return r===e.history?e:{...e,history:r,selection:zu(r.present,e.selection)}}case"SELECT":return{...e,selection:t.selection};case"CLEAR_SELECTION":return{...e,selection:null};case"COPY":{if(!((n=e.selection)!=null&&n.nodeId))return e;const r=e.history.present[e.selection.section],i=Ra(r,e.selection.nodeId);return i?{...e,clipboard:JSON.stringify(kb(i))}:e}case"CLEAR_CLIPBOARD":return{...e,clipboard:null};case"SET_CLIPBOARD":return{...e,clipboard:t.clipboard};default:return e}}function dte({presets:e,onApply:t}){return!Array.isArray(e)||e.length===0?null:h.jsxs("section",{className:"designer-panel designer-panel--presets","aria-labelledby":"presets-title",children:[h.jsxs("div",{className:"designer-panel__header",children:[h.jsx("h2",{id:"presets-title",className:"heading heading--md",children:"Modèles rapides"}),h.jsx("p",{className:"text text--muted",children:"Chargez une base préconfigurée puis personnalisez-la dans la composition."})]}),h.jsx("div",{className:"designer-panel__body",role:"list","aria-label":"Modèles de stratégies",children:e.map(n=>h.jsxs("article",{className:"palette-item palette-item--preset",role:"listitem",children:[h.jsxs("header",{className:"palette-item__header",children:[h.jsx("div",{children:h.jsx("span",{className:"palette-item__title heading heading--sm",children:n.label})}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>t==null?void 0:t(n.id),"data-testid":`preset-apply-${n.id}`,children:"Charger"})]}),h.jsx("p",{className:"palette-item__description text",children:n.description})]},n.id))})]})}function pte({saveEndpoint:e="/strategies/save",defaultName:t="Nouvelle stratégie",defaultFormat:n="yaml",presets:r=Ab,initialStrategy:i=null}){const a=$.useRef(1),o=((i==null?void 0:i.name)||"").trim()||t,s=(i==null?void 0:i.source_format)==="python"||(i==null?void 0:i.format)==="python"||n==="python"?"python":"yaml",l=i!=null&&i.status_message?{type:i.status_type||"success",message:i.status_message}:{type:"idle",message:null},[u,f]=$.useState(o),[c,d]=$.useState(s),[p,y]=$.useState(l),[m,b]=$.useState(null),[w,g]=$.useReducer(fte,{history:cte,selection:null,clipboard:null}),{conditions:x,actions:_}=w.history.present,{selection:v,clipboard:S}=w,O=$.useMemo(()=>nte(u,x,_),[u,x,_]),j=$.useMemo(()=>ate(x,_),[x,_]),A=$.useMemo(()=>Array.isArray(r)?r:[],[r]),k=$.useRef(null),T=$.useCallback(()=>`node-${a.current++}`,[]),P=$.useRef(!1),E=$.useCallback(q=>{g({type:"APPLY",updater:X=>{const te=q(X);if(!te)return X;const ie=Array.isArray(te.conditions)?te.conditions:X.conditions,ge=Array.isArray(te.actions)?te.actions:X.actions;return ie===X.conditions&&ge===X.actions?X:{conditions:ie,actions:ge}}})},[g]),N=$.useCallback((q,{resetHistory:X=!1}={})=>{g({type:"SET_PRESENT",present:q,resetHistory:X})},[g]),I=$.useCallback(()=>{g({type:"CLEAR_SELECTION"}),g({type:"CLEAR_CLIPBOARD"})},[g]),M=$.useCallback((q,X,te="")=>{var $e;if(!q||Array.isArray(q.errors)&&q.errors.length>0){const vt=($e=q==null?void 0:q.errors)!=null&&$e.length?q.errors.join(" "):"Impossible d'importer la stratégie fournie.";return y({type:"error",message:vt}),!1}const ge={conditions:Array.isArray(q.conditions)?q.conditions:[],actions:Array.isArray(q.actions)?q.actions:[]};N(ge,{resetHistory:!0}),d(q.format==="python"?"python":"yaml");const xe=(q.name||"").trim()||(te||"").trim();return xe&&f(xe),b(null),y({type:"success",message:X}),I(),!0},[I,N]),L=$.useCallback(q=>{const X=A.find(ie=>ie.id===q)||rte(q);if(!X){y({type:"error",message:"Modèle introuvable."});return}const te=mh({code:X.content,format:X.format,createId:T});M(te,`Modèle « ${X.label} » chargé.`,X.label)},[M,A,T]),C=()=>{var q;(q=k.current)==null||q.click()},D=async q=>{var xe;const{files:X}=q.target,te=X&&X[0];if(!te)return;const ie=(xe=te.name.split(".").pop())==null?void 0:xe.toLowerCase();let ge="yaml";ie==="py"||te.type.includes("python")?ge="python":(ie==="yaml"||ie==="yml")&&(ge="yaml");try{const $e=await te.text(),vt=mh({code:$e,format:ge,createId:T}),vn=te.name.replace(/\.[^.]+$/,"").trim();M(vt,`Fichier « ${te.name} » importé.`,vn)}catch{y({type:"error",message:"Impossible de lire le fichier sélectionné."})}finally{q.target&&(q.target.value="")}};$.useEffect(()=>{if(!i||P.current)return;P.current=!0;const q=typeof i.source=="string"?i.source:null,X=typeof i.source_format=="string"?i.source_format:typeof i.format=="string"?i.format:null,te=(i.name||"").toString(),ie=typeof i.status_message=="string"?i.status_message:null,ge=typeof i.status_type=="string"?i.status_type:"success";if(q&&X){const xe=mh({code:q,format:X,createId:T}),$e=ie||(te?`Stratégie « ${te} » chargée.`:"Stratégie clonée chargée.");!M(xe,$e,te)&&ie&&y({type:ge,message:ie})}else te&&f(te),ie&&y({type:ge,message:ie}),X&&d(X==="python"?"python":"yaml")},[i,M,T]);const B=$.useCallback(q=>{g(q?{type:"SELECT",selection:q}:{type:"CLEAR_SELECTION"})},[g]),K=$.useCallback(({section:q,targetId:X,type:te})=>{var vt,vn;const ie=mt[te];if(!ie){y({type:"error",message:"Type de bloc inconnu."});return}if(q==="conditions"&&ie.category!=="conditions"){y({type:"error",message:"Ce bloc ne peut pas être utilisé dans les conditions."});return}if(q==="actions"&&ie.category!=="actions"){y({type:"error",message:"Ce bloc ne peut pas être utilisé dans les actions."});return}const xe=X?Ra(q==="conditions"?x:_,X):null;if(X&&(!xe||!((vn=(vt=mt[xe.type])==null?void 0:vt.accepts)!=null&&vn.includes(te)))){y({type:"error",message:"La cible ne peut pas contenir ce type de bloc."});return}const $e=ote(te,a);E(Ln=>({...Ln,[q]:ry(Ln[q],X,$e)})),B({section:q,nodeId:$e.id}),y({type:"idle",message:null})},[_,E,x,B]),z=({section:q,type:X})=>{K({section:q,targetId:null,type:X})},Y=$.useCallback(({section:q,nodeId:X,config:te})=>{E(ie=>({...ie,[q]:nE(ie[q],X,ge=>({...ge,config:te}))})),y({type:"idle",message:null})},[E]),ee=$.useCallback(({section:q,nodeId:X})=>{E(te=>({...te,[q]:rE(te[q],X)})),y({type:"idle",message:null})},[E]),ue=$.useCallback(q=>{q&&B(q);const X=q||v;X!=null&&X.nodeId&&(g({type:"COPY"}),y({type:"idle",message:null}))},[g,B,v]),ke=$.useCallback(()=>{if(!S)return null;try{return JSON.parse(S)}catch{return null}},[S]),Je=$.useCallback(({section:q,nodeId:X}={})=>{const te=ke();if(!te){y({type:"error",message:"Presse-papiers vide ou invalide."});return}const ie=q?{section:q,nodeId:X}:v||{section:"conditions",nodeId:null},ge=ie.section||"conditions",xe=mt[te.type];if(!xe){y({type:"error",message:"Bloc inconnu dans le presse-papiers."});return}if(ge==="conditions"&&xe.category!=="conditions"){y({type:"error",message:"Ce bloc ne peut pas être collé dans les conditions."});return}if(ge==="actions"&&xe.category!=="actions"){y({type:"error",message:"Ce bloc ne peut pas être collé dans les actions."});return}let $e=null,vt=!1;const vn=()=>($e||($e=ny(te,a)),$e);E(Ln=>{var Eb;const Yi=Ln[ge]||[];if(ie.nodeId){const Zl=Ra(Yi,ie.nodeId),uE=((Eb=mt[Zl==null?void 0:Zl.type])==null?void 0:Eb.accepts)||[];if(Zl&&uE.includes(te.type)){vt=!0;const cE=vn();return{...Ln,[ge]:ry(Yi,ie.nodeId,cE)}}}vt=!0;const lE=vn();return{...Ln,[ge]:[...Yi,lE]}}),$e&&vt?(B({section:ge,nodeId:$e.id}),y({type:"idle",message:null})):vt||y({type:"error",message:"Impossible de coller le bloc ici."})},[E,B,ke,v]),Ge=$.useCallback(({section:q,nodeId:X})=>{const ie=Ra(q==="actions"?_:x,X);if(!ie)return;const ge=kb(ie);let xe=null,$e=!1;E(vt=>{const vn=vt[q]||[],Ln=ny(ge,a);xe=Ln;const Yi=iE(vn,X,Ln);return Yi!==vn?($e=!0,{...vt,[q]:Yi}):($e=!0,{...vt,[q]:[...vn,Ln]})}),xe&&$e&&(B({section:q,nodeId:xe.id}),g({type:"SET_CLIPBOARD",clipboard:JSON.stringify(ge)}),y({type:"idle",message:null}))},[_,E,x,g,B]),G=$.useCallback(q=>{B({section:q,nodeId:null})},[B]),V=$.useCallback(()=>{g({type:"CLEAR_SELECTION"})},[g]),Z=w.history.past.length>0,U=w.history.future.length>0,oe=!!S,re=$.useCallback(()=>{Z&&g({type:"UNDO"})},[Z,g]),be=$.useCallback(()=>{U&&g({type:"REDO"})},[U,g]);$.useEffect(()=>{const q=X=>{if(!(X.metaKey||X.ctrlKey))return;const ie=X.key.toLowerCase();if(ie==="z"){X.preventDefault(),X.shiftKey?be():re();return}if(ie==="y"){X.preventDefault(),be();return}if(ie==="c"){v!=null&&v.nodeId&&(X.preventDefault(),ue());return}if(ie==="v"){oe&&(X.preventDefault(),Je());return}ie==="d"&&v!=null&&v.nodeId&&(X.preventDefault(),Ge(v))};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[ue,Ge,Je,be,re,oe,v]);const we=$.useMemo(()=>{const q=iy(x);return iy(_,0,q.nextRow,q.map).map},[_,x]),Ze=j.errors.length?"error":j.warnings.length?"warning":"success",Ct=async q=>{if(q.preventDefault(),!j.isValid){y({type:"error",message:"Corrigez la configuration avant d'enregistrer."});return}y({type:"saving",message:"Enregistrement en cours…"}),b(null);const X={name:u.trim(),format:c,code:c==="python"?O.python:O.yaml};try{const te=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!te.ok){let ge=`Échec de l'enregistrement (HTTP ${te.status}).`;try{const xe=await te.json();xe&&xe.detail&&(ge=Array.isArray(xe.detail)?xe.detail.map($e=>$e.msg||$e.detail).join("; "):typeof xe.detail=="string"?xe.detail:JSON.stringify(xe.detail))}catch{}y({type:"error",message:ge});return}let ie=null;try{ie=await te.json()}catch{ie=null}b(ie),y({type:"success",message:"Stratégie enregistrée avec succès."})}catch{y({type:"error",message:"Impossible de contacter le service de sauvegarde des stratégies."})}};return h.jsxs("form",{className:"strategy-designer",onSubmit:Ct,"aria-labelledby":"designer-title",children:[h.jsxs("header",{className:"strategy-designer__header",children:[h.jsxs("div",{children:[h.jsx("h1",{id:"designer-title",className:"heading heading--lg",children:"Éditeur de stratégies"}),h.jsx("p",{className:"text text--muted",children:"Composez vos règles en glissant-déposant des blocs puis exportez-les vers l'algo-engine."})]}),h.jsxs("div",{className:"strategy-designer__actions",children:[h.jsxs("label",{className:"designer-field strategy-designer__name-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Nom de la stratégie"}),h.jsx("input",{type:"text",value:u,onChange:q=>f(q.target.value),required:!0})]}),h.jsxs("label",{className:"designer-field strategy-designer__format-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Format d'export"}),h.jsxs("select",{value:c,onChange:q=>d(q.target.value),children:[h.jsx("option",{value:"yaml",children:"YAML"}),h.jsx("option",{value:"python",children:"Python"})]})]}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:C,"data-testid":"designer-import-button",children:"Importer un fichier"}),h.jsx("input",{ref:k,type:"file",accept:".yaml,.yml,.py,.json,.txt",style:{display:"none"},onChange:D,"data-testid":"designer-file-input"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:re,disabled:!Z,"data-testid":"designer-undo-button",children:"Annuler"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:be,disabled:!U,"data-testid":"designer-redo-button",children:"Rétablir"}),h.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>Je(),disabled:!oe,"data-testid":"designer-paste-button",children:"Coller"}),h.jsx("button",{type:"submit",className:"button button--primary",children:"Enregistrer la stratégie"})]})]}),p.message?h.jsx("div",{className:`designer-status designer-status--${p.type}`,role:p.type==="error"?"alert":"status","aria-live":"polite",children:p.message}):null,h.jsxs("div",{className:"strategy-designer__layout",children:[h.jsxs("div",{className:"designer-sidebar",children:[h.jsx(dte,{presets:A,onApply:L}),h.jsx(fZ,{onAdd:z})]}),h.jsx($Z,{conditions:x,actions:_,layout:we,selection:v,clipboardAvailable:oe,onDrop:K,onConfigChange:Y,onRemove:ee,onSelect:B,onSectionFocus:G,onCopy:ue,onPaste:Je,onDuplicate:Ge,onClearSelection:V}),h.jsxs("section",{className:"designer-panel designer-panel--validation","aria-labelledby":"validation-title",children:[h.jsxs("div",{className:"designer-panel__header",children:[h.jsx("h2",{id:"validation-title",className:"heading heading--md",children:"Validation temps réel"}),h.jsx("p",{className:"text text--muted",children:"Contrôlez la cohérence de la règle lors de la composition."})]}),h.jsx("div",{className:"designer-panel__body",children:h.jsx("div",{className:`designer-validation designer-validation--${Ze}`,"data-testid":"designer-validation",role:"region","aria-live":"polite",children:j.errors.length?h.jsxs(h.Fragment,{children:[h.jsx("h3",{className:"heading heading--sm",children:"Erreurs de configuration"}),h.jsx("ul",{children:j.errors.map((q,X)=>h.jsx("li",{children:q},X))}),j.warnings.length?h.jsxs(h.Fragment,{children:[h.jsx("h4",{className:"heading heading--xs",children:"Avertissements"}),h.jsx("ul",{children:j.warnings.map((q,X)=>h.jsx("li",{children:q},`warning-${X}`))})]}):null]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text",children:"Règle valide : vous pouvez sauvegarder ou exporter la stratégie."}),j.rule?h.jsx("p",{className:"text text--muted designer-validation__rule",children:j.rule}):null,j.warnings.length?h.jsxs(h.Fragment,{children:[h.jsx("h4",{className:"heading heading--xs",children:"Avertissements"}),h.jsx("ul",{children:j.warnings.map((q,X)=>h.jsx("li",{children:q},`warning-${X}`))})]}):null]})})})]}),h.jsxs("section",{className:"designer-panel designer-panel--preview","aria-labelledby":"preview-title",children:[h.jsxs("div",{className:"designer-panel__header",children:[h.jsx("h2",{id:"preview-title",className:"heading heading--md",children:"Aperçu du code"}),h.jsx("p",{className:"text text--muted",children:"Utilisez les onglets YAML / Python pour vérifier le rendu avant sauvegarde."})]}),h.jsxs("div",{className:"designer-panel__body",children:[h.jsx("textarea",{className:"designer-preview",readOnly:!0,value:c==="python"?O.python:O.yaml,"data-testid":"strategy-preview","aria-label":`Aperçu ${c}`}),m?h.jsxs("details",{className:"designer-response",children:[h.jsx("summary",{children:"Réponse du moteur"}),h.jsx("pre",{children:JSON.stringify(m,null,2)})]}):null]})]})]})]})}const gh=new Map;function oi(e){return!e||typeof e!="string"?"":e.trim().toUpperCase()}function JS(e,t){if(!e||!t||typeof t!="object")return"";const n=new Map;Object.entries(t).forEach(([i,a])=>{typeof i=="string"&&typeof a=="string"&&n.set(i.toLowerCase(),a)});const r=[];e.id&&r.push(String(e.id)),e.name&&r.push(String(e.name)),e.strategy_type&&r.push(String(e.strategy_type)),r.push("__default__");for(const i of r){const a=n.get(i.toLowerCase());if(a)return a}return""}function hte(e){if(typeof window<"u"&&window.TradingView&&typeof window.TradingView.widget=="function")return Promise.resolve();if(!e)return Promise.reject(new Error("Aucun bundle TradingView disponible"));if(gh.has(e))return gh.get(e);const t=new Promise((n,r)=>{if(typeof document>"u"){r(new Error("Environnement non compatible avec le chargement du script TradingView"));return}const i=document.createElement("script");i.src=e,i.type="text/javascript",i.async=!0,i.onload=()=>n(),i.onerror=a=>{r(new Error("Impossible de charger la librairie TradingView"))},document.body.appendChild(i)});return gh.set(e,t),t}async function mte(e,t){const n=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({overlays:t})});let r={};try{r=await n.json()}catch{r={}}if(!n.ok){const i=(r==null?void 0:r.detail)||(r==null?void 0:r.message),a=typeof i=="string"?i:`HTTP ${n.status}`;throw new Error(a)}return r&&Array.isArray(r.overlays)?r.overlays:t}function gte({configEndpoint:e="/config/tradingview",updateEndpoint:t="/config/tradingview",selectedStrategy:n=null,symbol:r="",onSymbolChange:i}){const a=$.useId().replace(/[:]/g,"-"),o=$.useRef(null),s=$.useRef(null),l=$.useRef(!1),u=$.useRef(""),f=$.useRef(new Set),c=$.useRef([]),[d,p]=$.useState("loading"),[y,m]=$.useState(null),[b,w]=$.useState(null),[g,x]=$.useState(oi(r)),[_,v]=$.useState([]),[S,O]=$.useState("idle"),[j,A]=$.useState({title:"RSI",type:"indicator"});$.useEffect(()=>{c.current=_,!(!l.current||!s.current)&&_.forEach(P=>{if(!P||!P.id||f.current.has(P.id))return;const E=typeof s.current.chart=="function"?s.current.chart():null;if(E){if(P.type==="annotation"){if(typeof E.createShape=="function"){const N=P.settings&&typeof P.settings=="object"?P.settings:{};E.createShape({text:P.title,shape:"label",...N})}}else if(typeof E.createStudy=="function"){const N=P.settings&&typeof P.settings=="object"?P.settings:{},I=Array.isArray(N.inputs)?N.inputs:[],M=N.options&&typeof N.options=="object"?N.options:{},L=typeof N.overlay=="boolean"?N.overlay:!0;E.createStudy(P.title,L,I,M)}f.current.add(P.id)}})},[_]),$.useEffect(()=>{let P=!1;p("loading"),m(null);async function E(){try{const N=await fetch(e,{headers:{Accept:"application/json"}});if(!N.ok)throw new Error(`HTTP ${N.status}`);const I=await N.json();if(P)return;w(I);const M=Array.isArray(I.overlays)?I.overlays:[];v(M),c.current=M,p("ready")}catch(N){P||(p("error"),m(N))}}return E(),()=>{P=!0}},[e]),$.useEffect(()=>{if(d!=="ready"||!b||!o.current)return;let P=!1;async function E(){try{if(await hte(b.library_url),P)return;if(!window.TradingView||typeof window.TradingView.widget!="function")throw new Error("La librairie TradingView n'est pas disponible");const N=oi(g||JS(n,b.symbol_map)||b.default_symbol)||"BINANCE:BTCUSDT";u.current=N;const I=window.TradingView.widget({symbol:N,interval:"60",container:a,locale:"fr",autosize:!0,timezone:"Etc/UTC",theme:"dark",studies_overrides:{}});s.current=I,f.current=new Set,typeof I.onChartReady=="function"?I.onChartReady(()=>{if(P)return;l.current=!0;const M=u.current||N;M&&typeof I.setSymbol=="function"&&I.setSymbol(M,()=>{}),c.current.forEach(L=>{if(L&&L.id){const C=typeof I.chart=="function"?I.chart():null;if(!C)return;if(L.type==="annotation"){if(typeof C.createShape=="function"){const D=L.settings&&typeof L.settings=="object"?L.settings:{};C.createShape({text:L.title,shape:"label",...D})}}else if(typeof C.createStudy=="function"){const D=L.settings&&typeof L.settings=="object"?L.settings:{},B=Array.isArray(D.inputs)?D.inputs:[],K=D.options&&typeof D.options=="object"?D.options:{},z=typeof D.overlay=="boolean"?D.overlay:!0;C.createStudy(L.title,z,B,K)}f.current.add(L.id)}})}):l.current=!0}catch(N){P||(p("error"),m(N))}}return E(),()=>{P=!0,l.current=!1,s.current&&typeof s.current.remove=="function"&&s.current.remove(),s.current=null,f.current=new Set}},[d,b,a,g,n]);const k=$.useMemo(()=>b?oi(r)||oi(JS(n,b.symbol_map))||oi(b.default_symbol):oi(r),[r,n,b]);$.useEffect(()=>{if(!b)return;const P=k||"";if(!P)return;if(P===g){u.current=P;return}x(P),u.current=P,l.current&&s.current&&typeof s.current.setSymbol=="function"&&s.current.setSymbol(P,()=>{});const E=oi(r);i&&P&&P!==E&&i(P)},[k,b,g,i,r]);const T=async P=>{P.preventDefault();const E=j.title?j.title.trim():"";if(!E)return;const N=`overlay-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,I=j.type==="annotation"?{shape:"label",text:E}:{overlay:!0,inputs:[],options:{}},M={id:N,title:E,type:j.type,settings:I},L=c.current,C=[...L,M];c.current=C,v(C),O("saving");try{const D=await mte(t,C);c.current=D,v(D),O("saved"),A({title:"",type:j.type})}catch(D){c.current=L,v(L),O("error"),console.error("Impossible de persister les overlays TradingView",D)}};return d==="loading"?h.jsx("div",{className:"tradingview-panel",role:"status",children:"Chargement de la configuration TradingView…"}):d==="error"?h.jsx("div",{className:"tradingview-panel tradingview-panel--error",role:"alert",children:"Impossible d'initialiser le graphique TradingView."}):h.jsxs("section",{className:"tradingview-panel","aria-label":"Graphique TradingView et overlays",children:[h.jsx("div",{id:a,ref:o,className:"tradingview-panel__chart",role:"img","aria-label":`Graphique TradingView pour ${g||"l'instrument sélectionné"}`}),h.jsxs("form",{className:"tradingview-panel__form",onSubmit:T,children:[h.jsxs("label",{className:"tradingview-panel__field",children:[h.jsx("span",{className:"tradingview-panel__label",children:"Nom de l'overlay"}),h.jsx("input",{type:"text",value:j.title,onChange:P=>A(E=>({...E,title:P.target.value})),placeholder:"RSI"})]}),h.jsxs("label",{className:"tradingview-panel__field",children:[h.jsx("span",{className:"tradingview-panel__label",children:"Type"}),h.jsxs("select",{value:j.type,onChange:P=>A(E=>({...E,type:P.target.value})),children:[h.jsx("option",{value:"indicator",children:"Indicateur"}),h.jsx("option",{value:"annotation",children:"Annotation"})]})]}),h.jsx("button",{type:"submit",className:"button button--secondary",children:"Ajouter l'overlay"}),S==="saving"&&h.jsx("span",{className:"tradingview-panel__status",role:"status",children:"Sauvegarde en cours…"}),S==="error"&&h.jsx("span",{className:"tradingview-panel__status tradingview-panel__status--error",role:"alert",children:"Impossible d'enregistrer l'overlay."}),S==="saved"&&h.jsx("span",{className:"tradingview-panel__status tradingview-panel__status--success",role:"status",children:"Overlay enregistré."})]}),h.jsxs("ul",{className:"tradingview-panel__overlays","aria-live":"polite",children:[_.length===0&&h.jsx("li",{className:"tradingview-panel__overlays-empty",children:"Aucun overlay enregistré."}),_.map(P=>h.jsxs("li",{className:"tradingview-panel__overlay",children:[h.jsx("strong",{children:P.title}),h.jsx("span",{className:"tradingview-panel__overlay-type",children:P.type==="annotation"?"Annotation":"Indicateur"})]},P.id))]})]})}const yte=[{value:"15m",label:"15 minutes"},{value:"1h",label:"1 heure"},{value:"4h",label:"4 heures"},{value:"1d",label:"1 jour"}];function yh(e){if(!e||typeof e!="object")return null;const t=Array.isArray(e.equity_curve)?e.equity_curve:[],n=typeof e.pnl=="number"?e.pnl:typeof e.profit_loss=="number"?e.profit_loss:0,r=typeof e.drawdown=="number"?e.drawdown:typeof e.max_drawdown=="number"?e.max_drawdown:0,i=typeof e.total_return=="number"?e.total_return:0,a=typeof e.initial_balance=="number"?e.initial_balance:0;return{...e,equity_curve:t,pnl:n,drawdown:r,total_return:i,initial_balance:a}}function Uu(e,t="USD"){try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:t,maximumFractionDigits:2}).format(e||0)}catch{return`${(e||0).toFixed(2)} ${t}`}}function vh(e){return`${(typeof e=="number"?e*100:0).toFixed(2)} %`}function bh(e,t){return!e||!t?"":e.replace("__id__",encodeURIComponent(t))}function vte({strategiesEndpoint:e,runEndpointTemplate:t,uiEndpointTemplate:n,historyEndpointTemplate:r,defaultStrategyId:i="",defaultSymbol:a="BTCUSDT",historyPageSize:o=5,tradingViewConfigEndpoint:s="/config/tradingview",tradingViewUpdateEndpoint:l="/config/tradingview"}){const[u,f]=$.useState([]),[c,d]=$.useState("idle"),[p,y]=$.useState(i),[m,b]=$.useState(a),[w,g]=$.useState("1h"),[x,_]=$.useState(30),[v,S]=$.useState(1e4),[O,j]=$.useState(null),[A,k]=$.useState({items:[],total:0,page:1}),[T,P]=$.useState("idle"),[E,N]=$.useState("idle"),[I,M]=$.useState(""),[L,C]=$.useState(null),D=$.useMemo(()=>u.find(V=>V.id===p)||null,[u,p]),B=$.useCallback(async()=>{if(!e){f([]),d("ready");return}d("loading");try{const V=await fetch(e,{headers:{Accept:"application/json"}});if(!V.ok)throw new Error(`HTTP ${V.status}`);const Z=await V.json(),U=Array.isArray(Z.items)?Z.items.filter(oe=>oe&&oe.id):[];f(U),d("ready"),y(oe=>{var re;return oe||(((re=U[0])==null?void 0:re.id)??"")})}catch(V){console.error("Impossible de charger les stratégies",V),f([]),d("error"),C(V)}},[e]);$.useEffect(()=>{B()},[B]);const K=$.useCallback(async V=>{if(!V||!n){j(null);return}const Z=bh(n,V);try{const U=await fetch(Z,{headers:{Accept:"application/json"}});if(!U.ok)throw new Error(`HTTP ${U.status}`);const oe=await U.json();j(yh(oe))}catch(U){console.error("Impossible de charger les métriques du backtest",U)}},[n]),z=$.useCallback(async(V,Z=1,U=!1)=>{if(!V||!r){k({items:[],total:0,page:1});return}const oe=bh(r,V);if(oe){P("loading");try{const re=new URL(oe,window.location.origin);re.searchParams.set("page",String(Z)),re.searchParams.set("page_size",String(o));const be=await fetch(re.toString(),{headers:{Accept:"application/json"}});if(!be.ok)throw new Error(`HTTP ${be.status}`);const we=await be.json(),Ct=(Array.isArray(we.items)?we.items:[]).map(q=>yh(q)).filter(Boolean);k(q=>({page:Z,total:typeof we.total=="number"?we.total:Ct.length,items:U?[...q.items,...Ct]:Ct})),P("ready")}catch(re){console.error("Impossible de charger l'historique des backtests",re),P("error")}}},[r,o]);$.useEffect(()=>{if(!p){j(null),k({items:[],total:0,page:1});return}K(p),z(p,1,!1)},[p,K,z]);const Y=$.useMemo(()=>!O||!Array.isArray(O.equity_curve)?[]:O.equity_curve.map((V,Z)=>({index:Z,equity:typeof V=="number"?V:Number.parseFloat(V)||0})),[O]),ee=$.useMemo(()=>O&&O.metadata&&O.metadata.currency?O.metadata.currency:"USD",[O]),ue=!!(p&&m.trim()),ke=A.items.length<A.total,Je=$.useCallback(async V=>{if(V.preventDefault(),!p){C(new Error("Aucune stratégie sélectionnée."));return}const Z=bh(t,p);if(!Z){C(new Error("Endpoint de backtest introuvable."));return}N("running"),M(""),C(null);const U={symbol:m.trim(),timeframe:w,lookback_days:x,initial_balance:v};try{const oe=await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(U)});if(!oe.ok){const we=await oe.json().catch(()=>null),Ze=we&&we.message?we.message:`HTTP ${oe.status}`;throw new Error(Ze)}const re=await oe.json(),be=yh(re);j(be),N("success"),M("Backtest exécuté avec succès."),await K(p),await z(p,1,!1)}catch(oe){console.error("Échec de l'exécution du backtest",oe),N("error"),C(oe)}},[p,t,m,w,x,v,K,z]),Ge=$.useCallback(V=>{V&&b(V.toUpperCase())},[]),G=$.useCallback(()=>{p&&z(p,A.page+1,!0)},[p,A.page,z]);return h.jsxs("div",{className:"backtest-console",children:[h.jsxs("form",{className:"backtest-console__form",onSubmit:Je,children:[h.jsxs("div",{className:"backtest-console__fields",children:[h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Stratégie"}),h.jsxs("select",{value:p,onChange:V=>y(V.target.value),disabled:c==="loading",children:[u.length===0&&h.jsx("option",{value:"",disabled:!0,children:c==="loading"?"Chargement des stratégies…":"Aucune stratégie disponible"}),u.map(V=>h.jsx("option",{value:V.id,children:V.name||V.id},V.id))]})]}),h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Actif"}),h.jsx("input",{type:"text",value:m,onChange:V=>b(V.target.value.toUpperCase()),placeholder:"BTCUSDT"})]}),h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Période"}),h.jsx("select",{value:w,onChange:V=>g(V.target.value),children:yte.map(V=>h.jsx("option",{value:V.value,children:V.label},V.value))})]}),h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Fenêtre (jours)"}),h.jsx("input",{type:"number",min:"1",max:"180",value:x,onChange:V=>_(Math.max(1,Number.parseInt(V.target.value,10)||1))})]}),h.jsxs("label",{className:"designer-field",children:[h.jsx("span",{className:"designer-field__label text text--muted",children:"Capital initial"}),h.jsx("input",{type:"number",min:"100",step:"100",value:v,onChange:V=>S(Math.max(100,Number.parseFloat(V.target.value)||100))})]})]}),h.jsx("div",{className:"backtest-console__actions",children:h.jsx("button",{type:"submit",className:"button button--primary",disabled:!ue||E==="running",children:E==="running"?"Backtest en cours…":"Lancer le backtest"})})]}),h.jsxs("section",{className:"backtest-console__tradingview","aria-labelledby":"backtest-tradingview-title",children:[h.jsx("h3",{id:"backtest-tradingview-title",className:"heading heading--md",children:"Analyse graphique TradingView"}),h.jsx(gte,{configEndpoint:s,updateEndpoint:l,selectedStrategy:D,symbol:m,onSymbolChange:Ge})]}),I&&h.jsx("div",{className:"backtest-console__message",role:"status",children:I}),L&&h.jsx("div",{className:"backtest-console__error",role:"alert",children:L.message||"Une erreur est survenue lors du backtest."}),h.jsxs("section",{className:"backtest-console__results","aria-labelledby":"backtest-results-title",children:[h.jsx("h3",{id:"backtest-results-title",className:"heading heading--md",children:"Résultat du dernier backtest"}),!O&&h.jsx("p",{className:"text text--muted",children:"Lancez un backtest pour visualiser l'équity et les indicateurs de performance."}),O&&h.jsxs(h.Fragment,{children:[h.jsxs("ul",{className:"backtest-console__metrics",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"P&L"}),h.jsx("span",{children:Uu(O.pnl,ee)})]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Rendement"}),h.jsx("span",{children:vh(O.total_return)})]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Max drawdown"}),h.jsx("span",{children:vh(O.drawdown)})]})]}),Y.length>0?h.jsx("div",{className:"backtest-console__chart",role:"img","aria-label":"Équity du backtest",children:h.jsx(UA,{width:"100%",height:240,children:h.jsxs(e$,{data:Y,margin:{top:8,right:16,bottom:8,left:8},children:[h.jsx(ub,{strokeDasharray:"3 3"}),h.jsx(Gl,{dataKey:"index",tickFormatter:V=>`#${V}`}),h.jsx(Yl,{tickFormatter:V=>Uu(V,ee)}),h.jsx(On,{formatter:V=>Uu(V,ee),labelFormatter:V=>`Point ${V}`}),h.jsx(No,{type:"monotone",dataKey:"equity",stroke:"#2563eb",strokeWidth:2,dot:!1})]})})}):h.jsx("p",{className:"text text--muted",children:"Les données d'équity ne sont pas disponibles pour ce backtest."})]})]}),h.jsxs("section",{className:"backtest-console__history","aria-labelledby":"backtest-history-title",children:[h.jsx("h3",{id:"backtest-history-title",className:"heading heading--md",children:"Historique des backtests"}),T==="error"&&h.jsx("p",{className:"text text--muted",role:"alert",children:"Impossible de charger l'historique pour le moment."}),A.items.length===0&&T!=="error"?h.jsx("p",{className:"text text--muted",children:"Aucun backtest enregistré pour cette stratégie."}):h.jsx("ul",{className:"backtest-console__history-list","aria-live":"polite",children:A.items.map((V,Z)=>h.jsxs("li",{children:[h.jsxs("div",{children:[h.jsx("strong",{children:V.metadata&&V.metadata.symbol?`${V.metadata.symbol}`:"Backtest"}),h.jsx("span",{className:"text text--muted",children:V.ran_at?` — ${new Date(V.ran_at).toLocaleString()}`:""})]}),h.jsxs("div",{className:"backtest-console__history-metrics",children:[h.jsx("span",{children:Uu(V.pnl,ee)}),h.jsx("span",{children:vh(V.total_return)})]})]},`${V.ran_at||Z}-${Z}`))}),ke&&h.jsx("div",{className:"backtest-console__load-more",children:h.jsx("button",{type:"button",className:"button button--secondary",onClick:G,disabled:T==="loading",children:T==="loading"?"Chargement…":"Charger plus"})})]})]})}function bte({onSubmit:e,status:t,errorMessage:n}){const{t:r}=Co(),[i,a]=$.useState(5),[o,s]=$.useState("");async function l(u){u.preventDefault(),await e({rating:Number(i),comment:o.trim()})&&s("")}return h.jsxs("form",{className:"review-form",onSubmit:l,children:[h.jsx("h3",{className:"heading heading--sm",children:r("Partager un avis")}),h.jsxs("div",{className:"review-form__fields",children:[h.jsxs("label",{className:"review-form__field",children:[h.jsx("span",{className:"review-form__label",children:r("Note")}),h.jsx("select",{value:i,onChange:u=>a(u.target.value),className:"input",children:[1,2,3,4,5].map(u=>h.jsx("option",{value:u,children:r("{value} / 5",{value:u})},u))})]}),h.jsxs("label",{className:"review-form__field review-form__field--grow",children:[h.jsx("span",{className:"review-form__label",children:r("Commentaire")}),h.jsx("textarea",{value:o,onChange:u=>s(u.target.value),className:"input",rows:3,placeholder:r("Décrivez votre expérience")})]})]}),h.jsxs("div",{className:"review-form__actions",children:[h.jsx("button",{type:"submit",className:"button",disabled:t==="submitting",children:r(t==="submitting"?"Envoi…":"Envoyer")}),t==="success"&&h.jsx("span",{className:"text text--success",children:r("Avis enregistré")}),t==="error"&&h.jsx("span",{className:"text text--critical",children:n||r("Erreur lors de l'envoi")})]})]})}function wte(e,t,n){const r=Number(e||0)/100;try{return new Intl.NumberFormat(n,{style:"currency",currency:t}).format(r)}catch{return`${r.toFixed(2)} ${t}`}}function ZS(e,t){return e==null?t("ND"):Number.parseFloat(e).toFixed(1)}function xte({listing:e,reviewsEndpoint:t}){const{t:n,i18n:r}=Co(),[i,a]=$.useState(!1),[o,s]=$.useState(e),[l,u]=$.useState([]),[f,c]=$.useState("idle"),[d,p]=$.useState("idle"),[y,m]=$.useState(null);$.useEffect(()=>{s(e)},[e]);const b=$.useCallback(async()=>{c("loading");try{const _=await fetch(t,{headers:{Accept:"application/json"}});if(!_.ok)throw new Error(`HTTP ${_.status}`);const v=await _.json(),S=Array.isArray(v)?v:[];u(S);const O=S.reduce((j,A)=>j+Number(A.rating||0),0);s(j=>({...j,reviews_count:S.length,average_rating:S.length?Number((O/S.length).toFixed(2)):null})),c("ready")}catch(_){console.error("Impossible de charger les avis",_),c("error")}},[t]);$.useEffect(()=>{i&&(f==="idle"||f==="error")&&b()},[i,f,b]),$.useEffect(()=>{if(d==="success"){const _=setTimeout(()=>p("idle"),2e3);return()=>clearTimeout(_)}},[d]);const w=$.useMemo(()=>!o||o.average_rating===null||o.average_rating===void 0?n("Non notée"):n("{rating} / 5",{rating:Number.parseFloat(o.average_rating).toFixed(1)}),[o,n]),g=$.useCallback(async({rating:_,comment:v})=>{p("submitting"),m(null);try{const S=await fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({rating:_,comment:v||null})});if(!S.ok)throw new Error(`HTTP ${S.status}`);return await b(),p("success"),!0}catch(S){return console.error("Impossible d'enregistrer l'avis",S),p("error"),m(n("Impossible d'enregistrer l'avis")),!1}},[b,t,n]),x=r.language||"fr";return h.jsxs("article",{className:"marketplace-card",role:"listitem",children:[h.jsxs("header",{className:"marketplace-card__header",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"heading heading--md marketplace-card__title",children:o.strategy_name}),h.jsx("p",{className:"text text--muted marketplace-card__owner",children:n("Créateur #{ownerId}",{ownerId:o.owner_id})})]}),h.jsx("div",{className:"marketplace-card__price","aria-label":n("Prix"),children:wte(o.price_cents,o.currency,x)})]}),o.description&&h.jsx("p",{className:"text marketplace-card__description",children:o.description}),h.jsxs("dl",{className:"marketplace-card__metrics",children:[h.jsxs("div",{className:"marketplace-card__metric",children:[h.jsx("dt",{children:n("Performance")}),h.jsx("dd",{children:ZS(o.performance_score,n)})]}),h.jsxs("div",{className:"marketplace-card__metric",children:[h.jsx("dt",{children:n("Risque")}),h.jsx("dd",{children:ZS(o.risk_score,n)})]}),h.jsxs("div",{className:"marketplace-card__metric",children:[h.jsx("dt",{children:n("Notes")}),h.jsx("dd",{children:w})]}),h.jsxs("div",{className:"marketplace-card__metric",children:[h.jsx("dt",{children:n("Avis")}),h.jsx("dd",{children:o.reviews_count||0})]})]}),h.jsx("div",{className:"marketplace-card__actions",children:h.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>a(_=>!_),children:n(i?"Masquer les détails":"Voir les détails")})}),i&&h.jsxs("div",{className:"marketplace-card__details",children:[h.jsxs("section",{className:"marketplace-card__reviews","aria-label":n("Avis des utilisateurs"),children:[f==="loading"&&h.jsx("p",{className:"text",children:n("Chargement des avis…")}),f==="error"&&h.jsx("p",{className:"text text--critical",children:n("Impossible de récupérer les avis pour le moment.")}),f==="ready"&&l.length===0&&h.jsx("p",{className:"text text--muted",children:n("Aucun avis pour le moment.")}),f==="ready"&&l.length>0&&h.jsx("ul",{className:"reviews",role:"list",children:l.map(_=>h.jsxs("li",{className:"reviews__item",role:"listitem",children:[h.jsxs("div",{className:"reviews__header",children:[h.jsx("span",{className:"reviews__rating",children:n("{rating} / 5",{rating:_.rating})}),h.jsx("time",{dateTime:_.created_at,className:"text text--muted",children:new Intl.DateTimeFormat(x).format(new Date(_.created_at))})]}),_.comment&&h.jsx("p",{className:"text reviews__comment",children:_.comment})]},_.id))})]}),h.jsx(bte,{onSubmit:g,status:d,errorMessage:y})]})]})}function Ste(e){const t=new URLSearchParams;return e.search&&t.set("search",e.search),e.minPerformance&&t.set("min_performance",e.minPerformance),e.maxRisk&&t.set("max_risk",e.maxRisk),e.maxPrice&&t.set("max_price",e.maxPrice),e.sort&&t.set("sort",e.sort),t.toString()}function _te({listingsEndpoint:e,reviewsEndpointTemplate:t}){const{t:n}=Co(),[r,i]=$.useState({search:"",minPerformance:"",maxRisk:"",maxPrice:"",sort:"created_desc"}),[a,o]=$.useState({status:"idle",items:[],error:null}),s=$.useMemo(()=>[{value:"created_desc",label:n("Plus récents")},{value:"price_asc",label:n("Prix croissant")},{value:"price_desc",label:n("Prix décroissant")},{value:"performance_desc",label:n("Performance décroissante")},{value:"performance_asc",label:n("Performance croissante")},{value:"risk_asc",label:n("Risque croissant")},{value:"risk_desc",label:n("Risque décroissant")},{value:"rating_desc",label:n("Mieux notées")}],[n]);$.useEffect(()=>{const c=new AbortController;async function d(){o(p=>({...p,status:"loading",error:null}));try{const p=Ste(r),y=await fetch(p?`${e}?${p}`:e,{headers:{Accept:"application/json"},signal:c.signal});if(!y.ok)throw new Error(`HTTP ${y.status}`);const m=await y.json();c.signal.aborted||o({status:"ready",items:m||[],error:null})}catch(p){c.signal.aborted||(console.error("Impossible de charger les listings",p),o({status:"error",items:[],error:p}))}}return d(),()=>c.abort()},[r,e]);const l=$.useMemo(()=>!!(r.search||r.minPerformance||r.maxRisk||r.maxPrice||r.sort!=="created_desc"),[r]);function u(c){const{name:d,value:p}=c.target;i(y=>({...y,[d]:p}))}function f(){i({search:"",minPerformance:"",maxRisk:"",maxPrice:"",sort:"created_desc"})}return h.jsxs("div",{className:"marketplace",children:[h.jsxs("header",{className:"marketplace__header",children:[h.jsx("h1",{className:"heading heading--xl",children:n("Marketplace de stratégies")}),h.jsx("p",{className:"text text--muted",children:n("Comparez les stratégies publiées selon la performance, le profil de risque et le budget.")})]}),h.jsx("section",{className:"marketplace__filters","aria-label":n("Filtres de recherche"),children:h.jsxs("form",{className:"marketplace-filters",onSubmit:c=>{c.preventDefault()},children:[h.jsxs("div",{className:"marketplace-filters__row",children:[h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Rechercher")}),h.jsx("input",{type:"search",name:"search",value:r.search,onChange:u,placeholder:n("Nom de stratégie"),className:"input"})]}),h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Performance min.")}),h.jsx("input",{type:"number",step:"0.1",min:"0",name:"minPerformance",value:r.minPerformance,onChange:u,className:"input"})]}),h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Risque max.")}),h.jsx("input",{type:"number",step:"0.1",min:"0",name:"maxRisk",value:r.maxRisk,onChange:u,className:"input"})]}),h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Prix max. (USD)")}),h.jsx("input",{type:"number",min:"0",name:"maxPrice",value:r.maxPrice,onChange:u,className:"input"})]}),h.jsxs("label",{className:"marketplace-filters__field",children:[h.jsx("span",{className:"marketplace-filters__label",children:n("Tri")}),h.jsx("select",{name:"sort",value:r.sort,onChange:u,className:"input",children:s.map(c=>h.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),h.jsx("div",{className:"marketplace-filters__actions",children:h.jsx("button",{type:"button",className:"button button--ghost",onClick:f,disabled:!l,children:n("Réinitialiser")})})]})}),h.jsxs("section",{className:"marketplace__results","aria-live":"polite",children:[a.status==="loading"&&h.jsx("p",{className:"text",children:n("Chargement des listings…")}),a.status==="error"&&h.jsx("p",{className:"text text--critical",children:n("Impossible de récupérer les listings pour le moment.")}),a.status==="ready"&&a.items.length===0&&h.jsx("p",{className:"text text--muted",children:n("Aucune stratégie ne correspond à vos filtres.")}),a.status==="ready"&&a.items.length>0&&h.jsx("div",{className:"marketplace-grid",role:"list",children:a.items.map(c=>h.jsx(xte,{listing:c,reviewsEndpoint:t.replace("__id__",String(c.id))},c.id))})]})]})}function Ote({label:e,children:t}){const n=$.useId(),[r,i]=$.useState(!1);return h.jsxs("span",{className:`tooltip${r?" tooltip--open":""}`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onFocus:()=>i(!0),onBlur:()=>i(!1),children:[h.jsx("button",{type:"button",className:"tooltip__trigger","aria-describedby":n,children:t}),h.jsx("span",{role:"tooltip",id:n,className:"tooltip__panel",children:e})]})}const ay=[{id:"connect-broker",title:"Connexion broker",description:"Renseignez les clés API ou OAuth pour relier votre compte broker et synchroniser vos portefeuilles.",tooltip:"Une connexion réussie permet de récupérer automatiquement soldes, positions et historique d'ordres.",videoUrl:"https://www.youtube-nocookie.com/embed/ysz5S6PUM-U",videoTitle:"Connecter un broker"},{id:"create-strategy",title:"Créer une stratégie",description:"Assemblez vos indicateurs, conditions d'entrée/sortie et règles de gestion du risque pour générer un plan trading.",tooltip:"Utilisez l'assistant IA ou le designer visuel pour accélérer la mise en place tout en gardant la main sur les paramètres.",videoUrl:"https://www.youtube-nocookie.com/embed/2alg7MQ6_sI",videoTitle:"Composer une stratégie"},{id:"run-first-test",title:"Premier backtest",description:"Lancez un backtest rapide sur données historiques afin de vérifier la robustesse avant un déploiement live.",tooltip:"Analysez la courbe d'équité, le drawdown et les principaux ratios pour décider d'un passage en production.",videoUrl:"https://www.youtube-nocookie.com/embed/_OBlgSz8sSM",videoTitle:"Réaliser un backtest"}];ay.map(e=>e.id);function jte(e=[]){if(!Array.isArray(e)||!e.length)return ay;const t=new Map(ay.map(n=>[n.id,n]));return e.map(n=>{if(!n||typeof n!="object")return null;const r=t.get(n.id)||{};return{...r,...n,tooltip:n.tooltip??r.tooltip,videoUrl:n.videoUrl??r.videoUrl,videoTitle:n.videoTitle??r.videoTitle??n.title}}).filter(Boolean)}function wh(e){var l;const t=jte(e==null?void 0:e.steps),n=Array.isArray(e==null?void 0:e.completed_steps)?e.completed_steps.filter(u=>t.some(f=>f.id===u)):[],r=[];n.forEach(u=>{r.includes(u)||r.push(u)});const i=(e==null?void 0:e.is_complete)??r.length>=t.length,a=e==null?void 0:e.current_step,o=t.find(u=>!r.includes(u.id)),s=i?null:((l=t.find(u=>u.id===a))==null?void 0:l.id)||(o==null?void 0:o.id)||null;return{userId:(e==null?void 0:e.user_id)??null,steps:t,completedSteps:r,currentStepId:s,isComplete:i,updatedAt:(e==null?void 0:e.updated_at)??null,restartedAt:(e==null?void 0:e.restarted_at)??null}}function Ate(e,t){return!e||!t?null:e.replace("__STEP__",encodeURIComponent(t))}function Pte({progressEndpoint:e,stepTemplate:t,resetEndpoint:n,userId:r}){var j,A;const{t:i,i18n:a}=Co(),[o,s]=$.useState(null),[l,u]=$.useState(!0),[f,c]=$.useState(null),[d,p]=$.useState(null),[y,m]=$.useState(!1),b=$.useMemo(()=>{const k={Accept:"application/json"};return r&&(k["X-User-Id"]=r),k},[r]),w=$.useCallback(async()=>{if(!e){c(i("Point d'accès onboarding non configuré.")),s(null),u(!1);return}u(!0),c(null);try{const k=await fetch(e,{method:"GET",headers:{...b},credentials:"same-origin"});if(!k.ok)throw new Error(`HTTP ${k.status}`);const T=await k.json();s(wh(T))}catch(k){console.error("Impossible de charger la progression d'onboarding",k),c(i("Impossible de récupérer la progression pour le moment.")),s(null)}finally{u(!1)}},[e,b,i]),g=$.useCallback(async k=>{const T=Ate(t,k);if(!T){c(i("Impossible de déterminer l'étape à enregistrer."));return}p(k),c(null);try{const P=await fetch(T,{method:"POST",headers:{...b},credentials:"same-origin"});if(!P.ok)throw new Error(`HTTP ${P.status}`);const E=await P.json();s(wh(E))}catch(P){console.error("Impossible de marquer l'étape d'onboarding",P),c(i("Enregistrement de l'étape impossible. Réessayez."))}finally{p(null)}},[b,t,i]),x=$.useCallback(async()=>{if(!n){c(i("Point d'accès de réinitialisation manquant."));return}m(!0),c(null);try{const k=await fetch(n,{method:"POST",headers:{...b},credentials:"same-origin"});if(!k.ok)throw new Error(`HTTP ${k.status}`);const T=await k.json();s(wh(T))}catch(k){console.error("Impossible de réinitialiser le tutoriel",k),c(i("Réinitialisation impossible. Merci de réessayer."))}finally{m(!1)}},[b,n,i]);$.useEffect(()=>{w()},[w]);const _=((j=o==null?void 0:o.steps)==null?void 0:j.length)??0,v=((A=o==null?void 0:o.completedSteps)==null?void 0:A.length)??0,S=$.useMemo(()=>a.language||"fr",[a.language]),O=_?o!=null&&o.isComplete?i("{completed} / {total} étapes complétées – Parcours terminé !",{completed:v,total:_}):i("{completed} / {total} étapes complétées",{completed:v,total:_}):i("Chargement du parcours d'onboarding");return h.jsxs("section",{className:"onboarding__container","aria-busy":l||!!d||y,children:[h.jsxs("header",{className:"onboarding__header",children:[h.jsx("p",{className:"onboarding__summary",role:"status","aria-live":"polite",children:O}),h.jsx("button",{type:"button",className:"onboarding__restart",onClick:x,disabled:y||l||!o,children:i(y?"Réinitialisation…":"Relancer le tutoriel")})]}),f?h.jsx("p",{className:"onboarding__error",role:"alert",children:f}):null,l&&!o?h.jsx("p",{className:"onboarding__loading",role:"status",children:i("Chargement du tutoriel…")}):null,o&&_?h.jsxs(h.Fragment,{children:[h.jsx("ol",{className:"onboarding__steps",role:"list","aria-labelledby":"onboarding-title",children:o.steps.map((k,T)=>{const P=o.completedSteps.includes(k.id),E=!P&&(o.currentStepId===k.id||!o.currentStepId&&!o.isComplete&&T===v),N=i(P?"Terminée":E?"Étape en cours":"À faire");return h.jsxs("li",{className:`onboarding-step${P?" onboarding-step--completed":""}${E?" onboarding-step--current":""}`,role:"listitem",children:[h.jsxs("div",{className:"onboarding-step__header",children:[h.jsxs("h3",{className:"onboarding-step__title",children:[k.title,k.tooltip?h.jsxs(Ote,{label:k.tooltip,children:[h.jsx("span",{"aria-hidden":"true",children:"?"}),h.jsx("span",{className:"sr-only",children:i("Aide sur {title}",{title:k.title})})]}):null]}),h.jsx("span",{className:`badge onboarding-step__status${P?" badge--success":E?" badge--info":" badge--neutral"}`,children:N})]}),h.jsx("p",{className:"onboarding-step__description",children:k.description}),k.videoUrl?h.jsxs("details",{className:"onboarding-step__video",children:[h.jsx("summary",{children:i("Voir la vidéo d'accompagnement")}),h.jsx("div",{className:"onboarding-step__video-frame",children:h.jsx("iframe",{src:k.videoUrl,title:k.videoTitle||k.title,allow:"accelerometer; autoplay; encrypted-media",allowFullScreen:!0})})]}):null,h.jsx("div",{className:"onboarding-step__actions",children:h.jsx("button",{type:"button",className:"onboarding-step__action",onClick:()=>g(k.id),disabled:P||d===k.id||l,children:d===k.id?i("Enregistrement…"):i('Marquer "{title}" comme terminé',{title:k.title})})})]},k.id)})}),h.jsx("p",{className:"onboarding__footnote text text--muted",children:o.updatedAt?i("Dernière mise à jour : {timestamp}",{timestamp:new Intl.DateTimeFormat(S,{dateStyle:"short",timeStyle:"short"}).format(new Date(o.updatedAt))}):i("Suivez les étapes pour débloquer l'ensemble des fonctionnalités.")})]}):null]})}const ae=e=>typeof e=="string",as=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},e_=e=>e==null?"":""+e,kte=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},$te=/###/g,t_=e=>e&&e.indexOf("###")>-1?e.replace($te,"."):e,n_=e=>!e||ae(e),ks=(e,t,n)=>{const r=ae(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(n_(e))return{};const a=t_(r[i]);!e[a]&&n&&(e[a]=new n),Object.prototype.hasOwnProperty.call(e,a)?e=e[a]:e={},++i}return n_(e)?{}:{obj:e,k:t_(r[i])}},r_=(e,t,n)=>{const{obj:r,k:i}=ks(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let a=t[t.length-1],o=t.slice(0,t.length-1),s=ks(e,o,Object);for(;s.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),s=ks(e,o,Object),s!=null&&s.obj&&typeof s.obj[`${s.k}.${a}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${a}`]=n},Ete=(e,t,n,r)=>{const{obj:i,k:a}=ks(e,t,Object);i[a]=i[a]||[],i[a].push(n)},Bf=(e,t)=>{const{obj:n,k:r}=ks(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Tte=(e,t,n)=>{const r=Bf(e,n);return r!==void 0?r:Bf(t,n)},aE=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?ae(e[r])||e[r]instanceof String||ae(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):aE(e[r],t[r],n):e[r]=t[r]);return e},aa=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Nte={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Cte=e=>ae(e)?e.replace(/[&<>"'\/]/g,t=>Nte[t]):e;class Ite{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const Mte=[" ",",","?","!",";"],Lte=new Ite(20),Dte=(e,t,n)=>{t=t||"",n=n||"";const r=Mte.filter(o=>t.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=Lte.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!i.test(e);if(!a){const o=e.indexOf(n);o>0&&!i.test(e.substring(0,o))&&(a=!0)}return a},oy=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let i=e;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let o,s="";for(let l=a;l<r.length;++l)if(l!==a&&(s+=n),s+=r[l],o=i[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;a+=l-a+1;break}i=o}return i},Tl=e=>e==null?void 0:e.replace("_","-"),Rte={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;(r=(n=console==null?void 0:console[e])==null?void 0:n.apply)==null||r.call(n,console,t)}};class Ff{constructor(t,n={}){this.init(t,n)}init(t,n={}){this.prefix=n.prefix||"i18next:",this.logger=t||Rte,this.options=n,this.debug=n.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,i){return i&&!this.debug?null:(ae(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Ff(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Ff(this.logger,t)}}var zn=new Ff;class op{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t,...n){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i.apply(i,[t,...n])})}}class i_ extends op{constructor(t,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r,i={}){var u,f;const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;t.indexOf(".")>-1?s=t.split("."):(s=[t,n],r&&(Array.isArray(r)?s.push(...r):ae(r)&&a?s.push(...r.split(a)):s.push(r)));const l=Bf(this.data,s);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=s[0],n=s[1],r=s.slice(2).join(".")),l||!o||!ae(r)?l:oy((f=(u=this.data)==null?void 0:u[t])==null?void 0:f[n],r,a)}addResource(t,n,r,i,a={silent:!1}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let s=[t,n];r&&(s=s.concat(o?r.split(o):r)),t.indexOf(".")>-1&&(s=t.split("."),i=n,n=s[1]),this.addNamespaces(n),r_(this.data,s,i),a.silent||this.emit("added",t,n,r,i)}addResources(t,n,r,i={silent:!1}){for(const a in r)(ae(r[a])||Array.isArray(r[a]))&&this.addResource(t,n,a,r[a],{silent:!0});i.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,i,a,o={silent:!1,skipCopy:!1}){let s=[t,n];t.indexOf(".")>-1&&(s=t.split("."),i=r,r=n,n=s[1]),this.addNamespaces(n);let l=Bf(this.data,s)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?aE(l,r,a):l={...l,...r},r_(this.data,s,l),o.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var oE={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(a=>{var o;t=((o=this.processors[a])==null?void 0:o.process(t,n,r,i))??t}),t}};const sE=Symbol("i18next/PATH_KEY");function Bte(){const e=[],t=Object.create(null);let n;return t.get=(r,i)=>{var a;return(a=n==null?void 0:n.revoke)==null||a.call(n),i===sE?e:(e.push(i),n=Proxy.revocable(r,t),n.proxy)},Proxy.revocable(Object.create(null),t).proxy}function sy(e,t){const{[sE]:n}=e(Bte());return n.join((t==null?void 0:t.keySeparator)??".")}const a_={},o_=e=>!ae(e)&&typeof e!="boolean"&&typeof e!="number";class zf extends op{constructor(t,n={}){super(),kte(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=zn.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,n={interpolation:{}}){const r={...n};if(t==null)return!1;const i=this.resolve(t,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const o=r&&t.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Dte(t,r,i);if(o&&!s){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:ae(a)?[a]:a};const u=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),t=u.join(i)}return{key:t,namespaces:ae(a)?[a]:a}}translate(t,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),t==null)return"";typeof t=="function"&&(t=sy(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:s,namespaces:l}=this.extractFromKey(t[t.length-1],i),u=l[l.length-1];let f=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const c=i.lng||this.language,d=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((c==null?void 0:c.toLowerCase())==="cimode")return d?a?{res:`${u}${f}${s}`,usedKey:s,exactUsedKey:s,usedLng:c,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:`${u}${f}${s}`:a?{res:s,usedKey:s,exactUsedKey:s,usedLng:c,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:s;const p=this.resolve(t,i);let y=p==null?void 0:p.res;const m=(p==null?void 0:p.usedKey)||s,b=(p==null?void 0:p.exactUsedKey)||s,w=["[object Number]","[object Function]","[object RegExp]"],g=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,_=i.count!==void 0&&!ae(i.count),v=zf.hasDefaultValue(i),S=_?this.pluralResolver.getSuffix(c,i.count,i):"",O=i.ordinal&&_?this.pluralResolver.getSuffix(c,i.count,{ordinal:!1}):"",j=_&&!i.ordinal&&i.count===0,A=j&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${S}`]||i[`defaultValue${O}`]||i.defaultValue;let k=y;x&&!y&&v&&(k=A);const T=o_(k),P=Object.prototype.toString.apply(k);if(x&&k&&T&&w.indexOf(P)<0&&!(ae(g)&&Array.isArray(k))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,k,{...i,ns:l}):`key '${s} (${this.language})' returned an object instead of string.`;return a?(p.res=E,p.usedParams=this.getUsedParamsDetails(i),p):E}if(o){const E=Array.isArray(k),N=E?[]:{},I=E?b:m;for(const M in k)if(Object.prototype.hasOwnProperty.call(k,M)){const L=`${I}${o}${M}`;v&&!y?N[M]=this.translate(L,{...i,defaultValue:o_(A)?A[M]:void 0,joinArrays:!1,ns:l}):N[M]=this.translate(L,{...i,joinArrays:!1,ns:l}),N[M]===L&&(N[M]=k[M])}y=N}}else if(x&&ae(g)&&Array.isArray(y))y=y.join(g),y&&(y=this.extendTranslation(y,t,i,r));else{let E=!1,N=!1;!this.isValidLookup(y)&&v&&(E=!0,y=A),this.isValidLookup(y)||(N=!0,y=s);const M=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:y,L=v&&A!==y&&this.options.updateMissing;if(N||E||L){if(this.logger.log(L?"updateKey":"missingKey",c,u,s,L?A:y),o){const K=this.resolve(s,{...i,keySeparator:!1});K&&K.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let C=[];const D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&D&&D[0])for(let K=0;K<D.length;K++)C.push(D[K]);else this.options.saveMissingTo==="all"?C=this.languageUtils.toResolveHierarchy(i.lng||this.language):C.push(i.lng||this.language);const B=(K,z,Y)=>{var ue;const ee=v&&Y!==y?Y:M;this.options.missingKeyHandler?this.options.missingKeyHandler(K,u,z,ee,L,i):(ue=this.backendConnector)!=null&&ue.saveMissing&&this.backendConnector.saveMissing(K,u,z,ee,L,i),this.emit("missingKey",K,u,z,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&_?C.forEach(K=>{const z=this.pluralResolver.getSuffixes(K,i);j&&i[`defaultValue${this.options.pluralSeparator}zero`]&&z.indexOf(`${this.options.pluralSeparator}zero`)<0&&z.push(`${this.options.pluralSeparator}zero`),z.forEach(Y=>{B([K],s+Y,i[`defaultValue${Y}`]||A)})}):B(C,s,A))}y=this.extendTranslation(y,t,i,p,r),N&&y===s&&this.options.appendNamespaceToMissingKey&&(y=`${u}${f}${s}`),(N||E)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${f}${s}`:s,E?y:void 0,i))}return a?(p.res=y,p.usedParams=this.getUsedParamsDetails(i),p):y}extendTranslation(t,n,r,i,a){var l,u;if((l=this.i18nFormat)!=null&&l.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const f=ae(t)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(f){const p=t.match(this.interpolator.nestingRegexp);c=p&&p.length}let d=r.replace&&!ae(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),t=this.interpolator.interpolate(t,d,r.lng||this.language||i.usedLng,r),f){const p=t.match(this.interpolator.nestingRegexp),y=p&&p.length;c<y&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,(...p)=>(a==null?void 0:a[0])===p[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):this.translate(...p,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,s=ae(o)?[o]:o;return t!=null&&(s!=null&&s.length)&&r.applyPostProcessor!==!1&&(t=oE.handle(s,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t,n={}){let r,i,a,o,s;return ae(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),f=u.key;i=f;let c=u.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=n.count!==void 0&&!ae(n.count),p=d&&!n.ordinal&&n.count===0,y=n.context!==void 0&&(ae(n.context)||typeof n.context=="number")&&n.context!=="",m=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);c.forEach(b=>{var w,g;this.isValidLookup(r)||(s=b,!a_[`${m[0]}-${b}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((g=this.utils)!=null&&g.hasLoadedNamespace(s))&&(a_[`${m[0]}-${b}`]=!0,this.logger.warn(`key "${i}" for languages "${m.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(x=>{var S;if(this.isValidLookup(r))return;o=x;const _=[f];if((S=this.i18nFormat)!=null&&S.addLookupKeys)this.i18nFormat.addLookupKeys(_,f,x,b,n);else{let O;d&&(O=this.pluralResolver.getSuffix(x,n.count,n));const j=`${this.options.pluralSeparator}zero`,A=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(n.ordinal&&O.indexOf(A)===0&&_.push(f+O.replace(A,this.options.pluralSeparator)),_.push(f+O),p&&_.push(f+j)),y){const k=`${f}${this.options.contextSeparator||"_"}${n.context}`;_.push(k),d&&(n.ordinal&&O.indexOf(A)===0&&_.push(k+O.replace(A,this.options.pluralSeparator)),_.push(k+O),p&&_.push(k+j))}}let v;for(;v=_.pop();)this.isValidLookup(r)||(a=v,r=this.getResource(x,b,v,n))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:s}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r,i={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(t,n,r,i):this.resourceStore.getResource(t,n,r,i)}getUsedParamsDetails(t={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!ae(t.replace);let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of n)delete i[a]}return i}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class s_{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=zn.create("languageUtils")}getScriptPartFromCode(t){if(t=Tl(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Tl(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(ae(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),ae(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return ae(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):ae(t)&&a(this.formatLanguageCode(t)),r.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}const l_={zero:0,one:1,two:2,few:3,many:4,other:5},u_={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Fte{constructor(t,n={}){this.languageUtils=t,this.options=n,this.logger=zn.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t,n={}){const r=Tl(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),u_;if(!t.match(/-|_/))return u_;const l=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(l,n)}return this.pluralRulesCache[a]=o,o}needsPlural(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,n,r={}){return this.getSuffixes(t,r).map(i=>`${n}${i}`)}getSuffixes(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>l_[i]-l_[a]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(t,n,r={}){const i=this.getRule(t,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const c_=(e,t,n,r=".",i=!0)=>{let a=Tte(e,t,n);return!a&&i&&ae(n)&&(a=oy(e,n,r),a===void 0&&(a=oy(t,n,r))),a},xh=e=>e.replace(/\$/g,"$$$$");class zte{constructor(t={}){var n;this.logger=zn.create("interpolator"),this.options=t,this.format=((n=t==null?void 0:t.interpolation)==null?void 0:n.format)||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:s,suffixEscaped:l,formatSeparator:u,unescapeSuffix:f,unescapePrefix:c,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:y,nestingSuffixEscaped:m,nestingOptionsSeparator:b,maxReplaces:w,alwaysFormat:g}=t.interpolation;this.escape=n!==void 0?n:Cte,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?aa(a):o||"{{",this.suffix=s?aa(s):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=f?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=d?aa(d):p||aa("$t("),this.nestingSuffix=y?aa(y):m||aa(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=w||1e3,this.alwaysFormat=g!==void 0?g:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,n,r,i){var p;let a,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=y=>{if(y.indexOf(this.formatSeparator)<0){const g=c_(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(g,void 0,r,{...i,...n,interpolationkey:y}):g}const m=y.split(this.formatSeparator),b=m.shift().trim(),w=m.join(this.formatSeparator).trim();return this.format(c_(n,l,b,this.options.keySeparator,this.options.ignoreJSONStructure),w,r,{...i,...n,interpolationkey:b})};this.resetRegExp();const f=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,c=((p=i==null?void 0:i.interpolation)==null?void 0:p.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>xh(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?xh(this.escape(y)):xh(y)}].forEach(y=>{for(s=0;a=y.regex.exec(t);){const m=a[1].trim();if(o=u(m),o===void 0)if(typeof f=="function"){const w=f(t,a,i);o=ae(w)?w:""}else if(i&&Object.prototype.hasOwnProperty.call(i,m))o="";else if(c){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${t}`),o="";else!ae(o)&&!this.useRawValueToEscape&&(o=e_(o));const b=y.safeValue(o);if(t=t.replace(a[0],b),c?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=a[0].length):y.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),t}nest(t,n,r={}){let i,a,o;const s=(l,u)=>{const f=this.nestingOptionsSeparator;if(l.indexOf(f)<0)return l;const c=l.split(new RegExp(`${f}[ ]*{`));let d=`{${c[1]}`;l=c[0],d=this.interpolate(d,o);const p=d.match(/'/g),y=d.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!y||y.length%2!==0)&&(d=d.replace(/'/g,'"'));try{o=JSON.parse(d),u&&(o={...u,...o})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${f}${d}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(t);){let l=[];o={...r},o=o.replace&&!ae(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(u!==-1&&(l=i[1].slice(u).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),i[1]=i[1].slice(0,u)),a=n(s.call(this,i[1].trim(),o),o),a&&i[0]===t&&!ae(a))return a;ae(a)||(a=e_(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),a=""),l.length&&(a=l.reduce((f,c)=>this.format(f,c,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),t=t.replace(i[0],a),this.regexp.lastIndex=0}return t}}const Ute=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[s,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),f=s.trim();n[f]||(n[f]=u),u==="false"&&(n[f]=!1),u==="true"&&(n[f]=!0),isNaN(u)||(n[f]=parseInt(u,10))}})}return{formatName:t,formatOptions:n}},f_=e=>{const t={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=r+JSON.stringify(a);let s=t[o];return s||(s=e(Tl(r),i),t[o]=s),s(n)}},Kte=e=>(t,n,r)=>e(Tl(n),r)(t);class Vte{constructor(t={}){this.logger=zn.create("formatter"),this.options=t,this.init(t)}init(t,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?f_:Kte;this.formats={number:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a});return s=>o.format(s)}),currency:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a,style:"currency"});return s=>o.format(s)}),datetime:r((i,a)=>{const o=new Intl.DateTimeFormat(i,{...a});return s=>o.format(s)}),relativetime:r((i,a)=>{const o=new Intl.RelativeTimeFormat(i,{...a});return s=>o.format(s,a.range||"day")}),list:r((i,a)=>{const o=new Intl.ListFormat(i,{...a});return s=>o.format(s)})}}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=f_(n)}format(t,n,r,i={}){const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(s=>s.indexOf(")")>-1)){const s=a.findIndex(l=>l.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,s)].join(this.formatSeparator)}return a.reduce((s,l)=>{var c;const{formatName:u,formatOptions:f}=Ute(l);if(this.formats[u]){let d=s;try{const p=((c=i==null?void 0:i.formatParams)==null?void 0:c[i.interpolationkey])||{},y=p.locale||p.lng||i.locale||i.lng||r;d=this.formats[u](s,y,{...f,...i,...p})}catch(p){this.logger.warn(p)}return d}else this.logger.warn(`there was no format function for ${u}`);return s},t)}}const qte=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Wte extends op{constructor(t,n,r,i={}){var a,o;super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=zn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(o=(a=this.backend)==null?void 0:a.init)==null||o.call(a,r,i.backend,i)}queueLoad(t,n,r,i){const a={},o={},s={},l={};return t.forEach(u=>{let f=!0;n.forEach(c=>{const d=`${u}|${c}`;!r.reload&&this.store.hasResourceBundle(u,c)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?o[d]===void 0&&(o[d]=!0):(this.state[d]=1,f=!1,o[d]===void 0&&(o[d]=!0),a[d]===void 0&&(a[d]=!0),l[c]===void 0&&(l[c]=!0)))}),f||(s[u]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const i=t.split("|"),a=i[0],o=i[1];n&&this.emit("failedLoading",a,o,n),!n&&r&&this.store.addResourceBundle(a,o,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const s={};this.queue.forEach(l=>{Ete(l.loaded,[a],o),qte(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const f=l.loaded[u];f.length&&f.forEach(c=>{s[u][c]===void 0&&(s[u][c]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r,i=0,a=this.retryTimeout,o){if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:i,wait:a,callback:o});return}this.readingCalls++;const s=(u,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const c=this.waitingReads.shift();this.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}if(u&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,i+1,a*2,o)},a);return}o(u,f)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(t,n);u&&typeof u.then=="function"?u.then(f=>s(null,f)).catch(s):s(null,u)}catch(u){s(u)}return}return l(t,n,s)}prepareLoading(t,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ae(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ae(n)&&(n=[n]);const a=this.queueLoad(t,n,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t,n=""){const r=t.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn(`${n}loading namespace ${a} for language ${i} failed`,o),!o&&s&&this.logger.log(`${n}loaded namespace ${a} for language ${i}`,s),this.loaded(t,o,s)})}saveMissing(t,n,r,i,a,o={},s=()=>{}){var l,u,f,c,d;if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((c=(f=this.services)==null?void 0:f.utils)!=null&&c.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((d=this.backend)!=null&&d.create){const p={...o,isUpdate:a},y=this.backend.create.bind(this.backend);if(y.length<6)try{let m;y.length===5?m=y(t,n,r,i,p):m=y(t,n,r,i),m&&typeof m.then=="function"?m.then(b=>s(null,b)).catch(s):s(null,m)}catch(m){s(m)}else y(t,n,r,i,s,p)}!t||!t[0]||this.store.addResource(t[0],n,r,i)}}}const d_=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ae(e[1])&&(t.defaultValue=e[1]),ae(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),p_=e=>{var t,n;return ae(e.ns)&&(e.ns=[e.ns]),ae(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ae(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((n=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},Ku=()=>{},Hte=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Nl extends op{constructor(t={},n){if(super(),this.options=p_(t),this.services={},this.logger=zn,this.modules={external:[]},Hte(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(ae(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=d_();this.options={...r,...this.options,...p_(t)},this.options.interpolation={...r.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?zn.init(i(this.modules.logger),this.options):zn.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Vte;const f=new s_(this.options);this.store=new i_(this.options.resources,this.options);const c=this.services;c.logger=zn,c.resourceStore=this.store,c.languageUtils=f,c.pluralResolver=new Fte(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(c.formatter=i(u),c.formatter.init&&c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new zte(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new Wte(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(p,...y)=>{this.emit(p,...y)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new zf(this.services,this.options),this.translator.on("*",(p,...y)=>{this.emit(p,...y)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Ku),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...f)=>this.store[u](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...f)=>(this.store[u](...f),this)});const s=as(),l=()=>{const u=(f,c)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(c),n(f,c)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),s}loadResources(t,n=Ku){var a,o;let r=n;const i=ae(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>l(f)),(o=(a=this.options.preload)==null?void 0:a.forEach)==null||o.call(a,u=>l(u)),this.services.backendConnector.load(s,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(t,n,r){const i=as();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Ku),this.services.backendConnector.reload(t,n,a=>{i.resolve(),r(a)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&oE.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,n){this.isLanguageChangingTo=t;const r=as();this.emit("languageChanging",t);const i=s=>{this.language=s,this.languages=this.services.languageUtils.toResolveHierarchy(s),this.resolvedLanguage=void 0,this.setResolvedLanguage(s)},a=(s,l)=>{l?this.isLanguageChangingTo===t&&(i(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(s,(...u)=>this.t(...u))},o=s=>{var f,c;!t&&!s&&this.services.languageDetector&&(s=[]);const l=ae(s)?s:s&&s[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(ae(s)?[s]:s);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),(c=(f=this.services.languageDetector)==null?void 0:f.cacheUserLanguage)==null||c.call(f,u)),this.loadResources(u,d=>{a(d,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),r}getFixedT(t,n,r){const i=(a,o,...s)=>{let l;typeof o!="object"?l=this.options.overloadTranslationOptionHandler([a,o].concat(s)):l={...o},l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const u=this.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(a)?f=a.map(c=>(typeof c=="function"&&(c=sy(c,{...this.options,...o})),`${l.keyPrefix}${u}${c}`)):(typeof a=="function"&&(a=sy(a,{...this.options,...o})),f=l.keyPrefix?`${l.keyPrefix}${u}${a}`:a),this.t(f,l)};return ae(t)?i.lng=t:i.lngs=t,i.ns=n,i.keyPrefix=r,i}t(...t){var n;return(n=this.translator)==null?void 0:n.translate(...t)}exists(...t){var n;return(n=this.translator)==null?void 0:n.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state[`${s}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const s=n.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,t)&&(!i||o(a,t)))}loadNamespaces(t,n){const r=as();return this.options.ns?(ae(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=as();ae(t)&&(t=[t]);const i=this.options.preload||[],a=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(t){var i,a;if(t||(t=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const o=new Intl.Locale(t);if(o&&o.getTextInfo){const s=o.getTextInfo();if(s&&s.direction)return s.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new s_(d_());return t.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},n){return new Nl(t,n)}cloneInstance(t={},n=Ku){const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},a=new Nl(i);if((t.debug!==void 0||t.prefix!==void 0)&&(a.logger=a.logger.clone(t)),["store","services","language"].forEach(s=>{a[s]=this[s]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const s=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((f,c)=>(f[c]={...l[u][c]},f),l[u]),l),{});a.store=new i_(s,i),a.services.resourceStore=a.store}return a.translator=new zf(a.services,i),a.translator.on("*",(s,...l)=>{a.emit(s,...l)}),a.init(i,n),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const at=Nl.createInstance();at.createInstance=Nl.createInstance;at.createInstance;at.dir;at.init;at.loadResources;at.reloadResources;at.use;at.changeLanguage;at.getFixedT;at.t;at.exists;at.setDefaultNamespace;at.hasLoadedNamespace;at.loadNamespaces;at.loadLanguages;function Gte(){const e=document.getElementById("i18n-bootstrap");if(!e||!e.textContent)return{language:"fr",resources:{},languages:["fr","en"]};try{const t=JSON.parse(e.textContent);return!t||typeof t!="object"?{language:"fr",resources:{},languages:["fr","en"]}:{language:t.language||"fr",resources:t.translations||{},languages:Array.isArray(t.languages)&&t.languages.length?t.languages:["fr","en"]}}catch{return{language:"fr",resources:{},languages:["fr","en"]}}}const $b=Gte(),Yte=Object.fromEntries(Object.entries($b.resources).map(([e,t])=>[e,{translation:t}]));at.isInitialized||at.use(GJ).init({resources:Yte,lng:$b.language,fallbackLng:"fr",interpolation:{escapeValue:!1}});$b.languages;function Xte(){const e=document.getElementById("dashboard-bootstrap");if(!e||!e.textContent)return{};try{return JSON.parse(e.textContent)}catch(t){return console.error("Impossible de parser la configuration du tableau de bord",t),{}}}function Qte({endpoint:e,currency:t}){const{t:n}=Co(),[r,i]=$.useState({status:"loading",items:[],currency:t});return $.useEffect(()=>{let a=!1;async function o(){i(s=>({...s,status:"loading"}));try{const s=await fetch(e,{headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`HTTP ${s.status}`);const l=await s.json();if(a)return;const u=Array.isArray(l.items)?l.items:[];i({status:"ready",items:u,currency:l.currency||t})}catch(s){a||(console.error("Impossible de récupérer l'historique des portefeuilles",s),i(l=>({...l,status:"error",error:s})))}}return o(),()=>{a=!0}},[e,t]),r.status==="loading"?h.jsx("div",{className:"chart-container__status",role:"status",children:n("Chargement des données historiques…")}):r.status==="error"?h.jsx("div",{className:"chart-container__status",role:"alert",children:n("Impossible de charger l'historique pour le moment.")}):h.jsx(PJ,{history:r.items,currency:r.currency||t})}const Vu=Xte();function Or(e,t){e.render(h.jsx($.StrictMode,{children:h.jsx(JJ,{i18n:at,children:t})}))}const qu=document.getElementById("reports-center");if(qu){let e=[];const t=qu.dataset.reports||"[]";try{e=JSON.parse(t)}catch(i){console.error("Impossible de parser la liste des rapports",i)}const n=Number.parseInt(qu.dataset.pageSize||"5",10),r=Xn(qu);Or(r,h.jsx(oZ,{reports:e,pageSize:Number.isNaN(n)?5:n}))}const Wu=document.getElementById("portfolio-chart");if(Wu){const e=Wu.dataset.endpoint||"/portfolios/history",t=Wu.dataset.currency||"$",n=Xn(Wu);Or(n,h.jsx(Qte,{endpoint:e,currency:t}))}const Sh=document.getElementById("alerts-manager");if(Sh){const e=Sh.dataset||{},t=e.endpoint||"/alerts",n=e.authToken||"",r=(Vu&&Vu.context&&Array.isArray(Vu.context.alerts)?Vu.context.alerts:[])||[],i=Xn(Sh);Or(i,h.jsx(LJ,{initialAlerts:r,endpoint:t,authToken:n}))}const _h=document.getElementById("alerts-history");if(_h){const t=(_h.dataset||{}).endpoint||"/alerts/history",n=Xn(_h);Or(n,h.jsx(eZ,{endpoint:t}))}const Oh=document.getElementById("strategy-designer-root");if(Oh){const e=Oh.dataset||{},t=e.saveEndpoint||"/strategies/save",n=e.defaultName||"Nouvelle stratégie";let i=e.defaultFormat||"yaml";i!=="python"&&(i="yaml");let a=Ab;if(e.presets)try{const l=JSON.parse(e.presets);Array.isArray(l)&&l.length&&(a=l)}catch(l){console.error("Impossible de parser les modèles de stratégies",l)}let o=null;if(e.initialStrategy)try{const l=JSON.parse(e.initialStrategy);l&&typeof l=="object"&&(o=l)}catch(l){console.error("Impossible de parser la stratégie initiale",l)}const s=Xn(Oh);Or(s,h.jsx(pte,{saveEndpoint:t,defaultName:n,defaultFormat:i,presets:a,initialStrategy:o}))}const jh=document.getElementById("marketplace-root");if(jh){const e=jh.dataset||{},t=Xn(jh);Or(t,h.jsx(_te,{listingsEndpoint:e.endpoint||"/marketplace/listings",reviewsEndpointTemplate:e.reviewsEndpointTemplate||"/marketplace/listings/__id__/reviews"}))}const Ah=document.getElementById("ai-strategy-assistant-root");if(Ah){const e=Ah.dataset||{},t=e.generateEndpoint||"/strategies/generate",n=e.importEndpoint||"/strategies/import",r=Xn(Ah);Or(r,h.jsx(a$,{generateEndpoint:t,importEndpoint:n}))}const Ph=document.getElementById("strategy-backtest-root");if(Ph){const e=Ph.dataset||{},t=Number.parseInt(e.historyPageSize||"5",10),n=Xn(Ph);Or(n,h.jsx(vte,{strategiesEndpoint:e.strategiesEndpoint||"/api/strategies",runEndpointTemplate:e.runEndpointTemplate||"/api/strategies/__id__/backtest",uiEndpointTemplate:e.uiEndpointTemplate||"/api/strategies/__id__/backtest/ui",historyEndpointTemplate:e.historyEndpointTemplate||"/api/strategies/__id__/backtests",defaultStrategyId:e.defaultStrategyId||"",defaultSymbol:e.defaultSymbol||"BTCUSDT",historyPageSize:Number.isNaN(t)?5:t,tradingViewConfigEndpoint:e.tradingviewConfigEndpoint||"/config/tradingview",tradingViewUpdateEndpoint:e.tradingviewUpdateEndpoint||"/config/tradingview"}))}const kh=document.getElementById("onboarding-root");if(kh){const e=kh.dataset||{},t=Xn(kh);Or(t,h.jsx(Pte,{progressEndpoint:e.progressEndpoint||"",stepTemplate:e.stepTemplate||"",resetEndpoint:e.resetEndpoint||"",userId:e.userId||""}))}function Jte(){const e=document.querySelector("[data-language-selector]");e&&e.addEventListener("change",t=>{const{value:n}=t.target;if(!n)return;at.changeLanguage(n),document.documentElement.setAttribute("lang",n);const r=`dashboard_lang=${n};path=/;max-age=${60*60*24*365}`;document.cookie=r;const i=new URL(window.location.href);i.searchParams.set("lang",n),window.location.assign(i.toString())})}Jte();
          side: all
metadata:
  preset: mean_reversion
`},{id:"range_scalp",label:"Scalping de range",description:"Combine un signal RSI court terme et un volume faible pour capter les oscillations rapides.",format:"yaml",content:`name: Scalp Range
rules:
  - when:
      any:
        - field: RSI(close, 7)
          operator: lt
          value: 30
        - field: RSI(close, 7)
          operator: gt
          value: 70
    signal:
      action: buy
      size: 1
      steps:
        - type: order
          action: buy
          size: 1
        - type: alert
          channel: discord
          message: "Scalp déclenché"
metadata:
  preset: range_scalp
`}];function NZ(e){return Kv.find(t=>t.id===e)||null}const Ki=new Set(Object.keys(ft).filter(e=>e.startsWith("indicator"))),mS={gt:">",gte:"≥",lt:"<",lte:"≤",eq:"=",neq:"≠"};function da(e){if(e==null||e==="")return null;const t=Number(e);return Number.isNaN(t)?null:t}function Hv(e,t,n,r){const i=(t==null?void 0:t.validation)||{},a=(e==null?void 0:e.config)||{},o=Array.isArray(e==null?void 0:e.children)?e.children:[],s=Array.isArray(i.required)?i.required:[];for(const l of s){const u=typeof l=="string"?l:l.field,f=typeof l=="string"?l:l.label||l.field||l.toString(),c=a[u];(c==null||typeof c=="string"&&c.trim()==="")&&r.push(`${n} — ${t.label}: le champ « ${f} » est requis.`)}return typeof i.minChildren=="number"&&o.length<i.minChildren&&r.push(`${n} — ${t.label}: au moins ${i.minChildren} bloc(s) enfant sont requis.`),typeof i.maxChildren=="number"&&o.length>i.maxChildren&&r.push(`${n} — ${t.label}: maximum ${i.maxChildren} bloc(s) enfant autorisés.`),Array.isArray(t.accepts)&&(t.accepts.length===0&&o.length?r.push(`${n} — ${t.label}: n'accepte pas de bloc enfant.`):t.accepts.length>0&&o.forEach((l,u)=>{var f;if(!t.accepts.includes(l.type)){const c=((f=ft[l.type])==null?void 0:f.label)||l.type;r.push(`${n} — ${t.label}: le bloc enfant #${u+1} (${c}) est incompatible.`)}})),o}function Su(e,t,n){const r=ft[e.type];if(!r)return n.push(`${t}: type d'indicateur inconnu (${e.type}).`),null;Hv(e,r,t,n);const i=e.config||{};switch(e.type){case"indicator":{const a=(i.kind||"sma").toUpperCase(),o=i.source||"source",s=i.period||"?";return`${a}(${o}, ${s})`}case"indicator_macd":return`MACD(${i.source||"source"}, ${i.fastPeriod||"?"}, ${i.slowPeriod||"?"}, ${i.signalPeriod||"?"})`;case"indicator_bollinger":return`BOLL(${i.source||"source"}, ${i.period||"?"}, ${i.deviation||"?"})`;case"indicator_atr":return`ATR(${i.source||"hlc3"}, ${i.period||"?"}, ${i.smoothing||"?"})`;default:return n.push(`${t}: type d'indicateur non géré (${e.type}).`),null}}function Ku(e,t,n){var o,s;const r=ft[e.type];if(!r)return n.push(`${t}: type de condition inconnu (${e.type}).`),null;const i=Hv(e,r,t,n),a=e.config||{};switch(e.type){case"condition":{let l=a.field||"champ";const u=i.find(d=>Ki.has(d.type));if(u){const d=Su(u,`${t} > ${((o=ft[u.type])==null?void 0:o.label)||u.type}`,n);d&&(l=d)}const f=mS[a.operator]||a.operator||"?",c=a.value??"?";return`${l} ${f} ${c}`}case"market_cross":{const l=da(a.lookback);(l===null||l<=0)&&n.push(`${t} — ${r.label}: la fenêtre d'observation doit être un entier positif.`);const[u,f]=i;u&&!Ki.has(u.type)&&n.push(`${t} — ${r.label}: seuls des indicateurs peuvent être utilisés.`),f&&!Ki.has(f.type)&&n.push(`${t} — ${r.label}: seuls des indicateurs peuvent être utilisés.`);const c=u&&Ki.has(u.type)?Su(u,`${t} > Indicateur #1`,n):null,d=f&&Ki.has(f.type)?Su(f,`${t} > Indicateur #2`,n):null;if(!c||!d)return null;const p=a.direction==="below"?"croise sous":"croise au-dessus",y=a.lookback?` (fenêtre ${a.lookback})`:"";return`${c} ${p} ${d}${y}`}case"market_volume":{const l=da(a.value);(l===null||l<0)&&n.push(`${t} — ${r.label}: le seuil de volume doit être un nombre positif.`);const u=mS[a.operator]||a.operator||"?",f=a.timeframe?` (${a.timeframe})`:"";return`Volume ${u} ${a.value??"?"}${f}`}case"logic":{const l=a.mode==="any"?" OU ":" ET ",u=i.map((f,c)=>Ku(f,`${t} > Bloc ${c+1}`,n)).filter(Boolean);return u.length?u.map(f=>`(${f})`).join(l):null}case"negation":{const[l]=i;if(!l)return null;const u=Ku(l,`${t} > ${((s=ft[l.type])==null?void 0:s.label)||l.type}`,n);return u?`NON (${u})`:null}case"group":{const l=i.map((u,f)=>Ku(u,`${t} > Bloc ${f+1}`,n)).filter(Boolean);return l.length?`(${l.join(" ET ")})`:null}default:return Ki.has(e.type)?Su(e,t,n):(n.push(`${t}: type de condition non géré (${e.type}).`),null)}}function MZ(e,t,n,r){const i=ft[e.type];if(!i)return n.push(`${t}: type d'action inconnu (${e.type}).`),null;Hv(e,i,t,n).length&&r.push(`${t} — ${i.label}: les blocs enfants seront ignorés lors de l'exécution.`);const o=e.config||{};switch(e.type){case"action":return`${(o.action||"").toUpperCase()||"ACTION"} x${o.size||"?"}`;case"take_profit":{const s=da(o.value);if((s===null||s<=0)&&n.push(`${t} — ${i.label}: renseignez une valeur numérique strictement positive.`),o.size==="custom"){const f=da(o.customSize);(f===null||f<=0)&&n.push(`${t} — ${i.label}: la taille personnalisée doit être un nombre positif.`)}const l=o.mode==="price"?" (prix)":"%";let u="";return o.size==="half"?u=" (50 %)":o.size==="custom"?u=` (${o.customSize||"?"})`:u=" (100 %)",`Take-profit ${o.value||"?"}${l}${u}`}case"stop_loss":{const s=da(o.value);(s===null||s<=0)&&n.push(`${t} — ${i.label}: renseignez une valeur numérique strictement positive.`);const l=o.mode==="price"?" (prix)":"%",u=o.trailing?" (trailing)":"";return`Stop-loss ${o.value||"?"}${l}${u}`}case"close_position":return{all:"Fermer toutes les positions",long:"Fermer les positions longues",short:"Fermer les positions courtes"}[o.side]||`Fermer (${o.side||"?"})`;case"alert":return`Alerte ${o.channel||"?"}: ${o.message||"?"}`;case"delay":{const s=da(o.seconds);return(s===null||s<0)&&n.push(`${t} — ${i.label}: le délai doit être un nombre positif.`),`Attendre ${o.seconds||"?"}s`}default:return n.push(`${t}: type d'action non géré (${e.type}).`),null}}function IZ(e,t){const n=[],r=[],i=[];!e||!e.length?n.push("Ajoutez au moins une condition."):e.forEach((u,f)=>{const c=Ku(u,`Condition #${f+1}`,n);c&&i.push(c)});const a=[];!t||!t.length?n.push("Ajoutez au moins une action."):t.forEach((u,f)=>{const c=MZ(u,`Action #${f+1}`,n,r);c&&a.push(c)});const o=i.length===0?null:i.length===1?i[0]:i.map(u=>`(${u})`).join(" ET "),s=a.length===0?null:a.join(" puis "),l=o&&s?`${o} ⇒ ${s}`:null;return{errors:n,warnings:r,conditionExpression:o,actionSummary:s,rule:l,isValid:n.length===0}}function DZ(e,t){const n=ft[e];return{id:`node-${t.current++}`,type:e,label:n?n.label:e,config:_d(e),children:[]}}function Vv(e){return{type:e.type,config:e.config,children:Array.isArray(e.children)?e.children.map(t=>Vv(t)):[]}}function Oy(e,t){const n=ft[e.type];return{id:`node-${t.current++}`,type:e.type,label:n?n.label:e.type,config:e.config?{...e.config}:_d(e.type),children:Array.isArray(e.children)?e.children.map(r=>Oy(r,t)):[]}}function Oa(e,t){for(const n of e){if(n.id===t)return n;const r=Oa(n.children||[],t);if(r)return r}return null}function Ay(e,t,n){if(!t)return[...e,n];let r=!1;const i=e.map(a=>{if(a.id===t){r=!0;const o=Array.isArray(a.children)?[...a.children,n]:[n];return{...a,children:o}}if(a.children&&a.children.length){const o=Ay(a.children,t,n);if(o!==a.children)return r=!0,{...a,children:o}}return a});return r?i:e}function ej(e,t,n){let r=!1;const i=e.map(a=>{if(a.id===t)return r=!0,n(a);if(a.children&&a.children.length){const o=ej(a.children,t,n);if(o!==a.children)return r=!0,{...a,children:o}}return a});return r?i:e}function tj(e,t){let n=!1;const r=[];for(const i of e){if(i.id===t){n=!0;continue}let a=i;if(i.children&&i.children.length){const o=tj(i.children,t);o!==i.children&&(a={...i,children:o},n=!0)}r.push(a)}return n?r:e}function nj(e,t,n){const r=e.findIndex(o=>o.id===t);if(r!==-1){const o=e.slice();return o.splice(r+1,0,n),o}let i=!1;const a=e.map(o=>{if(o.children&&o.children.length){const s=nj(o.children,t,n);if(s!==o.children)return i=!0,{...o,children:s}}return o});return i?a:e}function Py(e,t=0,n=1,r={}){let i=n;return e.forEach(a=>{r[a.id]={row:i,column:t},i+=1,a.children&&a.children.length&&(i=Py(a.children,t+1,i,r).nextRow)}),{map:r,nextRow:i}}function _u(e,t){if(!t)return null;const n=e[t.section];return n?t.nodeId?Oa(n,t.nodeId)?t:null:t:null}function LZ(e,t){const n=JSON.stringify(e.present),r=JSON.stringify(t);return n===r?e:{past:[...e.past,e.present],present:t,future:[]}}function RZ(e){if(!e.past.length)return e;const t=e.past[e.past.length-1];return{past:e.past.slice(0,-1),present:t,future:[e.present,...e.future]}}function BZ(e){if(!e.future.length)return e;const[t,...n]=e.future;return{past:[...e.past,e.present],present:t,future:n}}const FZ={past:[],present:{conditions:[],actions:[]},future:[]};function zZ(e,t){var n;switch(t.type){case"APPLY":{const r=t.updater(e.history.present),i=LZ(e.history,r);return i===e.history?e:{...e,history:i,selection:_u(i.present,e.selection)}}case"SET_PRESENT":{const r={past:t.resetHistory?[]:e.history.past,present:t.present,future:[]};return{...e,history:r,selection:_u(t.present,e.selection)}}case"UNDO":{const r=RZ(e.history);return r===e.history?e:{...e,history:r,selection:_u(r.present,e.selection)}}case"REDO":{const r=BZ(e.history);return r===e.history?e:{...e,history:r,selection:_u(r.present,e.selection)}}case"SELECT":return{...e,selection:t.selection};case"CLEAR_SELECTION":return{...e,selection:null};case"COPY":{if(!((n=e.selection)!=null&&n.nodeId))return e;const r=e.history.present[e.selection.section],i=Oa(r,e.selection.nodeId);return i?{...e,clipboard:JSON.stringify(Vv(i))}:e}case"CLEAR_CLIPBOARD":return{...e,clipboard:null};case"SET_CLIPBOARD":return{...e,clipboard:t.clipboard};default:return e}}function UZ({presets:e,onApply:t}){return!Array.isArray(e)||e.length===0?null:w.jsxs("section",{className:"designer-panel designer-panel--presets","aria-labelledby":"presets-title",children:[w.jsxs("div",{className:"designer-panel__header",children:[w.jsx("h2",{id:"presets-title",className:"heading heading--md",children:"Modèles rapides"}),w.jsx("p",{className:"text text--muted",children:"Chargez une base préconfigurée puis personnalisez-la dans la composition."})]}),w.jsx("div",{className:"designer-panel__body",role:"list","aria-label":"Modèles de stratégies",children:e.map(n=>w.jsxs("article",{className:"palette-item palette-item--preset",role:"listitem",children:[w.jsxs("header",{className:"palette-item__header",children:[w.jsx("div",{children:w.jsx("span",{className:"palette-item__title heading heading--sm",children:n.label})}),w.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>t==null?void 0:t(n.id),"data-testid":`preset-apply-${n.id}`,children:"Charger"})]}),w.jsx("p",{className:"palette-item__description text",children:n.description})]},n.id))})]})}function WZ({saveEndpoint:e="/strategies/save",defaultName:t="Nouvelle stratégie",defaultFormat:n="yaml",presets:r=Kv}){const i=k.useRef(1),[a,o]=k.useState(t),[s,l]=k.useState(n==="python"?"python":"yaml"),[u,f]=k.useState({type:"idle",message:null}),[c,d]=k.useState(null),[p,y]=k.useReducer(zZ,{history:FZ,selection:null,clipboard:null}),{conditions:h,actions:g}=p.history.present,{selection:m,clipboard:b}=p,v=k.useMemo(()=>CZ(a,h,g),[a,h,g]),_=k.useMemo(()=>IZ(h,g),[h,g]),x=k.useMemo(()=>Array.isArray(r)?r:[],[r]),S=k.useRef(null),O=()=>`node-${i.current++}`,A=k.useCallback(F=>{y({type:"APPLY",updater:V=>{const Z=F(V);if(!Z)return V;const ne=Array.isArray(Z.conditions)?Z.conditions:V.conditions,ce=Array.isArray(Z.actions)?Z.actions:V.actions;return ne===V.conditions&&ce===V.actions?V:{conditions:ne,actions:ce}}})},[y]),P=k.useCallback((F,{resetHistory:V=!1}={})=>{y({type:"SET_PRESENT",present:F,resetHistory:V})},[y]),$=k.useCallback(()=>{y({type:"CLEAR_SELECTION"}),y({type:"CLEAR_CLIPBOARD"})},[y]),E=k.useCallback((F,V,Z="")=>{var $e;if(!F||Array.isArray(F.errors)&&F.errors.length>0){const Le=($e=F==null?void 0:F.errors)!=null&&$e.length?F.errors.join(" "):"Impossible d'importer la stratégie fournie.";return f({type:"error",message:Le}),!1}const ce={conditions:Array.isArray(F.conditions)?F.conditions:[],actions:Array.isArray(F.actions)?F.actions:[]};P(ce,{resetHistory:!0}),l(F.format==="python"?"python":"yaml");const ye=(F.name||"").trim()||(Z||"").trim();return ye&&o(ye),d(null),f({type:"success",message:V}),$(),!0},[$,P]),j=k.useCallback(F=>{const V=x.find(ne=>ne.id===F)||NZ(F);if(!V){f({type:"error",message:"Modèle introuvable."});return}const Z=hS({code:V.content,format:V.format,createId:O});E(Z,`Modèle « ${V.label} » chargé.`,V.label)},[E,x]),N=()=>{var F;(F=S.current)==null||F.click()},D=async F=>{var ye;const{files:V}=F.target,Z=V&&V[0];if(!Z)return;const ne=(ye=Z.name.split(".").pop())==null?void 0:ye.toLowerCase();let ce="yaml";ne==="py"||Z.type.includes("python")?ce="python":(ne==="yaml"||ne==="yml")&&(ce="yaml");try{const $e=await Z.text(),Le=hS({code:$e,format:ce,createId:O}),Xe=Z.name.replace(/\.[^.]+$/,"").trim();E(Le,`Fichier « ${Z.name} » importé.`,Xe)}catch{f({type:"error",message:"Impossible de lire le fichier sélectionné."})}finally{F.target&&(F.target.value="")}},M=k.useCallback(F=>{y(F?{type:"SELECT",selection:F}:{type:"CLEAR_SELECTION"})},[y]),I=k.useCallback(({section:F,targetId:V,type:Z})=>{var Le,Xe;const ne=ft[Z];if(!ne){f({type:"error",message:"Type de bloc inconnu."});return}if(F==="conditions"&&ne.category!=="conditions"){f({type:"error",message:"Ce bloc ne peut pas être utilisé dans les conditions."});return}if(F==="actions"&&ne.category!=="actions"){f({type:"error",message:"Ce bloc ne peut pas être utilisé dans les actions."});return}const ye=V?Oa(F==="conditions"?h:g,V):null;if(V&&(!ye||!((Xe=(Le=ft[ye.type])==null?void 0:Le.accepts)!=null&&Xe.includes(Z)))){f({type:"error",message:"La cible ne peut pas contenir ce type de bloc."});return}const $e=DZ(Z,i);A(Et=>({...Et,[F]:Ay(Et[F],V,$e)})),M({section:F,nodeId:$e.id}),f({type:"idle",message:null})},[g,A,h,M]),B=({section:F,type:V})=>{I({section:F,targetId:null,type:V})},C=k.useCallback(({section:F,nodeId:V,config:Z})=>{A(ne=>({...ne,[F]:ej(ne[F],V,ce=>({...ce,config:Z}))})),f({type:"idle",message:null})},[A]),L=k.useCallback(({section:F,nodeId:V})=>{A(Z=>({...Z,[F]:tj(Z[F],V)})),f({type:"idle",message:null})},[A]),U=k.useCallback(F=>{F&&M(F);const V=F||m;V!=null&&V.nodeId&&(y({type:"COPY"}),f({type:"idle",message:null}))},[y,M,m]),H=k.useCallback(()=>{if(!b)return null;try{return JSON.parse(b)}catch{return null}},[b]),W=k.useCallback(({section:F,nodeId:V}={})=>{const Z=H();if(!Z){f({type:"error",message:"Presse-papiers vide ou invalide."});return}const ne=F?{section:F,nodeId:V}:m||{section:"conditions",nodeId:null},ce=ne.section||"conditions",ye=ft[Z.type];if(!ye){f({type:"error",message:"Bloc inconnu dans le presse-papiers."});return}if(ce==="conditions"&&ye.category!=="conditions"){f({type:"error",message:"Ce bloc ne peut pas être collé dans les conditions."});return}if(ce==="actions"&&ye.category!=="actions"){f({type:"error",message:"Ce bloc ne peut pas être collé dans les actions."});return}let $e=null,Le=!1;const Xe=()=>($e||($e=Oy(Z,i)),$e);A(Et=>{var Gv;const Wn=Et[ce]||[];if(ne.nodeId){const Dl=Oa(Wn,ne.nodeId),rj=((Gv=ft[Dl==null?void 0:Dl.type])==null?void 0:Gv.accepts)||[];if(Dl&&rj.includes(Z.type)){Le=!0;const ij=Xe();return{...Et,[ce]:Ay(Wn,ne.nodeId,ij)}}}Le=!0;const Il=Xe();return{...Et,[ce]:[...Wn,Il]}}),$e&&Le?(M({section:ce,nodeId:$e.id}),f({type:"idle",message:null})):Le||f({type:"error",message:"Impossible de coller le bloc ici."})},[A,M,H,m]),J=k.useCallback(({section:F,nodeId:V})=>{const ne=Oa(F==="actions"?g:h,V);if(!ne)return;const ce=Vv(ne);let ye=null,$e=!1;A(Le=>{const Xe=Le[F]||[],Et=Oy(ce,i);ye=Et;const Wn=nj(Xe,V,Et);return Wn!==Xe?($e=!0,{...Le,[F]:Wn}):($e=!0,{...Le,[F]:[...Xe,Et]})}),ye&&$e&&(M({section:F,nodeId:ye.id}),y({type:"SET_CLIPBOARD",clipboard:JSON.stringify(ce)}),f({type:"idle",message:null}))},[g,A,h,y,M]),ae=k.useCallback(F=>{M({section:F,nodeId:null})},[M]),xe=k.useCallback(()=>{y({type:"CLEAR_SELECTION"})},[y]),Y=p.history.past.length>0,he=p.history.future.length>0,me=!!b,K=k.useCallback(()=>{Y&&y({type:"UNDO"})},[Y,y]),ee=k.useCallback(()=>{he&&y({type:"REDO"})},[he,y]);k.useEffect(()=>{const F=V=>{if(!(V.metaKey||V.ctrlKey))return;const ne=V.key.toLowerCase();if(ne==="z"){V.preventDefault(),V.shiftKey?ee():K();return}if(ne==="y"){V.preventDefault(),ee();return}if(ne==="c"){m!=null&&m.nodeId&&(V.preventDefault(),U());return}if(ne==="v"){me&&(V.preventDefault(),W());return}ne==="d"&&m!=null&&m.nodeId&&(V.preventDefault(),J(m))};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[U,J,W,ee,K,me,m]);const re=k.useMemo(()=>{const F=Py(h);return Py(g,0,F.nextRow,F.map).map},[g,h]),z=_.errors.length?"error":_.warnings.length?"warning":"success",_e=async F=>{if(F.preventDefault(),!_.isValid){f({type:"error",message:"Corrigez la configuration avant d'enregistrer."});return}f({type:"saving",message:"Enregistrement en cours…"}),d(null);const V={name:a.trim(),format:s,code:s==="python"?v.python:v.yaml};try{const Z=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!Z.ok){let ce=`Échec de l'enregistrement (HTTP ${Z.status}).`;try{const ye=await Z.json();ye&&ye.detail&&(ce=Array.isArray(ye.detail)?ye.detail.map($e=>$e.msg||$e.detail).join("; "):typeof ye.detail=="string"?ye.detail:JSON.stringify(ye.detail))}catch{}f({type:"error",message:ce});return}let ne=null;try{ne=await Z.json()}catch{ne=null}d(ne),f({type:"success",message:"Stratégie enregistrée avec succès."})}catch{f({type:"error",message:"Impossible de contacter le service de sauvegarde des stratégies."})}};return w.jsxs("form",{className:"strategy-designer",onSubmit:_e,"aria-labelledby":"designer-title",children:[w.jsxs("header",{className:"strategy-designer__header",children:[w.jsxs("div",{children:[w.jsx("h1",{id:"designer-title",className:"heading heading--lg",children:"Éditeur de stratégies"}),w.jsx("p",{className:"text text--muted",children:"Composez vos règles en glissant-déposant des blocs puis exportez-les vers l'algo-engine."})]}),w.jsxs("div",{className:"strategy-designer__actions",children:[w.jsxs("label",{className:"designer-field strategy-designer__name-field",children:[w.jsx("span",{className:"designer-field__label text text--muted",children:"Nom de la stratégie"}),w.jsx("input",{type:"text",value:a,onChange:F=>o(F.target.value),required:!0})]}),w.jsxs("label",{className:"designer-field strategy-designer__format-field",children:[w.jsx("span",{className:"designer-field__label text text--muted",children:"Format d'export"}),w.jsxs("select",{value:s,onChange:F=>l(F.target.value),children:[w.jsx("option",{value:"yaml",children:"YAML"}),w.jsx("option",{value:"python",children:"Python"})]})]}),w.jsx("button",{type:"button",className:"button button--ghost",onClick:N,"data-testid":"designer-import-button",children:"Importer un fichier"}),w.jsx("input",{ref:S,type:"file",accept:".yaml,.yml,.py,.json,.txt",style:{display:"none"},onChange:D,"data-testid":"designer-file-input"}),w.jsx("button",{type:"button",className:"button button--ghost",onClick:K,disabled:!Y,"data-testid":"designer-undo-button",children:"Annuler"}),w.jsx("button",{type:"button",className:"button button--ghost",onClick:ee,disabled:!he,"data-testid":"designer-redo-button",children:"Rétablir"}),w.jsx("button",{type:"button",className:"button button--ghost",onClick:()=>W(),disabled:!me,"data-testid":"designer-paste-button",children:"Coller"}),w.jsx("button",{type:"submit",className:"button button--primary",children:"Enregistrer la stratégie"})]})]}),u.message?w.jsx("div",{className:`designer-status designer-status--${u.type}`,role:u.type==="error"?"alert":"status","aria-live":"polite",children:u.message}):null,w.jsxs("div",{className:"strategy-designer__layout",children:[w.jsxs("div",{className:"designer-sidebar",children:[w.jsx(UZ,{presets:x,onApply:j}),w.jsx(zQ,{onAdd:B})]}),w.jsx(aJ,{conditions:h,actions:g,layout:re,selection:m,clipboardAvailable:me,onDrop:I,onConfigChange:C,onRemove:L,onSelect:M,onSectionFocus:ae,onCopy:U,onPaste:W,onDuplicate:J,onClearSelection:xe}),w.jsxs("section",{className:"designer-panel designer-panel--validation","aria-labelledby":"validation-title",children:[w.jsxs("div",{className:"designer-panel__header",children:[w.jsx("h2",{id:"validation-title",className:"heading heading--md",children:"Validation temps réel"}),w.jsx("p",{className:"text text--muted",children:"Contrôlez la cohérence de la règle lors de la composition."})]}),w.jsx("div",{className:"designer-panel__body",children:w.jsx("div",{className:`designer-validation designer-validation--${z}`,"data-testid":"designer-validation",role:"region","aria-live":"polite",children:_.errors.length?w.jsxs(w.Fragment,{children:[w.jsx("h3",{className:"heading heading--sm",children:"Erreurs de configuration"}),w.jsx("ul",{children:_.errors.map((F,V)=>w.jsx("li",{children:F},V))}),_.warnings.length?w.jsxs(w.Fragment,{children:[w.jsx("h4",{className:"heading heading--xs",children:"Avertissements"}),w.jsx("ul",{children:_.warnings.map((F,V)=>w.jsx("li",{children:F},`warning-${V}`))})]}):null]}):w.jsxs(w.Fragment,{children:[w.jsx("p",{className:"text",children:"Règle valide : vous pouvez sauvegarder ou exporter la stratégie."}),_.rule?w.jsx("p",{className:"text text--muted designer-validation__rule",children:_.rule}):null,_.warnings.length?w.jsxs(w.Fragment,{children:[w.jsx("h4",{className:"heading heading--xs",children:"Avertissements"}),w.jsx("ul",{children:_.warnings.map((F,V)=>w.jsx("li",{children:F},`warning-${V}`))})]}):null]})})})]}),w.jsxs("section",{className:"designer-panel designer-panel--preview","aria-labelledby":"preview-title",children:[w.jsxs("div",{className:"designer-panel__header",children:[w.jsx("h2",{id:"preview-title",className:"heading heading--md",children:"Aperçu du code"}),w.jsx("p",{className:"text text--muted",children:"Utilisez les onglets YAML / Python pour vérifier le rendu avant sauvegarde."})]}),w.jsxs("div",{className:"designer-panel__body",children:[w.jsx("textarea",{className:"designer-preview",readOnly:!0,value:s==="python"?v.python:v.yaml,"data-testid":"strategy-preview","aria-label":`Aperçu ${s}`}),c?w.jsxs("details",{className:"designer-response",children:[w.jsx("summary",{children:"Réponse du moteur"}),w.jsx("pre",{children:JSON.stringify(c,null,2)})]}):null]})]})]})]})}const qZ=[{value:"15m",label:"15 minutes"},{value:"1h",label:"1 heure"},{value:"4h",label:"4 heures"},{value:"1d",label:"1 jour"}];function Hp(e){if(!e||typeof e!="object")return null;const t=Array.isArray(e.equity_curve)?e.equity_curve:[],n=typeof e.pnl=="number"?e.pnl:typeof e.profit_loss=="number"?e.profit_loss:0,r=typeof e.drawdown=="number"?e.drawdown:typeof e.max_drawdown=="number"?e.max_drawdown:0,i=typeof e.total_return=="number"?e.total_return:0,a=typeof e.initial_balance=="number"?e.initial_balance:0;return{...e,equity_curve:t,pnl:n,drawdown:r,total_return:i,initial_balance:a}}function Ou(e,t="USD"){try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:t,maximumFractionDigits:2}).format(e||0)}catch{return`${(e||0).toFixed(2)} ${t}`}}function Vp(e){return`${(typeof e=="number"?e*100:0).toFixed(2)} %`}function Gp(e,t){return!e||!t?"":e.replace("__id__",encodeURIComponent(t))}function KZ({strategiesEndpoint:e,runEndpointTemplate:t,uiEndpointTemplate:n,historyEndpointTemplate:r,defaultStrategyId:i="",defaultSymbol:a="BTCUSDT",historyPageSize:o=5}){const[s,l]=k.useState([]),[u,f]=k.useState("idle"),[c,d]=k.useState(i),[p,y]=k.useState(a),[h,g]=k.useState("1h"),[m,b]=k.useState(30),[v,_]=k.useState(1e4),[x,S]=k.useState(null),[O,A]=k.useState({items:[],total:0,page:1}),[P,$]=k.useState("idle"),[E,j]=k.useState("idle"),[N,D]=k.useState(""),[M,I]=k.useState(null),B=k.useCallback(async()=>{if(!e){l([]),f("ready");return}f("loading");try{const Y=await fetch(e,{headers:{Accept:"application/json"}});if(!Y.ok)throw new Error(`HTTP ${Y.status}`);const he=await Y.json(),me=Array.isArray(he.items)?he.items.filter(K=>K&&K.id):[];l(me),f("ready"),d(K=>{var ee;return K||(((ee=me[0])==null?void 0:ee.id)??"")})}catch(Y){console.error("Impossible de charger les stratégies",Y),l([]),f("error"),I(Y)}},[e]);k.useEffect(()=>{B()},[B]);const C=k.useCallback(async Y=>{if(!Y||!n){S(null);return}const he=Gp(n,Y);try{const me=await fetch(he,{headers:{Accept:"application/json"}});if(!me.ok)throw new Error(`HTTP ${me.status}`);const K=await me.json();S(Hp(K))}catch(me){console.error("Impossible de charger les métriques du backtest",me)}},[n]),L=k.useCallback(async(Y,he=1,me=!1)=>{if(!Y||!r){A({items:[],total:0,page:1});return}const K=Gp(r,Y);if(K){$("loading");try{const ee=new URL(K,window.location.origin);ee.searchParams.set("page",String(he)),ee.searchParams.set("page_size",String(o));const re=await fetch(ee.toString(),{headers:{Accept:"application/json"}});if(!re.ok)throw new Error(`HTTP ${re.status}`);const z=await re.json(),F=(Array.isArray(z.items)?z.items:[]).map(V=>Hp(V)).filter(Boolean);A(V=>({page:he,total:typeof z.total=="number"?z.total:F.length,items:me?[...V.items,...F]:F})),$("ready")}catch(ee){console.error("Impossible de charger l'historique des backtests",ee),$("error")}}},[r,o]);k.useEffect(()=>{if(!c){S(null),A({items:[],total:0,page:1});return}C(c),L(c,1,!1)},[c,C,L]);const U=k.useMemo(()=>!x||!Array.isArray(x.equity_curve)?[]:x.equity_curve.map((Y,he)=>({index:he,equity:typeof Y=="number"?Y:Number.parseFloat(Y)||0})),[x]),H=k.useMemo(()=>x&&x.metadata&&x.metadata.currency?x.metadata.currency:"USD",[x]),W=!!(c&&p.trim()),J=O.items.length<O.total,ae=k.useCallback(async Y=>{if(Y.preventDefault(),!c){I(new Error("Aucune stratégie sélectionnée."));return}const he=Gp(t,c);if(!he){I(new Error("Endpoint de backtest introuvable."));return}j("running"),D(""),I(null);const me={symbol:p.trim(),timeframe:h,lookback_days:m,initial_balance:v};try{const K=await fetch(he,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(me)});if(!K.ok){const z=await K.json().catch(()=>null),_e=z&&z.message?z.message:`HTTP ${K.status}`;throw new Error(_e)}const ee=await K.json(),re=Hp(ee);S(re),j("success"),D("Backtest exécuté avec succès."),await C(c),await L(c,1,!1)}catch(K){console.error("Échec de l'exécution du backtest",K),j("error"),I(K)}},[c,t,p,h,m,v,C,L]),xe=k.useCallback(()=>{c&&L(c,O.page+1,!0)},[c,O.page,L]);return w.jsxs("div",{className:"backtest-console",children:[w.jsxs("form",{className:"backtest-console__form",onSubmit:ae,children:[w.jsxs("div",{className:"backtest-console__fields",children:[w.jsxs("label",{className:"designer-field",children:[w.jsx("span",{className:"designer-field__label text text--muted",children:"Stratégie"}),w.jsxs("select",{value:c,onChange:Y=>d(Y.target.value),disabled:u==="loading",children:[s.length===0&&w.jsx("option",{value:"",disabled:!0,children:u==="loading"?"Chargement des stratégies…":"Aucune stratégie disponible"}),s.map(Y=>w.jsx("option",{value:Y.id,children:Y.name||Y.id},Y.id))]})]}),w.jsxs("label",{className:"designer-field",children:[w.jsx("span",{className:"designer-field__label text text--muted",children:"Actif"}),w.jsx("input",{type:"text",value:p,onChange:Y=>y(Y.target.value.toUpperCase()),placeholder:"BTCUSDT"})]}),w.jsxs("label",{className:"designer-field",children:[w.jsx("span",{className:"designer-field__label text text--muted",children:"Période"}),w.jsx("select",{value:h,onChange:Y=>g(Y.target.value),children:qZ.map(Y=>w.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),w.jsxs("label",{className:"designer-field",children:[w.jsx("span",{className:"designer-field__label text text--muted",children:"Fenêtre (jours)"}),w.jsx("input",{type:"number",min:"1",max:"180",value:m,onChange:Y=>b(Math.max(1,Number.parseInt(Y.target.value,10)||1))})]}),w.jsxs("label",{className:"designer-field",children:[w.jsx("span",{className:"designer-field__label text text--muted",children:"Capital initial"}),w.jsx("input",{type:"number",min:"100",step:"100",value:v,onChange:Y=>_(Math.max(100,Number.parseFloat(Y.target.value)||100))})]})]}),w.jsx("div",{className:"backtest-console__actions",children:w.jsx("button",{type:"submit",className:"button button--primary",disabled:!W||E==="running",children:E==="running"?"Backtest en cours…":"Lancer le backtest"})})]}),N&&w.jsx("div",{className:"backtest-console__message",role:"status",children:N}),M&&w.jsx("div",{className:"backtest-console__error",role:"alert",children:M.message||"Une erreur est survenue lors du backtest."}),w.jsxs("section",{className:"backtest-console__results","aria-labelledby":"backtest-results-title",children:[w.jsx("h3",{id:"backtest-results-title",className:"heading heading--md",children:"Résultat du dernier backtest"}),!x&&w.jsx("p",{className:"text text--muted",children:"Lancez un backtest pour visualiser l'équity et les indicateurs de performance."}),x&&w.jsxs(w.Fragment,{children:[w.jsxs("ul",{className:"backtest-console__metrics",children:[w.jsxs("li",{children:[w.jsx("strong",{children:"P&L"}),w.jsx("span",{children:Ou(x.pnl,H)})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Rendement"}),w.jsx("span",{children:Vp(x.total_return)})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Max drawdown"}),w.jsx("span",{children:Vp(x.drawdown)})]})]}),U.length>0?w.jsx("div",{className:"backtest-console__chart",role:"img","aria-label":"Équity du backtest",children:w.jsx(qA,{width:"100%",height:240,children:w.jsxs(nE,{data:U,margin:{top:8,right:16,bottom:8,left:8},children:[w.jsx(Ev,{strokeDasharray:"3 3"}),w.jsx(kl,{dataKey:"index",tickFormatter:Y=>`#${Y}`}),w.jsx(Tl,{tickFormatter:Y=>Ou(Y,H)}),w.jsx(vn,{formatter:Y=>Ou(Y,H),labelFormatter:Y=>`Point ${Y}`}),w.jsx(bo,{type:"monotone",dataKey:"equity",stroke:"#2563eb",strokeWidth:2,dot:!1})]})})}):w.jsx("p",{className:"text text--muted",children:"Les données d'équity ne sont pas disponibles pour ce backtest."})]})]}),w.jsxs("section",{className:"backtest-console__history","aria-labelledby":"backtest-history-title",children:[w.jsx("h3",{id:"backtest-history-title",className:"heading heading--md",children:"Historique des backtests"}),P==="error"&&w.jsx("p",{className:"text text--muted",role:"alert",children:"Impossible de charger l'historique pour le moment."}),O.items.length===0&&P!=="error"?w.jsx("p",{className:"text text--muted",children:"Aucun backtest enregistré pour cette stratégie."}):w.jsx("ul",{className:"backtest-console__history-list","aria-live":"polite",children:O.items.map((Y,he)=>w.jsxs("li",{children:[w.jsxs("div",{children:[w.jsx("strong",{children:Y.metadata&&Y.metadata.symbol?`${Y.metadata.symbol}`:"Backtest"}),w.jsx("span",{className:"text text--muted",children:Y.ran_at?` — ${new Date(Y.ran_at).toLocaleString()}`:""})]}),w.jsxs("div",{className:"backtest-console__history-metrics",children:[w.jsx("span",{children:Ou(Y.pnl,H)}),w.jsx("span",{children:Vp(Y.total_return)})]})]},`${Y.ran_at||he}-${he}`))}),J&&w.jsx("div",{className:"backtest-console__load-more",children:w.jsx("button",{type:"button",className:"button button--secondary",onClick:xe,disabled:P==="loading",children:P==="loading"?"Chargement…":"Charger plus"})})]})]})}function HZ(){const e=document.getElementById("dashboard-bootstrap");if(!e||!e.textContent)return{};try{return JSON.parse(e.textContent)}catch(t){return console.error("Impossible de parser la configuration du tableau de bord",t),{}}}function VZ({endpoint:e,currency:t}){const[n,r]=k.useState({status:"loading",items:[],currency:t});return k.useEffect(()=>{let i=!1;async function a(){r(o=>({...o,status:"loading"}));try{const o=await fetch(e,{headers:{Accept:"application/json"}});if(!o.ok)throw new Error(`HTTP ${o.status}`);const s=await o.json();if(i)return;const l=Array.isArray(s.items)?s.items:[];r({status:"ready",items:l,currency:s.currency||t})}catch(o){i||(console.error("Impossible de récupérer l'historique des portefeuilles",o),r(s=>({...s,status:"error",error:o})))}}return a(),()=>{i=!0}},[e,t]),n.status==="loading"?w.jsx("div",{className:"chart-container__status",role:"status",children:"Chargement des données historiques…"}):n.status==="error"?w.jsx("div",{className:"chart-container__status",role:"alert",children:"Impossible de charger l'historique pour le moment."}):w.jsx(SQ,{history:n.items,currency:n.currency||t})}const Au=HZ(),Pu=document.getElementById("reports-center");if(Pu){let e=[];const t=Pu.dataset.reports||"[]";try{e=JSON.parse(t)}catch(i){console.error("Impossible de parser la liste des rapports",i)}const n=Number.parseInt(Pu.dataset.pageSize||"5",10);qr(Pu).render(w.jsx(k.StrictMode,{children:w.jsx(DQ,{reports:e,pageSize:Number.isNaN(n)?5:n})}))}const $u=document.getElementById("portfolio-chart");if($u){const e=$u.dataset.endpoint||"/portfolios/history",t=$u.dataset.currency||"$";qr($u).render(w.jsx(k.StrictMode,{children:w.jsx(VZ,{endpoint:e,currency:t})}))}const Yp=document.getElementById("alerts-manager");if(Yp){const e=Yp.dataset||{},t=e.endpoint||"/alerts",n=e.authToken||"",r=(Au&&Au.context&&Array.isArray(Au.context.alerts)?Au.context.alerts:[])||[];qr(Yp).render(w.jsx(k.StrictMode,{children:w.jsx(EQ,{initialAlerts:r,endpoint:t,authToken:n})}))}const Xp=document.getElementById("alerts-history");if(Xp){const t=(Xp.dataset||{}).endpoint||"/alerts/history";qr(Xp).render(w.jsx(k.StrictMode,{children:w.jsx(kQ,{endpoint:t})}))}const Qp=document.getElementById("strategy-designer-root");if(Qp){const e=Qp.dataset||{},t=e.saveEndpoint||"/strategies/save",n=e.defaultName||"Nouvelle stratégie";let i=e.defaultFormat||"yaml";i!=="python"&&(i="yaml");let a=Kv;if(e.presets)try{const s=JSON.parse(e.presets);Array.isArray(s)&&s.length&&(a=s)}catch(s){console.error("Impossible de parser les modèles de stratégies",s)}qr(Qp).render(w.jsx(k.StrictMode,{children:w.jsx(WZ,{saveEndpoint:t,defaultName:n,defaultFormat:i,presets:a})}))}const Jp=document.getElementById("ai-strategy-assistant-root");if(Jp){const e=Jp.dataset||{},t=e.generateEndpoint||"/strategies/generate",n=e.importEndpoint||"/strategies/import";qr(Jp).render(w.jsx(k.StrictMode,{children:w.jsx(rE,{generateEndpoint:t,importEndpoint:n})}))}const Zp=document.getElementById("strategy-backtest-root");if(Zp){const e=Zp.dataset||{},t=Number.parseInt(e.historyPageSize||"5",10);qr(Zp).render(w.jsx(k.StrictMode,{children:w.jsx(KZ,{strategiesEndpoint:e.strategiesEndpoint||"/api/strategies",runEndpointTemplate:e.runEndpointTemplate||"/api/strategies/__id__/backtest",uiEndpointTemplate:e.uiEndpointTemplate||"/api/strategies/__id__/backtest/ui",historyEndpointTemplate:e.historyEndpointTemplate||"/api/strategies/__id__/backtests",defaultStrategyId:e.defaultStrategyId||"",defaultSymbol:e.defaultSymbol||"BTCUSDT",historyPageSize:Number.isNaN(t)?5:t})}))}
